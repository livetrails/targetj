/*! For license information please see targetjs.js.LICENSE.txt */
!function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}t.r(e),t.d(e,{$Dom:function(){return d},App:function(){return Be},Bracket:function(){return Wt},BracketGenerator:function(){return Qt},ColorUtil:function(){return L},Easing:function(){return H},Moves:function(){return an},SearchUtil:function(){return ct},TModel:function(){return mt},TModelUtil:function(){return q},TUtil:function(){return l},TargetData:function(){return w},TargetUtil:function(){return j},getBrowser:function(){return Ze},getEvents:function(){return We},getLoader:function(){return $e},getLocationManager:function(){return Ke},getManager:function(){return qe},getPager:function(){return _e},getResizeLastUpdate:function(){return tn},getRunScheduler:function(){return ze},getScreenHeight:function(){return Qe},getScreenWidth:function(){return Ge},getVisibles:function(){return Je},isRunning:function(){return Xe},tApp:function(){return Ie},tRoot:function(){return Ue}});var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,s=[{key:"calcVisibility",value:function(e){var n=e.absX,r=e.absY,i=e.getDomParent(),a=e.getRealParent(),o=(i.getMeasuringScale()||1)*e.getMeasuringScale(),s=t.isDefined(e.getWidth())?o*e.getWidth():0,l=t.isDefined(e.getHeight())?o*e.getHeight():0,u=e.visibilityStatus,c=e.validateVisibilityInParent()?Math.max(i.absX,a.absX):0,h=e.validateVisibilityInParent()?Math.max(i.absY,a.absY):0,f=e.validateVisibilityInParent()?Math.min(i.getWidth(),a.getWidth()):Ge(),d=e.validateVisibilityInParent()?Math.min(i.getHeight(),a.getHeight()):Qe();return u.right=n<=c+f,u.left=n+s>=c,u.bottom=r-e.getTopMargin()<=h+d,u.top=r+l+e.getBottomMargin()>=h,u.parentX=c,u.parentY=h,u.parentWidth=f,u.parentHeight=d,e.val("isVisible",u.left&&u.right&&u.top&&u.bottom),e.val("isVisible")}},{key:"initDoms",value:function(e){var n=d.getAllStamped();e.forEach((function(t){t.$dom=null}));var i,a=t.list2map(e.filter((function(t){return"BI"!==t.type}))),o=r(n);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.getAttribute("id"),u=a[l];u?u.$dom=new d("#".concat(l)):d.detach(s)}}catch(t){o.e(t)}finally{o.f()}}},{key:"contains",value:function(t,e){var n;return!(!t||!e||t!==e&&e.getDomParent()!==t&&(null===(n=e.getDomParent())||void 0===n?void 0:n.getDomParent())!==t)}},{key:"list2map",value:function(e,n){return e.reduce((function(e,r){return e[r.oid]=t.isDefined(n)?n:r,e}),{})}},{key:"getDeepList",value:function(t){var e=[];return function t(n){if(n&&n.hasChildren()){var r=n.getChildren();e.push.apply(e,function(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r)),r.forEach(t)}}(t),e}},{key:"areEqual",value:function(t,e,n){return n?JSON.stringify(t)===JSON.stringify(e):t===e}},{key:"momentum",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.002,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,a=e-t,o=n<10?Math.abs(a)/10:Math.abs(a)/n,s=o/r,l=Math.pow(o,2)/(2*r);l>i&&(l=i);var u=a>0?a+l:a-l;return{distance:Math.round(u)/5,duration:Math.round(s),momentumDistance:l}}},{key:"isDefined",value:function(t){return null!=t}},{key:"isNumber",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"limit",value:function(e,n,r){return(e=(e=t.isDefined(e)?e:n)>r?r:e)<n?n:e}},{key:"capitalizeFirstLetter",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"formatNum",value:function(t,e){return t?parseFloat(t.toString()).toFixed(e):0}},{key:"now",value:function(){return Date.now()}},{key:"log",value:function(t){return!0===t?console.log:function(){}}},{key:"distance",value:function(t,e,n,r){return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))}},{key:"getFullLink",value:function(e){if(t.isDefined(e)){if(!e.startsWith("http")){var n=window.location.protocol;n+=n.endsWith(":")?"//":"://";var r="".concat(n).concat(window.location.hostname);e=e.startsWith("/")?r+e:"".concat(r,"/").concat(e)}return e.endsWith("/")?e.slice(0,-1):e}}},{key:"isStringBooleanOrNumber",value:function(t){var e=n(t);return"string"===e||"boolean"===e||"number"===e}},{key:"logTree",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=r(Ke().getChildren(n));try{for(a.s();!(e=a.n()).done;){var o=e.value,s=o.isVisible()?i+"|  ":i+"x  ";"BI"===o.type?console.log("".concat(s).concat(o.oid," v:").concat(o.isVisible()," x:").concat(Math.floor(o.getX())," y:").concat(Math.floor(o.getY()),", absY:").concat(Math.floor(o.absY)," yy:").concat(Math.floor(o.absY+o.getDomParent().absY)," w:").concat(Math.floor(o.getWidth())," h:").concat(Math.floor(o.getHeight())," hc:").concat(Math.floor(o.getContentHeight()))):console.log("".concat(s).concat(o.oid," v:").concat(o.isVisible()," x:").concat(Math.floor(o.getX())," y:").concat(Math.floor(o.getY())," absY:").concat(Math.floor(o.absY)," yy:").concat(Math.floor(o.absY+o.getDomParent().absY)," w:").concat(Math.floor(o.getWidth())," h:").concat(Math.floor(o.getHeight())," hc:").concat(Math.floor(o.getContentHeight()))),o.hasChildren()&&t.logTree(o,s)}}catch(t){a.e(t)}finally{a.f()}}}],null&&o(e.prototype,null),s&&o(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,s}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}var f,d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?(this.selector=e,this.element=t.query(e)):e&&(this.element=e),this.childrenCount=0,this.$domParent=void 0,this.originalContent=void 0,this.textOnly=!0}return e=t,n=[{key:"cloneTemplate",value:function(){var e;return new t(null===(e=this.element.content)||void 0===e?void 0:e.cloneNode(!0).children[0])}},{key:"exists",value:function(){return this.selector&&(this.element=t.query(this.selector)),!!this.element}},{key:"contains",value:function(t){return t instanceof Node&&this.element.contains(t)}},{key:"create",value:function(t){this.element=document.createElement(t)}},{key:"getTagName",value:function(){return this.element.tagName.toLowerCase()}},{key:"setSelector",value:function(t){this.selector=t}},{key:"setId",value:function(t){this.attr("id","#"===t[0]?t.slice(1):t)}},{key:"focus",value:function(){this.element.focus()}},{key:"blur",value:function(){this.element.blur()}},{key:"attr",value:function(t,e){if(this.element)return l.isDefined(e)?void this.element.setAttribute(t,e):this.element.getAttribute(t)}},{key:"value",value:function(t){if(this.element){var e=this.element.value;return l.isDefined(t)&&(this.element.value=t),e}}},{key:"select",value:function(){this.element&&"function"==typeof this.element.select&&this.element.select()}},{key:"width",value:function(t){if(!l.isDefined(t))return this.element.offsetWidth;this.element.style.width=l.isNumber(t)?"".concat(t,"px"):t}},{key:"height",value:function(t){if(!l.isDefined(t))return this.element.offsetHeight;this.element.style.height=l.isNumber(t)?"".concat(t,"px"):t}},{key:"css",value:function(t){if(!l.isDefined(t))return this.element.className;this.element.className=t}},{key:"setStyleByMap",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.style(n,t[n])}))}},{key:"style",value:function(t,e){if(2!==arguments.length)return 1===arguments.length?this.element.style[t]:this.element.style;this.element.style[t]=e}},{key:"getStyleValue",value:function(t){var e=this.style(t),n=l.isDefined(e)?e.replace(/[^-\d.]/g,""):0;return parseFloat(n)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"isXYWithinElement",value:function(t,e){var n=this.getBoundingClientRect();return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}},{key:"parent",value:function(){return this.element?this.element.parentElement:null}},{key:"detach",value:function(){t.detach(this.element),this.$domParent&&this.$domParent.childrenCount>0&&this.$domParent.childrenCount--}},{key:"child",value:function(t){return this.element.children[t]}},{key:"append$Dom",value:function(t){this.element.appendChild(t.element)}},{key:"appendElement",value:function(t){this.element.appendChild(t)}},{key:"removeElement",value:function(t){this.element.removeChild(t)}},{key:"elementCount",value:function(){return this.element.children.length}},{key:"swapElements",value:function(t,e){var n=e.nextSibling;n===t?this.element.insertBefore(t,e):(this.element.insertBefore(e,t),this.element.insertBefore(t,n))}},{key:"insertFirst$Dom",value:function(t){this.element.firstChild?this.element.insertBefore(t.element,this.element.firstChild):this.append$Dom(t)}},{key:"relocate",value:function(t,e){this.element.insertBefore(t.$dom.element,this.element.children[e])}},{key:"appendTModel$Dom",value:function(t){0===this.childrenCount&&this.element.children.length>1&&t.getDomParent()&&t.getDomParent().getHtml()&&t.getDomParent().getHtml()===this.originalContent&&(this.element.innerHTML="<div>".concat(this.html(),"</div>")),this.element.appendChild(t.$dom.element),t.$dom.$domParent=this,this.childrenCount++}},{key:"deleteAll",value:function(){this.element.innerHTML=this.originalContent||"",this.childrenCount=0}},{key:"html",value:function(t){if(!l.isDefined(t))return l.isDefined(this.originalContent)?this.originalContent:this.element.innerHTML;if(this.childrenCount>0){var e=document.createElement("div");e.innerHTML=t,l.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!1}else this.element.innerHTML=t,this.originalContent=t,this.textOnly=!1}},{key:"text",value:function(t){if(!l.isDefined(t))return l.isDefined(this.originalContent)?this.originalContent:this.element.textContent;if(this.childrenCount>0){var e=document.createTextNode(t);l.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!0}else this.element.textContent=t,this.originalContent=t,this.textOnly=!0}},{key:"outerHTML",value:function(t){this.element.outerHTML=t}},{key:"innerHTML",value:function(t){if(!l.isDefined(t))return this.element.innerHTML;this.element.innerHTML=t}},{key:"innerText",value:function(t){if(!l.isDefined(t))return this.element.innerText;this.element.innerText=t}},{key:"addClass",value:function(t){var e=this.attr("class"),n=e?e.includes(t)?e:"".concat(e," ").concat(t):t;n!==e&&this.attr("class",n)}},{key:"addEvent",value:function(t,e){this.element.addEventListener?this.element.addEventListener(t,e,{capture:!1,passive:!1}):this.element.attachEvent("on".concat(t),e)}},{key:"detachEvent",value:function(t,e){this.element.removeEventListener?this.element.removeEventListener(t,e,!1):this.element.detachEvent?this.element.detachEvent("on".concat(t),e):this.element["on".concat(t)]=null}},{key:"transform",value:function(t){this.element.style[Ze().style.transform]=t}},{key:"animate",value:function(t,e){return this.element.animate(t,e)}},{key:"getContext",value:function(e,n){var r=l.isDefined(n)?t.query(n):this.query("canvas");return r?r.getContext(e):void 0}},{key:"query",value:function(t){return this.element.querySelector(t)}},{key:"queryAll",value:function(t){return this.element.querySelectorAll(t)}},{key:"findFirstByClass",value:function(e){return t.findFirstByClass(e,this.element)}},{key:"findFirstByTag",value:function(e){return t.findFirstByTag(e,this.element)}},{key:"stamp",value:function(){this.attr("data-tgt","true")}}],r=[{key:"createTemplate",value:function(e){var n=new t;return n.create("template"),n.innerHTML(e.trim()),n}},{key:"getAllStamped",value:function(){return document.querySelectorAll('[data-tgt="true"]')}},{key:"query",value:function(e){return"#"===e[0]?t.findById(e):"."===e[0]?t.findFirstByClass(e):t.findFirstByTag(e)}},{key:"findById",value:function(t){return document.getElementById("#"===t[0]?t.slice(1):t)}},{key:"findFirstByClass",value:function(e,n){var r=t.findByClass(e,n);return r.length>0?r[0]:null}},{key:"findFirstByTag",value:function(e,n){var r=t.findByTag(e,n);return r.length>0?r[0]:null}},{key:"findByTag",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByTagName(t)}},{key:"findByClass",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByClassName("."===t[0]?t.slice(1):t)}},{key:"findNearestParentWithId",value:function(t){for(;t;){var e="function"==typeof t.getAttribute&&t.getAttribute("id")?t.getAttribute("id"):null;if(e&&qe().visibleOidMap[e])return e;t=t.parentElement}}},{key:"detach",value:function(t){var e=l.isDefined(t)?t.parentElement:null;e&&e.removeChild(t)}},{key:"hasFocus",value:function(t){return t.hasDom()&&document.activeElement===t.$dom.element}},{key:"getWindowScrollTop",value:function(){return window.pageYOffset||document.documentElement.scrollTop||0}},{key:"getWindowScrollLeft",value:function(){return window.pageXOffset||document.documentElement.scrollLeft||0}},{key:"getScreenWidth",value:function(){return document.documentElement.clientWidth||document.body.clientWidth}},{key:"getScreenHeight",value:function(){return document.documentElement.clientHeight||document.body.clientHeight}},{key:"ready",value:function(e){new t(document).addEvent("DOMContentLoaded",e)}},{key:"ajax",value:function(t){var e=new XMLHttpRequest,n="";t.data&&(n=Object.keys(t.data).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t.data[e]))})).join("&")),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var n="json"===t.dataType?JSON.parse(this.responseText):this.responseText;t.success(n)}else t.error(e.status)},"POST"===t.type?(e.open(t.type,t.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(n)):(t.url+=n?t.url>""&&t.url.indexOf("?")>=0?"&".concat(n):"?".concat(n):"",e.open(t.type,t.url,!0),e.send())}}],n&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T(r.key),r)}}function m(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t,e,n){return(e=T(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T(t){var e=function(t){if("object"!=y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}var w=m((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}function E(t){var e=function(t){if("object"!=k(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}f=w,b(w,"transformMap",{x:!0,y:!0,z:!0,translateX:!0,translateY:!0,translateZ:!0,perspective:!0,rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0,rotate3DAngle:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0,skew:!0,skewX:!0,skewY:!0}),b(w,"dimMap",{width:!0,height:!0}),b(w,"styleWithUnitMap",{fontSize:!0,lineHeight:!0,borderRadius:!0,padding:!0,left:!0,top:!0,letterSpacing:!0}),b(w,"colorMap",{color:!0,background:!0,backgroundColor:!0}),b(w,"styleTargetMap",g(g(g(g(g({},f.transformMap),f.dimMap),f.styleWithUnitMap),f.colorMap),{},{opacity:!0,zIndex:!0,border:!0,borderTop:!0,borderLeft:!0,borderRight:!0,borderBottom:!0})),b(w,"asyncStyleTargetMap",{position:!0,css:!0,style:!0,textAlign:!0,boxSizing:!0,transformStyle:!0,transformOrigin:!0,attributes:!0,justifyContent:!0,alignItems:!0,display:!0,cursor:!0,fontFamily:!0,overflow:!0,textDecoration:!0,boxShadow:!0,fontWeight:!0}),b(w,"scaleMap",{scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0}),b(w,"rotate3D",{rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0}),b(w,"attributeTargetMap",{lang:!0,autofocus:!0,placeholder:!0,autocomplete:!0,name:!0,type:!0,src:!0,href:!0,method:!0,size:!0,value:!0,maxlength:!0,minlength:!0,max:!0,min:!0,readonly:!0,required:!0,alt:!0,disabled:!0,action:!0,accept:!0,selected:!0,rows:!0,cols:!0,tabindex:!0}),b(w,"mustExecuteTargets",{width:!0,height:!0,canHandleEvents:!0,heightFromDom:!0,widthFromDom:!0}),b(w,"coreTargetMap",{x:!0,y:!0}),b(w,"cssFunctionMap",{skew:{x:0,y:0},translate3d:{x:0,y:0,z:0},rotate3d:{x:0,y:0,z:0,a:0},scale3d:{x:0,y:0,z:0}}),b(w,"bypassInitialProcessingTargetMap",{onChildrenChange:!0,onVisibleChildrenChange:!0,onPageClose:!0,onVisible:!0}),b(w,"targetToEventsMapping",{onClickEvent:["clickEvents","touchStart","touchEnd","startEvents"],onTouchStart:["touchStart","startEvents"],onTouchEnd:["touchEnd","endEvents"],onSwipeEvent:["touchStart","startEvents","touchEnd","endEvents","cancelEvents","moveEvents"],onAnySwipeEvent:["touchStart","startEvents","touchEnd","endEvents","cancelEvents","moveEvents"],onTouchEvent:["touchStart","startEvents","touchEnd","endEvents","cancelEvents"],onEnterEvent:["moveEvents","leaveEvents"],onLeaveEvent:["moveEvents","leaveEvents"],onScrollEvent:["touchStart","startEvents","touchEnd","endEvents","cancelEvents","moveEvents","wheelEvents"],onWindowScrollEvent:["windowScrollEvents"],onClick:["clickEvents","touchStart","touchEnd","startEvents"],onSwipe:["touchStart","startEvents","touchEnd","endEvents","cancelEvents","moveEvents"],onAnySwipe:["touchStart","startEvents","touchEnd","endEvents","cancelEvents","moveEvents"],onTouch:["touchStart","startEvents","touchEnd","endEvents","cancelEvents"],onEnter:["moveEvents","leaveEvents"],onLeave:["moveEvents","leaveEvents"],onScroll:["touchStart","startEvents","touchEnd","endEvents","cancelEvents","moveEvents","wheelEvents"],onScrollLeft:["touchStart","startEvents","touchEnd","endEvents","cancelEvents","moveEvents","wheelEvents"],onScrollTop:["touchStart","startEvents","touchEnd","endEvents","cancelEvents","moveEvents","wheelEvents"],onWindowScroll:["windowScrollEvents"]}),b(w,"touchEventMap",{onClickEvent:function(t){return"click"===We().getEventType()&&We().isClickHandler(t)},onTouchStart:function(t){return We().isStartEvent()&&We().containsTouchHandler(t)},onTouchEnd:function(t){return We().isEndEvent()&&We().containsTouchHandler(t)},onEnterEvent:function(t){return We().isEnterEventHandler(t)},onLeaveEvent:function(t){return We().isLeaveEventHandler(t)},onSwipeEvent:function(t){return We().containsTouchHandler(t)&&We().isSwipeEvent()},onAnySwipeEvent:function(){return We().isSwipeEvent()},onTouchEvent:function(t){return We().isTouchHandler(t)},onClick:function(t){return"click"===We().getEventType()&&We().isClickHandler(t)},onEnter:function(t){return We().isEnterEventHandler(t)},onLeave:function(t){return We().isLeaveEventHandler(t)},onSwipe:function(t){return We().containsTouchHandler(t)&&We().isSwipeEvent()},onAnySwipe:function(){return We().isSwipeEvent()},onTouch:function(t){return We().isTouchHandler(t)}}),b(w,"internalEventMap",{onVisibleEvent:function(t){return t.isNowVisible},onDomEvent:function(t){return t.hasDomNow},onVisible:function(t){return t.isNowVisible},onResize:function(t){var e=t.getDimLastUpdate(),n=t.getParent(),r=n?Math.max(n.getDimLastUpdate(),tn()):tn();return e>0&&r>e}}),b(w,"allEventMap",g(g({},f.touchEventMap),{},{onFocusEvent:function(t){return We().onFocus(t)},onBlurEvent:function(t){return We().onBlur(t)},onKeyEvent:function(){return"key"===We().getEventType()&&We().currentKey},onScrollEvent:function(t){return We().isScrollLeftHandler(t)&&We().deltaX()||We().isScrollTopHandler(t)&&We().deltaY()},onWindowScrollEvent:function(){return"windowScroll"===We().getEventType()},onFocus:function(t){return We().onFocus(t)},onBlur:function(t){return We().onBlur(t)},onKey:function(){return"key"===We().getEventType()&&We().currentKey},onScroll:function(t){return We().isScrollLeftHandler(t)&&We().deltaX()||We().isScrollTopHandler(t)&&We().deltaY()},onScrollTop:function(t){return"horizontal"!==We().getOrientation()&&We().isScrollTopHandler(t)&&We().deltaY()},onScrollLeft:function(t){return"vertical"!==We().getOrientation()&&We().isScrollLeftHandler(t)&&We().deltaX()},onWindowScroll:function(){return"windowScroll"===We().getEventType()}}));var M,C,x,L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"color2Integers",value:function(e){if(e=e?String(e):"",e=t.colors[e.toLowerCase()]||e){if(e.startsWith("#")){e=3===(e=e.slice(1)).length?e.split("").map((function(t){return t+t})).join(""):e;var n=parseInt(e,16);return[n>>16&255,n>>8&255,255&n]}var r=e.match(/\d+/g);return r&&3===r.length?r.map(Number):void 0}}}],null&&S(e.prototype,null),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P(r.key),r)}}function P(t){var e=function(t){if("object"!=D(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(e)?e:e+""}M=L,x={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},(C=E(C="colors"))in M?Object.defineProperty(M,C,{value:x,enumerable:!0,configurable:!0,writable:!0}):M[C]=x;var j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"emptyValue",value:function(){return{value:void 0,step:0,steps:0,cycle:0,cycles:0,interval:0,initialValue:void 0,scheduleTimeStamp:void 0,actualValueLastUpdate:0,status:"",executionCount:0,executionFlag:!1,isImperative:!1,originalTargetName:void 0,easing:void 0,creationTime:l.now()}}},{key:"getAutoHandleEvents",value:function(t){var e=[];return Object.keys(w.touchEventMap).some((function(e){return t.eventTargetMap[e]}))&&e.push("touch"),(t.eventTargetMap.onScrollEvent||t.eventTargetMap.onScroll)&&e.push("scrollTop","scrollLeft"),t.eventTargetMap.onScrollTop&&-1===e.indexOf("scrollTop")&&e.push("scrollTop"),t.eventTargetMap.onScrollLeft&&-1===e.indexOf("scrollLeft")&&e.push("scrollLeft"),(t.eventTargetMap.onSwipeEvent||t.eventTargetMap.onSwipe)&&e.push("swipe"),e}},{key:"getTargetName",value:function(t){if(!t)return t;var e=t.startsWith("_")?t.slice(1):t;return e.endsWith("$$")?e.slice(0,-2):e.endsWith("$")?e.slice(0,-1):e}},{key:"bindTarget",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.keys(e.targets),i=e.targets[n],a=r.indexOf(n),o=a>0?t.getTargetName(r[a-1]):void 0,s=a<r.length-1?r[a+1]:void 0,l=void 0!==o?e.getActualValueLastUpdate(o):void 0,u=function(){return void 0!==o?e.getActualValueLastUpdate(o):void 0},c=function(){var t=u();return(void 0!==l||void 0!==t)&&(void 0===l&&void 0!==t||t!==l)},h=!(!s||!s.endsWith("$"));i.originalTargetName=t.currentTargetName,i.originalTModel=t.currentTModel,h&&(i.activateNextTarget=s.slice(0,-1));var f=/^on[A-Za-z]+Step$/,d=/^on[A-Za-z]+End$/,v=["value","enabledOn","onStepsEnd","onValueChange","loop","onImperativeEnd","onImperativeStep","onSuccess","onError"];Object.keys(i).forEach((function(r){if("function"==typeof i[r]&&(v.includes(r)||f.test(r)||d.test(r))){var a=i[r];i[r]=function(){var r;t.currentTargetName=t.getTargetName(n),t.currentTModel=e,this.key=t.getTargetName(n),this.prevTargetValue=function(){if(o)return $e().isLoading(e,o)?$e().getLoadingItemValue(e,o):e.val(o)}(),this.isPrevTargetUpdated=c;var i=a.apply(this,arguments);return l=null!==(r=u())&&void 0!==r?r:l,i}}}))}},{key:"shouldActivateNextTarget",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.targets[n],a=null==i?void 0:i.activateNextTarget,o=t.getTargetName(a),s=null==a?void 0:a.endsWith("$"),l=null==i?void 0:i.fetchAction,u=null==i?void 0:i.childAction;if(l)if("onEnd"===l&&t.hasTargetEnded(e,n))t.activateNextTarget(e,o);else if("onEach"===l)for(;$e().isNextLoadingItemSuccessful(e,n);)e.activatedTargets.indexOf(o)>=0?e.activatedTargets.push(o):t.activateNextTarget(e,o),$e().nextActiveItem(e,n);else"inactive"===l&&t.hasTargetEnded(e,n)&&$e().removeFromTModelKeyMap(e,n);else if(u)("onEnd"===u&&t.hasTargetEnded(e,n)||"onEach"===u)&&(t.activateNextTarget(e,o),i.childAction="inactive");else if(i&&o)(s&&t.hasTargetEnded(e,n)||!s)&&t.activateNextTarget(e,o);else{var c=e.isTargetImperative(n)?e.targetValues[n]:i,h=c.originalTModel,f=c.originalTargetName;r<2&&f&&h&&t.hasTargetEnded(h,f)&&t.shouldActivateNextTarget(h,f,r+1)}}},{key:"hasTargetEnded",value:function(t,e){if(!t.isTargetComplete(e)&&!t.isTargetDone(e)||t.hasUpdatingTargets(e))return!1;var n=t.targets[e];if(n){if(n.childAction&&(t.hasUpdatingChildren()||t.hasActiveChildren()))return!1;if(n.fetchAction&&!$e().isLoadingSuccessful(t,e))return!1}return!0}},{key:"activateNextTarget",value:function(t,e){t.targetValues[e]&&(t.targetValues[e].isImperative=!1),t.activate(e)}},{key:"activateSingleTarget",value:function(t,e){t.targets[e]&&t.canTargetBeActivated(e)&&(t.isTargetEnabled(e)?t.activateTarget(e):t.addToActiveTargets(e))}},{key:"markTargetAction",value:function(e,n){if(e){var r=e.targets[t.currentTargetName];if("object"===D(r)){var i=r.activateNextTarget;null!=i&&i.endsWith("$")?r[n]="onEnd":r[n]=i?"onEach":"inactive"}}}},{key:"isValueStepsCycleArray",value:function(e){if(e.length>4||0===e.length)return!1;for(var n=1;n<e.length;n++)if("number"!=typeof e[n])return!1;return e.length>=2&&("number"==typeof e[0]||t.isListTarget(e[0])||"string"==typeof e[0])}},{key:"isListTarget",value:function(t){return"object"===D(t)&&null!==t&&Array.isArray(t.list)}},{key:"isObjectTarget",value:function(t,e){return"style"!==t&&"object"===D(e)&&null!==e&&!Array.isArray(e)&&Object.getPrototypeOf(e)===Object.prototype}},{key:"isChildrenTarget",value:function(t,e){return"children"===t&&(Array.isArray(e)||e instanceof mt)}},{key:"getValueStepsCycles",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.getTargetCycle(r),a=n&&n.valueOnly,o=e.val(r),s=null,u=0,c=0,h=0;return function f(d){return Array.isArray(d)?a||!t.isValueStepsCycleArray(d)?[d,u,c,h]:Array.isArray(n)?n:(s=d[0],u=d.length>=2?d[1]:u,c=d.length>=3?d[2]:c,h=d.length>=4?d[3]:h,[s,u,c,h]):"object"===D(d)&&null!==d&&Object.getPrototypeOf(d)===Object.prototype?(s="function"==typeof d.value?d.value.call(e,i,o):l.isDefined(d.value)?d.value:d,u="function"==typeof d.steps?d.steps.call(e,i):l.isDefined(d.steps)?d.steps:0,c="function"==typeof d.interval?d.interval.call(e,i):l.isDefined(d.interval)?d.interval:0,h="function"==typeof d.cycles?d.cycles.call(e,i,e.getTargetCycles(r)):l.isDefined(d.cycles)?d.cycles:0,Array.isArray(s)?f(s):[s,u,c,h]):"function"==typeof d?f(d.call(e,i,o)):[d,u,c,h]}(n)}},{key:"getIntervalValue",value:function(t,e,n){var r="function"==typeof n?n.call(t,e):n;return l.isNumber(r)?r:0}},{key:"scheduleExecution",value:function(t,e){var n=t.getTargetInterval(e);if(n<=0)return 0;var r=l.now(),i=t.getScheduleTimeStamp(e);if(l.isDefined(i)){var a=r-i;return Math.max(n-a,0)}return t.setScheduleTimeStamp(e,r),n}},{key:"getTargetSchedulePeriod",value:function(t,e,n){var r,i=l.now(),a=0;return n>0?l.isDefined(t.getTargetTimeStamp(e))?a=(r=i-t.getTargetTimeStamp(e))<n?n-r:0:(t.setTargetTimeStamp(e,i),a=n):l.isDefined(t.getTargetTimeStamp(e))&&(a=(r=i-t.getTargetTimeStamp(e))<0?-r:0),a}},{key:"handleValueChange",value:function(t,e,n,r,i,a){"object"===D(t.targets[e])&&"function"==typeof t.targets[e].onValueChange&&!l.areEqual(n,r,t.targets[e].deepEquality)&&(t.targets[e].onValueChange.call(t,n,r,a),t.setTargetMethodName(e,"onValueChange"))}},{key:"morph",value:function(t,e,n,r,i){var a=t.getTargetEasing(e),o=a?a(t.getTargetStepPercent(e,i)):t.getTargetStepPercent(e,i);if(w.colorMap[e]){var s=L.color2Integers(r),l=n?L.color2Integers(n):L.color2Integers("#fff");if(s&&l){var u=Math.floor(s[0]*o+l[0]*(1-o)),c=Math.floor(s[1]*o+l[1]*(1-o)),h=Math.floor(s[2]*o+l[2]*(1-o));return"rgb(".concat(u,",").concat(c,",").concat(h,")")}return r}return"number"==typeof r?r*o+n*(1-o):r}},{key:"setWidthFromDom",value:function(t){var e=t.domWidthTimestamp,n=t.getParent(),r=t.getDomParent(),i=!1;if(qe().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),i=!0),i||n&&e<=n.getDimLastUpdate()||r&&e<=r.getDimLastUpdate()){t.$dom.width("auto");var a=t.$dom.width();t.domWidthTimestamp=l.now(),t.val("width",a),(a>0||0===a&&t.lastVal("width")>0)&&t.addToStyleTargetList("width"),ze().schedule(15,"resize")}}},{key:"setHeightFromDom",value:function(t){var e=t.domHeightTimestamp,n=t.getParent(),r=t.getDomParent(),i=!1;if(qe().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),i=!0),i||n&&e<=n.getDimLastUpdate()||r&&e<=r.getDimLastUpdate()){t.$dom.height("auto");var a=t.$dom.height();t.domHeightTimestamp=l.now(),t.val("height",a),(a>0||0===a&&t.lastVal("height")>0)&&t.addToStyleTargetList("height"),ze().schedule(15,"resize")}}}])}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var H=function(){return function(t,e,n){return n&&V(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),0,[{key:"linear",value:function(t){return t}},{key:"inQuad",value:function(t){return t*t}},{key:"outQuad",value:function(t){return t*(2-t)}},{key:"outExpo",value:function(t){return 1-(1-t)*(1-t)}},{key:"circular",value:function(t){return Math.sqrt(1- --t*t)}},{key:"inOutQuad",value:function(t){return t<.5?2*t*t:(4-2*t)*t-1}},{key:"inOut",value:function(t){return t<.5?2*t*t:(4-2*t)*t-1}},{key:"outElastic",value:function(t){var e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}}])}();function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){Y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Y(t,e,n){return(e=X(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X(r.key),r)}}function X(t){var e=function(t){if("object"!=N(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==N(e)?e:e+""}var U=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"executeDeclarativeTarget",value:function(e,n,r){t.resolveTargetValue(e,n,r),t.updateTarget(e,e.targetValues[n],n),j.shouldActivateNextTarget(e,n)}},{key:"executeImperativeTarget",value:function(e,n,r,i,a,o,s,u){e.targetValues[n]=e.targetValues[n]||j.emptyValue();var c=e.targetValues[n];if(c.isImperative=!0,c.originalTargetName=s,c.originalTModel=u,j.isListTarget(r))t.assignListTarget(c,r.list,r.list[0],i,a,o);else if(j.isObjectTarget(n,r)){var h=w.cssFunctionMap[n]?R(R({},w.cssFunctionMap[n]),r):r;Object.keys(h).forEach((function(r){var c=h[r];if("object"===N(c)&&!j.isListTarget(c)){var f=j.getValueStepsCycles(e,h[r],n);c=f[0],i=l.isDefined(f[1])?f[1]:i,a=l.isDefined(f[2])?f[2]:a}t.executeImperativeTarget(e,r,c,i,a,o,s,u)}))}else if("object"!==N(r)||j.isListTarget(r))t.assignSingleTarget(c,r,void 0,i,0,a,o),c.step=0;else{var f=j.getValueStepsCycles(e,r,n);r!==f[0]?(r=f[0],i=l.isDefined(f[1])?f[1]:i,a=l.isDefined(f[2])?f[2]:a,t.executeImperativeTarget(e,n,r,i,a,o,s,u)):(t.assignSingleTarget(c,r,void 0,i,0,a,o),c.step=0)}t.updateTarget(e,c,n)}},{key:"updateTarget",value:function(e,n,r){n.executionCount++,n.executionFlag=!0,e.setActualValueLastUpdate(r),0===e.getTargetSteps(r)&&t.snapActualToTarget(e,r),e.addToStyleTargetList(r),e.setTargetMethodName(r,"value"),e.updateTargetStatus(r)}},{key:"assignListTarget",value:function(t,e,n,r,i,a){t.valueList=e,t.stepList=Array.isArray(r)?r:l.isDefined(r)?[r]:[1],t.intervalList=Array.isArray(i)?i:l.isDefined(i)?[i]:[0],t.easingList=Array.isArray(a)?a:l.isDefined(a)?[a]:[H.linear],t.cycle=1,t.value=e[1],t.initialValue=n,t.steps=t.stepList[0],t.interval=t.intervalList[0],t.easing=t.easingList[0],t.step=0,t.cycles=0}},{key:"executeEventHandlerTarget",value:function(t){"string"==typeof t?We().attachGroupEvent(t):Array.isArray(t)&&t.forEach((function(t){return We().attachGroupEvent(t)}))}},{key:"assignSingleTarget",value:function(t,e,n,r,i,a,o){delete t.valueList,delete t.stepList,delete t.intervalList,delete t.easingList,t.initialValue=n,t.value=e,t.steps=r||0,t.cycles=i||0,t.interval=a||0,t.easing=o}},{key:"snapActualToTarget",value:function(t,e){var n=t.val(e),r=t.targetValues[e].value;t.val(e,"function"==typeof r?r.call(t):r),j.handleValueChange(t,e,t.val(e),n,0,0)}},{key:"resolveTargetValue",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getTargetCycle(n),i=!e.targetValues[n]&&l.isDefined(e.targets[n].initialValue)?e.targets[n].initialValue:void 0,a=j.getValueStepsCycles(e,e.targets[n],n,r),o=a[0],s=a[1]||0,u=a[2]||0,c=a[3]||0,h=e.targetValues[n]||j.emptyValue();e.targetValues[n]=h;var f=l.isDefined(e.targets[n].easing)?e.targets[n].easing:void 0;if(j.isChildrenTarget(n,o))Array.isArray(o)?o.forEach((function(t){return e.addChild(t)})):e.addChild(o),t.assignSingleTarget(h,o,void 0,0,c,u);else if(j.isListTarget(o))t.assignListTarget(h,o.list,o.list[0],s,u,f);else{var d,v;s>0&&!l.areEqual(e.val(n),o,null!==(d=null===(v=e.targets[n])||void 0===v?void 0:v.deepEquality)&&void 0!==d&&d)&&e.resetTargetStep(n),t.assignSingleTarget(h,o,i,s,c,u,f)}}}])}();function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$(r.key),r)}}function $(t){var e=function(t){if("object"!=W(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}var q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"defaultActualValues",value:function(){return{x:0,y:0,width:0,height:0,leftMargin:0,rightMargin:0,topMargin:0,bottomMargin:0,opacity:1,scale:1,scrollLeft:0,scrollTop:0,textOnly:!0,borderRadius:0,children:[],isInFlow:!0,baseElement:"div",canHaveDom:!0,widthFromDom:!1,heightFromDom:!1,isIncluded:!0,bracketThreshold:10,bracketSize:5,keepEventDefault:void 0,canDeleteDom:void 0}}},{key:"defaultTargetStyles",value:function(){return{position:"absolute",left:0,top:0,zIndex:1}}},{key:"shouldMeasureHeightFromDom",value:function(t){return!t.excludeDefaultStyling()&&!l.isDefined(t.targetValues.height)&&!l.isDefined(t.targets.height)&&!t.hasChildren()||!!t.getTargetValue("heightFromDom")}},{key:"shouldMeasureWidthFromDom",value:function(t){return!((t.excludeDefaultStyling()||t.reuseDomDefinition()||l.isDefined(t.targetValues.width)||l.isDefined(t.targets.width)||t.hasChildren())&&!t.getTargetValue("widthFromDom"))}},{key:"createDom",value:function(e){e.$dom=new d,e.$dom.create(e.getBaseElement()),e.$dom.setSelector("#".concat(e.oid)),e.$dom.setId(e.oid),e.$dom.stamp(),e.isTextOnly()?e.$dom.text(e.getHtml()):e.$dom.html(e.getHtml()),e.setActualValueLastUpdate("html"),e.domHeightTimestamp=0,e.domWidthTimestamp=0,e.transformMap={},e.styleMap={},e.allStyleTargetList.forEach((function(t){l.isDefined(e.val(t))&&e.addToStyleTargetList(t)})),t.fixStyle(e),t.fixAsyncStyle(e)}},{key:"getTransformValue",value:function(t,e){var n;return"x"===e?n=t.getTransformX():"y"===e?n=t.getTransformY():w.transformMap[e]&&(n=w.rotate3D[e]?t.val(e):w.scaleMap[e]?l.formatNum(t.val(e),2):t.floorVal(e)),n}},{key:"fixStyle",value:function(e){var n=!1;e.styleTargetList.forEach((function(r){if(w.transformMap[r]){var i=t.getTransformValue(e,r);e.transformMap[r]!==i&&(e.transformMap[r]=i,n=!0)}else if("width"===r){var a=Math.floor(e.getWidth());e.$dom.getStyleValue("width")!==a&&(e.styleMap.width=a,e.$dom.width(a))}else if("height"===r){var o=Math.floor(e.getHeight());e.$dom.getStyleValue("height")!==o&&(e.styleMap.height=o,e.$dom.height(o))}else w.styleWithUnitMap[r]?l.isDefined(e.val(r))&&e.styleMap[r]!==e.val(r)&&(e.$dom.style(r,l.isNumber(e.val(r))?"".concat(e.val(r),"px"):e.val(r)),e.styleMap[r]=e.val(r)):l.isDefined(e.val(r))&&e.styleMap[r]!==e.val(r)&&(e.$dom.style(r,"".concat(e.val(r))),e.styleMap[r]=e.val(r))})),n&&e.$dom.transform(t.getTransformString(e)),e.styleTargetMap={},e.styleTargetList.length=0}},{key:"fixAsyncStyle",value:function(t){t.asyncStyleTargetList.forEach((function(e){if("style"===e){var n=t.getStyle();l.isDefined(n)&&t.styleMap.style!==n&&(t.$dom.setStyleByMap(t.getStyle()),t.styleMap.style=n)}else if("attributes"===e){var r=t.getAttributes();l.isDefined(r)&&t.styleMap.attributes!==r&&(Object.keys(r).forEach((function(e){t.$dom.attr(e,r[e])})),t.styleMap.attributes=r)}else if("css"===e){var i=t.getCss();t.$dom.css()!==i&&t.$dom.css(i)}else w.attributeTargetMap[e]?t.$dom.attr(e,t.val(e)):l.isDefined(t.val(e))&&t.styleMap[e]!==t.val(e)&&(t.$dom.style(e,"".concat(t.val(e))),t.styleMap[e]=t.val(e))})),t.asyncStyleTargetMap={},t.asyncStyleTargetList.length=0}},{key:"getTransformString",value:function(e){var n={},r={};(e.transformMap.translateX||e.transformMap.translateY||e.transformMap.translateZ)&&(delete e.transformMap.x,delete e.transformMap.y);for(var i=0,a=Object.keys(e.transformMap);i<a.length;i++){var o=a[i];if(!n[o])switch(o){case"translateX":case"translateY":case"translateZ":r[o]="".concat(o,"(").concat(e.transformMap[o],"px)"),n[o]=!0;break;case"x":case"y":case"z":l.isDefined(e.getZ())?r.translate3d="translate3d(".concat(e.transformMap.x,"px, ").concat(e.transformMap.y,"px, ").concat(e.transformMap.z,"px)"):(l.isDefined(e.getX())||l.isDefined(e.getY()))&&(r.translate="translate(".concat(e.transformMap.x,"px, ").concat(e.transformMap.y,"px)")),n.x=!0,n.y=!0,n.z=!0;break;case"rotate":case"rotateX":case"rotateY":case"rotateZ":case"rotate3DX":case"rotate3DY":case"rotate3DZ":case"rotate3DAngle":l.isDefined(e.val("rotate3DX"))&&l.isDefined(e.val("rotate3DY"))&&l.isDefined(e.val("rotate3DZ"))&&l.isDefined(e.val("rotate3DAngle"))?(r.rotate3d="rotate3d(".concat(e.transformMap.rotate3DX,", ").concat(e.transformMap.rotate3DY,", ").concat(e.transformMap.rotate3DZ,", ").concat(e.transformMap.rotate3DAngle,"deg)"),n.rotate3DX=!0,n.rotate3DY=!0,n.rotate3DZ=!0,n.rotate3DAngle=!0):l.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],"deg)"),n[o]=!0);break;case"scale":case"scaleX":case"scaleY":case"scaleZ":case"scale3DX":case"scale3DY":case"scale3DZ":l.isDefined(e.val("scale3DX"))&&l.isDefined(e.val("scale3DY"))&&l.isDefined(e.val("scale3DZ"))?(r.scale3d="scale3d(".concat(e.transformMap.scale3DX,", ").concat(e.transformMap.scale3DY,", ").concat(e.transformMap.scale3DZ,")"),n.scale3DX=!0,n.scale3DY=!0,n.scale3DZ=!0):l.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],")"),n[o]=!0);break;case"skewX":case"skewY":l.isDefined(e.val("skewX"))&&l.isDefined(e.val("skewY"))?(r[o]="skew(".concat(e.transformMap.skewX,"deg, ").concat(e.transformMap.skewY,"deg)"),n.skewX=!0,n.skewY=!0):l.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],"deg)"),n[o]=!0);break;case"perspective":l.isDefined(e.val("perspective"))&&(r[o]="perspective(".concat(e.transformMap.perspective,"px)"),n.perspective=!0)}}var s={};e.val("transformOrder")?e.val("transformOrder").forEach((function(t,e){s[t]=e})):s=t.transformOrder;var u=Object.keys(r).sort((function(t,e){return s[t]-s[e]})).map((function(t){return r[t]}));return u.join(" ")}}])}();function z(t,e){if(t){if("string"==typeof t)return K(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(t,e):void 0}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q(r.key),r)}}function Q(t){var e=function(t){if("object"!=Z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Z(e)?e:e+""}!function(t,e,n){(e=$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(q,"transformOrder",{perspective:0,translateX:1,translateY:1,translateZ:1,translate:1,translate3d:1,rotate:2,rotateX:2,rotateY:2,rotateZ:2,rotate3d:2,skew:3,skewX:3,skewY:3,scale:4,scaleX:4,scaleY:4,scaleZ:4,scale3DX:4,scale3DY:4,scale3DZ:4});var J=function(){return function(t,e){return e&&G(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"object"===Z(e)&&void 0===n&&(n=e,e=""),this.type=e||"blank",this.targets=Object.assign({},n);var r=Be.getOid(this.type);this.oid=r.oid,this.oidNum=r.num,this.targetValues={},this.actualValues={},this.lastActualValues={},this.activeTargetList=[],this.activeTargetMap={},this.updatingTargetList=[],this.updatingTargetMap={},this.updatingChildrenList=[],this.updatingChildrenMap={},this.activeChildrenList=[],this.activeChildrenMap={},this.eventTargetList=[],this.eventTargetMap={},this.coreTargets=[],this.allStyleTargetList=[],this.allStyleTargetMap={},this.styleTargetList=[],this.styleTargetMap={},this.asyncStyleTargetList=[],this.asyncStyleTargetMap={},this.activatedTargets=[],this.targetExecutionCount=0,this.parent=null,this.targetMethodMap={}}),[{key:"getParent",value:function(){return this.parent}},{key:"initTargets",value:function(){var t=this;this.actualValues=q.defaultActualValues(),this.targetValues={},this.activeTargetMap={},this.activeTargetList=[];var e=Object.keys(this.targets),n=d.query("#".concat(this.oid));n||this.excludeDefaultStyling()?n&&!l.isDefined(this.targets.reuseDomDefinition)&&(this.targets.reuseDomDefinition=!0):Object.entries(q.defaultTargetStyles()).forEach((function(e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(t,e)||z(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],i=n[1];r in t.targets||(t.targets[r]=i)})),Object.keys(this.targets).forEach((function(n){t.processNewTarget(n,e)}))}},{key:"processNewTarget",value:function(t,e){var n=this.targets[t];if(l.isDefined(n)){("object"!==Z(n)||Array.isArray(n))&&(this.targets[t]={value:n},n=this.targets[t]),j.bindTarget(this,t,e);var r=j.getTargetName(t),i=t.startsWith("_");r!==t&&(this.targets[r]=this.targets[t],i&&(this.targets[r].active=!1),delete this.targets[t],t=r),w.allEventMap[t]||w.internalEventMap[t]?this.eventTargetMap[t]||(this.eventTargetList.push(t),this.eventTargetMap[t]=!0):w.bypassInitialProcessingTargetMap[t]||(l.isDefined(n.initialValue)&&this.val(t,n.initialValue),i||this.addToStyleTargetList(t),w.coreTargetMap[t]&&!this.coreTargets.includes(t)&&this.coreTargets.push(t),w.mustExecuteTargets[t]||!l.isStringBooleanOrNumber(n)?!1!==n.active&&this.canTargetBeActivated(t)&&this.addToActiveTargets(t):this.val(t,n))}else this.delVal("key")}},{key:"activate",value:function(t){Ke().addToActivatedList(this),this.currentStatus="active",t&&this.isTargetEnabled(t)&&-1===this.activatedTargets.indexOf(t)&&(this.activatedTargets.push(t),this.removeFromActiveTargets(t))}},{key:"isActivated",value:function(){return"active"===this.currentStatus}},{key:"deactivate",value:function(){this.currentStatus=void 0,this.activatedTargets.length=0}},{key:"shouldExecuteCyclesInParallel",value:function(t){var e;return!0===(null===(e=this.targets[t])||void 0===e?void 0:e.parallel)}},{key:"canTargetBeActivated",value:function(t){return!(Array.isArray(this.targets.onDomEvent)&&this.targets.onDomEvent.includes(t)&&!this.hasDom())}},{key:"addToStyleTargetList",value:function(t){if(!this.excludeStyling()&&!this.targets["exclude".concat(l.capitalizeFirstLetter(t))]){var e=w.asyncStyleTargetMap[t],n=w.attributeTargetMap[t];if(e||n)this.asyncStyleTargetMap[t]||(this.asyncStyleTargetList.push(t),this.asyncStyleTargetMap[t]=!0);else if(this.isStyleTarget(t)){var r=!0;if(w.transformMap[t])this.getParent()&&this.calcAbsolutePosition(this.getX(),this.getY()),q.getTransformValue(this,t)===this.transformMap[t]&&(r=!1);else if("width"===t||"height"===t){var i=Math.floor("width"===t?this.getWidth():this.getHeight());this.styleMap[t]===i&&(r=!1)}else l.isDefined(this.val(t))&&this.styleMap[t]===this.val(t)&&(r=!1);r&&!this.styleTargetMap[t]&&(this.styleTargetList.push(t),this.styleTargetMap[t]=!0)}else{if(!this.useWindowFrame(t)||this.styleTargetMap[t])return;this.styleTargetList.push(t),this.styleTargetMap[t]=!0}this.allStyleTargetMap[t]||(this.allStyleTargetList.push(t),this.allStyleTargetMap[t]=!0)}}},{key:"isStyleTarget",value:function(t){return w.styleTargetMap[t]}},{key:"useWindowFrame",value:function(t){return Array.isArray(this.targets.useWindowFrame)&&this.targets.useWindowFrame.includes(t)}},{key:"removeTarget",value:function(t){delete this.targets[t],this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),delete this.targetValues[t]}},{key:"addTarget",value:function(t,e){this.addTargets(function(t,e,n){return(e=Q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,e))}},{key:"addTargets",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.targets[n]=t[n],e.removeFromUpdatingTargets(n),e.processNewTarget(n)})),ze().schedule(1,"addTargets-"+this.oid)}},{key:"getTargetStepPercent",value:function(t,e){var n=this.getTargetSteps(t);return e=l.isDefined(e)?e:this.getTargetStep(t),n?e/n:1}},{key:"resetTargetStep",value:function(t){return this.targetValues[t]&&(this.targetValues[t].step=0),this}},{key:"resetTargetExecutionFlag",value:function(t){return this.targetValues[t]&&(this.targetValues[t].executionFlag=!1),this}},{key:"resetTargetCycle",value:function(t){return this.targetValues[t]&&(this.targetValues[t].cycle=0),this}},{key:"resetScheduleTimeStamp",value:function(t){return this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=void 0),this}},{key:"resetTargetInitialValue",value:function(t){return this.targetValues[t]&&(this.targetValues[t].initialValue=void 0),this}},{key:"updateTargetStatus",value:function(t){var e=this.targetValues[t];if(e){var n=this.getTargetCycle(t),r=this.getTargetCycles(t),i=this.getTargetStep(t),a=this.getTargetSteps(t);return this.isExecuted(t)&&i<a||Array.isArray(e.valueList)&&n<e.valueList.length-1?this.targetValues[t].status="updating":!this.isExecuted(t)||this.isTargetInLoop(t)||n<r?this.targetValues[t].status="active":this.targetValues[t].status="done",this.isTargetUpdating(t)?(this.addToUpdatingTargets(t),this.removeFromActiveTargets(t)):this.isTargetActive(t)?(this.addToActiveTargets(t),this.removeFromUpdatingTargets(t)):(this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),Ie.manager.doneTargets.push({tmodel:this,key:t})),this.targetValues[t].status}}},{key:"getTargetStatus",value:function(t){return this.targetValues[t]?this.targetValues[t].status:""}},{key:"isTargetActive",value:function(t){return this.targetValues[t]&&"active"===this.targetValues[t].status}},{key:"isTargetUpdating",value:function(t){return this.targetValues[t]&&"updating"===this.targetValues[t].status}},{key:"isTargetDone",value:function(t){return this.targetValues[t]&&"done"===this.targetValues[t].status}},{key:"isTargetComplete",value:function(t){return this.targetValues[t]&&"complete"===this.targetValues[t].status}},{key:"isExecuted",value:function(t){return this.targetValues[t]&&this.targetValues[t].executionFlag}},{key:"neverExecuted",value:function(t){return!this.targetValues[t]}},{key:"isTargetImperative",value:function(t){return!!this.targetValues[t]&&this.targetValues[t].isImperative}},{key:"getTargetExecutionCount",value:function(t){return this.targetValues[t]?this.targetValues[t].executionCount:0}},{key:"setTargetComplete",value:function(t){this.targetValues[t]&&(this.targetValues[t].status="complete")}},{key:"isTargetEnabled",value:function(t){var e=this.targets[t];return!!l.isDefined(e)&&("function"!=typeof e.enabledOn||e.enabledOn.call(this))}},{key:"isTargetInLoop",value:function(t){return!!this.targets[t]&&("function"==typeof this.targets[t].loop?this.targets[t].loop.call(this,t):this.targets[t].loop)}},{key:"doesTargetEqualActual",value:function(t){if(this.targetValues[t]){var e=!!this.targets[t]&&this.targets[t].deepEquality;return e?l.areEqual(this.getTargetValue(t),this.val(t),e):this.getTargetValue(t)===this.val(t)}return!1}},{key:"getTargetValue",value:function(t){return this.targetValues[t]?"function"==typeof this.targetValues[t].value?this.targetValues[t].value.call(this):this.targetValues[t].value:void 0}},{key:"getTargetSteps",value:function(t){return this.targetValues[t]&&this.targetValues[t].steps||0}},{key:"getTargetStep",value:function(t){return this.targetValues[t]?this.targetValues[t].step:0}},{key:"getScheduleTimeStamp",value:function(t){return this.targetValues[t]?this.targetValues[t].scheduleTimeStamp:void 0}},{key:"isScheduledPending",value:function(t){var e=this.getScheduleTimeStamp(t),n=this.getTargetInterval(t);return e&&e+n>l.now()}},{key:"shouldScheduleRun",value:function(t){var e,n;return null===(e=null===(n=this.targets[t])||void 0===n?void 0:n.triggerRerun)||void 0===e||e}},{key:"getTargetInitialValue",value:function(t){var e;return null===(e=this.targetValues[t])||void 0===e?void 0:e.initialValue}},{key:"getActualValueLastUpdate",value:function(t){var e;return null===(e=this.targetValues[t])||void 0===e?void 0:e.actualValueLastUpdate}},{key:"getDimLastUpdate",value:function(){return Math.max(this.getActualValueLastUpdate("width")||0,this.getActualValueLastUpdate("height")||0,this.domHeightTimestamp,this.domWidthTimestamp)}},{key:"getTargetCreationTime",value:function(t){return this.targetValues[t]?this.targetValues[t].creationTime:void 0}},{key:"incrementTargetStep",value:function(t){return this.targetValues[t]&&this.targetValues[t].step++,this.targetValues[t].step}},{key:"getTargetCycles",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycles||0}},{key:"getTargetCycle",value:function(t){return this.targetValues[t]?this.targetValues[t].cycle:0}},{key:"incrementTargetCycle",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycle++,this.targetValues[t].cycle}},{key:"setTargetInterval",value:function(t,e){return this.targetValues[t]&&(this.targetValues[t].interval=e),this.targetValues[t].interval}},{key:"setScheduleTimeStamp",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=e)}},{key:"setTargetInitialValue",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].initialValue=e)}},{key:"setActualValueLastUpdate",value:function(t){this.targetValues[t]&&(this.targetValues[t].actualValueLastUpdate=l.now())}},{key:"getTargetEasing",value:function(t){return"function"==typeof this.targetValues[t].easing?this.targetValues[t].easing:void 0}},{key:"getTargetInterval",value:function(t){var e=this.targetValues[t];return this.isStyleTarget(t)||this.useWindowFrame(t)?e?e.interval:0:l.isDefined(this.targets.interval)?this.targets.interval:(null==e?void 0:e.interval)||0}},{key:"getTargetEventFunctions",value:function(t){return this.targetValues[t]?this.targetValues[t].events:void 0}},{key:"setTarget",value:function(t,e,n,r,i){if("object"===Z(t)&&null!==t){var a=[t,e,n,r,i];e=a[0],n=a[1],r=a[2],i=a[3],t=""}var o=j.currentTargetName,s=j.currentTModel;return this.getParent()===s&&j.markTargetAction(s,"childAction"),U.executeImperativeTarget(this,t,e,n,r,i,o,s),this}},{key:"hasTargetUpdates",value:function(t){return t?!0===this.updatingTargetMap[t]:this.updatingTargetList.length>0}},{key:"addToActiveTargets",value:function(t){var e=this;if(!this.activeTargetMap[t]&&this.canTargetBeActivated(t)){var n;this.activeTargetMap[t]=!0;var r=["y","x","height","width","start"];-1!==r.indexOf(t)?(this.activeTargetList=this.activeTargetList.filter((function(t){return!r.includes(t)})),r.forEach((function(t){e.activeTargetMap[t]&&e.activeTargetList.unshift(t)}))):this.activeTargetList.push(t),null===(n=this.getParent())||void 0===n||n.addToActiveChildren(this)}}},{key:"removeFromActiveTargets",value:function(t){if(this.activeTargetMap[t]){delete this.activeTargetMap[t];var e,n=this.activeTargetList.indexOf(t);n>=0&&this.activeTargetList.splice(n,1),0===this.activeTargetList.length&&(null===(e=this.getParent())||void 0===e||e.removeFromActiveChildren(this))}}},{key:"addToUpdatingTargets",value:function(t){var e;this.updatingTargetMap[t]||(this.updatingTargetMap[t]=!0,this.updatingTargetList.push(t),null===(e=this.getParent())||void 0===e||e.addToUpdatingChildren(this))}},{key:"removeFromUpdatingTargets",value:function(t){if(this.updatingTargetMap[t]){delete this.updatingTargetMap[t];var e,n=this.updatingTargetList.indexOf(t);n>=0&&this.updatingTargetList.splice(n,1),0===this.updatingTargetList.length&&(null===(e=this.getParent())||void 0===e||e.removeFromUpdatingChildren(this))}}},{key:"hasUpdatingTargets",value:function(t){var e,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=z(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw i}}}}(this.updatingTargetList);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this.isTargetImperative(r)&&this.targetValues[r].originalTargetName===t)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"addToUpdatingChildren",value:function(t){this.updatingChildrenMap[t.oid]||(this.updatingChildrenMap[t.oid]=!0,this.updatingChildrenList.push(t))}},{key:"removeFromUpdatingChildren",value:function(t){if(this.updatingChildrenMap[t.oid]){delete this.updatingChildrenMap[t.oid];var e=this.updatingChildrenList.indexOf(t);e>=0&&this.updatingChildrenList.splice(e,1)}}},{key:"hasUpdatingChildren",value:function(){return this.updatingChildrenList.length>0}},{key:"addToActiveChildren",value:function(t){this.activeChildrenMap[t.oid]||(this.activeChildrenMap[t.oid]=!0,this.activeChildrenList.push(t))}},{key:"removeFromActiveChildren",value:function(t){if(this.activeChildrenMap[t.oid]){delete this.activeChildrenMap[t.oid];var e=this.activeChildrenList.indexOf(t);e>=0&&this.activeChildrenList.splice(e,1)}}},{key:"hasActiveChildren",value:function(){return this.activeChildrenList.length>0}},{key:"deleteTargetValue",value:function(t){var e=this.targetValues[t];return delete this.targetValues[t],this.addToActiveTargets(t),this.removeFromUpdatingTargets(t),e&&ze().schedule(1,"deleteTargetValue-"+this.oid+"-"+t),this}},{key:"resetImperative",value:function(t){var e=this.targetValues[t],n=null==e?void 0:e.isImperative;return e&&(e.isImperative=!1,e.executionFlag=!1,e.scheduleTimeStamp=void 0,e.step=0,e.cycle=0,e.steps=0,e.cycles=0,e.interval=0),n&&ze().schedule(1,"resetImperative-"+this.oid+"-"+t),this}},{key:"activateTarget",value:function(t,e){if(this.canTargetBeActivated(t)){l.isDefined("value")&&this.val("__".concat(t),e);var n=this.targetValues[t];n?(n.isImperative=!1,n.executionFlag=!1,n.scheduleTimeStamp=void 0,n.step=0,n.cycle=Array.isArray(n.valueList)?1:0,this.updateTargetStatus(t)):this.addToActiveTargets(t),this.activate(t)}return this}},{key:"manageChildTargetExecution",value:function(t,e){return e||this.shouldCalculateChildTargets()||t.hasChildren()||t.addedChildren.length>0||0===t.targetExecutionCount}},{key:"shouldCalculateChildTargets",value:function(){return this.val("shouldCalculateChildTargets")}},{key:"getCoreTargets",value:function(){return l.isDefined(this.val("coreTargets"))?this.val("coreTargets"):this.coreTargets}},{key:"setTargetMethodName",value:function(t,e){this.targetMethodMap[t]||(this.targetMethodMap[t]=[]),this.targetMethodMap[t].includes(e)||this.targetMethodMap[t].push(e)}}])}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nt(r.key),r)}}function nt(t){var e=function(t){if("object"!=tt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tt(e)?e:e+""}var rt=function(){return function(t,e){return e&&et(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xNext=0,this.xNorth=0,this.xWest=0,this.xEast=0,this.xSouth=0,this.scrollLeft=0,this.scrollTop=0,this.absX=0,this.xOverflowReset=0,this.xOverflowLimit=0,this.yNext=0,this.yNorth=0,this.yWest=0,this.yEast=0,this.ySouth=0}),[{key:"setCurrentChild",value:function(t){this.currentChild=t}},{key:"setLocation",value:function(){this.currentChild.x=this.xNext+this.currentChild.getLeftMargin(),this.currentChild.y=this.yNext+this.currentChild.getTopMargin()}},{key:"isOverflow",value:function(){var t=this.currentChild.getMinWidth();return this.absX+this.currentChild.x+t+this.currentChild.getLeftMargin()>this.xOverflowLimit}},{key:"overflow",value:function(){this.xNext=this.scrollLeft-this.absX+this.xOverflowReset,this.yNext=this.ySouth}},{key:"appendNewLine",value:function(){var t=this.currentChild.getHeight()*this.currentChild.getMeasuringScale();this.xNext=this.scrollLeft-this.absX+this.xOverflowReset,this.yNext=this.ySouth>this.yNext?this.ySouth+this.currentChild.val("appendNewLine"):this.ySouth+t+this.currentChild.val("appendNewLine"),this.yEast=this.yNext,this.xSouth=this.xNext,this.ySouth=Math.max(this.yNext,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}},{key:"nextLocation",value:function(){var t=this.currentChild.getHeight()*this.currentChild.getMeasuringScale(),e=this.currentChild.getBaseWidth()*this.currentChild.getMeasuringScale(),n=this.currentChild.getTopBaseHeight()*this.currentChild.getMeasuringScale(),r=this.yNext+t+this.currentChild.getTopMargin()+this.currentChild.getBottomMargin();this.xNext+=e+this.currentChild.getLeftMargin()+this.currentChild.getRightMargin(),this.yNext+=n,this.xSouth=this.xNext,this.yEast=this.yNext,this.xEast=Math.max(this.xNext,this.xEast),this.ySouth=Math.max(r,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}}])}();function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ot(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ut(r.key),r)}}function lt(t,e,n){return(e=ut(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ut(t){var e=function(t){if("object"!=it(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==it(e)?e:e+""}var ct=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&st(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"clear",value:function(){t.foundParentWithType={},t.foundParentWithTarget={},t.foundTypeMap={},t.foundTargetMap={},t.foundOids={},t.foundHandler={}}},{key:"findFirstHandler",value:function(e,n){if(e){var r=n.eventName,i=n.eventType,a="".concat(e.oid," ").concat(r," ").concat(i);if(t.foundHandler[a])return t.foundHandler[a];var o="scrollTop"===r||"scrollLeft"===r?this.findScrollHandler(e,i,r):this.findEventHandler(e,r);return o&&(t.foundHandler[a]=o),o}}},{key:"findFirstPinchHandler",value:function(t){return this.findFirstHandler(t,{eventName:"pinch"})}},{key:"findFirstScrollTopHandler",value:function(t,e){return this.findFirstHandler(t,{eventType:e,eventName:"scrollTop"})}},{key:"findFirstScrollLeftHandler",value:function(t,e){return this.findFirstHandler(t,{eventType:e,eventName:"scrollLeft"})}},{key:"findFirstSwipeHandler",value:function(t){return this.findFirstHandler(t,{eventName:"swipe"})}},{key:"findFirstTouchHandler",value:function(t){return this.findFirstHandler(t,{eventName:"touch"})}},{key:"findScrollHandler",value:function(t,e,n){for(;t&&(!t.canHandleEvents("swipe")||"wheel"===e);){if(t.canHandleEvents(n))return t;t=t.getParent()}}},{key:"findEventHandler",value:function(t,e){for(;t;){if(t.canHandleEvents(e))return t;t=t.getParent()}}},{key:"findParentByType",value:function(e,n){var r="".concat(e.oid,"__").concat(n);if(!l.isDefined(t.foundParentWithType[r]))for(var i=e.getParent();i;){if(i.type===n){t.foundParentWithType[r]=i;break}i=i.getParent()}return t.foundParentWithType[r]}},{key:"findParentByTarget",value:function(e,n){var r="".concat(e.oid,"__").concat(n);if(!l.isDefined(t.foundParentWithTarget[r]))for(var i=e.getParent();i;){if(l.isDefined(i.targets[n])||l.isDefined(i.targetValues[n])){t.foundParentWithTarget[r]=i;break}i=i.getParent()}return t.foundParentWithTarget[r]}},{key:"findByType",value:function(e){if(!l.isDefined(t.foundTypeMap[e])){var n=function(t){if(t.type===e)return t;var r,i=at(t.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.type===e)return a}}catch(t){i.e(t)}finally{i.f()}},r=n(Ie.tRoot);r&&(t.foundTypeMap[e]=r)}return t.foundTypeMap[e]}},{key:"findByTarget",value:function(e){if(!l.isDefined(t.foundTargetMap[e])){var n=function(t){if(t.targets[e])return t;var r,i=at(t.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.targets[e])return a}}catch(t){i.e(t)}finally{i.f()}},r=n(Ie.tRoot);r&&(t.foundTargetMap[e]=r)}return t.foundTargetMap[e]}},{key:"find",value:function(e){if(!l.isDefined(t.foundOids[e])){var n=function(t){if(t.oid===e)return t;var r,i=at(t.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.oid===e)return a}}catch(t){i.e(t)}finally{i.f()}},r=n(Ie.tRoot);r&&(t.foundOids[e]=r)}return t.foundOids[e]}}])}();function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dt(r.key),r)}}function dt(t){var e=function(t){if("object"!=ht(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ht(e)?e:e+""}function vt(t,e,n){return e=yt(e),function(t,e){if(e&&("object"==ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gt()?Reflect.construct(e,n||[],yt(t).constructor):e.apply(t,n))}function gt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gt=function(){return!!t})()}function yt(t){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yt(t)}function pt(t,e){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pt(t,e)}lt(ct,"foundParentWithType",{}),lt(ct,"foundParentWithTarget",{}),lt(ct,"foundTypeMap",{}),lt(ct,"foundTargetMap",{}),lt(ct,"foundOids",{}),lt(ct,"foundHandler",{});var mt=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=vt(this,e,[t,n])).addedChildren=[],r.deletedChildren=[],r.movedChildren=[],r.lastChildrenUpdate={additions:[],deletions:[]},r.allChildrenList=[],r.allChildrenMap={},r.$dom=null,r.x=0,r.y=0,r.absX=0,r.absY=0,r.domHeightTimestamp=0,r.domWidthTimestamp=0,r.contentWidth=0,r.contentHeight=0,r.bottomBaseWidth=0,r.topBaseHeight=0,r.styleMap={},r.transformMap={},r.visibilityStatus={top:!1,right:!1,bottom:!1,left:!1},r.isNowInvisible=!1,r.visibleChildren=[],r.hasDomNow=!1,r.isNowVisible=!1,r.currentStatus="new",r.initTargets(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pt(t,e)}(e,t),function(t,e){return e&&ft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"createViewport",value:function(){this.viewport=this.viewport||new rt;var t=-this.getScrollLeft(),e=-this.getScrollTop(),n=t,r=e;for(var i in this.viewport.xNext=n,this.viewport.xNorth=n,this.viewport.xEast=n,this.viewport.xSouth=n,this.viewport.xWest=n,this.viewport.scrollLeft=t,this.viewport.scrollTop=e,this.viewport.absX=this.absX,this.viewport.absY=this.absY,this.viewport.xOverflowReset=this.absX,this.viewport.xOverflowLimit=this.absX+this.getWidth(),this.viewport.yNext=r,this.viewport.yNorth=r,this.viewport.yWest=r,this.viewport.yEast=r,this.viewport.ySouth=r,Object.assign(this.viewport,this.val("viewport")||{}),this.viewport){var a="viewport_".concat(i);l.isDefined(this.val(a))&&(this.viewport[i]=this.val(a))}return this.viewport}},{key:"calcAbsolutePosition",value:function(t,e){this.absX=l.isDefined(this.val("absX"))?this.val("absX"):this.getParent().absX+t,this.absY=l.isDefined(this.val("absY"))?this.val("absY"):this.getParent().absY+e}},{key:"addChild",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.addedChildren.length+this.allChildrenList.length;return j.markTargetAction(this,"childAction"),this.addedChildren.push({index:e,child:t}),t.parent=this,t.updatingTargetList.length>0&&this.addToUpdatingChildren(t),t.activeTargetList.length>0&&this.addToActiveChildren(t),t.activate(),this}},{key:"removeChild",value:function(t){return this.deletedChildren.push(t),this.removeFromUpdatingChildren(t),ze().schedule(1,"removeChild-"+this.oid+"-"+t.oid),this}},{key:"moveChild",value:function(t,e){return this.movedChildren.push({index:e,child:t}),t.hasDom()&&t.requiresDomRelocation()&&(t.domOrderIndex=e,t.activate()),ze().schedule(1,"moveChild-"+this.oid+"-"+t.oid),this}},{key:"getChildren",value:function(){var t=this;if(this.deletedChildren.length>0&&(this.deletedChildren.forEach((function(e){if(t.allChildrenMap[e.oid]){var n=t.allChildrenList.indexOf(e);t.lastChildrenUpdate.deletions.push(e),t.allChildrenList.splice(n,1),delete t.allChildrenMap[e.oid]}})),this.deletedChildren.length=0),this.addedChildren.length>0&&(this.addedChildren.sort((function(t,e){return t.index-e.index})),this.addedChildren.forEach((function(e){var n=e.index,r=e.child;t.allChildrenMap[r.oid]||(l.isDefined(r.val("canDeleteDom"))||!1!==t.val("canDeleteDom")||r.val("canDeleteDom",!1),n>=t.allChildrenList.length?t.allChildrenList.push(r):t.allChildrenList.splice(n,0,r),t.allChildrenMap[r.oid]=r,t.lastChildrenUpdate.additions.push({index:n,child:r}))})),this.addedChildren.length=0),this.movedChildren.length>0){this.movedChildren.sort((function(t,e){return t.index-e.index}));var e={},n={};this.movedChildren.forEach((function(r){var i=r.index,a=r.child;t.lastChildrenUpdate.deletions.push(a),t.lastChildrenUpdate.additions.push({index:i,child:a});var o=t.allChildrenList.indexOf(a);if(i!==o){n[a.oid]&&delete n[a.oid];var s=t.allChildrenList.splice(i,1,a);!e[i]&&s.length>0&&(n[s[0].oid]={child:s[0],index:i+1}),o>=0&&(e[o]={fromIndex:o<i?o:i,child:a}),e[i]&&delete e[i]}})),Object.values(n).forEach((function(e){var n=e.index,r=e.child;t.allChildrenList.splice(n,0,r)})),Object.values(e).forEach((function(e){var n=e.fromIndex,r=e.child,i=t.allChildrenList.indexOf(r,n);t.allChildrenList.splice(i,1)})),this.movedChildren.length=0}return this.allChildrenList}},{key:"removeAll",value:function(){return this.allChildrenList=[],this.allChildrenMap={},this.updatingChildrenList.length=0,this.updatingChildrenMap={},this.hasDom()&&this.$dom.deleteAll(),this}},{key:"addToParentVisibleChildren",value:function(){this.isVisible()&&this.isInFlow()&&this.getParent()&&this.getParent().visibleChildren.push(this)}},{key:"shouldCalculateChildren",value:function(){if(l.isDefined(this.val("calculateChildren")))return this.val("calculateChildren");var t=this.isIncluded()&&(this.isVisible()||"new"===this.currentStatus)&&(this.hasChildren()||this.addedChildren.length>0||this.getContentHeight()>0);return this.currentStatus=void 0,t}},{key:"getFirstChild",value:function(){return this.allChildrenList[0]}},{key:"hasChildren",value:function(){return this.allChildrenList.length>0}},{key:"findChildren",value:function(t){return this.allChildrenList.filter((function(e){return e.type===t}))}},{key:"getLastChild",value:function(){return this.allChildrenList[this.allChildrenList.length-1]}},{key:"getChild",value:function(t){return this.allChildrenList[t]}},{key:"getChildByOid",value:function(t){return this.allChildrenMap[t]}},{key:"getChildIndex",value:function(t){return this.allChildrenList.indexOf(t)}},{key:"getChildrenOids",value:function(){return this.allChildrenList.map((function(t){return t.oid})).join(" ")}},{key:"findChild",value:function(t){return this.allChildrenList.find((function(e){return e.type===t}))}},{key:"findLastChild",value:function(t){return this.allChildrenList.findLast((function(e){return e.type===t}))}},{key:"getParentValue",value:function(t){var e=ct.findParentByTarget(this,t);return e?e.val(t):void 0}},{key:"delVal",value:function(t){t.startsWith("_")?delete this[t.slice(1)]:delete this.actualValues[t]}},{key:"val",value:function(t,e){var n=this.actualValues,r=this.lastActualValues;return t.startsWith("_")&&(n=this,t=t.slice(1)),void 0!==e?(r[t]=n[t],e!==n[t]&&(n[t]=e),this):n[t]}},{key:"lastVal",value:function(t){return this.lastActualValues[t]}},{key:"floorVal",value:function(t){return Math.floor(this.val(t))}},{key:"getDomParent",value:function(){return this.val("domParent")||ct.findParentByTarget(this,"domHolder")}},{key:"getDomHolder",value:function(t){var e=this.val("domHolder"),n=this.getDomParent();return!0===e&&t!==this?this.$dom:e&&!0!==e&&t.$dom!==e?e:n?n.$dom:null}},{key:"bug",value:function(){return[{visible:this.isVisible()},{visibilityStatus:this.visibilityStatus},{hasDom:this.hasDom()},{x:this.getX()},{y:this.getY()},{width:this.getWidth()},{height:this.getHeight()},{activeTargetList:this.activeTargetList},{updatingTargetList:this.updatingTargetList},{updatingChildrenList:this.updatingChildrenList},{activeChildrenList:this.activeChildrenList},{children:this.getChildren()},{targetValues:this.targetValues},{actualValues:this.actualValues}]}},{key:"logTree",value:function(){l.logTree(this)}},{key:"isVisible",value:function(){return this.targets.isVisible?"function"==typeof this.targets.isVisible.value?this.targets.isVisible.value.call(this):this.targets.isVisible.value:this.val("isVisible")}},{key:"calcVisibility",value:function(){return l.calcVisibility(this)}},{key:"validateVisibilityInParent",value:function(){return!!l.isDefined(this.val("validateVisibilityInParent"))&&this.val("validateVisibilityInParent")}},{key:"hasDomHolderChanged",value:function(){return!this.reuseDomDefinition()&&this.getDomHolder(this)&&this.getDomHolder(this).exists()&&this.$dom.parent()!==this.getDomHolder(this).element}},{key:"hasBaseElementChanged",value:function(){return this.getBaseElement()!==this.$dom.getTagName()}},{key:"hasDom",value:function(){return!!this.$dom&&this.$dom.exists()}},{key:"getRealParent",value:function(){return this.parent}},{key:"getContentHeight",value:function(){return this.contentHeight}},{key:"getContentWidth",value:function(){return this.contentWidth}},{key:"calcContentWidthHeight",value:function(){this.contentHeight=this.viewport.ySouth-this.viewport.yNorth,this.topBaseHeight=this.viewport.yEast-this.viewport.yNorth,this.bottomBaseWidth=this.viewport.xSouth-this.viewport.xWest,this.contentWidth=this.viewport.xEast-this.viewport.xWest}},{key:"getBaseWidth",value:function(){var t;return null!==(t=this.val("baseWidth"))&&void 0!==t?t:this.getWidth()}},{key:"getMinWidth",value:function(){var t;return null!==(t=this.val("minWidth"))&&void 0!==t?t:this.getWidth()}},{key:"getTopBaseHeight",value:function(){var t;return null!==(t=this.val("topBaseHeight"))&&void 0!==t?t:0}},{key:"getContainerOverflowMode",value:function(){var t;return null!==(t=this.val("containerOverflowMode"))&&void 0!==t?t:"auto"}},{key:"getItemOverflowMode",value:function(){var t;return null!==(t=this.val("itemOverflowMode"))&&void 0!==t?t:"auto"}},{key:"getUIDepth",value:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}},{key:"isTextOnly",value:function(){return this.val("textOnly")}},{key:"getHtml",value:function(){return this.val("html")}},{key:"isInFlow",value:function(){return!l.isDefined(this.val("isInFlow"))||this.val("isInFlow")}},{key:"canHandleEvents",value:function(t){var e=this.val("canHandleEvents");return l.isDefined(e)?e===t||Array.isArray(e)&&e.includes(t):(l.isDefined(this.val("autoHandleEvents"))||this.val("autoHandleEvents",j.getAutoHandleEvents(this)),this.val("autoHandleEvents").includes(t))}},{key:"keepEventDefault",value:function(){return l.isDefined(this.val("keepEventDefault"))?this.val("keepEventDefault"):!!this.reuseDomDefinition()||void 0}},{key:"canDeleteDom",value:function(){return l.isDefined(this.val("canDeleteDom"))?this.val("canDeleteDom"):!this.reuseDomDefinition()}},{key:"excludeDefaultStyling",value:function(){return!1===this.targets.defaultStyling||this.excludeStyling()||this.reuseDomDefinition()&&0===this.allStyleTargetList.length}},{key:"excludeStyling",value:function(){return!1===this.targets.styling}},{key:"getBracketThreshold",value:function(){return this.val("bracketThreshold")}},{key:"getBracketSize",value:function(){return this.val("bracketSize")}},{key:"shouldBeBracketed",value:function(){return l.isDefined(this.val("shouldBeBracketed"))?this.val("shouldBeBracketed"):this.getChildren().length>this.getBracketThreshold()}},{key:"isIncluded",value:function(){return this.val("isIncluded")}},{key:"canHaveDom",value:function(){if(!this.targets.$dom||this.val("$dom"))return this.val("canHaveDom")}},{key:"requiresDomRelocation",value:function(){return l.isDefined(this.val("requiresDomRelocation"))?this.val("requiresDomRelocation"):!l.isDefined(this.transformMap.x)&&!l.isDefined(this.transformMap.y)}},{key:"getBaseElement",value:function(){return this.val("baseElement")}},{key:"getOpacity",value:function(){return this.val("opacity")}},{key:"getCenterX",value:function(){return(this.getParentValue("width")-this.getWidth())/2}},{key:"getCenterY",value:function(){return(this.getParentValue("height")-this.getHeight())/2}},{key:"getX",value:function(){return this.val("x")}},{key:"getY",value:function(){return this.val("y")}},{key:"getTransformX",value:function(){var t;return this.absX-(null===(t=this.getDomParent())||void 0===t?void 0:t.absX)}},{key:"getTransformY",value:function(){var t;return this.absY-(null===(t=this.getDomParent())||void 0===t?void 0:t.absY)}},{key:"getZ",value:function(){return this.val("z")}},{key:"getPerspective",value:function(){return this.val("perspective")}},{key:"getRotate",value:function(){return this.val("rotate")}},{key:"getRotateX",value:function(){return this.val("rotateX")}},{key:"getRotateY",value:function(){return this.val("rotateY")}},{key:"getRotateZ",value:function(){return this.val("rotateZ")}},{key:"getScale",value:function(){return this.val("scale")}},{key:"getScaleX",value:function(){return this.val("scaleX")}},{key:"getScaleY",value:function(){return this.val("scaleY")}},{key:"getScaleZ",value:function(){return this.val("scaleZ")}},{key:"getSkewX",value:function(){return this.val("skewX")}},{key:"getSkewY",value:function(){return this.val("skewY")}},{key:"getSkewZ",value:function(){return this.val("skewZ")}},{key:"getMeasuringScale",value:function(){return this.val("scale")}},{key:"getZIndex",value:function(){return this.val("zIndex")}},{key:"getTopMargin",value:function(){return this.val("topMargin")}},{key:"getLeftMargin",value:function(){return this.val("leftMargin")}},{key:"getRightMargin",value:function(){return this.val("rightMargin")}},{key:"getBottomMargin",value:function(){return this.val("bottomMargin")}},{key:"getWidth",value:function(){return this.val("width")}},{key:"getHeight",value:function(){return this.val("height")}},{key:"getScrollTop",value:function(){return this.val("scrollTop")}},{key:"getScrollLeft",value:function(){return this.val("scrollLeft")}},{key:"getCss",value:function(){return this.val("css")}},{key:"getStyle",value:function(){return this.val("style")}},{key:"getBackground",value:function(){return this.val("background")}},{key:"getBackgroundColor",value:function(){return this.val("backgroundColor")}},{key:"getAttributes",value:function(){return this.val("attributes")}},{key:"getInputValue",value:function(){return this.hasDom()?this.$dom.value():void 0}},{key:"isOverflowHidden",value:function(){return"hidden"===this.val("overflow")}},{key:"reuseDomDefinition",value:function(){return this.val("reuseDomDefinition")}}])}(J);function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wt(r.key),r)}}function wt(t){var e=function(t){if("object"!=bt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bt(e)?e:e+""}var kt=function(){return function(t,e){return e&&Tt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.style=void 0}),[{key:"setup",value:function(){this.style={transform:this.prefixStyle("transform"),transitionTimingFunction:this.prefixStyle("transitionTimingFunction"),transitionDuration:this.prefixStyle("transitionDuration")}}},{key:"prefixStyle",value:function(t){var e=new d;e.create("div");for(var n=e.style(),r="",i=["webkitT","MozT","msT","OT","t"],a=0;a<i.length;a++)i[a]+"ransform"in n&&(r=i[a].substr(0,i[a].length-1));return""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}}])}();function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){xt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lt(r.key),r)}}function xt(t,e,n){return(e=Lt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lt(t){var e=function(t){if("object"!=St(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(e)?e:e+""}var Dt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$document=new d(document),this.currentTouch={deltaY:0,deltaX:0,prevDeltaX:0,prevDeltaY:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""},this.lastEvent=void 0,this.touchTimeStamp=0,this.ignoreStartEvents=!0,this.cursor={x:0,y:0},this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0,this.touchCount=0,this.canFindHandlers=!0,this.swipeStartX=0,this.swipeStartY=0,this.currentEventName="",this.currentEventType="",this.currentEventTarget=void 0,this.currentHandlers={touch:null,scrollLeft:null,scrollTop:null,swipe:null,pinch:null,enterEvent:null,leaveEvent:null,focus:null,justFocused:null,blur:null},this.eventQueue=[],this.attachedEventMap={},this.eventTargetMap={},this.startEvents={pointerdown:{eventName:"mousedown",inputType:"pointer",eventType:"start",order:2,windowEvent:!1,queue:!0,rateLimit:0},mousedown:{eventName:"mousedown",inputType:"mouse",eventType:"start",order:3,windowEvent:!1,queue:!0,rateLimit:0}},this.endEvents={pointerup:{eventName:"mouseup",inputType:"pointer",eventType:"end",order:2,windowEvent:!1,queue:!0,rateLimit:0},mouseup:{eventName:"mouseup",inputType:"mouse",eventType:"end",order:3,windowEvent:!1,queue:!0,rateLimit:0}},this.clickEvents={click:{eventName:"click",inputType:"mouse",eventType:"click",order:1,windowEvent:!1,queue:!1,rateLimit:0}},this.touchStart={touchstart:{eventName:"touchstart",inputType:"touch",eventType:"start",order:1,windowEvent:!1,queue:!0,rateLimit:0}},this.touchEnd={touchend:{eventName:"touchend",inputType:"touch",eventType:"end",order:1,windowEvent:!1,queue:!0,rateLimit:0}},this.cancelEvents={touchcancel:{eventName:"touchend",inputType:"touch",eventType:"cancel",order:1,windowEvent:!1,queue:!0,rateLimit:0},pointercancel:{eventName:"mousecancel",inputType:"pointer",eventType:"cancel",order:2,windowEvent:!1,queue:!0,rateLimit:0},mousecancel:{eventName:"mouseup",inputType:"mouse",eventType:"cancel",order:3,windowEvent:!1,queue:!0,rateLimit:0}},this.windowEvents={keyup:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0,queue:!0,rateLimit:50},keydown:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0,queue:!0,rateLimit:50},blur:{eventName:"blur",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!0,queue:!0,rateLimit:0},resize:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0,queue:!0,rateLimit:50},orientationchange:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0,queue:!0,rateLimit:50}},this.windowScrollEvents={scroll:{eventName:"scroll",inputType:"",eventType:"windowScroll",order:1,windowEvent:!0,queue:!0,rateLimit:50}},this.leaveEvents={mouseleave:{eventName:"mouseleave",inputType:"mouse",eventType:"cancel",order:3,windowEvent:!1,queue:!0,rateLimit:0}},this.moveEvents={touchmove:{eventName:"touchmove",inputType:"touch",eventType:"move",order:1,windowEvent:!1,queue:!0,rateLimit:50},pointermove:{eventName:"mousemove",inputType:"pointer",eventType:"move",order:2,windowEvent:!1,queue:!0,rateLimit:50},mousemove:{eventName:"mousemove",inputType:"mouse",eventType:"move",order:3,windowEvent:!1,queue:!0,rateLimit:50}},this.wheelEvents={wheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1,queue:!0,rateLimit:50},mousewheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1,queue:!0,rateLimit:50}},this.allEvents=Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt(Mt({},this.touchStart),this.touchEnd),this.startEvents),this.endEvents),this.clickEvents),this.cancelEvents),this.leaveEvents),this.moveEvents),this.wheelEvents),this.windowEvents),this.windowScrollEvents),this.bindedHandleEvent=this.bindedHandleEvent||this.handleEvent.bind(this)}return function(t,e){return e&&Ct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"attachEvents",value:function(t,e){var n=this;Object.keys(e).forEach((function(e){t.addEvent(e,n.bindedHandleEvent)}))}},{key:"detachWindowEvents",value:function(){var t=this;Object.keys(this.windowEvents).forEach((function(e){Ie.$window.detachEvent(e,t.bindedHandleEvent)}))}},{key:"attachWindowEvents",value:function(){this.attachEvents(Ie.$window,this.windowEvents)}},{key:"attachTargetEvents",value:function(t){var e=this;this.eventTargetMap[t]||(this.eventTargetMap[t]=!0,w.targetToEventsMapping[t].forEach((function(n){"onTouchStart"===t&&(e.ignoreStartEvents=!1),e.attachedEventMap[n]||(e.attachedEventMap[n]=e.$document,e.attachEvents(e.attachedEventMap[n],e[n]))})))}},{key:"detachAll",value:function(){var t=this;Object.keys(this.attachedEventMap).forEach((function(e){var n=t.attachedEventMap[e],r=t[e];Object.keys(r).forEach((function(e){n.detachEvent(e,t.bindedHandleEvent)}))}))}},{key:"resetEventsOnTimeout",value:function(){if(this.currentTouch.deltaY||this.currentTouch.deltaX||this.currentTouch.pinchDelta){var t=this.touchTimeStamp-l.now();t>100&&(this.currentTouch.deltaY*=.95,this.currentTouch.deltaX*=.95,this.currentTouch.pinchDelta*=.95,Math.abs(this.currentTouch.deltaY)<.1&&(this.currentTouch.deltaY=0),Math.abs(this.currentTouch.deltaX)<.1&&(this.currentTouch.deltaX=0),Math.abs(this.currentTouch.pinchDelta)<.1&&(this.currentTouch.pinchDelta=0),0===this.currentTouch.deltaX&&0===this.currentTouch.deltaY&&0===this.currentTouch.pinchDelta&&(this.touchTimeStamp=0)),(t<=0||0===this.touchTimeStamp)&&(this.currentTouch.deltaY=0,this.currentTouch.deltaX=0,this.currentTouch.pinchDelta=0,this.touchTimeStamp=0),ze().schedule(10,"scroll decay")}}},{key:"findEventHandlers",value:function(t){var e,n,r,i,a,o,s=t.tmodel,l=t.eventType;s&&(e=ct.findFirstTouchHandler(s),n=ct.findFirstSwipeHandler(s),r=ct.findFirstScrollLeftHandler(s,l),i=ct.findFirstScrollTopHandler(s,l),a=ct.findFirstPinchHandler(s),o=d.hasFocus(s)?s:this.currentHandlers.focus),this.currentHandlers.scrollLeft===r&&this.currentHandlers.scrollTop===i||this.clearTouch(),this.currentHandlers.touch!==e&&(this.currentHandlers.enterEvent=e,this.currentHandlers.leaveEvent=this.currentHandlers.touch),this.currentHandlers.focus!==o&&(this.currentHandlers.justFocused=o,this.currentHandlers.blur=this.currentHandlers.focus),this.currentHandlers.touch=e,this.currentHandlers.swipe=n,this.currentHandlers.scrollLeft=r,this.currentHandlers.scrollTop=i,this.currentHandlers.pinch=a,this.currentHandlers.focus=o}},{key:"captureEvents",value:function(){if(this.currentTouch.prevDeltaX=0,this.currentTouch.prevDeltaY=0,this.currentHandlers.enterEvent=void 0,this.currentHandlers.leaveEvent=void 0,this.currentHandlers.justFocused=void 0,this.currentHandlers.blur=void 0,0===this.eventQueue.length)return this.currentEventName="",this.currentEventType="",this.currentEventTarget=void 0,void(this.currentKey="");var t=this.eventQueue.shift();this.canFindHandlers&&this.findEventHandlers(t),"end"!==t.eventType&&"click"!==t.eventType||(this.canFindHandlers=!0),this.currentEventName=t.eventName,this.currentEventType=t.eventType,this.currentEventTarget=t.eventTarget,this.currentKey=this.currentTouch.key,this.currentTouch.key=""}},{key:"handleEvent",value:function(e){var n,r,i;if(e){var a=e.type,o=e.target,s=this.allEvents[a];if(s){var u=s.eventName,c=s.inputType,h=s.eventType,f=s.order,d=s.queue,v=s.rateLimit,g=l.now(),y=this.getTModelFromEvent(e),p={eventName:u,eventItem:s,eventType:h,originalName:a,tmodel:y,eventTarget:o,timeStamp:g};if(null!==(n=this.lastEvent)&&void 0!==n&&n.eventItem){var m=this.lastEvent,b=m.eventItem,T=g-m.timeStamp;if(c&&b.inputType&&b.inputType!==c&&f>b.order)return;if(this.eventQueue.length>t.MAX_EVENT_QUEUE_SIZE&&v>0&&T<v)for(var w=0,k=this.eventQueue.length-1;k>=0;k--){var S;if((null===(S=this.eventQueue[k].eventItem)||void 0===S?void 0:S.eventType)!==h)break;if(++w>t.MAX_EVENT_TYPE_CAPACITY)return}}switch(this.lastEvent=p,d&&this.eventQueue.push(this.lastEvent),u){case"mousedown":case"touchstart":if(this.clearStart(),this.clearEnd(),this.clearTouch(),this.touchCount=this.countTouches(e),this.canFindHandlers=!1,this.preventDefault(y,u)&&e.preventDefault(),this.start0=this.getTouch(e),this.start1=this.getTouch(e,1),this.cursor.x=this.start0.x,this.cursor.y=this.start0.y,this.findEventHandlers(this.lastEvent),this.swipeStartX=this.start0.x-(null===(r=this.currentHandlers.swipe)||void 0===r?void 0:r.getX()),this.swipeStartY=this.start0.y-(null===(i=this.currentHandlers.swipe)||void 0===i?void 0:i.getY()),e.stopPropagation(),this.ignoreStartEvents)return;break;case"mousemove":case"touchmove":var E=this.getTouch(e);this.cursor.x=E.x,this.cursor.y=E.y,this.preventDefault(y,u)&&e.preventDefault(),this.touchCount>0?(this.touchTimeStamp=g+10,this.move(e),e.stopPropagation()):this.isCurrentSource("wheel")&&this.clearTouch();break;case"mouseup":case"touchend":if(this.preventDefault(y,u)&&e.preventDefault(),this.end(e),this.start0&&"touchend"===u){var M=this.end0?Math.abs(this.end0.originalX-this.start0.originalX):0,C=this.end0?Math.abs(this.end0.originalY-this.start0.originalY):0,x=this.end0?Math.abs(this.end0.timeStamp-this.start0.timeStamp):300;M<=1&&C<=1&&x<=300&&(this.eventQueue.length=0,u="click",h="click",this.eventQueue.push({eventName:u,eventItem:s,eventType:h,originalName:a,tmodel:y,eventTarget:o,timeStamp:g}))}this.clearEnd(),this.touchCount=0,e.stopPropagation();break;case"click":if(this.preventDefault(y,u)&&e.preventDefault(),this.end0=this.getTouch(e),this.start0){var L=ct.findFirstTouchHandler(y);L&&L===this.currentHandlers.touch&&(this.eventQueue.length=0,this.eventQueue.push({eventName:u,eventItem:s,eventType:h,originalName:a,tmodel:y,eventTarget:o,timeStamp:g}))}this.clearEnd(),this.touchCount=0,e.stopPropagation();break;case"wheel":this.preventDefault(y,u)&&e.preventDefault(),this.touchTimeStamp=g+500,this.wheel(e);break;case"key":this.currentTouch.key=e.which||e.keyCode;break;case"resize":this.resizeRoot()}ze().schedule(0,"".concat(a,"-").concat(u,"-").concat((e.target.tagName||"").toUpperCase()))}}}},{key:"resizeRoot",value:function(){Ue().val("width",Ue().targets.width.value()),Ue().val("height",Ue().targets.height.value()),Ue().setActualValueLastUpdate("width"),Ue().setActualValueLastUpdate("height")}},{key:"preventDefault",value:function(t,e){return!t||!(!0===t.keepEventDefault()||Array.isArray(t.keepEventDefault())&&t.keepEventDefault().includes(e))}},{key:"getTModelFromEvent",value:function(t){var e,n=null===(e=t.target)||void 0===e?void 0:e.id;return n&&Ie.manager.visibleOidMap[n]||(n=d.findNearestParentWithId(t.target)),Ie.manager.visibleOidMap[n]}},{key:"clearStart",value:function(){this.start0=void 0,this.start1=void 0}},{key:"clearEnd",value:function(){this.end0=void 0,this.end1=void 0}},{key:"clearTouch",value:function(){this.currentTouch={deltaY:0,deltaX:0,prevDeltaX:0,prevDeltaY:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""}}},{key:"clearAll",value:function(){this.clearStart(),this.clearEnd(),this.clearTouch(),this.eventQueue.length=0,this.touchTimeStamp=0,this.touchCount=0,this.canFindHandlers=!0,this.lastEvent=void 0,this.attachedEventMap={},this.eventTargetMap={},this.ignoreStartEvents=!0,this.swipeStartX=0,this.swipeStartY=0}},{key:"deltaX",value:function(){return this.currentTouch.deltaX}},{key:"deltaY",value:function(){return this.currentTouch.deltaY}},{key:"cursorX",value:function(){return this.cursor.x}},{key:"cursorY",value:function(){return this.cursor.y}},{key:"swipeX",value:function(){return this.cursor.x-this.swipeStartX}},{key:"swipeY",value:function(){return this.cursor.y-this.swipeStartY}},{key:"pinchDelta",value:function(){return this.currentTouch.pinchDelta}},{key:"dir",value:function(){return this.currentTouch.dir}},{key:"getScrollLeftHandler",value:function(){return this.currentHandlers.scrollLeft}},{key:"getScrollTopHandler",value:function(){return this.currentHandlers.scrollTop}},{key:"getPinchHandler",value:function(){return this.currentHandlers.pinch}},{key:"getTouchHandler",value:function(){return this.currentHandlers.touch}},{key:"getTouchHandlerType",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.type:null}},{key:"getTouchHandlerOid",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.oid:null}},{key:"getTouchCount",value:function(){return this.touchCount}},{key:"isClickEvent",value:function(){return"click"===this.getEventType()}},{key:"isResizeEvent",value:function(){return"resize"===this.getEventType()}},{key:"isSwipeEvent",value:function(){return this.hasDelta()&&1===this.touchCount}},{key:"isScrollEvent",value:function(){return this.hasDelta()&&this.isCurrentSource("wheel")}},{key:"hasDelta",value:function(){return 0!==this.deltaX()||0!==this.deltaY()}},{key:"isEndEvent",value:function(){return"end"===this.getEventType()||"click"===this.getEventType()}},{key:"isStartEvent",value:function(){return"start"===this.getEventType()}},{key:"getEventName",value:function(){return this.currentEventName}},{key:"getEventTarget",value:function(){return this.currentEventTarget}},{key:"getEventType",value:function(){return this.currentEventType}},{key:"isClickHandler",value:function(t){return this.getTouchHandler()===t&&this.isClickEvent()}},{key:"isClickHandlerType",value:function(t){return this.getTouchHandlerType()===t&&this.isClickEvent()}},{key:"isTouchHandler",value:function(t){return this.getTouchHandler()===t&&t.canHandleEvents("touch")}},{key:"isEnterEventHandler",value:function(t){return l.contains(t,this.currentHandlers.enterEvent)&&!l.contains(t,this.currentHandlers.leaveEvent)}},{key:"isLeaveEventHandler",value:function(t){return l.contains(t,this.currentHandlers.leaveEvent)&&!l.contains(t,this.currentHandlers.enterEvent)}},{key:"onFocus",value:function(t){return this.currentHandlers.justFocused===t}},{key:"onBlur",value:function(t){return this.currentHandlers.blur===t}},{key:"hasFocus",value:function(t){return this.currentHandlers.focus===t}},{key:"isTouchHandlerType",value:function(t){return this.getTouchHandlerType()===t}},{key:"isScrollLeftHandler",value:function(t){return this.currentHandlers.scrollLeft===t}},{key:"isScrollTopHandler",value:function(t){return this.currentHandlers.scrollTop===t}},{key:"isPinchHandler",value:function(t){return this.currentHandlers.pinch===t}},{key:"isCurrentSource",value:function(t){return this.currentTouch.source===t}},{key:"getOrientation",value:function(){return this.currentTouch.orientation}},{key:"isTouchHandlerOrAncestor",value:function(t){for(var e=this.getTouchHandler();t;){if(t===e)return!0;t=t.getParent()}return!1}},{key:"isTouchHandlerOrParent",value:function(t){var e=this.getTouchHandler();return t===e||t.getParent()===e}},{key:"containsTouchHandler",value:function(t){return l.contains(t,this.getTouchHandler())}},{key:"countTouches",value:function(t){var e,n;return(null===(e=t.touches)||void 0===e?void 0:e.length)||(null===(n=t.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n.length)||1}},{key:"getTouch",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(null===(e=t.touches)||void 0===e?void 0:e[r])||(null===(n=t.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n[r])||t,a=l.isDefined(i.clientX)?i.clientX:i.pageX||0,o=l.isDefined(i.clientY)?i.clientY:i.pageY||0;return{x:a,y:o,originalX:a,originalY:o,target:i.target,timeStamp:l.now()}}},{key:"move",value:function(t){if(1===this.touchCount){if(this.start0.y=this.end0?this.end0.y:this.start0.y,this.start0.x=this.end0?this.end0.x:this.start0.x,this.end0=this.getTouch(t),l.isDefined(this.end0)){var e=this.start0.x-this.end0.x,n=this.start0.y-this.end0.y;this.setDeltaXDeltaY(e,n,"touch")}}else if(this.touchCount>=2){this.end0=this.getTouch(t),this.end1=this.getTouch(t,1);var r=l.distance(this.start0.x,this.start0.y,this.start1.x,this.start1.y),i=l.distance(this.end0.x,this.end0.y,this.end1.x,this.end1.y)-r;this.currentTouch.pinchDelta=i>0?.3:i<0?-.3:0}}},{key:"end",value:function(){if(this.touchCount<=1&&this.start0){var t,e=0,n=0,r=0;l.isDefined(this.end0)&&(e=this.start0.originalX-this.end0.x,n=this.start0.originalY-this.end0.y,r=l.now()-this.start0.timeStamp<250?l.now()-this.start0.timeStamp:0),"horizontal"===this.currentTouch.orientation&&Math.abs(e)>0&&r>0?(t=l.momentum(0,e,r),this.touchTimeStamp=this.end0.timeStamp+t.duration,this.touchTimeStamp-l.now()>0&&(this.currentTouch.deltaX=t.distance,this.currentTouch.manualMomentumFlag=!0)):"vertical"===this.currentTouch.orientation&&Math.abs(n)>0&&r>0&&(t=l.momentum(0,n,r),this.touchTimeStamp=this.end0.timeStamp+t.duration,this.touchTimeStamp-l.now()>0&&(this.currentTouch.deltaY=t.distance,this.currentTouch.manualMomentumFlag=!0))}}},{key:"setDeltaXDeltaY",value:function(t,e,n){var r=Math.abs(t)-Math.abs(e);r>=1?("none"===this.currentTouch.orientation||"vertical"===this.currentTouch.orientation&&r>=2||"horizontal"===this.currentTouch.orientation)&&(this.currentTouch.orientation="horizontal",this.currentTouch.dir=t<=-1?"left":t>=1?"right":this.currentTouch.dir,this.currentTouch.source=n):("none"===this.currentTouch.orientation||"horizontal"===this.currentTouch.orientation&&r<=-2||"vertical"===this.currentTouch.orientation)&&(this.currentTouch.orientation="vertical",this.currentTouch.dir=e<=-1?"up":e>=1?"down":this.currentTouch.dir,this.currentTouch.source=n),this.currentTouch.prevDeltaX+=t,this.currentTouch.prevDeltaY+=e,this.currentTouch.deltaX=this.currentTouch.prevDeltaX,this.currentTouch.deltaY=this.currentTouch.prevDeltaY}},{key:"wheel",value:function(t){var e=0,n=0;this.currentTouch.pinchDelta=0,this.start0=this.getTouch(t),t.ctrlKey&&"deltaY"in t?this.currentTouch.pinchDelta=-t.deltaY/10:"deltaX"in t?(e=t.deltaX,n=t.deltaY):"wheelDeltaX"in t?(e=-t.wheelDeltaX/120,n=-t.wheelDeltaY/120):"wheelDelta"in t?e=-t.wheelDelta/120:"detail"in t&&(e=t.detail/3),this.setDeltaXDeltaY(e,n,"wheel")}}])}();function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function At(t,e,n){return(e=It(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,It(r.key),r)}}function It(t){var e=function(t){if("object"!=Ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ot(e)?e:e+""}xt(Dt,"MAX_EVENT_QUEUE_SIZE",10),xt(Dt,"MAX_EVENT_TYPE_CAPACITY",2);var Ht=function(){return function(t,e){return e&&Vt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cacheMap={},this.tmodelKeyMap={},this.fetchingAPIMap={},this.fetchingImageMap={}}),[{key:"fetchCommon",value:function(t,e,n,r,i){return j.markTargetAction(n,"fetchAction"),e&&this.isFetched(e)?r[t]||(r[t]={fetchId:t,cacheId:e,fetchingFlag:!0,startTime:l.now(),targets:[{tmodel:n,targetName:n.key}],fetchMap:r}):r[t]?r[t].targets.push({tmodel:n,targetName:n.key}):(r[t]={fetchId:t,cacheId:e,fetchingFlag:!0,startTime:l.now(),targets:[{tmodel:n,targetName:n.key}],fetchMap:r},i()),this.addToTModelKeyMap(n,n.key,t,e),t}},{key:"fetch",value:function(t,e,n,r){var i=this,a="".concat(t.oid,"_").concat(e,"_").concat(JSON.stringify(n));this.fetchCommon(a,r,t,this.fetchingAPIMap,(function(){i.ajaxAPI(e,n,i.fetchingAPIMap[a])}))}},{key:"fetchImage",value:function(t,e,n){var r=this,i="".concat(t.oid,"_").concat(e);return this.fetchCommon(i,n,t,this.fetchingImageMap,(function(){r.loadImage(e,r.fetchingImageMap[i])}))}},{key:"getTModelKey",value:function(t,e){return"".concat(t.oid," ").concat(e)}},{key:"getLoadTargetName",value:function(t){return"load-".concat(t)}},{key:"addToTModelKeyMap",value:function(t,e,n,r){var i=this.getTModelKey(t,e),a=this.getLoadTargetName(e);this.tmodelKeyMap[i]||(this.tmodelKeyMap[i]={fetchMap:{},entryCount:0,resultCount:0,errorCount:0,activeIndex:0,accessIndex:0},t.val(a,[])),this.tmodelKeyMap[i].fetchMap[n]||(this.tmodelKeyMap[i].fetchMap[n]={fetchId:n,order:this.tmodelKeyMap[i].entryCount},this.tmodelKeyMap[i].entryCount++,t.val(a).push(void 0)),r&&this.isFetched(r)&&this.handleSuccess(this.fetchingAPIMap[n],this.cacheMap[r].result)}},{key:"removeFromTModelKeyMap",value:function(t,e){var n=this.getTModelKey(t,e);delete this.tmodelKeyMap[n]}},{key:"isLoading",value:function(t,e){var n=this.getTModelKey(t,e);return this.tmodelKeyMap[n]}},{key:"isLoadingSuccessful",value:function(t,e){var n=this.getTModelKey(t,e);return this.tmodelKeyMap[n]&&this.tmodelKeyMap[n].resultCount===this.tmodelKeyMap[n].entryCount&&0===this.tmodelKeyMap[n].errorCount}},{key:"resetLoadingError",value:function(t,e){var n=this.getTModelKey(t,e),r=this.tmodelKeyMap[n];r&&(r.errorCount=0)}},{key:"nextActiveItem",value:function(t,e){var n=this.getTModelKey(t,e),r=this.tmodelKeyMap[n];return!!r&&r.activeIndex++}},{key:"isNextLoadingItemSuccessful",value:function(t,e){var n=this.getTModelKey(t,e),r=this.tmodelKeyMap[n];if(!r)return!1;var i=this.getLoadTargetName(e),a=t.val(i);return 0===r.errorCount&&Array.isArray(a)&&l.isDefined(a[r.activeIndex])}},{key:"getLoadingItemValue",value:function(t,e){var n=t.targets[e],r=this.getTModelKey(t,e),i=this.tmodelKeyMap[r];if(i&&n){var a,o=this.getLoadTargetName(e),s=t.val(o);return"onEnd"===n.fetchAction?(a=s.slice(i.accessIndex),i.accessIndex+=a.length):(a=s[i.accessIndex],i.accessIndex++),a}}},{key:"isFetching",value:function(t){var e,n;return null!==(e=null===(n=this.fetchingAPIMap[t])||void 0===n?void 0:n.fetchingFlag)&&void 0!==e&&e}},{key:"isFetched",value:function(t){var e,n;return null!==(e=null===(n=this.cacheMap[t])||void 0===n?void 0:n.success)&&void 0!==e&&e}},{key:"getFetchingPeriod",value:function(t){return this.fetchingAPIMap[t]?l.now()-this.fetchingAPIMap[t].startTime:void 0}},{key:"fetchCache",value:function(t){return this.cacheMap[t]}},{key:"handleSuccess",value:function(t,e){var n=this,r=l.now(),i=t.fetchId,a=t.cacheId,o=t.startTime,s=t.targets,u=t.fetchMap,c={fetchingPeriod:r-o,success:!0,result:e};s.forEach((function(t){var e=t.tmodel,r=t.targetName,a=n.getTModelKey(e,r),o=n.tmodelKeyMap[a],s=n.getLoadTargetName(r);if(o){var l=o.fetchMap[i];n.callOnSuccessHandler(e,r,jt(jt({},c),{},{order:l.order}));var u=e.val(s);u[l.order]=c.result,e.val(r,1===u.length?u[0]:u),o.resultCount++,0===o.errorCount&&j.shouldActivateNextTarget(e,r)}})),delete u[i],a&&(this.cacheMap[a]=c),ze().schedule(0,"api_success_".concat(i))}},{key:"handleError",value:function(t,e){var n=this,r=l.now(),i=t.fetchId,a=t.cacheId,o=t.startTime,s=t.targets,u=t.fetchMap;s.forEach((function(t){var a=t.tmodel,s=t.targetName,l="".concat(a.oid," ").concat(s),u=n.tmodelKeyMap[l];if(u){var c=u.fetchMap[i],h={fetchingPeriod:r-o,success:!1,order:c.order,error:e};a.val(s)[c.order]=h,u.resultCount++,u.errorCount++,n.callOnErrorHandler(a,s)}})),delete u[i],a&&delete this.cacheMap[a],ze().schedule(0,"api_error_".concat(i))}},{key:"callOnSuccessHandler",value:function(t,e,n){var r,i=null===(r=t.targets[e])||void 0===r?void 0:r.onSuccess;i&&("function"==typeof i?i.call(t,n):Array.isArray(i)?i.forEach((function(e){return j.activateSingleTarget(t,e)})):j.activateSingleTarget(t,i))}},{key:"callOnErrorHandler",value:function(t,e){var n,r=null===(n=t.targets[e])||void 0===n?void 0:n.onError;r&&("function"==typeof r?r.call(t,t.val(e)):Array.isArray(r)?r.forEach((function(e){return j.activateSingleTarget(t,e)})):j.activateSingleTarget(t,r))}},{key:"ajaxAPI",value:function(t,e,n){var r=this,i={dataType:"json",type:"GET",success:function(t){return r.handleSuccess(n,t)},error:function(t){return r.handleError(n,t)}};d.ajax(jt(jt({},i),{},{url:t},{data:e}))}},{key:"loadImage",value:function(t,e){var n=this,r=new Image;r.src=t,r.onload=function(){var t={width:r.width,height:r.height,src:r.src};n.handleSuccess(e,t)},r.onerror=function(){n.handleError(e,"not found")}}}])}();function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rt(r.key),r)}}function Rt(t){var e=function(t){if("object"!=Nt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nt(e)?e:e+""}function Yt(t,e,n){return e=Xt(e),function(t,e){if(e&&("object"==Nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bt()?Reflect.construct(e,n||[],Xt(t).constructor):e.apply(t,n))}function Bt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bt=function(){return!!t})()}function Xt(t){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xt(t)}function Ut(t,e){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ut(t,e)}var Wt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yt(this,e,["BI"])).parent=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ut(t,e)}(e,t),function(t,e){return e&&Ft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"canHaveDom",value:function(){return!1}},{key:"getItemOverflowMode",value:function(){return"never"}},{key:"shouldBeBracketed",value:function(){return!1}},{key:"excludeDefaultStyling",value:function(){return!0}},{key:"isIncluded",value:function(){return!1}},{key:"getWidth",value:function(){return this.getContentWidth()}},{key:"getHeight",value:function(){return this.getContentHeight()}},{key:"getBaseWidth",value:function(){return this.bottomBaseWidth}},{key:"getContainerOverflowMode",value:function(){return this.getRealParent().getContainerOverflowMode()}},{key:"getTopBaseHeight",value:function(){return this.topBaseHeight}},{key:"isVisible",value:function(){return this.visibilityStatus.top&&this.visibilityStatus.bottom}},{key:"getBracketThreshold",value:function(){return this.getRealParent().getBracketSize()}},{key:"addToParentVisibleChildren",value:function(){}},{key:"createViewport",value:function(){return this.viewport=this.viewport||new rt,this.viewport.xNext=this.x,this.viewport.xNorth=this.x,this.viewport.xEast=this.x,this.viewport.xSouth=this.x,this.viewport.xWest=this.x,this.viewport.absX=this.getRealParent().viewport.absX,this.viewport.absY=this.getRealParent().viewport.absY,this.viewport.scrollTop=this.getRealParent().viewport.scrollTop,this.viewport.scrollLeft=this.getRealParent().viewport.scrollLeft,this.viewport.xOverflowReset=this.getRealParent().viewport.xOverflowReset,this.viewport.xOverflowLimit=this.getRealParent().viewport.xOverflowLimit,this.viewport.yNext=this.y,this.viewport.yNorth=this.y,this.viewport.yWest=this.y,this.viewport.yEast=this.y,this.viewport.ySouth=this.getRealParent().viewport.ySouth,this.viewport}},{key:"getRealParent",value:function(){return this.realParent}},{key:"calcAbsolutePosition",value:function(t,e){this.absX=t+this.getRealParent().absX,this.absY=e+this.getRealParent().absY}},{key:"shouldCalculateChildren",value:function(){var t=this.isVisible()||"new"===this.currentStatus;return this.currentStatus=void 0,t}},{key:"validateVisibilityInParent",value:function(){return this.getChildren().length>0&&this.getChild(0).validateVisibilityInParent()}},{key:"getChildren",value:function(){return this.allChildrenList}}])}(mt);function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function $t(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=qt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function qt(t,e){if(t){if("string"==typeof t)return zt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(t,e):void 0}}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gt(r.key),r)}}function Zt(t,e,n){return(e=Gt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gt(t){var e=function(t){if("object"!=_t(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_t(e)?e:e+""}var Qt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&Kt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"generate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!t.bracketMap[e.oid]||t.pageMap[e.oid]!==e.allChildrenList||n?(t.bracketMap[e.oid]=t.buildTreeBottomUp(e,e.getChildren()),t.pageMap[e.oid]=e.allChildrenList):(e.lastChildrenUpdate.deletions.length>0&&(t.updateTreeOnDeletions(e,e.lastChildrenUpdate.deletions),t.reindexTree(e)),e.lastChildrenUpdate.additions.length>0&&t.updateTreeOnAdditions(e,e.lastChildrenUpdate.additions),(e.lastChildrenUpdate.deletions.length>0||e.lastChildrenUpdate.additions.length>0)&&t.reindexTree(e)),e.lastChildrenUpdate.additions.length=0,e.lastChildrenUpdate.deletions.length=0,t.bracketMap[e.oid]}},{key:"updateTreeOnDeletions",value:function(e,n){function r(n,i){if(n)if(i instanceof Wt&&i.parent===i.realParent){var a=t.bracketMap[e.oid],o=a.indexOf(i);o>=0&&a.splice(o,1)}else{var s=n.allChildrenList.indexOf(i);s>=0&&(n.allChildrenList.splice(s,1),0===n.allChildrenList.length&&r(n.parent,n))}}n.forEach((function(t){return r(t.bracket,t)}))}},{key:"reindexTree",value:function(e){function n(t,e){if(0===t.allChildrenList.length)return e;if(t.allChildrenList[0]instanceof Wt){t.startIndex=e;var r,i=$t(t.allChildrenList);try{for(i.s();!(r=i.n()).done;)e=n(r.value,e)}catch(t){i.e(t)}finally{i.f()}t.endIndex=e}else t.startIndex=e,e+=t.allChildrenList.length,t.endIndex=e;return e}var r,i=0,a=$t(t.bracketMap[e.oid]);try{for(a.s();!(r=a.n()).done;)i=n(r.value,i)}catch(t){a.e(t)}finally{a.f()}}},{key:"updateTreeOnAdditions",value:function(e,n){var r=e.getBracketSize();n.forEach((function(n){var i=n.index,a=n.child,o=t.findOrCreateBracket(e,i),s=i-o.startIndex;s<o.allChildrenList.length?o.allChildrenList.splice(s,0,a):o.allChildrenList.push(a),a.bracket=o;var l=o;for(l.startIndex=Math.min(l.startIndex,i),l.endIndex=l.startIndex+l.allChildrenList.length,l.currentStatus="new",l=o.getParent();l instanceof Wt;)l.startIndex=Math.min(l.startIndex,i),l.endIndex=Math.max(l.endIndex,i+1),l.currentStatus="new",l=l.getParent();o.allChildrenList.length>r&&t.splitBracket(e,o)}))}},{key:"splitBracket",value:function(e,n){for(var r=n.allChildrenList,i=e.getBracketSize(),a=[],o=n.startIndex,s=0;s<r.length;s+=i){var l=r.slice(s,s+i),u=o+l.length,c=t.createBracket(e,o,u,l);c.parent=n.parent,o=c.endIndex,a.push(c)}if(n.parent!==n.realParent){var h,f=n.parent.allChildrenList.indexOf(n);if(f>=0&&(h=n.parent.allChildrenList).splice.apply(h,[f,1].concat(a)),n.parent.allChildrenList.length>=i){var d=t.buildTreeBottomUp(e,n.parent.allChildrenList);if(n.parent.allChildrenList=d,n.parent.parent){var v,g=n.parent.parent.allChildrenList.indexOf(n.parent);g>=0&&(v=n.parent.parent.allChildrenList).splice.apply(v,[g,1].concat(function(t){return function(t){if(Array.isArray(t))return zt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||qt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(d)))}}}else{var y=t.bracketMap[e.oid],p=y.indexOf(n);p>=0&&y.splice.apply(y,[p,1].concat(a)),y.length>e.getBracketSize()&&(t.bracketMap[e.oid]=t.buildTreeBottomUp(e,y))}}},{key:"findOrCreateBracket",value:function(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.bracketMap[e.oid],a=$t(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.startIndex<=n&&o.endIndex>=n)return o.getFirstChild()instanceof Wt?t.findOrCreateBracket(e,n,o.allChildrenList):o}}catch(t){a.e(t)}finally{a.f()}var s=t.createBracket(e,n,n);if(i.push(s),i.length>e.getBracketSize()){var l=t.buildTreeBottomUp(e,i);t.bracketMap[e.oid].brackets=l}return s}},{key:"buildTreeBottomUp",value:function(e,n){for(var r=n.length,i=e.getBracketSize(),a=[],o=function(){var r=n.slice(s,s+i),o=r[0]instanceof Wt,l=o?r[0].startIndex:s,u=o?r[r.length-1].endIndex:s+r.length,c=t.createBracket(e,l,u,r);o&&r.forEach((function(t){t.parent=c})),a.push(c)},s=0;s<r;s+=i)o();return a.length>i?t.buildTreeBottomUp(e,a):a}},{key:"createBracket",value:function(e,n,r,i){var a=new Wt(e);return a.realParent=e,a.allChildrenList=i||a.allChildrenList,a.startIndex=n,a.endIndex=r,a.allChildrenList.forEach((function(t){t instanceof Wt?(t.realParent=e,t.parent=a):t.bracket=a})),t.all[a.oid]=a,a}}])}();function Jt(t){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function te(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ee(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,re(r.key),r)}}function re(t){var e=function(t){if("object"!=Jt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jt(e)?e:e+""}Zt(Qt,"bracketMap",{}),Zt(Qt,"pageMap",{}),Zt(Qt,"all",{});var ie=function(){return function(t,e){return e&&ne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hasLocationList=[],this.hasLocationMap={},this.visibleChildrenLengthMap={},this.childrenLengthMap={},this.locationListStats=[],this.activatedList=[],this.activatedMap={}}),[{key:"clear",value:function(){this.visibleChildrenLengthMap={},this.childrenLengthMap={},this.activatedList=[],this.activatedMap={}}},{key:"calculateAll",value:function(){var t=this;this.hasLocationList.length=0,this.hasLocationMap={},this.locationListStats=[],this.startTime=l.now(),this.calculate(),Object.keys(this.visibleChildrenLengthMap).forEach((function(e){var n=t.visibleChildrenLengthMap[e],r=n.tmodel;n.length===r.visibleChildren.length&&0!==r.visibleChildren.length||(t.runEventTargets(r,"onVisibleChildrenChange"),delete t.visibleChildrenLengthMap[e])})),Object.keys(this.childrenLengthMap).forEach((function(e){var n=t.childrenLengthMap[e],r=n.tmodel;n.length!==r.getChildren().length&&(t.runEventTargets(r,"onChildrenChange"),delete t.childrenLengthMap[e])}))}},{key:"calculate",value:function(){this.calculateContainer(Ie.tRoot)}},{key:"calculateActivated",value:function(){for(var t=this,e=0,n=function(){var n=t.activatedList[e++];Ie.targetManager.applyTargetValues(n,n.activatedTargets),n.updatingTargetList.length>0&&Ie.targetManager.setActualValues(n,n.updatingTargetList.filter((function(t){return 0===n.getTargetStep(t)}))),t.hasLocationMap[n.oid]||t.addToLocationList(n)};e<this.activatedList.length;)n();this.activatedList.length=0,this.activatedMap={}}},{key:"getChildren",value:function(t){return t.getChildren(),t.shouldBeBracketed()?Qt.generate(t):(t.lastChildrenUpdate.additions.length=0,t.lastChildrenUpdate.deletions.length=0,Qt.bracketMap[t.oid]&&(delete Qt.bracketMap[t.oid],delete Qt.pageMap[t.oid]),t.getChildren())}},{key:"calculateContainer",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getChildren(t),i=t.createViewport(),a=t.getContentWidth(),o=t.getContentHeight();t.visibleChildren.length=0;var s,u=te(r);try{var c=function(){var r=s.value;if(!r)return 1;e.locationListStats.push(r.oid),i.setCurrentChild(r),i.setLocation(),r.isIncluded()&&t.manageChildTargetExecution(r,n)&&e.calculateTargets(r),("always"===t.getContainerOverflowMode()||"always"===r.getItemOverflowMode()||"auto"===t.getContainerOverflowMode()&&"auto"===r.getItemOverflowMode()&&i.isOverflow())&&(i.overflow(),i.setLocation()),r.isIncluded()&&(r.targets.onVisibleChildrenChange&&!e.visibleChildrenLengthMap[r.oid]&&(e.visibleChildrenLengthMap[r.oid]={tmodel:r,length:r.visibleChildren.length}),r.targets.onChildrenChange&&!e.childrenLengthMap[r.oid]&&(e.childrenLengthMap[r.oid]={tmodel:r,length:r.getChildren().length}),e.addToLocationList(r)),r.getCoreTargets().forEach((function(t){!r.isTargetEnabled(t)||r.isTargetUpdating(t)||r.isTargetImperative(t)||U.executeDeclarativeTarget(r,t,r.getTargetCycle(t))})),(r.isTargetImperative("x")||r.targets.x)&&l.isDefined(r.targetValues.x)||r.val("x",r.x),(r.isTargetImperative("y")||r.targets.y)&&l.isDefined(r.targetValues.y)||r.val("y",r.y),r.calcAbsolutePosition(r.getX(),r.getY()),r.excludeDefaultStyling()||(r.addToStyleTargetList("x"),r.addToStyleTargetList("y"));var a=r.isVisible();l.isDefined(r.targets.isVisible)?U.executeDeclarativeTarget(r,"isVisible"):r.calcVisibility(),r.isNowVisible=!1===a&&r.isVisible(),r.addToParentVisibleChildren(),r.shouldCalculateChildren()&&e.calculateContainer(r,n&&!1!==t.shouldCalculateChildTargets()),r.isInFlow()&&(l.isNumber(r.val("appendNewLine"))?(i.appendNewLine(),t.calcContentWidthHeight()):(t.calcContentWidthHeight(),i.nextLocation())),!r.excludeDefaultStyling()&&!l.isDefined(r.targetValues.height)&&!l.isDefined(r.targets.heightFromDom)&&r.getContentHeight()>0&&(r.val("height",r.getContentHeight()),r.addToStyleTargetList("height")),!r.excludeDefaultStyling()&&!l.isDefined(r.targetValues.width)&&!l.isDefined(r.targets.widthFromDom)&&r.getContentWidth()>0&&(r.val("width",r.getContentWidth()),r.addToStyleTargetList("width"))};for(u.s();!(s=u.n()).done;)c()}catch(t){u.e(t)}finally{u.f()}t.calcContentWidthHeight(),a===t.getContentWidth()&&o===t.getContentHeight()||this.runEventTargets(t,"onContentResize");var h,f=te(r);try{for(f.s();!(h=f.n()).done;){var d=h.value;this.checkEventTargets(d)}}catch(t){f.e(t)}finally{f.f()}}},{key:"calculateTargets",value:function(t){this.checkInternalEventTargets(t),Ie.targetManager.applyTargetValues(t),Ie.targetManager.setActualValues(t),t.hasDom()&&q.shouldMeasureWidthFromDom(t)&&j.setWidthFromDom(t),t.hasDom()&&q.shouldMeasureHeightFromDom(t)&&j.setHeightFromDom(t),t.isNowVisible=!1,t.hasDomNow=!1,t.targetExecutionCount++}},{key:"checkEventTargetsByType",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];t.eventTargetList.forEach((function(i){e[i]&&e[i](t)&&r.push(i),n&&w.targetToEventsMapping[i]&&We().attachTargetEvents(i)})),this.runEventTargets(t,r)}},{key:"checkInternalEventTargets",value:function(t){this.checkEventTargetsByType(t,w.internalEventMap)}},{key:"checkEventTargets",value:function(t){this.checkEventTargetsByType(t,w.allEventMap,!0)}},{key:"runEventTargets",value:function(t,e){Array.isArray(e)||(e=[e]);var n=We().getEventTarget();e.forEach((function(e){var r=t.targets[e];t.isTargetEnabled(e)&&("function"==typeof r.value?r.value.call(t,n):Array.isArray(r.value)?r.value.forEach((function(e){return j.activateSingleTarget(t,e)})):j.activateSingleTarget(t,r.value))}))}},{key:"addToLocationList",value:function(t){this.hasLocationMap[t.oid]||(this.hasLocationList.push(t),this.hasLocationMap[t.oid]=t)}},{key:"addToActivatedList",value:function(t){this.activatedMap[t.oid]||(this.activatedList.push(t),this.activatedMap[t.oid]=t)}},{key:"isActivated",value:function(t){return this.activatedMap[t.oid]}}])}();function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function oe(){oe=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),s=new O(r||[]);return i(o,"_invoke",{value:C(t,n,s)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",v="executing",g="completed",y={};function p(){}function m(){}function b(){}var T={};u(T,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(P([])));k&&k!==n&&r.call(k,o)&&(T=k);var S=b.prototype=p.prototype=Object.create(T);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(i,a,o,s){var l=h(t[i],t,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==ae(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function C(e,n,r){var i=f;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=x(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var u=h(e,n,r);if("normal"===u.type){if(i=r.done?g:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=g,r.method="throw",r.arg=u.arg)}}}function x(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(ae(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(M.prototype),u(M.prototype,s,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new M(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),u(S,l,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function se(t){return function(t){if(Array.isArray(t))return le(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return le(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ue(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,he(r.key),r)}}function he(t){var e=function(t){if("object"!=ae(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ae(e)?e:e+""}var fe=function(){return function(t,e){return e&&ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastLink=l.getFullLink(document.URL),this.pageCache={}}),[{key:"openPage",value:(t=oe().mark((function t(e){return oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie.stop();case 2:Ie.reset(),e=l.getFullLink(e),this.pageCache[e]?(Ie.tRoot=this.pageCache[e].tRoot,Ie.tRoot.$dom.innerHTML(this.pageCache[e].html),l.initDoms(this.pageCache[e].visibleList),Ie.manager.lists.visible=se(this.pageCache[e].visibleList),this.lastLink=e,Ie.start()):(Ie.tRoot.hasDom()&&Ie.tRoot.$dom.innerHTML(""),Ie.tRoot=Ie.tRootFactory(),this.lastLink=e,Ie.start());case 5:case"end":return t.stop()}}),t,this)})),e=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){ue(a,r,i,o,s,"next",t)}function s(t){ue(a,r,i,o,s,"throw",t)}o(void 0)}))},function(t){return e.apply(this,arguments)})},{key:"openLinkFromHistory",value:function(t){t.link?(this.onPageClose(),this.openPage(t.link)):t.browserUrl&&(history.replaceState({link:t.browserUrl},"",t.browserUrl),this.openPage(t.browserUrl)),ze().schedule(0,"pagemanager-openLinkFromHistory")}},{key:"onPageClose",value:function(){Ie.resizeLastUpdate=l.now(),We().resizeRoot(),Ie.manager.lists.visible.forEach((function(t){Ke().runEventTargets(t,["onPageClose"])}))}},{key:"openLink",value:function(t){t=l.getFullLink(t),this.lastLink&&(this.onPageClose(),this.pageCache[this.lastLink]={link:this.lastLink,html:Ie.tRoot.$dom.innerHTML(),visibleList:se(Ie.manager.lists.visible),tRoot:Ie.tRoot}),history.pushState({link:t},"",t),this.openPage(t),ze().schedule(0,"pagemanager-processOpenLink")}},{key:"updateBrowserUrl",value:function(t){window.history.state.browserUrl?history.replaceState({browserUrl:t},"",t):(this.pageCache[document.URL]={link:document.URL,htms:Ie.tRoot.$dom.innerHTML(),visibleList:se(Ie.manager.lists.visible),tRoot:Ie.tRoot},history.pushState({browserUrl:t},"",t)),ze().schedule(0,"pagemanager-processUpdateBrowserUrl")}},{key:"back",value:function(){return history.back()}}]);var t,e}();function de(t){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ve(Object(n),!0).forEach((function(e){ye(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ye(t,e,n){return(e=ke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pe(t){return function(t){if(Array.isArray(t))return Te(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||be(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=be(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function be(t,e){if(t){if("string"==typeof t)return Te(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(t,e):void 0}}function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ke(r.key),r)}}function ke(t){var e=function(t){if("object"!=de(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==de(e)?e:e+""}var Se=function(){return function(t,e){return e&&we(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}),[{key:"init",value:function(){this.lists={visible:[],rerender:[],restyle:[],reasyncStyle:[],reattach:[],relocation:[],invisibleDom:[],noDom:[],updatingTModels:[],activeTModels:[],updatingTargets:[],activeTargets:[]},this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={},this.noDomMap={},this.doneTargets=[]}},{key:"clear",value:function(){this.lists.visible.length=0,this.lists.rerender.length=0,this.lists.restyle.length=0,this.lists.reasyncStyle.length=0,this.lists.reattach.length=0,this.lists.relocation.length=0,this.lists.noDom.length=0,this.lists.updatingTModels.length=0,this.lists.activeTModels.length=0,this.lists.updatingTargets.length=0,this.lists.activeTargets.length=0,this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={},this.noDomMap={}}},{key:"analyze",value:function(){var t,e=l.list2map(this.lists.visible);this.clear();var n,r=me(Ke().hasLocationList);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.getParent()||i.getParent().allChildrenMap[i.oid]){var a=i.isVisible();a&&(e[i.oid]=null,!i.hasDom()||i.canHaveDom()||this.lists.invisibleDom.includes(i)||this.lists.invisibleDom.push(i),this.lists.visible.push(i),this.visibleOidMap[i.oid]=i,this.visibleTypeMap[i.type]||(this.visibleTypeMap[i.type]=[]),this.visibleTypeMap[i.type].push(i)),(a||i.isActivated())&&(this.needsRerender(i),this.needsRestyle(i),this.needsReattach(i),this.needsRelocation(i),i.updatingTargetList.length>0&&(this.lists.updatingTModels.push(i),this.lists.updatingTargets=[].concat(pe(this.lists.updatingTargets),pe(i.updatingTargetList))),i.activeTargetList.length>0&&(this.lists.activeTModels.push(i),this.lists.activeTargets=[].concat(pe(this.lists.activeTargets),pe(i.activeTargetList))),i.activeChildrenList.length>0&&(this.lists.activeTModels=[].concat(pe(this.lists.activeTModels),pe(i.activeChildrenList))),Object.keys(i.targetMethodMap).length>0&&(this.targetMethodMap[i.oid]=ge({},i.targetMethodMap)),i.deactivate()),!a&&i.canDeleteDom()||!i.canHaveDom()||i.hasDom()||this.noDomMap[i.oid]||(this.lists.noDom.push(i),this.noDomMap[i.oid]=!0)}else i.hasDom()&&!this.lists.invisibleDom.includes(i)&&this.lists.invisibleDom.push(i)}}catch(t){r.e(t)}finally{r.f()}var o=Object.values(e).filter((function(t){var e;return null!==t&&t.hasDom()&&(t.canDeleteDom()||!(null!==(e=t.getParent())&&void 0!==e&&e.allChildrenMap[t.oid]))}));return(t=this.lists.invisibleDom).push.apply(t,pe(o)),this.lists.noDom.length>0?0:this.lists.reattach.length>0?1:this.lists.relocation.length>0?2:this.lists.rerender.length>0?3:this.lists.reasyncStyle.length>0?4:this.lists.invisibleDom.length>0?5:this.lists.restyle.length>0?10:-1}},{key:"needsRelocation",value:function(t){return!(!t.hasDom()||!l.isDefined(t.domOrderIndex)||(this.lists.relocation.push(t),0))}},{key:"needsRerender",value:function(t){return!(!t.hasDom()||!l.isDefined(t.getHtml())||t.$dom.html()===t.getHtml()&&t.$dom.textOnly===t.isTextOnly()||(this.lists.rerender.push(t),0))}},{key:"needsRestyle",value:function(t){t.hasDom()&&(t.styleTargetList.length>0&&this.lists.restyle.push(t),t.asyncStyleTargetList.length>0&&this.lists.reasyncStyle.push(t))}},{key:"needsReattach",value:function(t){t.hasDom()&&!t.reuseDomDefinition()&&(t.hasDomHolderChanged()||t.hasBaseElementChanged())&&this.lists.reattach.push(t)}},{key:"renderTModels",value:function(){var t,e=me(this.lists.rerender);try{for(e.s();!(t=e.n()).done;){var n,r,i=t.value;i.isTextOnly()?null===(n=i.$dom)||void 0===n||n.text(i.getHtml()):null===(r=i.$dom)||void 0===r||r.html(i.getHtml()),i.setActualValueLastUpdate("html"),i.domHeightTimestamp=0,i.domWidthTimestamp=0}}catch(t){e.e(t)}finally{e.f()}}},{key:"reattachTModels",value:function(){var t,e=me(this.lists.reattach);try{for(e.s();!(t=e.n()).done;){var n,r=t.value;null===(n=r.$dom)||void 0===n||n.detach(),r.hasBaseElementChanged()&&q.createDom(r),r.getDomHolder(r)&&r.getDomHolder(r).appendTModel$Dom(r)}}catch(t){e.e(t)}finally{e.f()}}},{key:"relocateTModels",value:function(){this.lists.relocation.sort((function(t,e){return e.domOrderIndex-t.domOrderIndex}));var t,e=me(this.lists.relocation);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.getDomParent().$dom.relocate(n,n.domOrderIndex),n.domOrderIndex=void 0}}catch(t){e.e(t)}finally{e.f()}}},{key:"deleteDoms",value:function(){var t,e=me(this.lists.invisibleDom);try{for(e.s();!(t=e.n()).done;){var n,r=t.value;r.styleMap={},r.transformMap={},r.val("isVisible",!1),null===(n=r.$dom)||void 0===n||n.detach(),r.$dom=null}}catch(t){e.e(t)}finally{e.f()}this.lists.invisibleDom.length=0}},{key:"fixStyles",value:function(){var t,e=me(this.lists.restyle);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hasDom()&&q.fixStyle(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"fixAsyncStyles",value:function(){var t,e=me(this.lists.reasyncStyle);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hasDom()&&q.fixAsyncStyle(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"completeDoneTModels",value:function(){this.doneTargets.forEach((function(t){var e=t.tmodel,n=t.key;e.isTargetDone(n)&&(e.setTargetComplete(n),e.removeFromActiveTargets(e),e.removeFromUpdatingTargets(e))}))}},{key:"createDoms",value:function(){if(0!==this.lists.noDom.length){var t=[];this.lists.noDom.sort((function(t,e){return t.getUIDepth()<e.getUIDepth()?-1:1}));var e,n=me(this.lists.noDom);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=void 0;d.query("#".concat(r.oid))?(i=new d("#".concat(r.oid)),r.$dom=i,r.hasDomNow=!0):t.push(r)}}catch(t){n.e(t)}finally{n.f()}for(var a=0,o=t;a<o.length;a++){var s,l=o[a];null!==(s=l.getDomHolder(l))&&void 0!==s&&s.exists()&&(l.val("$dom")?l.$dom=l.val("$dom"):(l.$dom=new d,q.createDom(l)),l.getDomHolder(l).appendTModel$Dom(l),l.hasDomNow=!0)}}}}])}();function Ee(t){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ee(t)}function Me(){Me=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),s=new O(r||[]);return i(o,"_invoke",{value:C(t,n,s)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",v="executing",g="completed",y={};function p(){}function m(){}function b(){}var T={};u(T,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(P([])));k&&k!==n&&r.call(k,o)&&(T=k);var S=b.prototype=p.prototype=Object.create(T);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(i,a,o,s){var l=h(t[i],t,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Ee(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function C(e,n,r){var i=f;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=x(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var u=h(e,n,r);if("normal"===u.type){if(i=r.done?g:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=g,r.method="throw",r.arg=u.arg)}}}function x(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(Ee(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(M.prototype),u(M.prototype,s,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new M(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),u(S,l,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function Ce(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Le(r.key),r)}}function Le(t){var e=function(t){if("object"!=Ee(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ee(e)?e:e+""}var De=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nextRuns=[],this.domProcessing=0,this.runningFlag=!1,this.runId="",this.runStartTime=void 0,this.rerunId="",this.delayProcess=void 0,this.resetting=!1,this.activeStartTime=void 0}return function(t,e){return e&&xe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"resetRuns",value:(e=Me().mark((function t(){var e;return Me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.resetting=!0,t.next=3,new Promise((function(t){return requestAnimationFrame(t)}));case 3:null!==(e=this.delayProcess)&&void 0!==e&&e.timeoutId&&clearTimeout(this.delayProcess.timeoutId),this.nextRuns=[],this.domProcessing=0,this.runningFlag=!1,this.runId="",this.runStartTime=void 0,this.rerunId="",this.delayProcess=void 0,this.resetting=!1,this.activeStartTime=void 0;case 13:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(t){Ce(a,r,i,o,s,"next",t)}function s(t){Ce(a,r,i,o,s,"throw",t)}o(void 0)}))},function(){return n.apply(this,arguments)})},{key:"schedule",value:function(t,e){!Ie.isRunning()||this.resetting||0===t&&this.rerunId||(0===t&&0===Ie.throttle?this.run(t,e):this.delayRun(0===Ie.throttle?t||0:Ie.throttle,e))}},{key:"run",value:function(t,e){if(Ie.isRunning()&&!this.resetting)if(this.runningFlag)this.rerunId||(this.rerunId="rerun ".concat(e));else{this.rerunId="",this.runId=e,this.runningFlag=!0,this.runStartTime=l.now(),We().captureEvents(),qe().doneTargets.length>0&&(qe().completeDoneTModels(),qe().doneTargets.length=0),Ie.targetManager.applyTargetValues(Ie.tRoot),Ke().calculateAll(),Ke().calculateActivated(),Ie.events.resetEventsOnTimeout();var n,r=Ie.manager.analyze();r>=0&&(0===this.domProcessing?this.domOperations(r):this.rerunId||(this.rerunId="domrun ".concat(e))),1===Ie.debugLevel&&l.log(!0)("Request from: ".concat(e," dly: ").concat(t," step:").concat(r," dom:").concat(this.domProcessing," runs:").concat(this.nextRuns.length," D:").concat(null===(n=this.delayProcess)||void 0===n?void 0:n.delay)),0===this.domProcessing&&this.needsRerun()}}},{key:"needsRerun",value:function(){if(this.runningFlag=!1,this.rerunId)this.schedule(1,"rerun-".concat(this.rerunId));else{var t=this.nextRuns.length>0?this.nextRuns[0].delay-(l.now()-this.nextRuns[0].insertTime):void 0;if(void 0===t){if(We().eventQueue.length>0)this.schedule(15,"events-".concat(We().eventQueue.length));else if(qe().lists.updatingTModels.length>0)this.schedule(15,"getManager-needsRerun-updatingTModels");else if(qe().lists.activeTModels.length>0){var e=qe().lists.activeTModels.find((function(t){return 0===t.targetExecutionCount||t.activeTargetList.some((function(e){return t.isTargetEnabled(e)&&t.shouldScheduleRun(e)}))}));if(e){var n=!this.activeStartTime||l.now()-this.activeStartTime>15?1:15;this.activeStartTime=l.now(),this.schedule(n,"getManager-needsRerun-".concat(e.oid,"-").concat(e.activeTargetList))}}}else t<0&&t>=-15&&this.executeNextRun()}}},{key:"domOperations",value:function(e){var n=this;this.domProcessing=1,10===e?this.domFixStyles():Promise.all(t.domSteps.filter((function(t,n){return n>=e})).map((function(t){return Promise.resolve().then(t)}))).then((function(){qe().lists.restyle.length?n.domFixStyles():(n.domProcessing=0,n.needsRerun())}))}},{key:"domFixStyles",value:function(){var t=this;this.domProcessing=2,requestAnimationFrame((function(){qe().fixStyles(),t.domProcessing=0,t.needsRerun()}))}},{key:"setDelayProcess",value:function(t,e,n,r){var i=this;r>0?this.delayProcess={runId:t,insertTime:e,runTime:n,delay:r,timeoutId:setTimeout((function(){i.run(r,t),i.executeNextRun()}),r)}:(this.delayProcess={runId:t,insertTime:e,runTime:n,delay:0},this.run(r,t),this.executeNextRun())}},{key:"executeNextRun",value:function(){for(var t=null,e=null;this.nextRuns.length>0;){var n=this.nextRuns.shift(),r=l.now();if(!(n.delay-(r-n.insertTime)<0)){e=n;break}t=n}if(t)this.setDelayProcess(t.runId,t.insertTime,l.now(),0);else if(e){var i=l.now(),a=Math.max(1,e.delay-(i-e.insertTime));this.setDelayProcess(e.runId,e.insertTime,i+a,a)}else this.delayProcess=void 0}},{key:"delayRun",value:function(t,e){var n=this.runStartTime,r=n+t;this.delayProcess?this.delayProcess.timeoutId&&r<this.delayProcess.runTime?(clearTimeout(this.delayProcess.timeoutId),this.insertRun(this.delayProcess.runId,this.delayProcess.insertTime,this.delayProcess.delay),this.setDelayProcess(e,n,r,t)):this.insertRun(e,n,t):this.setDelayProcess(e,n,r,t)}},{key:"insertRun",value:function(t,e,n){for(var r=0,i=this.nextRuns.length;r<i;){var a=Math.floor((r+i)/2),o=this.nextRuns[a].delay,s=this.nextRuns[a].insertTime+o-(e+n);if(s>0)i=a;else{if(!(s<0))return;r=a+1}}this.nextRuns.splice(r,0,{runId:t,insertTime:e,delay:n})}}]);var e,n}();function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function Pe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return je(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function je(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ve(r.key),r)}}function Ve(t){var e=function(t){if("object"!=Oe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Oe(e)?e:e+""}!function(t,e,n){(e=Le(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(De,"domSteps",[function(){return qe().createDoms()},function(){return qe().reattachTModels()},function(){return qe().relocateTModels()},function(){return qe().renderTModels()},function(){return qe().fixAsyncStyles()},function(){qe().lists.invisibleDom.length>0&&qe().deleteDoms()}]);var Ie,He=function(){return function(t,e){return e&&Ae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"applyTargetValues",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.activeTargetList.slice(0);t.targetMethodMap={};var n,r=Pe(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.isTargetImperative(i)||this.applyTargetValue(t,i)}}catch(t){r.e(t)}finally{r.f()}}},{key:"applyTargetValue",value:function(t,e){var n=t.targets[e];if(l.isDefined(n)){if("function"==typeof n.enabledOn&&t.setTargetMethodName(e,"enabledOn"),t.isTargetEnabled(e)&&(!t.isExecuted(e)||!t.hasUpdatingTargets(e))){if(t.isExecuted(e)&&t.getTargetStep(e)===t.getTargetSteps(e)){if(t.isScheduledPending(e)&&ze().nextRuns.length>0)return;var r=j.scheduleExecution(t,e);if(r>0)return void ze().schedule(r,"targetSchedule__".concat(t.oid,"__").concat(e,"_").concat(r))}if(t.resetScheduleTimeStamp(e),t.shouldExecuteCyclesInParallel(e)){var i;i=t.isExecuted(e)?t.getTargetCycles(e):"function"==typeof n.cycles?n.cycles.call(t,0):n.cycles||0;for(var a=[],o=function(n){a.push(new Promise((function(r){U.executeDeclarativeTarget(t,e,n),r()})))},s=0;s<=i;s++)o(s);Promise.all(a).then((function(){t.targetValues[e].cycle=i,t.updateTargetStatus(e),t.shouldScheduleRun(e)&&ze().schedule(t.getTargetInterval(e),"targetSchedule__".concat(t.oid,"__").concat(e,"_rerun"))}))}else t.isExecuted(e)&&t.getTargetCycles(e)>0&&(t.getTargetCycle(e)<t.getTargetCycles(e)?t.incrementTargetCycle(e,t.getTargetCycle(e)):t.resetTargetCycle(e),t.resetTargetStep(e),t.resetTargetInitialValue(e)),U.executeDeclarativeTarget(t,e)}}else t.removeFromActiveTargets(e)}},{key:"setActualValues",value:function(t){var e,n=0,r=Pe(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.updatingTargetList.slice(0));try{for(r.s();!(e=r.n()).done;){var i=e.value,a=t.getScheduleTimeStamp(i),o=t.getTargetInterval(i);if(a&&a+o>l.now()){var s=ze().nextRuns.length>0?ze().nextRuns[0]:void 0;if(s&&s.delay+s.insertTime<a+o)continue}(n=j.scheduleExecution(t,i))>0?ze().schedule(n,"setActualValues-".concat(t.oid,"__").concat(i,"_").concat(n)):(t.resetScheduleTimeStamp(i),this.setActualValue(t,i))}}catch(t){r.e(t)}finally{r.f()}}},{key:"findOriginalTModel",value:function(t,e){return ct.findParentByTarget(t,e)||Je().find((function(t){return t.targets[e]}))}},{key:"setActualValue",value:function(t,e){var n=t.targetValues[e];if(n)if(t.isTargetImperative(e)||t.isTargetEnabled(e)){var r,i,a,o=t.getTargetValue(e),s=t.getTargetStep(e),u=t.getTargetSteps(e),c=t.getTargetCycle(e),h=t.getTargetInterval(e),f=t.val(e),d=s,v=c,g=t.getTargetInitialValue(e),y=l.capitalizeFirstLetter(e);if(s<=u&&(l.isDefined(g)||(g=l.isDefined(t.val(e))?t.val(e):"number"==typeof o?0:void 0,t.setTargetInitialValue(e,g)),t.val(e,j.morph(t,e,g,o,s,u)),t.addToStyleTargetList(e),t.setActualValueLastUpdate(e),t.isTargetImperative(e)?(r=n.originalTargetName,a=t,(i=t.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(t,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i["on".concat(y,"Step")]?(i["on".concat(y,"Step")].call(a,a.val(e),o,s,u),a.setTargetMethodName(r,["on".concat(y,"Step")])):i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,e,a.val(e),o,s,u),a.setTargetMethodName(r,"onImperativeStep"))):j.handleValueChange(t,e,t.val(e),f,d,v),t.incrementTargetStep(e),t.updateTargetStatus(e),j.shouldActivateNextTarget(t,e),t.getTargetStep(e)<u))ze().schedule(h,"".concat(t.oid,"---").concat(e,"-").concat(s,"/").concat(u,"-").concat(c,"-").concat(h));else{t.val(e,o),t.addToStyleTargetList(e),t.setActualValueLastUpdate(e),s=t.getTargetStep(e);var p=0;n.valueList&&c<n.valueList.length-1?(t.incrementTargetCycle(e,t.getTargetCycle(e)),c=t.getTargetCycle(e),t.resetTargetStep(e),n.initialValue=n.value,n.value=n.valueList[c],n.steps=n.stepList[(c-1)%n.stepList.length],n.interval=n.intervalList[(c-1)%n.intervalList.length],n.easing=n.easingList[(c-1)%n.easingList.length],p=h):t.isTargetImperative(e)?(r=n.originalTargetName,a=t,(i=t.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(t,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i["on".concat(y,"Step")]?(i["on".concat(y,"Step")].call(a,a.val(e),o,s,u),a.setTargetMethodName(r,["on".concat(y,"Step")])):i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,e,a.val(e),o,s,u),a.setTargetMethodName(r,"onImperativeStep")),i&&"function"==typeof i["on".concat(y,"End")]?(i["on".concat(y,"End")].call(a,a.val(e),o,s,u),a.setTargetMethodName(r,["on".concat(y,"End")])):i&&"function"==typeof i.onImperativeEnd&&(i.onImperativeEnd.call(a,e,a.val(e)),a.setTargetMethodName(r,"onImperativeEnd"))):(!n.valueList&&t.getTargetCycle(e)<t.getTargetCycles(e)&&(t.incrementTargetCycle(e,t.getTargetCycle(e)),t.resetTargetStep(e).resetTargetInitialValue(e).resetTargetExecutionFlag(e),U.executeDeclarativeTarget(t,e)),"object"===Oe(t.targets[e])&&"function"==typeof t.targets[e].onStepsEnd&&(t.targets[e].onStepsEnd.call(t,c),t.setTargetMethodName(e,"onStepsEnd"))),t.updateTargetStatus(e),j.hasTargetEnded(t,e)&&j.shouldActivateNextTarget(t,e),ze().schedule(p,"".concat(t.oid,"---").concat(e,"-").concat(s,"/").concat(u,"-").concat(c,"-").concat(p))}}else ze().schedule(10,"setActualValue-disabled-".concat(t.oid,"__").concat(e))}}])}();function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(t)}function Fe(){Fe=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),s=new O(r||[]);return i(o,"_invoke",{value:C(t,n,s)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",v="executing",g="completed",y={};function p(){}function m(){}function b(){}var T={};u(T,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(P([])));k&&k!==n&&r.call(k,o)&&(T=k);var S=b.prototype=p.prototype=Object.create(T);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(i,a,o,s){var l=h(t[i],t,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Ne(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function C(e,n,r){var i=f;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=x(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var u=h(e,n,r);if("normal"===u.type){if(i=r.done?g:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=g,r.method="throw",r.arg=u.arg)}}}function x(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(Ne(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(M.prototype),u(M.prototype,s,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new M(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),u(S,l,"Generator"),u(S,o,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=P,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function Re(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ye(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Re(a,r,i,o,s,"next",t)}function s(t){Re(a,r,i,o,s,"throw",t)}o(void 0)}))}}var Be=function(t){var e,n;e=t,n={throttle:0,debugLevel:0,runningFlag:!1,resizeLastUpdate:0,init:function(){return n.browser=new kt,n.browser.setup(),n.$window=new d(window),n.$window.addEvent("popstate",(function(t){t.state&&Ie.pager.openLinkFromHistory(t.state)})),n.loader=new Ht,n.pager=new fe,n.events=new Dt,n.locationManager=new ie,n.targetManager=new He,n.manager=new Se,n.runScheduler=new De,n.tRootFactory=function(){var t=new mt("tRoot",{start:function(){d.query("#tj-root")?this.$dom=new d("#tj-root"):(this.$dom=new d,this.$dom.create("div"),this.$dom.setSelector("#tj-root"),this.$dom.setId("#tj-root"),this.$dom.attr("tabindex","0"),new d("body").insertFirst$Dom(this.$dom))},styling:!1,domHolder:function(){return this.$dom},isVisible:!0,width:function(){var e=d.getScreenWidth();return e!==t.val("width")&&(n.resizeLastUpdate=l.now()),e},height:function(){var e=d.getScreenHeight();return e!==t.val("height")&&(n.resizeLastUpdate=l.now()),e}});return t.oids={},t.val("width",d.getScreenWidth()),t.val("height",d.getScreenHeight()),n.tRoot&&n.tRoot.getChildren().forEach((function(e){var n=new mt(e.type,e.targets);t.addChild(n)})),t},n.tRoot=n.tRootFactory(),e&&n.tRoot.addChild(e),window.history.pushState({link:document.URL},"",document.URL),n}},n.start=Ye(Fe().mark((function t(){return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.runningFlag=!1,n.events.detachAll(),n.events.detachWindowEvents(),n.events.attachWindowEvents(),n.events.clearAll(),t.next=7,n.runScheduler.resetRuns();case 7:return n.runningFlag=!0,n.runScheduler.schedule(0,"appStart"),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)}))),n.stop=Ye(Fe().mark((function t(){return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.runningFlag=!1,n.events.detachAll(),n.events.detachWindowEvents(),n.events.clearAll(),t.next=6,n.runScheduler.resetRuns();case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)}))),n.reset=function(){n.manager.lists.visible.forEach((function(t){t.transformMap={},t.styleMap={},t.allStyleTargetList.forEach((function(e){l.isDefined(t.val(e))&&t.addToStyleTargetList(e)}))})),n.manager.clear(),n.locationManager.clear(),ct.clear()},n.isRunning=function(){return n.runningFlag},n.find=function(t){return ct.find(t)},(Ie=n).init().start()};Be.oids={},Be.getOid=function(t){var e,n="Bracket"===t?Be.oids:(null==Be||null===(e=Be.tRoot)||void 0===e?void 0:e.oids)||Be.oids;l.isDefined(n[t])||(n[t]=0);var r=n[t]++;return{oid:r>0?"".concat(t).concat(r):t,num:r}};var Xe=function(){return!!Ie&&Ie.runningFlag},Ue=function(){var t;return null===(t=Ie)||void 0===t?void 0:t.tRoot},We=function(){var t;return null===(t=Ie)||void 0===t?void 0:t.events},_e=function(){var t;return null===(t=Ie)||void 0===t?void 0:t.pager},$e=function(){var t;return null===(t=Ie)||void 0===t?void 0:t.loader},qe=function(){var t;return null===(t=Ie)||void 0===t?void 0:t.manager},ze=function(){var t;return null===(t=Ie)||void 0===t?void 0:t.runScheduler},Ke=function(){var t;return null===(t=Ie)||void 0===t?void 0:t.locationManager},Ze=function(){var t;return null===(t=Ie)||void 0===t?void 0:t.browser},Ge=function(){var t,e;return null!==(t=null===(e=Ie)||void 0===e||null===(e=e.tRoot)||void 0===e?void 0:e.getWidth())&&void 0!==t?t:0},Qe=function(){var t,e;return null!==(t=null===(e=Ie)||void 0===e||null===(e=e.tRoot)||void 0===e?void 0:e.getHeight())&&void 0!==t?t:0},Je=function(){var t;return null===(t=Ie)||void 0===t||null===(t=t.manager)||void 0===t?void 0:t.lists.visible},tn=function(){var t;return null===(t=Ie)||void 0===t?void 0:t.resizeLastUpdate};function en(t){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(t)}function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rn(r.key),r)}}function rn(t){var e=function(t){if("object"!=en(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==en(e)?e:e+""}window.t=window.t||ct.find;var an=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&nn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"bounce",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.yStart,i=void 0===r?void 0:r,a=n.xStart,o=void 0===a?Ge()/2:a,s=n.widthStart,u=void 0===s?50:s,c=n.heightStart,h=void 0===c?50:c,f=n.bFactor,d=void 0===f?.6:f,v=n.cFactor,g=void 0===v?.2:v,y=n.rotationStart,p=void 0===y?0:y,m=n.rIncrement,b=void 0===m?360:m,T=Math.max(10,(e-t)*d),w=l.isDefined(i)?[i,t]:[t],k=[o],S=[u],E=[h],M=[p];Math.abs(0|T)>1;){w.push(e),w.push(e-T);var C=u*(1+g),x=h*(1-g);S.push(C),S.push(u),E.push(x),E.push(h),k.push(o-(C-u)/2),k.push(o),M.push(M[M.length-1]+b),T*=d,b*=.8,g*=d}k.push(o),w.push(e),S.push(u),E.push(h);var L=M[M.length-1]%360;return L>0&&L<360&&M.push(360),{x:{list:k},y:{list:w},width:{list:S},height:{list:E},rotate:{list:M}}}},{key:"bounceSimple",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.from,i=void 0===r?void 0:r,a=n.to,o=void 0===a?void 0:a,s=n.widthStart,u=void 0===s?void 0:s,c=n.heightStart,h=void 0===c?void 0:c,f=n.xStart,d=void 0===f?void 0:f,v=n.yStart,g=void 0===v?void 0:v,y=n.bFactor,p=void 0===y?.7:y,m=n.cFactor,b=void 0===m?.2:m;return i=l.isDefined(i)?i:e.getY(),o=l.isDefined(o)?o:e.getY(),u=l.isDefined(u)?u:e.getWidth(),h=l.isDefined(h)?h:e.getHeight(),g=l.isDefined(g)?g:e.getY(),d=l.isDefined(d)?d:e.getX(),t.bounce(i,o,{yStart:g,xStart:d,widthStart:u,heightStart:h,bFactor:p,cFactor:b,rIncrement:0})}},{key:"shake",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bFactor,i=void 0===r?.6:r,a=n.cFactor,o=void 0===a?.3:a,s=n.strength,l=void 0===s?20:s;if(!t.shakeMap[e.oid]){var u=(e.getParentValue("width")-e.getWidth())/2,c=e.getY(),h=e.getWidth(),f=e.getHeight();t.shakeMap[e.oid]={xStart:u,yStart:c,widthStart:h,heightStart:f}}var d=t.shakeMap[e.oid],v=d.xStart,g=d.yStart,y=d.widthStart,p=d.heightStart,m=t.bounce(g-l,g,{xStart:v,widthStart:y,heightStart:p,bFactor:i,cFactor:o});return{y:{list:m.height.list.map((function(t){return g-(t-p)/2}))},x:m.x,width:m.width,height:m.height}}},{key:"spiral",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startAngle,n=void 0===e?0:e,r=t.endAngle,i=void 0===r?360:r,a=t.angleStep,o=void 0===a?18:a,s=t.x,l=void 0===s?0:s,u=t.y,c=void 0===u?0:u,h=t.width,f=void 0===h?100:h,d=t.height,v=void 0===d?100:d,g=[],y=[],p=[],m=n;m<=i;m+=o){var b=m*(Math.PI/180);g.push(Math.floor(l+f*Math.cos(b))),y.push(Math.floor(c+v*Math.sin(b))),p.push(90+m)}return{x:{list:g},y:{list:y},rotate:{list:p}}}}])}();!function(t,e,n){(e=rn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(an,"shakeMap",{}),window.TargetJS=e}();