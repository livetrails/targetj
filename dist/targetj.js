!function(){"use strict";var t={d:function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{$Dom:function(){return T},App:function(){return Jt},Bracket:function(){return pt},ColorUtil:function(){return M},Easing:function(){return I},Moves:function(){return le},SearchUtil:function(){return l},TModel:function(){return z},TUtil:function(){return y},TargetUtil:function(){return O},browser:function(){return n},getEvents:function(){return te},getLoader:function(){return ne},getManager:function(){return ie},getPager:function(){return ee},getScreenHeight:function(){return ae},getScreenWidth:function(){return re},isRunning:function(){return Gt},tApp:function(){return Qt},tRoot:function(){return Zt}});var n={style:void 0,delayProcess:{},setup:function(){if(Array.prototype.oids||(Array.prototype.oids=function(t){return this.map((function(t){return t.oid})).join(t||" ")}),!document.getElementsByClassName){var t=function(t,e){var n;if(document.querySelectorAll)n=e.querySelectorAll(".".concat(t));else{var i=e.getElementsByTagName("*");n=[];for(var r=0;r<i.length;r++)i[r].className&&" ".concat(i[r].className," ").indexOf(" ".concat(t," "))>-1&&-1===n.indexOf(i[r])&&n.push(i[r])}return n};document.getElementsByClassName=function(e){return t(e,document)},Element.prototype.getElementsByClassName=function(e){return t(e,this)}}this.style={transform:this.prefixStyle("transform"),transitionTimingFunction:this.prefixStyle("transitionTimingFunction"),transitionDuration:this.prefixStyle("transitionDuration")}},log:function(t){return!0===t?console.log:function(){}},prefixStyle:function(t){for(var e=document.createElement("div").style,n="",i=["webkitT","MozT","msT","OT","t"],r=0;r<i.length;r++)i[r]+"ransform"in e&&(n=i[r].substr(0,i[r].length-1));return""===n?t:n+t.charAt(0).toUpperCase()+t.substr(1)},now:Date.now||function(){return(new Date).getTime()},nowInSeconds:function(){return Math.floor(this.now()/1e3)},delay:function(t,e,i){var r,a=n.now()+i;return this.delayProcess.id?a>=this.delayProcess.timeStamp?r={timeStamp:a,oid:e,delay:i}:a<this.delayProcess.timeStamp&&(r={timeStamp:this.delayProcess.timeStamp,oid:this.delayProcess.oid,delay:this.delayProcess.delay},clearTimeout(this.delayProcess.id),this.delayProcess.oid=e,this.delayProcess.timeStamp=a,this.delayProcess.delay=i,this.delayProcess.id=setTimeout((function(){t(),n.delayProcess={}}),i)):(this.delayProcess.oid=e,this.delayProcess.timeStamp=a,this.delayProcess.delay=i,this.delayProcess.id=setTimeout((function(){t(),n.delayProcess={}}),i)),r}};function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,u(i.key),i)}}function s(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"findFirstPinchHandler",value:function(e){return t.findEventHandler(e,"pinch")}},{key:"findFirstScrollTopHandler",value:function(e){return t.findEventHandler(e,"scrollTop")}},{key:"findFirstScrollLeftHandler",value:function(e){return t.findEventHandler(e,"scrollLeft")}},{key:"findFirstTouchHandler",value:function(e){return t.findEventHandler(e,"touch")}},{key:"findEventHandler",value:function(t,e){for(;t;){if(t.canHandleEvents(e))return t;t=t.getParent()}}},{key:"findParentByType",value:function(e,n){var i="".concat(e.oid,"__").concat(n);if(!y.isDefined(t.foundParentWithType[i]))for(var r=e.getParent();r;){if(r.type===n){t.foundParentWithType[i]=r;break}r=r.getParent()}return t.foundParentWithType[i]}},{key:"findParentByTarget",value:function(e,n){var i="".concat(e.oid,"__").concat(n);if(!y.isDefined(t.foundParentWithTarget[i]))for(var r=e.getParent();r;){if(y.isDefined(r.targets[n])||y.isDefined(r.targetValues[n])){t.foundParentWithTarget[i]=r;break}r=r.getParent()}return t.foundParentWithTarget[i]}},{key:"findByType",value:function(e){if(!y.isDefined(t.foundTypeMap[e])){var n=function(t){if(t.type===e)return t;var i,a=r(t.getChildren());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o&&o.hasChildren()){var s=n(o);if(s)return s}else if(o&&o.type===e)return o}}catch(t){a.e(t)}finally{a.f()}},i=n(Qt.tRoot);i&&(t.foundTypeMap[e]=i)}return t.foundTypeMap[e]}},{key:"findByTarget",value:function(e){if(!y.isDefined(t.foundTargetMap[e])){var n=function(t){if(t.targets[e])return t;var i,a=r(t.getChildren());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o&&o.hasChildren()){var s=n(o);if(s)return s}else if(o&&o.targets[e])return o}}catch(t){a.e(t)}finally{a.f()}},i=n(Qt.tRoot);i&&(t.foundTargetMap[e]=i)}return t.foundTargetMap[e]}},{key:"find",value:function(e){if(!y.isDefined(t.foundOids[e])){var n=function(t){if(t.oid===e)return t;var i,a=r(t.getChildren());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o&&o.hasChildren()){var s=n(o);if(s)return s}else if(o&&o.oid===e)return o}}catch(t){a.e(t)}finally{a.f()}},i=n(Qt.tRoot);i&&(t.foundOids[e]=i)}return t.foundOids[e]}}],null&&o(e.prototype,null),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function h(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,g(i.key),i)}}function g(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}s(l,"foundParentWithType",{}),s(l,"foundParentWithTarget",{}),s(l,"foundTypeMap",{}),s(l,"foundTargetMap",{}),s(l,"foundOids",{});var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"getBoundingRect",value:function(t){var e,n,i,r,a;if(t.actualValues.domHolder&&t.actualValues.domHolder.exists()){var o=t.actualValues.domHolder.getBoundingClientRect();e=o.left,n=o.top,i=o.right,r=o.bottom,a=t.actualValues.domHolder.attr("id")}else{var s=t.getDomParent()?t.getDomParent():l.findParentByTarget(t,"domHolder");s?(e=s.absX,n=s.absY,i=e+s.getWidth(),r=n+s.getHeight(),a=s.oid):(e=0,n=0,i=re(),r=ae(),a="screen")}return{left:e,top:n,right:i,bottom:r,oid:a}}},{key:"initDoms",value:function(e){var n=T.findByClass("tgt");e.forEach((function(t){t.$dom=null}));var i,r=t.list2map(e.filter((function(t){return"BI"!==t.type}))),a=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=h(t))){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw r}}}}(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.getAttribute("id"),u=r[s];u&&!u.hasDom()?u.$dom=new T("#".concat(s)):T.detach(o)}}catch(t){a.e(t)}finally{a.f()}}},{key:"list2map",value:function(e,n){return e.reduce((function(e,i){return e[i.oid]=t.isDefined(n)?n:i,e}),{})}},{key:"getDeepList",value:function(t){var e=[];return function t(n){if(n&&n.hasChildren()){var i=n.getChildren();e.push.apply(e,function(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i)),i.forEach(t)}}(t),e}},{key:"areEqual",value:function(t,e,n){return n?JSON.stringify(t)===JSON.stringify(e):t===e}},{key:"momentum",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e-t,r=Math.abs(i)/n,a=Math.floor(5e3*r),o=5*a,s=i>0?i+o:i-o;return{distance:Math.round(s)/50,duration:a,momentumDistance:n,time:5*n}}},{key:"isDefined",value:function(t){return null!=t}},{key:"isNumber",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"limit",value:function(e,n,i){return(e=(e=t.isDefined(e)?e:n)>i?i:e)<n?n:e}},{key:"formatNum",value:function(t,e){return t?parseFloat(t.toString()).toFixed(e):0}},{key:"distance",value:function(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}},{key:"getFullLink",value:function(e){if(t.isDefined(e)){if(e.startsWith("http"))return e;var n=window.location.protocol;n+=n.endsWith(":")?"//":"://";var i="".concat(n).concat(window.location.hostname);return e.startsWith("/")?i+e:"".concat(i,"/").concat(e)}}}],null&&f(e.prototype,null),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,b(i.key),i)}}function b(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}var T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?(this.selector=e,this.element=t.query(e)):e&&(this.element=e),this.childrenCount=0,this.$domParent=void 0,this.originalContent=void 0,this.textOnly=!0}return e=t,r=[{key:"query",value:function(e){return"#"===e[0]?t.findById(e):"."===e[0]?t.findFirstByClass(e):t.findFirstByTag(e)}},{key:"findById",value:function(t){return document.getElementById("#"===t[0]?t.slice(1):t)}},{key:"findFirstByClass",value:function(e,n){var i=t.findByClass(e,n);return i.length>0?i[0]:null}},{key:"findFirstByTag",value:function(e,n){var i=t.findByTag(e,n);return i.length>0?i[0]:null}},{key:"findByTag",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByTagName(t)}},{key:"findByClass",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByClassName("."===t[0]?t.slice(1):t)}},{key:"findNearestParentWithId",value:function(t){for(;t;){var e="function"==typeof t.getAttribute&&t.getAttribute("id")?t.getAttribute("id"):null;if(e&&ie().visibleOidMap[e])return e;t=t.parentElement}}},{key:"detach",value:function(t){var e=y.isDefined(t)?t.parentElement:null;e&&e.removeChild(t)}},{key:"ready",value:function(e){new t(document).addEvent("DOMContentLoaded",e)}},{key:"ajax",value:function(t){var e=new XMLHttpRequest,n="";t.data&&(n=Object.keys(t.data).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t.data[e]))})).join("&")),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var n="json"===t.dataType?JSON.parse(this.responseText):this.responseText;t.success(n)}else t.error(e.status)},"POST"===t.type?(e.open(t.type,t.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(n)):(t.url+=n?t.url>""&&t.url.indexOf("?")>=0?"&".concat(n):"?".concat(n):"",e.open(t.type,t.url,!0),e.send())}}],(i=[{key:"exists",value:function(){return this.selector&&(this.element=t.query(this.selector)),!!this.element}},{key:"create",value:function(t){this.element=document.createElement(t)}},{key:"setSelector",value:function(t){this.selector=t}},{key:"setId",value:function(t){this.attr("id","#"===t[0]?t.slice(1):t)}},{key:"focus",value:function(){this.element.focus()}},{key:"attr",value:function(t,e){if(this.element)return y.isDefined(e)?void this.element.setAttribute(t,e):this.element.getAttribute(t)}},{key:"value",value:function(t){if(this.element)return y.isDefined(t)?void(this.element.value=t):this.element.value}},{key:"select",value:function(){this.element&&"function"==typeof this.element.select&&this.element.select()}},{key:"width",value:function(t){if(!y.isDefined(t))return this.element.offsetWidth;this.element.style.width=y.isNumber(t)?"".concat(t,"px"):t}},{key:"height",value:function(t){if(!y.isDefined(t))return this.element.offsetHeight;this.element.style.height=y.isNumber(t)?"".concat(t,"px"):t}},{key:"css",value:function(t){if(!y.isDefined(t))return this.attr("class");this.attr("class",t)}},{key:"setStyleByMap",value:function(t){var e=this;Object.keys(t).forEach((function(n){var i=t[n];switch(n){case"transform":e.transform.apply(e,function(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i));break;case"width":e.width(i);break;case"height":e.height(i);break;default:e.style(n,i)}}))}},{key:"style",value:function(t,e){if(!y.isDefined(e))return this.element.style[t];this.element.style[t]=e}},{key:"getStyleValue",value:function(t){var e=this.style(t),n=y.isDefined(e)?e.replace(/[^-\d.]/g,""):0;return parseFloat(n)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"parent",value:function(){return this.element?this.element.parentElement:null}},{key:"detach",value:function(){t.detach(this.element),this.$domParent&&this.$domParent.childrenCount>0&&this.$domParent.childrenCount--}},{key:"append$Dom",value:function(t){this.element.appendChild(t.element)}},{key:"insertFirst$Dom",value:function(t){this.element.firstChild?this.element.insertBefore(t.element,this.element.firstChild):this.append$Dom(t)}},{key:"appendTModel$Dom",value:function(t){0===this.childrenCount&&this.element.children.length>1&&t.getDomParent()&&t.getDomParent().getHtml()&&t.getDomParent().getHtml()===this.originalContent&&(this.element.innerHTML="<div>".concat(this.html(),"</div>")),this.element.appendChild(t.$dom.element),t.$dom.$domParent=this,this.childrenCount++}},{key:"html",value:function(t){if(!y.isDefined(t))return this.originalContent;if(this.childrenCount>0){var e=document.createElement("div");e.innerHTML=t,y.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!1}else this.element.innerHTML=t,this.originalContent=t,this.textOnly=!1}},{key:"text",value:function(t){if(!y.isDefined(t))return this.originalContent;if(this.childrenCount>0){var e=document.createTextNode(t);y.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!0}else this.element.textContent=t,this.originalContent=t,this.textOnly=!0}},{key:"outerHTML",value:function(t){this.element.outerHTML=t}},{key:"innerHTML",value:function(t){if(!y.isDefined(t))return this.element.innerHTML;this.element.innerHTML=t}},{key:"addClass",value:function(t){var e=this.attr("class"),n=e?e.includes(t)?e:"".concat(e," ").concat(t):t;n!==e&&this.attr("class",n)}},{key:"addEvent",value:function(t,e){this.element.addEventListener?this.element.addEventListener(t,e,{capture:!1,passive:!1}):this.element.attachEvent("on".concat(t),e)}},{key:"detachEvent",value:function(t,e){this.element.removeEventListener?this.element.removeEventListener(t,e,!1):this.element.detachEvent?this.element.detachEvent("on".concat(t),e):this.element["on".concat(t)]=null}},{key:"transform",value:function(t,e,i,r){var a=this.createTransformValue(t,e,i,r);a!==this.element.style[n.style.transform]&&(this.element.style[n.style.transform]=a)}},{key:"createTransformValue",value:function(t,e,n,i){return((y.isDefined(t)&&y.isDefined(e)?"translate(".concat(0!==t?"".concat(t,"px"):"0",",").concat(0!==e?"".concat(e,"px"):"0",") "):"")+(n=y.isDefined(n)?"rotate(".concat(n,"deg) "):"")+(i=y.isDefined(i)?"scale(".concat(i,")"):"")).trim()}},{key:"animate",value:function(t,e){return this.element.animate(t,e)}},{key:"getContext",value:function(e,n){var i=y.isDefined(n)?t.query(n):this.query("canvas");return i?i.getContext(e):void 0}},{key:"findFirstByClass",value:function(e){return t.findFirstByClass(e,this.element)}},{key:"findFirstByTag",value:function(e){return t.findFirstByTag(e,this.element)}},{key:"query",value:function(e){return"#"===e[0]?t.findById(e):"."===e[0]?this.findFirstByClass(e):this.findFirstByTag(e)}}])&&m(e.prototype,i),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,r}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,S(i.key),i)}}function S(t){var e=function(t){if("object"!=k(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}var C,V,L,M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"color2Integers",value:function(e){if(e=e?String(e):"",e=t.colors[e.toLowerCase()]||e){if(e.startsWith("#")){e=3===(e=e.slice(1)).length?e.split("").map((function(t){return t+t})).join(""):e;var n=parseInt(e,16);return[n>>16&255,n>>8&255,255&n]}var i=e.match(/\d+/g);return i&&3===i.length?i.map(Number):void 0}}}],null&&w(e.prototype,null),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,P(i.key),i)}}function x(t,e,n){return(e=P(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P(t){var e=function(t){if("object"!=E(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(e)?e:e+""}C=M,L={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},(V=S(V="colors"))in C?Object.defineProperty(C,V,{value:L,enumerable:!0,configurable:!0,writable:!0}):C[V]=L;var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"emptyValue",value:function(){return{value:void 0,step:0,steps:0,cycle:0,cycles:0,interval:0,initialValue:void 0,scheduleTimeStamp:void 0,actualValueLastUpdate:0,status:"",executionCount:0,executionFlag:!1,isImperative:!1,originalTargetName:void 0,easing:void 0,creationTime:n.now()}}},{key:"bindTargetName",value:function(t,e){var n=t[e];if("object"===E(n))["value","enabledOn","onStepsEnd","onValueChange","loop","onImperativeEnd","onImperativeStep"].forEach((function(t){if("function"==typeof n[t]){var i=n[t];n[t]=function(){return this.key=e,i.apply(this,arguments)}}}));else if("function"==typeof n){var i=n;t[e]=function(){return this.key=e,i.apply(this,arguments)}}}},{key:"isValueStepsCycleArray",value:function(e){if(e.length>4||0===e.length)return!1;for(var n=e.length>=2,i=1;i<e.length;i++)if("number"!=typeof e[i])return!1;return n&&("number"==typeof e[0]||t.isListTarget(e[0])||"string"==typeof e[0])}},{key:"isListTarget",value:function(t){return"object"===E(t)&&Array.isArray(t.list)}},{key:"isAddChildTarget",value:function(t,e){return e instanceof z&&"addChild"===t}},{key:"getValueStepsCycles",value:function(e,n){var i=e.targets[n],r=i&&i.valueOnly,a=e.getTargetCycle(n),o=e.val(n),s=null,u=0,l=0,c=0;return function h(d){return Array.isArray(d)?r||!t.isValueStepsCycleArray(d)?[d,u,l,c]:Array.isArray(i)?i:(s=d[0],u=d.length>=2?d[1]:u,l=d.length>=3?d[2]:l,c=d.length>=4?d[3]:c,[s,u,l,c]):"object"===E(d)&&null!==d?(s="function"==typeof d.value?d.value.call(e,a,o):y.isDefined(d.value)?d.value:d,u="function"==typeof d.steps?d.steps.call(e,a):y.isDefined(d.steps)?d.steps:0,l="function"==typeof d.interval?d.interval.call(e,a):y.isDefined(d.interval)?d.interval:0,c="function"==typeof d.cycles?d.cycles.call(e,a,e.getTargetCycles(n)):y.isDefined(d.cycles)?d.cycles:0,Array.isArray(s)?h(s):[s,u,l,c]):"function"==typeof d?h(d.call(e,a,o)):[d,u,l,c]}(i)}},{key:"getIntervalValue",value:function(t,e,n){var i="function"==typeof n?n.call(t,e):n;return y.isNumber(i)?i:0}},{key:"scheduleExecution",value:function(t,e){var i=n.now(),r=t.getTargetInterval(e),a=t.getScheduleTimeStamp(e),o=0;if(r>0)if(y.isDefined(a)){var s=i-a;o=Math.max(r-s,0)}else o=r,t.setScheduleTimeStamp(e,i);return o>0&&!y.isDefined(a)&&t.setScheduleTimeStamp(e,i),o}},{key:"getTargetSchedulePeriod",value:function(t,e,i){var r,a=n.now(),o=0;return i>0?y.isDefined(t.getTargetTimeStamp(e))?o=(r=a-t.getTargetTimeStamp(e))<i?i-r:0:(t.setTargetTimeStamp(e,a),o=i):y.isDefined(t.getTargetTimeStamp(e))&&(o=(r=a-t.getTargetTimeStamp(e))<0?-r:0),o}},{key:"handleValueChange",value:function(t,e,n,i,r,a){"object"===E(t.targets[e])&&"function"==typeof t.targets[e].onValueChange&&!y.areEqual(n,i,t.targets[e].deepEquality)&&(t.targets[e].onValueChange.call(t,n,i,a),t.setTargetMethodName(e,"onValueChange"))}},{key:"morph",value:function(e,n,i,r,a){var o=e.getTargetEasing(n),s=o?o(e.getTargetStepPercent(n,a)):e.getTargetStepPercent(n,a);if(t.colorMap[n]){var u=M.color2Integers(r),l=i?M.color2Integers(i):M.color2Integers("#fff");if(u&&l){var c=Math.floor(u[0]*s+l[0]*(1-s)),h=Math.floor(u[1]*s+l[1]*(1-s)),d=Math.floor(u[2]*s+l[2]*(1-s));return"rgb(".concat(c,",").concat(h,",").concat(d,")")}return r}return"number"==typeof r?r*s+i*(1-s):r}},{key:"setWidthFromDom",value:function(t){var e=y.isDefined(t.domWidth)?t.domWidth.height:void 0,n=y.isDefined(t.domWidth)?t.domWidth.width:void 0,i=t.getDomParent(),r=!1;return ie().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),r=!0),(!y.isDefined(t.domWidth)||r||e!==t.getHeight()||i&&t.getActualValueLastUpdate("width")<=i.getActualValueLastUpdate("width"))&&(t.$dom.width("auto"),n=t.$dom.width(),e=t.$dom.height()),t.domWidth={width:n,height:e},t.val("width",n),n}},{key:"setHeightFromDom",value:function(t){var e=y.isDefined(t.domHeight)?t.domHeight.height:void 0,n=y.isDefined(t.domHeight)?t.domHeight.width:void 0,i=t.getDomParent(),r=!1;return ie().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),r=!0),(!y.isDefined(t.domHeight)||r||n!==t.getWidth()||i&&t.getActualValueLastUpdate("height")<=i.getActualValueLastUpdate("height"))&&(t.$dom.height("auto"),n=t.$dom.width(),e=t.$dom.height()),t.domHeight={height:e,width:n},t.val("height",e),e}}])}();function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function j(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,A(i.key),i)}}function A(t){var e=function(t){if("object"!=H(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H(e)?e:e+""}x(O,"styleTargetMap",{x:!0,y:!0,width:!0,height:!0,rotate:!0,scale:!0,opacity:!0,zIndex:!0,fontSize:!0,lineHeight:!0,borderRadius:!0,padding:!0,backgroundColor:!0,background:!0,color:!0,css:!0,style:!0,transform:!0,dim:!0}),x(O,"transformMap",{x:!0,y:!0,rotate:!0,scale:!0}),x(O,"dimMap",{width:!0,height:!0}),x(O,"colorMap",{color:!0,background:!0,backgroundColor:!0});var I=function(){return function(t,e,n){return n&&j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),0,[{key:"linear",value:function(t){return t}},{key:"inQuad",value:function(t){return t*t}},{key:"outQuad",value:function(t){return t*(2-t)}},{key:"outExpo",value:function(t){return 1-(1-t)*(1-t)}},{key:"circular",value:function(t){return Math.sqrt(1- --t*t)}},{key:"inOutQuad",value:function(t){return t<.5?2*t*t:(4-2*t)*t-1}},{key:"inOut",value:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}},{key:"outElastic",value:function(t){var e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}}])}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function F(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,N(i.key),i)}}function N(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}var B=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&F(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"executeDeclarativeTarget",value:function(e,n){t.resolveTargetValue(e,n),t.updateTarget(e,e.targetValues[n],n)}},{key:"executeImperativeTarget",value:function(e,n,i,r,a,o,s){e.targetValues[n]=e.targetValues[n]||O.emptyValue();var u=e.targetValues[n];u.isImperative=!0,u.originalTargetName=s,O.isAddChildTarget(n,i)?e.addChild(i):O.isListTarget(i)?t.assignListTarget(u,i.list,i.list[0],r,a,o):(t.assignSingleTarget(u,i,void 0,r,0,a,o),u.step=0),t.updateTarget(e,u,n)}},{key:"updateTarget",value:function(e,n,i){n.executionCount++,n.executionFlag=!0,e.addToStyleTargetList(i),e.setTargetMethodName(i,"value"),0===e.getTargetSteps(i)&&t.snapActualToTarget(e,i),e.updateTargetStatus(i)}},{key:"assignListTarget",value:function(t,e,n,i,r,a){t.valueList=e,t.stepList=Array.isArray(i)?i:y.isDefined(i)?[i]:[1],t.intervalList=Array.isArray(r)?r:y.isDefined(r)?[r]:[0],t.easingList=Array.isArray(a)?a:y.isDefined(a)?[a]:[I.linear],t.cycle=1,t.value=e[1],t.initialValue=n,t.steps=t.stepList[0],t.interval=t.intervalList[0],t.easing=t.easingList[0],t.step=0,t.cycles=0}},{key:"assignSingleTarget",value:function(t,e,n,i,r,a,o){delete t.valueList,delete t.stepList,delete t.intervalList,delete t.easingList,t.initialValue=n,t.value=e,t.steps=i||0,t.cycles=r||0,t.interval=a||0,t.easing=o}},{key:"snapActualToTarget",value:function(t,e){var n=t.actualValues[e],i=t.targetValues[e].value;t.actualValues[e]="function"==typeof i?i.call(t):i,t.setActualValueLastUpdate(e),O.handleValueChange(t,e,t.actualValues[e],n,0,0)}},{key:"resolveTargetValue",value:function(e,n){var i=!e.targetValues[n]&&y.isDefined(e.targets[n].initialValue)?e.targets[n].initialValue:void 0,r=O.getValueStepsCycles(e,n),a=r[0],o=r[1]||0,s=r[2]||0,u=r[3]||0,l=e.targetValues[n]||O.emptyValue(),c=l.value;e.targetValues[n]=l;var h=y.isDefined(e.targets[n].easing)?e.targets[n].easing:void 0;O.isListTarget(a)?t.assignListTarget(l,a.list,a.list[0],o,s,h):(t.assignSingleTarget(l,a,i,o,u,s,h),o>0&&y.areEqual(c,a,!!e.targets[n]&&!!e.targets[n].deepEquality)&&e.resetTargetStep(n))}}])}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,$(i.key),i)}}function $(t){var e=function(t){if("object"!=U(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:e+""}var X=function(){return function(t,e){return e&&W(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tmodel=e,this.xNext=0,this.xNorth=0,this.xWest=0,this.xEast=0,this.xSouth=0,this.xOverflow=0,this.xOffset=0,this.yNext=0,this.yNorth=0,this.yWest=0,this.yEast=0,this.ySouth=0,this.yOffset=0,this.reset()}),[{key:"reset",value:function(){var t,e;return"BI"===this.tmodel.type?(t=this.tmodel.getX()+this.tmodel.getScrollLeft(),e=this.tmodel.getY()+this.tmodel.getScrollTop(),this.xOffset=0,this.yOffset=0,this.xNext=t,this.xNorth=t,this.xEast=t,this.xSouth=t,this.xWest=t,this.xOverflow=this.tmodel.getRealParent().getX(),this.yNext=e,this.yNorth=e,this.yWest=e,this.yEast=e,this.ySouth=this.tmodel.getRealParent().viewport?this.tmodel.getRealParent().viewport.ySouth:e):(this.xOffset=0,this.yOffset=0,t=this.tmodel.getX(),e=this.tmodel.getY(),this.xNext=t,this.xNorth=t,this.xEast=t,this.xSouth=t,this.xWest=t,this.xOverflow=y.isDefined(this.tmodel.val("xOverflow"))?this.tmodel.val("xOverflow"):t,this.yNext=e,this.yNorth=e,this.yWest=e,this.yEast=e,this.ySouth=e),this}},{key:"setCurrentChild",value:function(t){this.currentChild=t,this.xOffset=t.getDomParent()?-t.getDomParent().getX():0,this.yOffset=t.getDomParent()?-t.getDomParent().getY():0}},{key:"getXNext",value:function(){return this.xNext+this.currentChild.getLeftMargin()+this.xOffset-this.tmodel.getScrollLeft()}},{key:"getYNext",value:function(){return this.yNext+this.currentChild.getTopMargin()+this.yOffset-this.tmodel.getScrollTop()}},{key:"isVisible",value:function(t){var e=t.absX,n=t.absY,i=(t.getDomParent()?t.getDomParent().getMeasuringScale():1)*t.getMeasuringScale(),r=y.isDefined(t.getWidth())?i*t.getWidth():0,a=y.isDefined(t.getHeight())?i*t.getHeight():0,o=t.visibilityStatus,s=t.getBoundingRect();return t.hasChildren()?(o.right=e<=s.right,o.left=e+r>=s.left,o.bottom=n<=s.bottom,o.top=n+a>=s.top):(o.right=e<=re()&&e<=s.right,o.left=e+r>=0&&e+r>=s.left,o.bottom=n<=ae()&&n<=s.bottom,o.top=n+a>=0&&n+a>=s.top),t.visible=o.left&&o.right&&o.top&&o.bottom,t.isVisible()}},{key:"isOverflow",value:function(t,e){return y.isNumber(t)&&y.isNumber(e)&&t>e}},{key:"overflow",value:function(){this.xNext=this.xOverflow,this.yNext=this.ySouth}},{key:"appendNewLine",value:function(){var t=this.currentChild.getInnerHeight()*this.currentChild.getMeasuringScale();this.xNext=this.xOverflow,this.yNext=this.ySouth>this.yNext?this.ySouth+this.currentChild.val("appendNewLine"):this.ySouth+t+this.currentChild.val("appendNewLine"),this.yEast=this.yNext,this.xSouth=this.xNext,this.ySouth=Math.max(this.yNext,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}},{key:"nextLocation",value:function(){var t=this.currentChild.getInnerWidth()*this.currentChild.getMeasuringScale(),e=this.currentChild.getInnerHeight()*this.currentChild.getMeasuringScale(),n=this.currentChild.getInnerContentHeight()*this.currentChild.getMeasuringScale(),i=this.yNext+e+this.currentChild.getTopMargin()+this.currentChild.getBottomMargin();this.xNext+=t+this.currentChild.getLeftMargin()+this.currentChild.getRightMargin(),this.yNext+=n,this.xSouth=this.xNext,this.yEast=this.yNext,this.xEast=Math.max(this.xNext,this.xEast),this.ySouth=Math.max(i,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}},{key:"calcContentWidthHeight",value:function(){this.tmodel.contentHeight=this.ySouth-this.yNorth,this.tmodel.innerContentHeight=this.yEast-this.yNorth,this.tmodel.innerContentWidth=this.xSouth-this.xWest,this.tmodel.contentWidth=this.xEast-this.xWest}}])}();function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,q(i.key),i)}}function q(t){var e=function(t){if("object"!=Y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Y(e)?e:e+""}var z=function(){return function(t,e){return e&&_(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),1===arguments.length&&"object"===Y(e)&&(n=e,e=""),this.type=e||"blank",this.targets=Object.assign({},n),this.activeTargetList=[],this.activeTargetMap={};var i=Jt.getOid(this.type);this.oid=i.oid,this.oidNum=i.num,this.targetValues={},this.actualValues={x:0,y:0,width:0,height:0,leftMargin:0,rightMargin:0,topMargin:0,bottomMargin:0,innerWidth:void 0,innerHeight:void 0,opacity:1,zIndex:1,scale:1,rotate:0,scrollLeft:0,scrollTop:0,textOnly:!0,html:void 0,css:"",style:null,borderRadius:0,children:[],addedChildren:[],allChildren:[],isInFlow:!0,canHaveDom:!0,canHandleEvents:!1,widthFromDom:!1,heightFromDom:!1,keepEventDefault:!1,isIncluded:!0,canBeBracketed:!0,isDomDeletable:!0,calculateChildren:void 0,isVisible:void 0},this.updatingTargetList=[],this.updatingTargetMap={},this.styleTargetList=[],this.styleTargetMap={},this.updatingChildrenList=[],this.updatingChildrenMap={},this.targetMethodMap={},this.parent=null,this.$dom=null,this.visibilityStatus={top:!1,right:!1,bottom:!1,left:!1},this.visible=!1,this.domHeight=void 0,this.domWidth=void 0,this.innerContentWidth=0,this.innerContentHeight=0,this.contentWidth=0,this.contentHeight=0,this.x=0,this.y=0,this.absX=0,this.absY=0,this.inFlowVisibles=[],this.domValues={},this.initTargets()}),[{key:"getParent",value:function(){return this.parent}},{key:"getRealParent",value:function(){return this.parent}},{key:"getDomParent",value:function(){return this.actualValues.domParent?this.actualValues.domParent:null}},{key:"getDomHolder",value:function(){return this.actualValues.domHolder?this.actualValues.domHolder:this.getDomParent()?this.getDomParent().$dom:l.findParentByTarget(this,"domHolder")?l.findParentByTarget(this,"domHolder").$dom:null}},{key:"addToStyleTargetList",value:function(t){O.styleTargetMap[t]&&(t=O.transformMap[t]?"transform":O.dimMap[t]?"dim":t,this.styleTargetMap[t]||(this.styleTargetList.push(t),this.styleTargetMap[t]=!0))}},{key:"bug",value:function(){return[{visible:this.isVisible()},{visibilityStatus:this.visibilityStatus},{hasDom:this.hasDom()},{x:this.getX()},{y:this.getY()},{width:this.getWidth()},{height:this.getHeight()},{activeTargetList:this.activeTargetList},{updatingTargetList:this.updatingTargetList},{styleTargetList:this.styleTargetList},{children:this.getChildren()},{targetValues:this.targetValues},{actualValues:this.actualValues}]}},{key:"initTargets",value:function(){var t=this;this.targetValues={},this.activeTargetMap={},this.activeTargetList=[],Object.keys(this.targets).forEach((function(e){t.processNewTarget(e)}))}},{key:"processNewTarget",value:function(t){O.bindTargetName(this.targets,t),y.isDefined(this.targets[t].initialValue)&&(this.actualValues[t]=this.targets[t].initialValue,this.addToStyleTargetList(t)),!1!==this.targets[t].active&&this.addToActiveTargets(t)}},{key:"hasDomHolderChanged",value:function(){return this.getDomHolder()&&this.getDomHolder().exists()&&this.$dom.parent().getAttribute("id")!==this.getDomHolder().attr("id")}},{key:"hasDom",value:function(){return!!this.$dom&&this.$dom.exists()}},{key:"hasChildren",value:function(){return this.getChildren().length>0}},{key:"getChildren",value:function(){var t=this,e=this.getActualValueLastUpdate("allChildren"),n=this.getActualValueLastUpdate("children"),i=this.getActualValueLastUpdate("addedChildren");if(!e||n>=e||i>=e){var r=this.actualValues.children,a=this.actualValues.addedChildren;this.actualValues.allChildren=[].concat(r,a),r&&r.length>0&&(r.forEach((function(e){return e.parent=t})),this.actualValues.allChildren.sort((function(t,e){return!t.canBeBracketed()&&e.canBeBracketed()?-1:1}))),this.targetValues.allChildren?this.setActualValueLastUpdate("allChildren"):this.setTarget("allChildren",this.actualValues.allChildren)}return this.actualValues.allChildren}},{key:"getLastChild",value:function(){return this.hasChildren()?this.getChildren()[this.getChildren().length-1]:void 0}},{key:"getFirstChild",value:function(){return this.hasChildren()?this.getChildren()[0]:void 0}},{key:"getChild",value:function(t){return this.hasChildren()?this.getChildren()[t]:void 0}},{key:"getChildIndex",value:function(t){return this.getChildren().indexOf(t)}},{key:"getChildrenOids",value:function(){return this.getChildren().oids()}},{key:"filterChildren",value:function(t){return this.getChildren().filter((function(e){return Array.isArray(t)?t.includes(e.type):"function"==typeof t?t.call(e):e.type===t}))}},{key:"findChild",value:function(t){return this.getChildren().find((function(e){return"function"==typeof t?t.call(e):e.type===t}))}},{key:"findLastChild",value:function(t){return this.getChildren().findLast((function(e){return"function"==typeof t?t.call(e):e.type===t}))}},{key:"getParentValue",value:function(t){var e=l.findParentByTarget(this,t);return e?e.val(t):void 0}},{key:"getContentHeight",value:function(){return this.contentHeight}},{key:"getInnerContentHeight",value:function(){return 0}},{key:"getInnerHeight",value:function(){return y.isDefined(this.actualValues.innerHeight)?this.actualValues.innerHeight:this.getHeight()}},{key:"getInnerWidth",value:function(){return y.isDefined(this.actualValues.innerWidth)?this.actualValues.innerWidth:this.getWidth()}},{key:"getInnerXEast",value:function(){return this.absX+this.getInnerWidth()}},{key:"getOuterXEast",value:function(){return this.absX+this.getInnerWidth()}},{key:"getContentWidth",value:function(){return this.contentWidth}},{key:"getUIDepth",value:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}},{key:"addToParentVisibleList",value:function(){this.isVisible()&&this.isInFlow()&&this.getParent()&&this.getParent().inFlowVisibles.push(this)}},{key:"isVisible",value:function(){return y.isDefined(this.actualValues.isVisible)?this.actualValues.isVisible:this.visible}},{key:"shouldCalculateChildren",value:function(){return y.isDefined(this.actualValues.calculateChildren)?this.actualValues.calculateChildren:this.isVisible()&&this.isIncluded()&&(this.hasChildren()||this.getContentHeight()>0)}},{key:"createViewport",value:function(){return this.viewport=this.viewport?this.viewport.reset():new X(this),this.viewport}},{key:"setLocation",value:function(t){this.x=t.getXNext(),this.y=t.getYNext()}},{key:"calculateAbsolutePosition",value:function(t,e){var n=this.getBoundingRect();this.absX=n.left+t,this.absY=n.top+e}},{key:"getBoundingRect",value:function(){return y.getBoundingRect(this)}},{key:"isMarkedDeleted",value:function(){return!0===this.val("tmodelDeletedFlag")}},{key:"markAsDeleted",value:function(){this.val("tmodelDeletedFlag",!0),this.getChildren().forEach((function(t){return t.markAsDeleted()}))}},{key:"isTextOnly",value:function(){return this.actualValues.textOnly}},{key:"getHtml",value:function(){return this.actualValues.html}},{key:"isInFlow",value:function(){return this.actualValues.isInFlow}},{key:"canHandleEvents",value:function(t){var e=this.actualValues.canHandleEvents;return e===t||Array.isArray(e)&&e.includes(t)}},{key:"keepEventDefault",value:function(){return this.actualValues.keepEventDefault}},{key:"canBeBracketed",value:function(){return this.actualValues.canBeBracketed}},{key:"isIncluded",value:function(){return this.actualValues.isIncluded}},{key:"canHaveDom",value:function(){return this.actualValues.canHaveDom}},{key:"isDomDeletable",value:function(){return this.actualValues.isDomDeletable}},{key:"getOpacity",value:function(){return this.actualValues.opacity}},{key:"getX",value:function(){return this.actualValues.x}},{key:"getY",value:function(){return this.actualValues.y}},{key:"getZIndex",value:function(){return this.actualValues.zIndex}},{key:"getScale",value:function(){return this.actualValues.scale}},{key:"getMeasuringScale",value:function(){return this.actualValues.scale}},{key:"getTopMargin",value:function(){return this.actualValues.topMargin}},{key:"getLeftMargin",value:function(){return this.actualValues.leftMargin}},{key:"getRightMargin",value:function(){return this.actualValues.rightMargin}},{key:"getBottomMargin",value:function(){return this.actualValues.bottomMargin}},{key:"getRotate",value:function(){return this.actualValues.rotate}},{key:"getWidth",value:function(){return this.actualValues.width}},{key:"getHeight",value:function(){return this.actualValues.height}},{key:"getScrollTop",value:function(){return Math.floor(this.actualValues.scrollTop)}},{key:"getScrollLeft",value:function(){return Math.floor(this.actualValues.scrollLeft)}},{key:"getCss",value:function(){return this.actualValues.css.includes("tgt")?this.actualValues.css:this.actualValues.css?"tgt "+this.actualValues.css:"tgt"}},{key:"getStyle",value:function(){return this.actualValues.style}},{key:"getScaledWidth",value:function(){return this.getWidth()*this.getScale()}},{key:"getScaledHeight",value:function(){return this.getHeight()*this.getScale()}},{key:"getTargetStepPercent",value:function(t,e){var n=this.getTargetSteps(t);return e=y.isDefined(e)?e:this.getTargetStep(t),n?e/n:1}},{key:"resetTargetStep",value:function(t){return this.targetValues[t]&&(this.targetValues[t].step=0),this}},{key:"resetTargetExecutionFlag",value:function(t){return this.targetValues[t]&&(this.targetValues[t].executionFlag=!1),this}},{key:"resetTargetCycle",value:function(t){return this.targetValues[t]&&(this.targetValues[t].cycle=0),this}},{key:"resetScheduleTimeStamp",value:function(t){return this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=void 0),this}},{key:"resetTargetInitialValue",value:function(t){return this.targetValues[t]&&(this.targetValues[t].initialValue=void 0),this}},{key:"updateTargetStatus",value:function(t){var e=this.targetValues[t];if(e){var n=this.getTargetCycle(t),i=this.getTargetCycles(t),r=this.getTargetStep(t),a=this.getTargetSteps(t);return this.isExecuted(t)&&r<a||Array.isArray(e.valueList)&&n<e.valueList.length-1?this.targetValues[t].status="updating":!this.isExecuted(t)||this.isTargetInLoop(t)||n<i?this.targetValues[t].status="active":this.targetValues[t].status="done",this.isTargetUpdating(t)?(this.addToUpdatingTargets(t),this.removeFromActiveTargets(t)):this.isTargetActive(t)?(this.addToActiveTargets(t),this.removeFromUpdatingTargets(t)):(this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),Qt.manager.doneTargets.push({tmodel:this,key:t})),this.targetValues[t].status}}},{key:"getTargetStatus",value:function(t){return this.targetValues[t]?this.targetValues[t].status:""}},{key:"isTargetActive",value:function(t){return this.targetValues[t]&&"active"===this.targetValues[t].status}},{key:"isTargetUpdating",value:function(t){return this.targetValues[t]&&"updating"===this.targetValues[t].status}},{key:"isTargetDone",value:function(t){return this.targetValues[t]&&"done"===this.targetValues[t].status}},{key:"isTargetComplete",value:function(t){return this.targetValues[t]&&"complete"===this.targetValues[t].status}},{key:"isExecuted",value:function(t){return this.targetValues[t]&&this.targetValues[t].executionFlag}},{key:"isTargetImperative",value:function(t){return!!this.targetValues[t]&&this.targetValues[t].isImperative}},{key:"getTargetExecutionCount",value:function(t){return this.targetValues[t]?this.targetValues[t].executionCount:0}},{key:"setTargetComplete",value:function(t){this.targetValues[t]&&(this.targetValues[t].status="complete")}},{key:"isTargetEnabled",value:function(t){if(this.isTargetImperative(t))return!0;var e=this.targets[t];return!!y.isDefined(e)&&("function"!=typeof e.enabledOn||e.enabledOn.call(this))}},{key:"isTargetInLoop",value:function(t){return!!this.targets[t]&&("function"==typeof this.targets[t].loop?this.targets[t].loop.call(this,t):this.targets[t].loop)}},{key:"doesTargetEqualActual",value:function(t){if(this.targetValues[t]){var e=!!this.targets[t]&&this.targets[t].deepEquality;return e?y.areEqual(this.getTargetValue(t),this.val(t),e):this.getTargetValue(t)===this.val(t)}return!1}},{key:"getTargetValue",value:function(t){return this.targetValues[t]?"function"==typeof this.targetValues[t].value?this.targetValues[t].value.call(this):this.targetValues[t].value:void 0}},{key:"getTargetSteps",value:function(t){return this.targetValues[t]&&this.targetValues[t].steps||0}},{key:"getTargetStep",value:function(t){return this.targetValues[t]?this.targetValues[t].step:0}},{key:"getScheduleTimeStamp",value:function(t){return this.targetValues[t]?this.targetValues[t].scheduleTimeStamp:void 0}},{key:"getTargetInitialValue",value:function(t){return this.targetValues[t]?this.targetValues[t].initialValue:void 0}},{key:"getActualValueLastUpdate",value:function(t){return this.targetValues[t]?this.targetValues[t].actualValueLastUpdate:void 0}},{key:"getTargetCreationTime",value:function(t){return this.targetValues[t]?this.targetValues[t].creationTime:void 0}},{key:"incrementTargetStep",value:function(t){return this.targetValues[t]&&this.targetValues[t].step++,this.targetValues[t].step}},{key:"getTargetCycles",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycles||0}},{key:"getTargetCycle",value:function(t){return this.targetValues[t]?this.targetValues[t].cycle:0}},{key:"incrementTargetCycle",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycle++,this.targetValues[t].cycle}},{key:"setTargetInterval",value:function(t,e){return this.targetValues[t]&&(this.targetValues[t].interval=e),this.targetValues[t].interval}},{key:"setScheduleTimeStamp",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=e)}},{key:"setTargetInitialValue",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].initialValue=e)}},{key:"setActualValueLastUpdate",value:function(t){this.targetValues[t]&&(this.targetValues[t].actualValueLastUpdate=n.now())}},{key:"getTargetEasing",value:function(t){return"function"==typeof this.targetValues[t].easing?this.targetValues[t].easing:void 0}},{key:"getTargetInterval",value:function(t){return this.targetValues[t]?this.targetValues[t].interval:void 0}},{key:"getTargetEventFunctions",value:function(t){return this.targetValues[t]?this.targetValues[t].events:void 0}},{key:"setTarget",value:function(t,e,n,i,r,a){return a=a||this.key,B.executeImperativeTarget(this,t,e,n,i,r,a),this}},{key:"val",value:function(t,e){return 2===arguments.length?(this.actualValues[t]=e,this):this.actualValues[t]}},{key:"addValue",value:function(t,e){return this.actualValues[t]+=e,this}},{key:"multiplyValue",value:function(t,e){return this.actualValues[t]*=e,this}},{key:"addChild",value:function(t,e){var n=this.actualValues.addedChildren;return e=y.isDefined(e)?e:n.length,t.parent=this,e>=n.length?n.push(t):n.splice(e,0,t),this.setActualValueLastUpdate("children"),this.targetValues.addedChildren?this.setActualValueLastUpdate("addedChildren"):this.setTarget("addedChildren",n),Qt.manager.scheduleRun(10,"addChild-"+this.oid+"-"+t.oid),this}},{key:"addToUpdatingChildren",value:function(t){this.updatingChildrenMap[t.oid]||(this.updatingChildrenMap[t.oid]=!0,this.updatingChildrenList.push(t.oid))}},{key:"removeFromUpdatingChildren",value:function(t){if(this.updatingChildrenMap[t.oid]){delete this.updatingChildrenMap[t.oid];var e=this.updatingChildrenList.indexOf(t.oid);e>=0&&this.updatingChildrenList.splice(e,1)}}},{key:"hasUpdatingChildren",value:function(){return this.updatingChildrenList.length>0}},{key:"hasTargetUpdates",value:function(t){return t?!0===this.updatingTargetMap[t]:this.updatingTargetList.length>0}},{key:"removeTarget",value:function(t){delete this.targets[t],this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),delete this.targetValues[t]}},{key:"addTarget",value:function(t,e){this.addTargets(function(t,e,n){return(e=q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,e))}},{key:"addTargets",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.targets[n]=t[n],e.removeFromUpdatingTargets(n),e.processNewTarget(n)})),Qt.manager.scheduleRun(10,"addTargets-"+this.oid)}},{key:"addToActiveTargets",value:function(t){this.activeTargetMap[t]||(this.activeTargetMap[t]=!0,"start"===t?this.activeTargetList.unshift("start"):"width"===t||"height"===t?-1!==this.activeTargetList.indexOf("start")?this.activeTargetList.splice(1,0,t):this.activeTargetList.unshift(t):this.activeTargetList.push(t))}},{key:"removeFromActiveTargets",value:function(t){if(this.activeTargetMap[t]){delete this.activeTargetMap[t];var e=this.activeTargetList.indexOf(t);e>=0&&this.activeTargetList.splice(e,1)}}},{key:"addToUpdatingTargets",value:function(t){this.updatingTargetMap[t]||(this.updatingTargetMap[t]=!0,this.updatingTargetList.push(t),this.getParent()&&this.getParent().addToUpdatingChildren(this))}},{key:"removeFromUpdatingTargets",value:function(t){if(this.updatingTargetMap[t]){delete this.updatingTargetMap[t];var e=this.updatingTargetList.indexOf(t);e>=0&&this.updatingTargetList.splice(e,1),0===this.updatingTargetList.length&&this.getParent()&&this.getParent().removeFromUpdatingChildren(this)}}},{key:"deleteTargetValue",value:function(t){delete this.targetValues[t],this.addToActiveTargets(t),this.removeFromUpdatingTargets(t),Qt.manager.scheduleRun(10,"deleteTargetValue-"+this.oid+"-"+t)}},{key:"resetImperative",value:function(t){var e=this.targetValues[t];return e&&(e.isImperative=!1,e.executionFlag=!1,e.scheduleTimeStamp=void 0,e.step=0,e.cycle=0,e.steps=0,e.cycles=0,e.interval=0),this}},{key:"activateTarget",value:function(t){return this.activateTargets([t])}},{key:"activateTargets",value:function(t){var e=this;return t.forEach((function(t){var n=e.targetValues[t];n?(n.executionFlag=!1,n.scheduleTimeStamp=void 0,n.step=0,n.cycle=0,e.updateTargetStatus(t)):e.addToActiveTargets(t)})),Qt.manager.scheduleRun(10,"activateTargets-"+this.oid),this}},{key:"setTargetMethodName",value:function(t,e){this.targetMethodMap[t]||(this.targetMethodMap[t]=[]),this.targetMethodMap[t].includes(e)||this.targetMethodMap[t].push(e)}}])}();function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function K(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,J(i.key),i)}}function J(t){var e=function(t){if("object"!=Q(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Q(e)?e:e+""}var G=function(){return function(t,e){return e&&K(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.screen={x:0,y:0,width:0,height:0}}),[{key:"measureScreen",value:function(){return this.screen.width=document.documentElement.clientWidth||document.body.clientWidth,this.screen.height=document.documentElement.clientHeight||document.body.clientHeight,this}}])}();function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function tt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,et(i.key),i)}}function et(t){var e=function(t){if("object"!=Z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Z(e)?e:e+""}var nt=function(){return function(t,e){return e&&tt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentTouch={deltaY:0,deltaX:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""},this.touchTimeStamp=0,this.cursor={x:0,y:0},this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0,this.touchCount=0,this.currentEvent="",this.currentHandlers={touch:null,scrollLeft:null,scrollTop:null,pinch:null},this.eventQueue=[],this.eventMap={touchstart:{to:"touchstart",inputType:"touch",eventType:"start",order:1,windowEvent:!1},touchmove:{to:"touchmove",inputType:"touch",eventType:"move",order:1,windowEvent:!1},touchend:{to:"touchend",inputType:"touch",eventType:"end",order:1,windowEvent:!1},touchcancel:{to:"touchend",inputType:"touch",eventType:"cancel",order:1,windowEvent:!1},mousedown:{to:"mousedown",inputType:"mouse",eventType:"start",order:2,windowEvent:!1},mousemove:{to:"mousemove",inputType:"mouse",eventType:"move",order:2,windowEvent:!1},mouseup:{to:"mouseup",inputType:"mouse",eventType:"end",order:2,windowEvent:!1},mousecancel:{to:"mouseup",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!1},pointerdown:{to:"mousedown",inputType:"pointer",eventType:"start",order:3,windowEvent:!1},pointermove:{to:"mousemove",inputType:"pointer",eventType:"move",order:3,windowEvent:!1},pointerup:{to:"mouseup",inputType:"pointer",eventType:"end",order:3,windowEvent:!1},pointercancel:{to:"mousecancel",inputType:"pointer",eventType:"cancel",order:3,windowEvent:!1},wheel:{to:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1},DOMMouseScroll:{to:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1},mousewheel:{to:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1},keyup:{to:"key",inputType:"",eventType:"key",order:1,windowEvent:!0},keydown:{to:"key",inputType:"",eventType:"key",order:1,windowEvent:!0},resize:{to:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0},orientationchange:{to:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0}},this.domEvents=Object.keys(this.eventMap).filter((function(t){return!e.eventMap[t].windowEvent})),this.windowEvents=Object.keys(this.eventMap).filter((function(t){return e.eventMap[t].windowEvent})),this.bindedHandleEvent=this.bindedHandleEvent||this.handleEvent.bind(this)}),[{key:"removeHandlers",value:function(t){var e=this;this.domEvents.forEach((function(n){t.detachEvent(n,e.bindedHandleEvent)}))}},{key:"addHandlers",value:function(t){var e=this;this.domEvents.forEach((function(n){t.addEvent(n,e.bindedHandleEvent)}))}},{key:"removeWindowHandlers",value:function(){var t=this;this.windowEvents.forEach((function(e){Qt.$window.detachEvent(e,t.bindedHandleEvent)}))}},{key:"addWindowHandlers",value:function(){var t=this;this.windowEvents.forEach((function(e){Qt.$window.addEvent(e,t.bindedHandleEvent)}))}},{key:"captureEvents",value:function(){if(0===this.eventQueue.length)return this.currentEvent="",void(this.currentKey="");var t=this.eventQueue.shift();"resize"===t.eventName?Qt.dim.measureScreen():(t.tmodel&&this.findEventHandlers(t.tmodel),this.currentEvent=t.eventName,this.currentKey=this.currentTouch.key,this.currentTouch.key=""),Qt.manager.scheduleRun(10,"captureEvents-".concat(t))}},{key:"handleEvent",value:function(t){if(t){var e=t.type,i=this.eventMap[e];if(i){var r=i.to,a=i.inputType,o=i.eventType,s=i.order,u=n.now();this.touchTimeStamp=Math.max(u,this.touchTimeStamp);var l=this.getTModelFromEvent(t),c=this.eventQueue.length>0?this.eventQueue[this.eventQueue.length-1]:null;if(c){var h=c.eventItem,d=u-c.timeStamp;if(a&&h.inputType&&h.inputType!==a&&s>h.order)return;if(this.eventQueue.length>10&&d<50)for(var f=0,g=this.eventQueue.length-1;g>=0&&this.eventQueue[g].eventItem.eventType===o;g--)if(++f>5)return}switch(this.eventQueue.push({eventName:r,eventItem:i,originalName:e,tmodel:l,timeStamp:u}),r){case"mousedown":case"touchstart":this.clearStart(),this.clearTouch(),this.touchCount=this.countTouches(t),this.preventDefault(l,r)&&t.preventDefault(),this.start0=this.getTouch(t),this.start1=this.getTouch(t,1),this.cursor.x=this.start0.x,this.cursor.y=this.start0.y,t.stopPropagation();break;case"mousemove":case"touchmove":var y=this.getTouch(t);this.cursor.x=y.x,this.cursor.y=y.y,this.preventDefault(l,r)&&t.preventDefault(),this.touchCount>0&&(this.move(t),t.stopPropagation());break;case"mouseup":case"touchend":if(this.preventDefault(l,r)&&t.preventDefault(),this.end(t),this.start0){var v=this.end0?Math.abs(this.end0.originalX-this.start0.originalX):0,p=this.end0?Math.abs(this.end0.originalY-this.start0.originalY):0,m=this.end0?Math.abs(this.end0.timeStamp-this.start0.timeStamp):300;v<=1&&p<=1&&m<=300&&this.eventQueue.push({eventName:"click",eventItem:i,originalName:e,tmodel:l,timeStamp:u})}this.clearStart(),this.touchCount=0,t.stopPropagation();break;case"wheel":this.preventDefault(l,r)&&t.preventDefault(),this.wheel(t);break;case"key":this.currentTouch.key=t.which||t.keyCode}Qt.manager.scheduleRun(0,"".concat(e,"-").concat(r,"-").concat((t.target.tagName||"").toUpperCase()))}}}},{key:"findEventHandlers",value:function(t){var e=t?l.findFirstTouchHandler(t):null,n=this.end0?this.currentHandlers.scrollLeft:t?l.findFirstScrollLeftHandler(t):null,i=this.end0?this.currentHandlers.scrollTop:t?l.findFirstScrollTopHandler(t):null,r=t?l.findFirstPinchHandler(t):null;this.currentHandlers.scrollLeft===n&&this.currentHandlers.scrollTop===i||this.clearTouch(),this.currentHandlers.touch=e,this.currentHandlers.scrollLeft=n,this.currentHandlers.scrollTop=i,this.currentHandlers.pinch=r}},{key:"preventDefault",value:function(t,e){return!t||!(!0===t.keepEventDefault()||Array.isArray(t.keepEventDefault())&&t.keepEventDefault().includes(e))}},{key:"getTModelFromEvent",value:function(t){var e="function"==typeof t.target.getAttribute?t.target.getAttribute("id"):"";return e&&Qt.manager.visibleOidMap[e]||(e=T.findNearestParentWithId(t.target)),Qt.manager.visibleOidMap[e]}},{key:"clearStart",value:function(){this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0,this.touchCount=0}},{key:"clearTouch",value:function(){this.currentTouch={deltaY:0,deltaX:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""}}},{key:"clearAll",value:function(){this.clearStart(),this.clearTouch(),this.eventQueue.length=0,this.touchTimeStamp=0}},{key:"resetEventsOnTimeout",value:function(){if(this.touchTimeStamp>0){var t=n.now()-this.touchTimeStamp,e=0;Math.abs(this.currentTouch.deltaY)>.001||Math.abs(this.currentTouch.deltaX)>.001||Math.abs(this.currentTouch.pinchDelta)>.001?t>70?this.clearTouch():this.currentTouch.manualMomentumFlag&&(this.currentTouch.deltaY*=.85,this.currentTouch.deltaX*=.85,e=10):t>600&&(this.clearTouch(),this.touchTimeStamp=0),Qt.manager.scheduleRun(e,"scroll decay")}}},{key:"deltaX",value:function(){return this.currentTouch.deltaX}},{key:"deltaY",value:function(){return this.currentTouch.deltaY}},{key:"pinchDelta",value:function(){return this.currentTouch.pinchDelta}},{key:"dir",value:function(){return this.currentTouch.dir}},{key:"getScrollLeftHandler",value:function(){return this.currentHandlers.scrollLeft}},{key:"getScrollTopHandler",value:function(){return this.currentHandlers.scrollTop}},{key:"getPinchHandler",value:function(){return this.currentHandlers.pinch}},{key:"getTouchHandler",value:function(){return this.currentHandlers.touch}},{key:"getTouchHandlerType",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.type:null}},{key:"getTouchHandlerOid",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.oid:null}},{key:"isClickEvent",value:function(){return"click"===this.currentEvent}},{key:"isResizeEvent",value:function(){return"resize"===this.currentEvent}},{key:"getCurrentEvent",value:function(){return this.currentEvent}},{key:"isClickHandler",value:function(t){return this.getTouchHandler()===t&&this.isClickEvent()}},{key:"isClickHandlerType",value:function(t){return this.getTouchHandlerType()===t&&this.isClickEvent()}},{key:"isTouchHandler",value:function(t){return this.getTouchHandler()===t&&t.canHandleEvents("touch")}},{key:"isScrollLeftHandler",value:function(t){return this.currentHandlers.scrollLeft===t}},{key:"isScrollTopHandler",value:function(t){return this.currentHandlers.scrollTop===t}},{key:"isPinchHandler",value:function(t){return this.currentHandlers.pinch===t}},{key:"isCurrentSource",value:function(t){return this.currentTouch.source===t}},{key:"isTouchHandlerType",value:function(t){return this.getTouchHandlerType()===t}},{key:"isTouchHandlerOrAncestor",value:function(t){for(var e=this.getTouchHandler();e;){if(e===t)return!0;e=e.getParent()}return!1}},{key:"countTouches",value:function(t){var e,n;return(null===(e=t.touches)||void 0===e?void 0:e.length)||(null===(n=t.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n.length)||1}},{key:"getTouch",value:function(t){var e,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(null===(e=t.touches)||void 0===e?void 0:e[r])||(null===(i=t.originalEvent)||void 0===i||null===(i=i.touches)||void 0===i?void 0:i[r])||t,o=y.isDefined(a.clientX)?a.clientX:a.pageX||0,s=y.isDefined(a.clientY)?a.clientY:a.pageY||0;return{x:o,y:s,originalX:o,originalY:s,target:a.target,timeStamp:n.now()}}},{key:"move",value:function(t){if(1===this.touchCount){if(this.start0.y=this.end0?this.end0.y:this.start0.y,this.start0.x=this.end0?this.end0.x:this.start0.x,this.end0=this.getTouch(t),y.isDefined(this.end0)){var e=this.start0.x-this.end0.x,n=this.start0.y-this.end0.y;this.setDeltaXDeltaY(e,n,"touch")}}else if(this.touchCount>=2){this.end0=this.getTouch(t),this.end1=this.getTouch(t,1);var i=y.distance(this.start0.x,this.start0.y,this.start1.x,this.start1.y),r=y.distance(this.end0.x,this.end0.y,this.end1.x,this.end1.y)-i;this.currentTouch.pinchDelta=r>0?.3:r<0?-.3:0}}},{key:"end",value:function(){if(this.touchCount<=1&&this.start0){var t,e=this.end0?this.start0.x-this.end0.x:0,i=this.end0?this.start0.y-this.end0.y:0,r=this.end0?this.end0.timeStamp-this.start0.timeStamp:0;"horizontal"===this.currentTouch.orientation&&Math.abs(e)>1?(t=y.momentum(0,e,r),this.currentTouch.deltaX=t.distance,this.currentTouch.manualMomentumFlag=!0,this.touchTimeStamp=n.now()+t.duration):"vertical"===this.currentTouch.orientation&&Math.abs(i)>1&&(t=y.momentum(0,i,r),this.currentTouch.deltaY=t.distance,this.currentTouch.manualMomentumFlag=!0,this.touchTimeStamp=n.now()+t.duration)}}},{key:"setDeltaXDeltaY",value:function(t,e,n){var i=Math.abs(t)-Math.abs(e);i>=1?("none"===this.currentTouch.orientation||"vertical"===this.currentTouch.orientation&&i>3||"horizontal"===this.currentTouch.orientation)&&(this.currentTouch.orientation="horizontal",this.currentTouch.dir=t<=-1?"left":t>=1?"right":this.currentTouch.dir,this.currentTouch.source=n,this.currentTouch.deltaX=t,this.currentTouch.deltaY=0):"none"===this.currentTouch.orientation||"horizontal"===this.currentTouch.orientation&&i<-3||"vertical"===this.currentTouch.orientation?(this.currentTouch.orientation="vertical",this.currentTouch.dir=e<=-1?"up":e>=1?"down":this.currentTouch.dir,this.currentTouch.source=n,this.currentTouch.deltaY=e,this.currentTouch.deltaX=0):(this.currentTouch.deltaY=0,this.currentTouch.deltaX=0)}},{key:"wheel",value:function(t){var e=0,n=0;this.currentTouch.pinchDelta=0,this.start0=this.getTouch(t),t.ctrlKey&&"deltaY"in t?this.currentTouch.pinchDelta=-t.deltaY/10:"deltaX"in t?(e=t.deltaX,n=t.deltaY):"wheelDeltaX"in t?(e=-t.wheelDeltaX/120,n=-t.wheelDeltaY/120):"wheelDelta"in t?e=-t.wheelDelta/120:"detail"in t&&(e=t.detail/3),this.setDeltaXDeltaY(e,n,"wheel")}}])}();function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){at(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function at(t,e,n){return(e=ut(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function st(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ut(i.key),i)}}function ut(t){var e=function(t){if("object"!=ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:e+""}var lt=function(){return function(t,e){return e&&st(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resultMap={},this.loadingMap={},this.singleLoadList=void 0,this.groupLoadList=void 0,this.imgLoadList=void 0,this.stopLoadingAfterAttempts=y.isDefined(Qt.stopLoadingAfterAttempts)?Qt.stopLoadingAfterAttempts:10,this.attemptFailedInterval=y.isDefined(Qt.attemptFailedInterval)?Qt.attemptFailedInterval:2e3,this.statistics={}}),[{key:"initSingleLoad",value:function(t,e,n){this.isLoading(t)||this.isLoaded(t)&&!n||this.getLoadingAttempts(t)>this.stopLoadingAfterAttempts||(this.initLoadingMap(t),this.singleLoadList=this.singleLoadList||{},this.singleLoadList[t]={fetchId:t,query:e})}},{key:"initGroupLoad",value:function(t,e,n,i,r){var a=JSON.stringify({query:n,idKey:i,separator:r});this.isLoading(t)||this.isLoaded(t)||this.getLoadingAttempts(t)>this.stopLoadingAfterAttempts||(this.initLoadingMap(t),this.groupLoadList=this.groupLoadList||{},this.groupLoadList[a]||(this.groupLoadList[a]=[]),this.groupLoadList[a].push({fetchId:t,dataId:e}))}},{key:"initImgLoad",value:function(t,e){this.isLoading(t)||this.isLoaded(t)||this.getLoadingAttempts(t)>this.stopLoadingAfterAttempts||(this.initLoadingMap(t,"image"),this.imgLoadList=this.imgLoadList||{},this.imgLoadList[t]={fetchId:t,src:e})}},{key:"isLoading",value:function(t){return!!y.isDefined(this.loadingMap[t])&&this.loadingMap[t].loadingFlag}},{key:"isLoaded",value:function(t){return y.isDefined(this.resultMap[t])&&!0===this.resultMap[t].success}},{key:"getLoadingAttempts",value:function(t){return y.isDefined(this.loadingMap[t])?this.loadingMap[t].attempts:0}},{key:"getSuccessLoadingTime",value:function(t){return y.isDefined(this.loadingMap[t])&&!0===this.loadingMap[t].success?this.loadingMap[t].loadingTime:void 0}},{key:"getFailedInterval",value:function(t){return y.isDefined(this.loadingMap[t])?this.loadingMap[t].attempts*this.attemptFailedInterval:0}},{key:"fetchResult",value:function(t){return this.resultMap[t]}},{key:"hasLoadedSuccessfully",value:function(t){return this.resultMap[t]&&!0===this.resultMap[t].success}},{key:"hasLoadedUnsuccessfully",value:function(t){return this.resultMap[t]&&!1===this.resultMap[t].success}},{key:"fetchErrors",value:function(t){var e;return null===(e=this.resultMap[t])||void 0===e||null===(e=e.result)||void 0===e?void 0:e.errors}},{key:"initLoadingMap",value:function(t,e){e=e||this.getCategoryFromFetchId(t),y.isDefined(this.loadingMap[t])?Object.assign(this.loadingMap[t],{loadingFlag:!0,startTime:n.now(),loadingTime:void 0}):this.loadingMap[t]={fetchId:t,category:e,loadingFlag:!0,attempts:0,startTime:n.now(),loadingTime:void 0,success:!1}}},{key:"groupLoad",value:function(){var t=this;this.groupLoadList&&(Object.keys(this.groupLoadList).forEach((function(e){var n=t.groupLoadList[e],i=[],r={};if(n.forEach((function(t){var e=t.dataId,n=t.fetchId;i.push(e),r[e]=n})),i.length>0){var a=JSON.parse(e),o=t.updateQueryValue(a.query,i.join(a.separator));t.groupAjax(o,r,a.idKey)}delete t.groupLoadList[e]})),this.groupLoadList=void 0)}},{key:"singleLoad",value:function(){var t=this;this.singleLoadList&&(Object.values(this.singleLoadList).forEach((function(e){var n=e.query,i=e.fetchId;t.singleAjax(n,i)})),this.singleLoadList=void 0)}},{key:"imgLoad",value:function(){var t=this;this.imgLoadList&&(Object.values(this.imgLoadList).forEach((function(e){var n=e.src,i=e.fetchId;t.imgAjax(n,i)})),this.imgLoadList=void 0)}},{key:"updateQueryValue",value:function(t,e){var n=this;return Object.keys(t).forEach((function(i){"%s"===t[i]?t[i]=e:"%d"===t[i]?t[i]="number"==typeof e?e:parseFloat(e):"object"===ot(t[i])&&n.updateQueryValue(t[i],e)})),t}},{key:"singleAjax",value:function(t,e){var n=this,i={dataType:"json",type:"GET",success:function(t){n.updateLoadStatus(e,!0),n.resultMap[e]=rt(rt({},n.loadingMap[e]),{},{result:t}),n.updateStatistics(e),Qt.manager.scheduleRun(0,"singleAjax_success_".concat(e))},error:function(t){n.resultMap[e]={error:t,success:!1},n.updateLoadStatus(e,!1),Qt.manager.scheduleRun(0,"singleAjax_error_".concat(e))}};T.ajax(rt(rt({},i),t))}},{key:"groupAjax",value:function(t,e,n){var i=this,r={dataType:"json",type:"GET",success:function(r){r.forEach((function(t){var r=t[n];if(e[r]){var a=e[r];i.updateLoadStatus(a,!0),i.resultMap[a]=rt(rt({},i.loadingMap[a]),{},{result:t}),i.updateStatistics(a),delete e[r]}})),Object.keys(e).forEach((function(t){var n=e[t];i.loadingMap[n].success||i.updateLoadStatus(n,!1)})),Qt.manager.scheduleRun(0,"groupAjax_success_".concat(t))},error:function(n){Object.keys(e).forEach((function(t){var r=e[t];i.resultMap[r]={error:n,success:!1},i.updateLoadStatus(r,!1)})),Qt.manager.scheduleRun(0,"groupAjax_error_".concat(t))}};T.ajax(rt(rt({},r),t))}},{key:"imgAjax",value:function(t,e){var n=this,i=new Image;i.src=t,i.onload=function(){n.updateLoadStatus(e,!0),n.resultMap[e]=rt(rt({},n.loadingMap[e]),{},{width:i.width,height:i.height,$image:new T(i)}),n.updateStatistics(e,"image"),Qt.manager.scheduleRun(0,"imgAjax_success_".concat(e))},i.onerror=i.onabort=function(){n.resultMap[e]={result:"no image",success:!1},n.updateLoadStatus(e,!1),Qt.manager.scheduleRun(0,"imgAjax_error_".concat(e))}}},{key:"getCategoryFromFetchId",value:function(t){return t.replace(/[^a-zA-Z]/g,"")}},{key:"updateStatistics",value:function(t,e){e=e||this.getCategoryFromFetchId(t),this.statistics[e]?(this.statistics[e].count++,this.statistics[e].totalTime+=this.resultMap[t].loadingTime,this.statistics[e].lastUpdate=n.now(),delete this.statistics[e].averageTime):this.statistics[e]={count:1,totalTime:this.resultMap[t].loadingTime,lastUpdate:n.now()}}},{key:"getAverageLoadingTime",value:function(t){var e,i,r,a=n.now();if(null!==(e=this.statistics[t])&&void 0!==e&&e.averageTime&&a-this.statistics[t].lastUpdate<500)return this.statistics[t].averageTime;var o=(null===(i=this.statistics[t])||void 0===i?void 0:i.totalTime)||0,s=(null===(r=this.statistics[t])||void 0===r?void 0:r.count)||0;return Object.values(this.loadingMap).filter((function(e){return e.category===t})).forEach((function(t){o+=a-t.startTime,s++})),this.statistics[t]?(this.statistics[t].averageTime=s>0?o/s:0,this.statistics[t].lastUpdate=n.now(),this.statistics[t].averageTime):0}},{key:"updateLoadStatus",value:function(t,e){Object.assign(this.loadingMap[t],{loadingFlag:!1,loadingTime:n.now()-this.loadingMap[t].startTime,success:e,attempts:this.loadingMap[t].attempts+1})}}])}();function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,dt(i.key),i)}}function dt(t){var e=function(t){if("object"!=ct(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ct(e)?e:e+""}function ft(t,e,n){return e=yt(e),function(t,e){if(e&&("object"==ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gt()?Reflect.construct(e,n||[],yt(t).constructor):e.apply(t,n))}function gt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gt=function(){return!!t})()}function yt(t){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yt(t)}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vt(t,e)}var pt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ft(this,e,["BI",{canHaveDom:!1,outerXEast:0}])).parent=t,n.newFlag=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vt(t,e)}(e,t),function(t,e){return e&&ht(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"getWidth",value:function(){return this.getContentWidth()}},{key:"getHeight",value:function(){return this.getContentHeight()}},{key:"getInnerWidth",value:function(){return this.innerContentWidth}},{key:"getInnerXEast",value:function(){return y.isDefined(this.getRealParent().val("innerXEast"))?this.getRealParent().val("innerXEast"):this.getRealParent().absX+this.getRealParent().getWidth()}},{key:"getInnerContentHeight",value:function(){return this.innerContentHeight}},{key:"getScrollTop",value:function(){return this.initParents(),this.getRealParent().getScrollTop()}},{key:"getScrollLeft",value:function(){return this.initParents(),this.getRealParent().getScrollLeft()}},{key:"getBoundingRect",value:function(){return this.initParents(),y.getBoundingRect(this.getRealParent())}},{key:"calculateAbsolutePosition",value:function(t,e){var n=this.getBoundingRect();this.absX=n.left+t,this.absY=n.top+e}},{key:"isVisible",value:function(){return this.visibilityStatus.top&&this.visibilityStatus.bottom}},{key:"addToUpdatingChildren",value:function(t){this.getRealParent().addToUpdatingChildren(t)}},{key:"createViewport",value:function(){return this.getRealParent().createViewport.call(this)}},{key:"getRealParent",value:function(){return this.initParents(),this.realParent}},{key:"shouldCalculateChildren",value:function(){var t=this.isVisible()||this.newFlag;return this.newFlag=!1,t}},{key:"getChildren",value:function(){return this.actualValues.children}},{key:"addToParentVisibleList",value:function(){}},{key:"initParents",value:function(){if(!this.realParent&&!this.topBracket){for(var t=this,e=this.bracketParent;e&&"BI"===e.type;)t=e,e=e.bracketParent;this.realParent=e,this.topBracket=t}}},{key:"getChildrenOids",value:function(){for(var t=[],e=this.getChildren(),n=0;n<e.length;n++){var i=e[n];if("BI"===i.type){var r=i.getChildrenOids();t=[].concat(t,[i.oid],r)}else t.push(i.oid+":"+i.getHeight())}return t}}])}(z);function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function bt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,kt(i.key),i)}}function Tt(t,e,n){return(e=kt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kt(t){var e=function(t){if("object"!=mt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mt(e)?e:e+""}var wt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&bt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"generate",value:function(e,n){var i=t.bracketMap[e.oid],r=Math.max(e.getActualValueLastUpdate("allChildren"),e.getActualValueLastUpdate("width"),e.getActualValueLastUpdate("height"));if(i&&i.lastUpdate>=r)i=t.bracketMap[e.oid];else{i={lastUpdate:r,list:[]};for(var a=(n="BI"===e.type||n?n:e.getChildren()).length,o=Math.max(2,Qt.locationManager.bracketThreshold-1),s=!1,u=0,l=0,c=0;c<a;c++){var h=c-l;if(n[c].canBeBracketed()&&(h===o||c===a-1)||!n[c].canBeBracketed()&&h>0){var d=n[c].canBeBracketed()?c+1:c;i.list.push(t.createBracket(e,n,l,d)),l=c+1,u++}u>o&&(s=!0),n[c].canBeBracketed()||(u=0,i.list.push(n[c]),l=c+1)}s?i=t.generate(e,i.list):t.bracketMap[e.oid]=i}return i}},{key:"createBracket",value:function(e,n,i,r){var a,o="".concat(e.oid,"_").concat(e.getWidth(),"_").concat(e.getHeight(),"_").concat(n.slice(i,r).oids("_"));return t.bracketAllMap[o]?a=t.bracketAllMap[o]:(a=new pt(e),t.bracketAllMap[o]=a,a.actualValues.children=n.slice(i,r),"BI"===a.actualValues.children[0].type&&a.actualValues.children.forEach((function(t){t.bracketParent=a})),a.bracketParent=e),a}}])}();function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function Ct(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Vt(i.key),i)}}function Vt(t){var e=function(t){if("object"!=St(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(e)?e:e+""}Tt(wt,"bracketMap",{}),Tt(wt,"bracketAllMap",{});var Lt=function(){return function(t,e){return e&&Ct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hasLocationList=[],this.hasLocationMap={},this.bracketThreshold=6,this.locationCount=[],this.screenWidth=re(),this.screenHeight=ae(),this.resizeFlag=!1}),[{key:"calculateAll",value:function(){this.hasLocationList.length=0,this.hasLocationMap={},this.locationCount.length=0,this.startTime=n.now(),this.resizeFlag=!1,this.screenWidth===re()&&this.screenHeight===ae()||(this.resizeFlag=!0,this.screenWidth=re(),this.screenHeight=ae()),this.calculate()}},{key:"calculate",value:function(){this.addToLocationList(Qt.tRoot),this.calculateContainer(Qt.tRoot)}},{key:"getChildren",value:function(t){return this.isProlificContainer(t)?wt.generate(t).list:t.getChildren()}},{key:"isProlificContainer",value:function(t){return t.canBeBracketed()&&t.getChildren().length>this.bracketThreshold}},{key:"calculateContainer",value:function(t){var e=this,i=this.getChildren(t),r=t.createViewport();t.inFlowVisibles.length=0;for(var a=0,o=i.length,s=function(){var o,s,u=i[a++];if(!u)return 1;var l=u.domValues.x,c=u.domValues.y;e.calculateTargets(u),u.getActualValueLastUpdate("canBeBracketed")>u.getParent().getActualValueLastUpdate("allChildren")&&delete u.getParent().targetValues.allChildren,r.setCurrentChild(u),u.setLocation(r),u.calculateAbsolutePosition(u.x,u.y),s=y.isDefined(t.val("innerXEast"))?t.val("innerXEast"):t.getInnerXEast(),o=y.isDefined(u.val("outerXEast"))?u.val("outerXEast"):u.getOuterXEast(),r.isOverflow(o,s)?(r.overflow(),u.setLocation(r)):u.setLocation(r),u.isIncluded()&&!e.hasLocationMap[u.oid]&&e.addToLocationList(u),!u.isTargetEnabled("x")||u.isTargetUpdating("x")||u.isTargetImperative("x")||0!==u.getTargetSteps("x")?y.isDefined(u.targetValues.x)||u.val("x",u.x):(B.resolveTargetValue(u,"x"),B.snapActualToTarget(u,"x")),!u.isTargetEnabled("y")||u.isTargetUpdating("y")||u.isTargetImperative("y")||0!==u.getTargetSteps("y")?y.isDefined(u.targetValues.y)||u.val("y",u.y):(B.resolveTargetValue(u,"y"),B.snapActualToTarget(u,"y")),l===u.getX()&&c===u.getY()||u.addToStyleTargetList("transform"),u.calculateAbsolutePosition(u.getX(),u.getY()),r.isVisible(u),u.addToParentVisibleList(),u.shouldCalculateChildren()&&e.calculateContainer(u),u.isInFlow()&&(y.isNumber(u.val("appendNewLine"))?(r.appendNewLine(),r.calcContentWidthHeight()):(r.calcContentWidthHeight(),r.nextLocation())),Array.isArray(u.val("contentHeight"))&&u.val("contentHeight").forEach((function(t){var e=u.val(t);u.val(t,u.getContentHeight()),e!==u.val(t)&&u.addToStyleTargetList(t)})),Array.isArray(u.val("contentWidth"))&&u.val("contentWidth").forEach((function(t){var e=u.val(t);u.val(t,u.getContentWidth()),e!==u.val(t)&&u.addToStyleTargetList(t)})),r.calcContentWidthHeight(),e.locationCount.push("".concat(u.oid,"-").concat(u.updatingTargetList.length,"-").concat(n.now()-e.startTime))};a<o&&Qt.isRunning();)s()}},{key:"calculateTargets",value:function(t){if(this.activateTargetsOnEvents(t),Qt.targetManager.applyTargetValues(t),Qt.targetManager.setActualValues(t),t.hasDom()){var e=t.getWidth(),n=t.getHeight();(y.isDefined(t.targetValues.width)||y.isDefined(t.targets.width)||y.isDefined(t.targetValues.contentWidth))&&!t.getTargetValue("widthFromDom")||O.setWidthFromDom(t),(y.isDefined(t.targetValues.height)||y.isDefined(t.targets.height)||y.isDefined(t.targetValues.contentHeight))&&!t.getTargetValue("heightFromDom")||O.setHeightFromDom(t),e===t.getWidth()&&n===t.getHeight()||t.addToStyleTargetList("dim")}}},{key:"activateTargetsOnEvents",value:function(t){var e=[];this.resizeFlag&&t.targets.onResize&&(e=e.concat(t.targets.onResize)),te().isTouchHandler(t)&&t.targets.onTouchEvent&&(e=e.concat(t.targets.onTouchEvent)),te().isClickHandler(t)&&t.targets.onClickEvent&&(e=e.concat(t.targets.onClickEvent)),(te().isScrollLeftHandler(t)&&te().deltaX()||te().isScrollTopHandler(t)&&te().deltaY())&&t.targets.onScrollEvent&&(e=e.concat(t.targets.onScrollEvent)),te().currentKey&&t.targets.onKeyEvent&&(e=e.concat(t.targets.onKeyEvent)),e.forEach((function(e){var n="object"===St(e)?e.key:e,i="object"===St(e)&&e.tmodel?e.tmodel:t;i.targets[n]&&(i.isTargetComplete(n)||""===i.getTargetStatus(n))&&i.activateTarget(n)}))}},{key:"addToLocationList",value:function(t){this.hasLocationList.push(t),this.hasLocationMap[t.oid]=t}}])}();function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Et(t){return function(t){if(Array.isArray(t))return Dt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Dt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Pt(i.key),i)}}function Pt(t){var e=function(t){if("object"!=Mt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mt(e)?e:e+""}var Ot=function(){return function(t,e){return e&&xt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastLink=document.URL,this.pageCache={}}),[{key:"openPage",value:function(t){var e=this;Qt.stop(),Qt.reset(),this.pageCache[t]?(Qt.tRoot=this.pageCache[t].tRoot,Qt.tRoot.getChildren().forEach((function(n,i){n.$dom.innerHTML(e.pageCache[t].htmls[i])})),y.initDoms(this.pageCache[t].visibleList),Qt.manager.lists.visible=Et(this.pageCache[t].visibleList),this.lastLink=t,setTimeout(Qt.start)):(Qt.tRoot.getChildren().forEach((function(t){return t.$dom.innerHTML("")})),Qt.tRoot=Qt.tRootFactory(),this.lastLink=t,setTimeout(Qt.start))}},{key:"openLinkFromHistory",value:function(t){t.link?this.openPage(t.link):t.browserUrl&&(history.replaceState({link:t.browserUrl},"",t.browserUrl),this.openPage(t.browserUrl)),Qt.manager.scheduleRun(0,"pagemanager-openLinkFromHistory")}},{key:"openLink",value:function(t){t=y.getFullLink(t),this.lastLink&&(this.pageCache[this.lastLink]={link:this.lastLink,htmls:Qt.tRoot.getChildren().map((function(t){return t.$dom.innerHTML()})),visibleList:Et(Qt.manager.lists.visible),tRoot:Qt.tRoot}),history.pushState({link:t},"",t),this.openPage(t),Qt.manager.scheduleRun(0,"pagemanager-processOpenLink")}},{key:"updateBrowserUrl",value:function(t){window.history.state.browserUrl?history.replaceState({browserUrl:t},"",t):(this.pageCache[document.URL]={link:document.URL,htmls:Qt.tRoot.getChildren().map((function(t){return t.$dom.innerHTML()})),visibleList:Et(Qt.manager.lists.visible),tRoot:Qt.tRoot},history.pushState({browserUrl:t},"",t)),Qt.manager.scheduleRun(0,"pagemanager-processUpdateBrowserUrl")}},{key:"back",value:function(){return history.back()}}])}();function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function At(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(n),!0).forEach((function(e){It(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function It(t,e,n){return(e=Wt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rt(t){return function(t){if(Array.isArray(t))return Bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Nt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Nt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Nt(t,e){if(t){if("string"==typeof t)return Bt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(t,e):void 0}}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Ut(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Wt(i.key),i)}}function Wt(t){var e=function(t){if("object"!=Ht(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:e+""}var $t=function(){return function(t,e){return e&&Ut(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}),[{key:"init",value:function(){this.lists={visible:[],rerender:[],restyle:[],reattach:[],invisibleDom:[],deletedTModel:[],visibleNoDom:[],updatingTModels:[],updatingTargets:[],activeTargets:[]},this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={},this.doneTargets=[],this.nextRuns=[],this.runningStep=0,this.runningFlag=!1,this.rerunOid="",this.cycleStats={duration:0,count:0,totalDuration:0,average:0}}},{key:"resetRuns",value:function(){this.nextRuns=[],this.runningStep=0,this.runningFlag=!1,this.rerunOid=""}},{key:"resetCycle",value:function(){this.cycleStats.duration=0,this.cycleStats.count=0,this.cycleStats.totalDuration=0,this.cycleStats.average=0}},{key:"clear",value:function(){this.lists.visible.length=0,this.lists.rerender.length=0,this.lists.restyle.length=0,this.lists.reattach.length=0,this.lists.visibleNoDom.length=0,this.lists.updatingTModels.length=0,this.lists.updatingTargets.length=0,this.lists.activeTargets.length=0,this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={}}},{key:"visibles",value:function(t){return this.lists.visible.filter((function(e){return e.type===t||!t})).map((function(t){return t.oid}))}},{key:"findVisible",value:function(t){return this.lists.visible.find((function(e){return e.type===t}))}},{key:"findLastVisible",value:function(t){return this.lists.visible.reverse().find((function(e){return e.type===t}))}},{key:"analyze",value:function(){var t=y.list2map(this.lists.visible);this.clear();var e,n=Ft(Qt.locationManager.hasLocationList);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=i.isVisible();if(i.isMarkedDeleted()&&!this.lists.deletedTModel.includes(i))this.lists.deletedTModel=[].concat(Rt(this.lists.deletedTModel),[i],Rt(y.getDeepList(i))),t[i.oid]=null;else if(r){t[i.oid]=null,!i.hasDom()||i.canHaveDom()||this.lists.invisibleDom.includes(i)||this.lists.invisibleDom.push(i),this.lists.visible.push(i),this.needsRerender(i),this.needsRestyle(i),this.needsReattach(i),i.updatingTargetList.length>0&&(this.lists.updatingTModels.push(i),this.lists.updatingTargets=[].concat(Rt(this.lists.updatingTargets),Rt(i.updatingTargetList)));var a=Object.keys(i.activeTargetMap);a.length>0&&(this.lists.activeTargets=[].concat(Rt(this.lists.activeTargets),["'".concat(i.oid,"'")],a)),Object.keys(i.targetMethodMap).length>0&&(this.targetMethodMap[i.oid]=At({},i.targetMethodMap)),this.visibleOidMap[i.oid]=i,this.visibleTypeMap[i.type]||(this.visibleTypeMap[i.type]=[]),this.visibleTypeMap[i.type].push(i),i.canHaveDom()&&!i.hasDom()&&i.getDomHolder()&&i.getDomHolder().exists()&&!this.lists.visibleNoDom.includes(i)&&this.lists.visibleNoDom.push(i)}}}catch(t){n.e(t)}finally{n.f()}var o=Object.values(t).filter((function(t){return null!==t&&t.hasDom()&&t.isDomDeletable()}));o.forEach((function(t){Qt.manager.lists.invisibleDom.push(t)}))}},{key:"needsRerender",value:function(t){return!(!t.hasDom()||!y.isDefined(t.getHtml())||t.$dom.html()===t.getHtml()&&t.$dom.textOnly===t.isTextOnly()||(this.lists.rerender.push(t),0))}},{key:"needsRestyle",value:function(t){return!!(t.hasDom()&&t.styleTargetList.length>0)&&(this.lists.restyle.push(t),!0)}},{key:"needsReattach",value:function(t){return!(!t.hasDom()||!t.hasDomHolderChanged()||(this.lists.reattach.push(t),0))}},{key:"renderTModels",value:function(){var t,e=Ft(this.lists.rerender);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isTextOnly()?n.$dom.text(n.getHtml()):n.$dom.html(n.getHtml()),n.setActualValueLastUpdate("html"),n.domHeight=void 0,n.domWidth=void 0}}catch(t){e.e(t)}finally{e.f()}}},{key:"reattachTModels",value:function(){var t,e=Ft(this.lists.reattach);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.$dom.detach(),n.getDomHolder().appendTModel$Dom(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"deleteDoms",value:function(){var t,e=Ft(this.lists.invisibleDom);try{var n=function(){var e=t.value;e.domValues={};var n=[].concat(e.targets.onInvisibleEvent,e.targets.onResize);null==n||n.forEach((function(t){e.targets[t]&&e.isTargetComplete(t)&&e.activateTarget(t)})),e.$dom.detach(),e.$dom=null};for(e.s();!(t=e.n()).done;)n()}catch(t){e.e(t)}finally{e.f()}var i,r=Ft(this.lists.deletedTModel);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.removeTModel(a)}}catch(t){r.e(t)}finally{r.f()}var o=this.lists.invisibleDom.length>0||this.lists.deletedTModel.length>0;this.lists.invisibleDom.length=0,this.lists.deletedTModel.length=0,o&&this.scheduleRun(0,"deleteDoms")}},{key:"removeTModel",value:function(t){t.markAsDeleted();var e=t.getParent();if(e&&e.hasChildren()){e.removeFromUpdatingChildren(t);var n=e.val("children").indexOf(t);n>=0&&(e.val("children").splice(n,1),e.setActualValueLastUpdate("children")),(n=e.val("addedChildren").indexOf(t))>=0&&(e.val("addedChildren").splice(n,1),e.setActualValueLastUpdate("addedChildren")),e.setActualValueLastUpdate("allChildren")}t.$dom&&(t.$dom.detach(),t.$dom=null)}},{key:"fixStyles",value:function(){var t,e=Ft(this.lists.restyle);try{var n=function(){var e=t.value;e.styleTargetList.forEach((function(t){switch(t){case"transform":var n=Math.floor(e.getX()),i=Math.floor(e.getY()),r=Math.floor(e.getRotate()),a=y.formatNum(e.getScale(),2);e.domValues.x===n&&e.domValues.y===i&&e.domValues.rotate===r&&e.domValues.scale===a||(e.$dom.transform(n,i,r,a),e.domValues.y=i,e.domValues.x=n,e.domValues.rotate=r,e.domValues.scale=a);break;case"dim":var o=Math.floor(e.getWidth()),s=Math.floor(e.getHeight());e.$dom.width()===o&&e.$dom.height()===s||(e.$dom.width(o),e.$dom.height(s));break;case"style":var u=e.getStyle();y.isDefined(u)&&e.domValues.style!==u&&(e.$dom.setStyleByMap(e.getStyle()),e.domValues.style=u);break;case"css":var l=e.getCss();e.$dom.css()!==l&&e.$dom.css(l);break;case"borderRadius":case"padding":case"lineHeight":case"fontSize":y.isDefined(e.val(t))&&e.domValues[t]!==e.val(t)&&(e.$dom.style(t,y.isNumber(e.val(t))?"".concat(e.val(t),"px"):e.val(t)),e.domValues[t]=e.val(t));break;default:y.isDefined(e.val(t))&&e.domValues[t]!==e.val(t)&&(e.$dom.style(t,e.val(t)),e.domValues[t]=e.val(t))}})),e.styleTargetMap={},e.styleTargetList.length=0};for(e.s();!(t=e.n()).done;)n()}catch(t){e.e(t)}finally{e.f()}}},{key:"completeDoneTModels",value:function(){Qt.manager.doneTargets.forEach((function(t){var e=t.tmodel,n=t.key;e.isTargetDone(n)&&(e.setTargetComplete(n),e.removeFromActiveTargets(e),e.removeFromUpdatingTargets(e))}))}},{key:"createDoms",value:function(){var t=[],e=[];this.lists.visibleNoDom.sort((function(t,e){return t.hasChildren()&&e.hasChildren()?t.getUIDepth()<e.getUIDepth()?-1:1:t.hasChildren()?-1:1}));var n,i=Ft(this.lists.visibleNoDom);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=void 0;T.query("#".concat(r.oid))?(a=new T("#".concat(r.oid)),r.$dom=a):e.push(r)}}catch(t){i.e(t)}finally{i.f()}for(var o=function(){var e=u[s],n=Math.floor(e.getX()),i=Math.floor(e.getY()),r=Math.floor(e.getRotate()),a=y.formatNum(e.getScale(),2),o=Math.floor(e.getWidth()),l=Math.floor(e.getHeight()),c=Math.floor(e.getZIndex()),h=e.getOpacity()?e.getOpacity().toFixed(2):0,d={position:"absolute",top:0,left:0,transform:[n,i,r,a],width:"".concat(o,"px"),height:"".concat(l,"px"),opacity:h,zIndex:c};["fontSize","borderRadius","padding","lineHeight"].forEach((function(t){var n=e.val(t);n&&(d[t]=y.isNumber(n)?"".concat(n,"px"):n)})),["backgroundColor","background","color"].forEach((function(t){var n=e.val(t);n&&(d[t]=n)})),Object.assign(d,e.getStyle());var f=new T;f.create("div"),f.setSelector("#".concat(e.oid)),f.setId(e.oid),f.css(e.getCss()),f.setStyleByMap(d),e.domValues={x:n,y:i,rotate:r,scale:a,style:d},e.$dom=f;var g=t.find((function(t){return t.domHolder===e.getDomHolder()}));g?g.tmodels.push(e):t.push({domHolder:e.getDomHolder(),tmodels:[e]})},s=0,u=e;s<u.length;s++)o();t.map((function(t){t.tmodels.map((function(e){t.domHolder.appendTModel$Dom(e)}))})),t.length&&Qt.manager.scheduleRun(1,"createDom")}},{key:"scheduleRun",value:function(t,e){if(t<1&&0===Qt.throttle)Qt.manager.run(e,t);else{var i=n.delay((function(){Qt.manager.run(e,t)}),e,0===Qt.throttle?t||0:Qt.throttle),r=this.nextRuns.length>0?this.nextRuns[this.nextRuns.length-1]:null;i&&(!r||i.delay>r.delay)?this.nextRuns.push(i):i&&r&&i.delay<=r.delay&&Qt.manager.runningFlag&&(Qt.manager.rerunOid=e)}}},{key:"run",value:function(t,e){Qt.isRunning()?Qt.manager.runningFlag?Qt.manager.rerunOid=t:(Qt.manager.runningFlag=!0,window.requestAnimationFrame((function(){for(var i=Qt.manager.runningStep,r=n.now();n.now()-r<25&&Qt.manager.runningStep<7&&Qt.isRunning();){switch(Qt.manager.runningStep){case 0:Qt.events.captureEvents(),Qt.manager.doneTargets.length>0&&(Qt.manager.completeDoneTModels(),Qt.manager.doneTargets.length=0),Qt.locationManager.calculateTargets(Qt.tRoot),Qt.locationManager.calculateAll(),Qt.events.resetEventsOnTimeout();break;case 1:Qt.manager.analyze();break;case 2:Qt.manager.createDoms();break;case 3:Qt.manager.renderTModels(),Qt.manager.reattachTModels();break;case 4:Qt.manager.fixStyles();break;case 5:Qt.manager.deleteDoms();break;case 6:Qt.loader.singleLoad(),Qt.loader.groupLoad(),Qt.loader.imgLoad()}Qt.manager.runningStep++}var a=n.now()-r;if(Qt.manager.cycleStats.duration=0===i?a:Qt.manager.cycleStats.duration+a,Qt.debugLevel>0&&(n.log(Qt.debugLevel>0&&Qt.manager.cycleStats.duration>10)("it took: ".concat(Qt.manager.cycleStats.duration,", ").concat(t)),n.log(Qt.debugLevel>0&&Qt.manager.cycleStats.duration>10)("count: ".concat(Qt.locationManager.locationCount)),n.log(Qt.debugLevel>1)("request from: ".concat(t," delay:  ").concat(e))),Qt.manager.runningFlag=!1,7!==Qt.manager.runningStep)Qt.manager.run("rendering: ".concat(t," ").concat(Qt.manager.runningStep));else if(Qt.manager.cycleStats.count++,Qt.manager.cycleStats.totalDuration+=Qt.manager.cycleStats.duration,Qt.manager.cycleStats.average=Qt.manager.cycleStats.totalDuration/Qt.manager.cycleStats.count,Qt.manager.rerunOid){Qt.manager.runningStep=0;var o=Qt.manager.rerunOid;Qt.manager.rerunOid="",Qt.manager.run(o)}else Qt.manager.runningStep=0,Qt.manager.getNextRun()}))):this.getNextRun()}},{key:"getNextRun",value:function(){if(this.nextRuns.length>0&&Qt.isRunning()){var t=this.nextRuns.pop();t&&Qt.manager.scheduleRun(t.timeStamp-n.now(),t.oid)}}}])}();function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Yt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return _t(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function qt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,zt(i.key),i)}}function zt(t){var e=function(t){if("object"!=Xt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xt(e)?e:e+""}var Qt,Kt=function(){return function(t,e){return e&&qt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"applyTargetValues",value:function(t){t.targetMethodMap={};var e,n=Yt(t.activeTargetList.slice(0));try{for(n.s();!(e=n.n()).done;){var i=e.value;t.isTargetImperative(i)||this.applyTargetValue(t,i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"applyTargetValue",value:function(t,e){var n=t.targets[e];if(y.isDefined(n))if("function"==typeof n.enabledOn&&t.setTargetMethodName(e,"enabledOn"),t.isTargetEnabled(e)){if(!(t.isExecuted(e)&&t.getTargetStep(e)===t.getTargetSteps(e)&&O.scheduleExecution(t,e)>0)){t.resetScheduleTimeStamp(e),t.isExecuted(e)&&t.getTargetCycle(e)<t.getTargetCycles(e)&&(t.incrementTargetCycle(e,t.getTargetCycle(e)),t.resetTargetStep(e),t.resetTargetInitialValue(e)),B.executeDeclarativeTarget(t,e);var i=O.scheduleExecution(t,e);i>0&&Qt.manager.scheduleRun(i,"actualInterval__".concat(t.oid,"__").concat(e))}}else Qt.manager.scheduleRun(10,"applyTargetValue-disabled-".concat(t.oid,"__").concat(e));else t.removeFromActiveTargets(e)}},{key:"setActualValues",value:function(t){var e,n=Yt(t.updatingTargetList.slice(0));try{for(n.s();!(e=n.n()).done;){var i=e.value;0===O.scheduleExecution(t,i)&&(t.addToStyleTargetList(i),this.setActualValue(t,i))}}catch(t){n.e(t)}finally{n.f()}}},{key:"setActualValue",value:function(t,e){var n=t.targetValues[e];if(n)if(t.isTargetEnabled(e)){var i,r,a,o=t.getTargetValue(e),s=t.getTargetStep(e),u=t.getTargetSteps(e),c=t.getTargetCycle(e),h=t.getTargetInterval(e)||0,d=t.actualValues[e],f=s,g=c,v=t.getTargetInitialValue(e);if(s<=u&&(y.isDefined(v)||(v=t.actualValues[e],t.setTargetInitialValue(e,v)),t.actualValues[e]=O.morph(t,e,v,o,s,u),t.setActualValueLastUpdate(e),t.isTargetImperative(e)?(i=n.originalTargetName,a=t,(r=t.targets[n.originalTargetName])||(r=(a=l.findParentByTarget(t,i)).targets[n.originalTargetName]),r&&"function"==typeof r.onImperativeStep&&(r.onImperativeStep.call(a,e,a.actualValues[e],s,u),a.setTargetMethodName(i,"onImperativeStep"))):O.handleValueChange(t,e,t.actualValues[e],d,f,g),t.incrementTargetStep(e),t.resetScheduleTimeStamp(e),t.updateTargetStatus(e),t.isTargetUpdating(e)))Qt.manager.scheduleRun(h,"".concat(t.oid,"---").concat(e,"-").concat(s,"/").concat(u,"-").concat(c,"-").concat(h));else{t.actualValues[e]=o,t.setActualValueLastUpdate(e),s=t.getTargetStep(e);var p=0;n.valueList&&c<n.valueList.length-1?(t.incrementTargetCycle(e,t.getTargetCycle(e)),c=t.getTargetCycle(e),t.resetTargetStep(e),n.initialValue=n.value,n.value=n.valueList[c],n.steps=n.stepList[(c-1)%n.stepList.length],n.interval=n.intervalList[(c-1)%n.intervalList.length],n.easing=n.easingList[(c-1)%n.easingList.length],p=h):t.isTargetImperative(e)?(i=n.originalTargetName,a=t,(r=t.targets[n.originalTargetName])||(r=(a=l.findParentByTarget(t,i)).targets[n.originalTargetName]),r&&"function"==typeof r.onImperativeStep&&(r.onImperativeStep.call(a,e,a.actualValues[e],s,u),a.setTargetMethodName(i,"onImperativeStep")),r&&"function"==typeof r.onImperativeEnd&&(r.onImperativeEnd.call(a,e,a.actualValues[e]),a.setTargetMethodName(i,"onImperativeEnd"))):(t.getTargetCycle(e)<t.getTargetCycles(e)&&(t.incrementTargetCycle(e,t.getTargetCycle(e)),t.resetTargetStep(e).resetTargetInitialValue(e).resetTargetExecutionFlag(e),B.executeDeclarativeTarget(t,e)),"object"===Xt(t.targets[e])&&"function"==typeof t.targets[e].onStepsEnd&&(t.targets[e].onStepsEnd.call(t,c),t.setTargetMethodName(e,"onStepsEnd"))),t.updateTargetStatus(e),Qt.manager.scheduleRun(p,"".concat(t.oid,"---").concat(e,"-").concat(s,"/").concat(u,"-").concat(c,"-").concat(h))}}else Qt.manager.scheduleRun(10,"setActualValue-disabled-".concat(t.oid,"__").concat(e))}}])}(),Jt=function(t){var e,i;e=t,i={throttle:0,debugLevel:0,runningFlag:!1,init:function(){return n.setup(),i.$window=new T(window),i.$window.addEvent("popstate",(function(t){t.state&&Qt.pager.openLinkFromHistory(t.state)})),i.loader=new lt,i.pager=new Ot,i.dim=(new G).measureScreen(),i.events=new nt,i.locationManager=new Lt,i.targetManager=new Kt,i.manager=new $t,i.tRootFactory=function(){var t=new z("targetj");return t.addChild=function(e,n){y.isDefined(e.targets.domHolder)||e.addTarget("domHolder",{value:function(){var t;return T.query("#tj-root")?t=new T("#tj-root"):((t=new T).create("div"),t.setSelector("#tj-root"),t.setId("#tj-root"),t.attr("tabindex","0"),new T("body").insertFirst$Dom(t)),t}}),y.isDefined(e.targets.addEventHandler)||e.addTarget("addEventHandler",{value:function(){i.events.removeHandlers(this.$dom),i.events.addHandlers(this.$dom),this.hasDom&&this.$dom.focus()},enabledOn:function(){return this.hasDom()}}),z.prototype.addChild.call(t,e,n)},i.tRoot&&i.tRoot.getChildren().forEach((function(e,n){var i=new z(e.type,e.targets);i.oidNum=n,i.oid=n>0?"".concat(e.type).concat(n):e.type,t.addChild(i)})),t},i.tRoot=i.tRootFactory(),e&&i.tRoot.addChild(e),window.history.pushState({link:document.URL},"",document.URL),i},start:function(){return i.runningFlag=!1,i.events.clearAll(),i.tRoot.getChildren().forEach((function(t){t.deleteTargetValue("addEventHandler")})),i.events.removeWindowHandlers(),i.events.addWindowHandlers(),i.dim.measureScreen(),i.manager.resetRuns(),i.runningFlag=!0,i.manager.scheduleRun(0,"appStart"),i},stop:function(){return i.runningFlag=!1,i.events.removeWindowHandlers(),i.tRoot.getChildren().forEach((function(t){t.hasDom()&&i.events.removeHandlers(t.$dom)})),i.events.clearAll(),i.manager.resetRuns(),i},reset:function(){i.manager.lists.visible.forEach((function(t){return t.domValues={}})),i.manager.clear(),i.locationManager.hasLocationList.length=0,i.locationManager.screenWidth=0,i.locationManager.screenHeight=0,l.foundParentWithTarget={},l.foundTypeMap={},l.foundTargetMap={}},isRunning:function(){return i.runningFlag},find:function(t){return l.find(t)}},(Qt=i).init().start()};Jt.oids={},Jt.getOid=function(t){y.isDefined(Jt.oids[t])||(Jt.oids[t]=0);var e=Jt.oids[t]++;return{oid:e>0?"".concat(t).concat(e):t,num:e}};var Gt=function(){return!!Qt&&Qt.runningFlag},Zt=function(){return Qt?Qt.tRoot:null},te=function(){return Qt?Qt.events:null},ee=function(){return Qt?Qt.pager:null},ne=function(){return Qt?Qt.loader:null},ie=function(){return Qt?Qt.manager:null},re=function(){return Qt?Qt.dim.screen.width:0},ae=function(){return Qt?Qt.dim.screen.height:0};function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ue(i.key),i)}}function ue(t){var e=function(t){if("object"!=oe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==oe(e)?e:e+""}window.t=window.t||l.find;var le=function(){return function(t,e,n){return n&&se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),0,[{key:"bounce",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:re()/2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.6,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.2,s=e*a,u=[t],l=[n],c=[i],h=[r];(0|s)>1;){u.push(e),u.push(e-s);var d=i*(1+o),f=r*(1-o);c.push(d),c.push(i),h.push(f),h.push(r),l.push(n-(d-i)/2),l.push(n),s*=a,o*=a}return{x:l,y:u,width:c,height:h}}},{key:"spiral",value:function(t,e,n,i,r,a,o){for(var s=[],u=[],l=[],c=t;c<=e;c+=n){var h=c*(Math.PI/180);s.push(Math.floor(i+a*Math.cos(h))),u.push(Math.floor(r+o*Math.sin(h))),l.push(90+c)}return{x:s,y:u,rotate:l}}}])}();window.TargetJ=e}();