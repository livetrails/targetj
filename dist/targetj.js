/*! For license information please see targetj.js.LICENSE.txt */
!function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}t.r(e),t.d(e,{$Dom:function(){return f},App:function(){return Ne},Bracket:function(){return Bt},BracketGenerator:function(){return Zt},ColorUtil:function(){return T},Easing:function(){return O},Moves:function(){return tn},SearchUtil:function(){return at},TModel:function(){return yt},TModelUtil:function(){return W},TUtil:function(){return u},TargetUtil:function(){return x},getBrowser:function(){return qe},getEvents:function(){return Be},getLoader:function(){return Xe},getLocationManager:function(){return _e},getManager:function(){return Ue},getPager:function(){return We},getRunScheduler:function(){return $e},getScreenHeight:function(){return Ze},getScreenWidth:function(){return ze},getVisibles:function(){return Ge},isRunning:function(){return Re},tApp:function(){return je},tRoot:function(){return Ye}});var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,s=[{key:"calcVisibility",value:function(e){var n=e.absX,r=e.absY,i=e.getDomParent(),a=(i.getMeasuringScale()||1)*e.getMeasuringScale(),o=t.isDefined(e.getWidth())?a*e.getWidth():0,s=t.isDefined(e.getHeight())?a*e.getHeight():0,u=e.visibilityStatus,l=e.validateVisibilityInParent()?i.absX:0,c=e.validateVisibilityInParent()?i.absY:0,h=e.validateVisibilityInParent()?i.getWidth():ze(),f=e.validateVisibilityInParent()?i.getHeight():Ze();return u.right=n<=l+h,u.left=n+o>=l,u.bottom=r-e.getTopMargin()<=c+f,u.top=r+s+e.getBottomMargin()>=c,e.val("isVisible",u.left&&u.right&&u.top&&u.bottom),e.val("isVisible")}},{key:"initDoms",value:function(e){var n=f.getAllStamped();e.forEach((function(t){t.$dom=null}));var i,a=t.list2map(e.filter((function(t){return"BI"!==t.type}))),o=r(n);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.getAttribute("id"),l=a[u];l?l.$dom=new f("#".concat(u)):f.detach(s)}}catch(t){o.e(t)}finally{o.f()}}},{key:"contains",value:function(t,e){var n;return!(!t||!e||t!==e&&e.getDomParent()!==t&&(null===(n=e.getDomParent())||void 0===n?void 0:n.getDomParent())!==t)}},{key:"list2map",value:function(e,n){return e.reduce((function(e,r){return e[r.oid]=t.isDefined(n)?n:r,e}),{})}},{key:"getDeepList",value:function(t){var e=[];return function t(n){if(n&&n.hasChildren()){var r=n.getChildren();e.push.apply(e,function(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r)),r.forEach(t)}}(t),e}},{key:"areEqual",value:function(t,e,n){return n?JSON.stringify(t)===JSON.stringify(e):t===e}},{key:"momentum",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.002,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,a=e-t,o=n<10?Math.abs(a)/10:Math.abs(a)/n,s=Math.min(o/r,300),u=Math.pow(o,2)/(2*r);u>i&&(u=i);var l=a>0?a+u:a-u;return{distance:Math.round(l)/20,duration:Math.round(s),momentumDistance:u}}},{key:"isDefined",value:function(t){return null!=t}},{key:"isNumber",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"limit",value:function(e,n,r){return(e=(e=t.isDefined(e)?e:n)>r?r:e)<n?n:e}},{key:"capitalizeFirstLetter",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"formatNum",value:function(t,e){return t?parseFloat(t.toString()).toFixed(e):0}},{key:"now",value:function(){return Date.now()}},{key:"log",value:function(t){return!0===t?console.log:function(){}}},{key:"distance",value:function(t,e,n,r){return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))}},{key:"getFullLink",value:function(e){if(t.isDefined(e)){if(e.startsWith("http"))return e;var n=window.location.protocol;n+=n.endsWith(":")?"//":"://";var r="".concat(n).concat(window.location.hostname);return e.startsWith("/")?r+e:"".concat(r,"/").concat(e)}}},{key:"isStringBooleanOrNumber",value:function(t){var e=n(t);return"string"===e||"boolean"===e||"number"===e}},{key:"logTree",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=r(_e().getChildren(n));try{for(a.s();!(e=a.n()).done;){var o=e.value,s=o.isVisible()?i+"|  ":i+"x  ";"BI"===o.type?console.log("".concat(s).concat(o.oid," v:").concat(o.isVisible()," x:").concat(Math.floor(o.getX())," y:").concat(Math.floor(o.getY()),", absY:").concat(Math.floor(o.absY)," yy:").concat(Math.floor(o.absY+o.getDomParent().absY)," w:").concat(Math.floor(o.getWidth())," h:").concat(Math.floor(o.getHeight())," hc:").concat(Math.floor(o.getContentHeight()))):console.log("".concat(s).concat(o.oid," v:").concat(o.isVisible()," x:").concat(Math.floor(o.getX())," y:").concat(Math.floor(o.getY())," absY:").concat(Math.floor(o.absY)," yy:").concat(Math.floor(o.absY+o.getDomParent().absY)," w:").concat(Math.floor(o.getWidth())," h:").concat(Math.floor(o.getHeight())," hc:").concat(Math.floor(o.getContentHeight()))),o.hasChildren()&&t.logTree(o,s)}}catch(t){a.e(t)}finally{a.f()}}}],null&&o(e.prototype,null),s&&o(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,s}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?(this.selector=e,this.element=t.query(e)):e&&(this.element=e),this.childrenCount=0,this.$domParent=void 0,this.originalContent=void 0,this.textOnly=!0}return e=t,n=[{key:"exists",value:function(){return this.selector&&(this.element=t.query(this.selector)),!!this.element}},{key:"contains",value:function(t){return t instanceof Node&&this.element.contains(t)}},{key:"create",value:function(t){this.element=document.createElement(t)}},{key:"getTagName",value:function(){return this.element.tagName.toLowerCase()}},{key:"setSelector",value:function(t){this.selector=t}},{key:"setId",value:function(t){this.attr("id","#"===t[0]?t.slice(1):t)}},{key:"focus",value:function(){this.element.focus()}},{key:"blur",value:function(){this.element.blur()}},{key:"attr",value:function(t,e){if(this.element)return u.isDefined(e)?void this.element.setAttribute(t,e):this.element.getAttribute(t)}},{key:"value",value:function(t){if(this.element){var e=this.element.value;return u.isDefined(t)&&(this.element.value=t),e}}},{key:"select",value:function(){this.element&&"function"==typeof this.element.select&&this.element.select()}},{key:"width",value:function(t){if(!u.isDefined(t))return this.element.offsetWidth;this.element.style.width=u.isNumber(t)?"".concat(t,"px"):t}},{key:"height",value:function(t){if(!u.isDefined(t))return this.element.offsetHeight;this.element.style.height=u.isNumber(t)?"".concat(t,"px"):t}},{key:"css",value:function(t){if(!u.isDefined(t))return this.element.className;this.element.className=t}},{key:"setStyleByMap",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.style(n,t[n])}))}},{key:"style",value:function(t,e){if(2!==arguments.length)return 1===arguments.length?this.element.style[t]:this.element.style;this.element.style[t]=e}},{key:"getStyleValue",value:function(t){var e=this.style(t),n=u.isDefined(e)?e.replace(/[^-\d.]/g,""):0;return parseFloat(n)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"isXYWithinElement",value:function(t,e){var n=this.getBoundingClientRect();return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}},{key:"parent",value:function(){return this.element?this.element.parentElement:null}},{key:"detach",value:function(){t.detach(this.element),this.$domParent&&this.$domParent.childrenCount>0&&this.$domParent.childrenCount--}},{key:"child",value:function(t){return this.element.children[t]}},{key:"append$Dom",value:function(t){this.element.appendChild(t.element)}},{key:"insertFirst$Dom",value:function(t){this.element.firstChild?this.element.insertBefore(t.element,this.element.firstChild):this.append$Dom(t)}},{key:"appendTModel$Dom",value:function(t){0===this.childrenCount&&this.element.children.length>1&&t.getDomParent()&&t.getDomParent().getHtml()&&t.getDomParent().getHtml()===this.originalContent&&(this.element.innerHTML="<div>".concat(this.html(),"</div>")),this.element.appendChild(t.$dom.element),t.$dom.$domParent=this,this.childrenCount++}},{key:"deleteAllChildren",value:function(){this.element.innerHTML=this.originalContent||"",this.childrenCount=0}},{key:"html",value:function(t){if(!u.isDefined(t))return u.isDefined(this.originalContent)?this.originalContent:this.element.innerHTML;if(this.childrenCount>0){var e=document.createElement("div");e.innerHTML=t,u.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!1}else this.element.innerHTML=t,this.originalContent=t,this.textOnly=!1}},{key:"text",value:function(t){if(!u.isDefined(t))return u.isDefined(this.originalContent)?this.originalContent:this.element.textContent;if(this.childrenCount>0){var e=document.createTextNode(t);u.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!0}else this.element.textContent=t,this.originalContent=t,this.textOnly=!0}},{key:"outerHTML",value:function(t){this.element.outerHTML=t}},{key:"innerHTML",value:function(t){if(!u.isDefined(t))return this.element.innerHTML;this.element.innerHTML=t}},{key:"innerText",value:function(t){if(!u.isDefined(t))return this.element.innerText;this.element.innerText=t}},{key:"addClass",value:function(t){var e=this.attr("class"),n=e?e.includes(t)?e:"".concat(e," ").concat(t):t;n!==e&&this.attr("class",n)}},{key:"addEvent",value:function(t,e){this.element.addEventListener?this.element.addEventListener(t,e,{capture:!1,passive:!1}):this.element.attachEvent("on".concat(t),e)}},{key:"detachEvent",value:function(t,e){this.element.removeEventListener?this.element.removeEventListener(t,e,!1):this.element.detachEvent?this.element.detachEvent("on".concat(t),e):this.element["on".concat(t)]=null}},{key:"transform",value:function(t){this.element.style[qe().style.transform]=t}},{key:"animate",value:function(t,e){return this.element.animate(t,e)}},{key:"getContext",value:function(e,n){var r=u.isDefined(n)?t.query(n):this.query("canvas");return r?r.getContext(e):void 0}},{key:"findFirstByClass",value:function(e){return t.findFirstByClass(e,this.element)}},{key:"findFirstByTag",value:function(e){return t.findFirstByTag(e,this.element)}},{key:"query",value:function(e){return"#"===e[0]?t.findById(e):"."===e[0]?this.findFirstByClass(e):this.findFirstByTag(e)}},{key:"stamp",value:function(){this.attr("data-tgt","true")}}],r=[{key:"getAllStamped",value:function(){return document.querySelectorAll('[data-tgt="true"]')}},{key:"query",value:function(e){return"#"===e[0]?t.findById(e):"."===e[0]?t.findFirstByClass(e):t.findFirstByTag(e)}},{key:"findById",value:function(t){return document.getElementById("#"===t[0]?t.slice(1):t)}},{key:"findFirstByClass",value:function(e,n){var r=t.findByClass(e,n);return r.length>0?r[0]:null}},{key:"findFirstByTag",value:function(e,n){var r=t.findByTag(e,n);return r.length>0?r[0]:null}},{key:"findByTag",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByTagName(t)}},{key:"findByClass",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByClassName("."===t[0]?t.slice(1):t)}},{key:"findNearestParentWithId",value:function(t){for(;t;){var e="function"==typeof t.getAttribute&&t.getAttribute("id")?t.getAttribute("id"):null;if(e&&Ue().visibleOidMap[e])return e;t=t.parentElement}}},{key:"detach",value:function(t){var e=u.isDefined(t)?t.parentElement:null;e&&e.removeChild(t)}},{key:"hasFocus",value:function(t){return t.hasDom()&&document.activeElement===t.$dom.element}},{key:"getWindowScrollTop",value:function(){return window.pageYOffset||document.documentElement.scrollTop||0}},{key:"getWindowScrollLeft",value:function(){return window.pageXOffset||document.documentElement.scrollLeft||0}},{key:"ready",value:function(e){new t(document).addEvent("DOMContentLoaded",e)}},{key:"ajax",value:function(t){var e=new XMLHttpRequest,n="";t.data&&(n=Object.keys(t.data).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t.data[e]))})).join("&")),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var n="json"===t.dataType?JSON.parse(this.responseText):this.responseText;t.success(n)}else t.error(e.status)},"POST"===t.type?(e.open(t.type,t.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(n)):(t.url+=n?t.url>""&&t.url.indexOf("?")>=0?"&".concat(n):"?".concat(n):"",e.open(t.type,t.url,!0),e.send())}}],n&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}var g,p,m,b,T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"color2Integers",value:function(e){if(e=e?String(e):"",e=t.colors[e.toLowerCase()]||e){if(e.startsWith("#")){e=3===(e=e.slice(1)).length?e.split("").map((function(t){return t+t})).join(""):e;var n=parseInt(e,16);return[n>>16&255,n>>8&255,255&n]}var r=e.match(/\d+/g);return r&&3===r.length?r.map(Number):void 0}}}],null&&v(e.prototype,null),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function C(t,e,n){return(e=M(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t){var e=function(t){if("object"!=S(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:e+""}g=T,m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},(p=y(p="colors"))in g?Object.defineProperty(g,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[p]=m;var x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"emptyValue",value:function(){return{value:void 0,step:0,steps:0,cycle:0,cycles:0,interval:0,initialValue:void 0,scheduleTimeStamp:void 0,actualValueLastUpdate:0,status:"",executionCount:0,executionFlag:!1,isImperative:!1,originalTargetName:void 0,easing:void 0,creationTime:u.now()}}},{key:"getAutoHandleEvents",value:function(e){var n=[];return Object.keys(t.touchEventMap).some((function(t){return e.eventTargetMap[t]}))&&n.push("touch"),e.eventTargetMap.onScrollEvent&&n.push("scrollTop","scrollLeft"),e.eventTargetMap.onSwipeEvent&&n.push("swipe"),n}},{key:"bindTargetName",value:function(t,e){var n=t[e];if("object"===S(n)){var r=/^on[A-Za-z]+Step$/,i=/^on[A-Za-z]+End$/,a=["value","enabledOn","onStepsEnd","onValueChange","loop","onImperativeEnd","onImperativeStep","onSuccess","onError"];Object.keys(n).forEach((function(t){if("function"==typeof n[t]&&(a.includes(t)||r.test(t)||i.test(t))){var o=n[t];n[t]=function(){return this.key=e,o.apply(this,arguments)}}}))}else if("function"==typeof n){var o=n;t[e]=function(){return this.key=e,o.apply(this,arguments)}}}},{key:"isValueStepsCycleArray",value:function(e){if(e.length>4||0===e.length)return!1;for(var n=e.length>=2,r=1;r<e.length;r++)if("number"!=typeof e[r])return!1;return n&&("number"==typeof e[0]||t.isListTarget(e[0])||"string"==typeof e[0])}},{key:"isListTarget",value:function(t){return"object"===S(t)&&null!==t&&Array.isArray(t.list)}},{key:"isObjectTarget",value:function(t,e){return"style"!==t&&"object"===S(e)&&null!==e&&!Array.isArray(e)&&Object.getPrototypeOf(e)===Object.prototype}},{key:"isChildrenTarget",value:function(t,e){return"children"===t&&(Array.isArray(e)||e instanceof yt)}},{key:"getValueStepsCycles",value:function(e,n){var r=e.targets[n],i=r&&r.valueOnly,a=e.getTargetCycle(n),o=e.val(n),s=null,l=0,c=0,h=0;return function f(d){return Array.isArray(d)?i||!t.isValueStepsCycleArray(d)?[d,l,c,h]:Array.isArray(r)?r:(s=d[0],l=d.length>=2?d[1]:l,c=d.length>=3?d[2]:c,h=d.length>=4?d[3]:h,[s,l,c,h]):"object"===S(d)&&null!==d&&Object.getPrototypeOf(d)===Object.prototype?(s="function"==typeof d.value?d.value.call(e,a,o):u.isDefined(d.value)?d.value:d,l="function"==typeof d.steps?d.steps.call(e,a):u.isDefined(d.steps)?d.steps:0,c="function"==typeof d.interval?d.interval.call(e,a):u.isDefined(d.interval)?d.interval:0,h="function"==typeof d.cycles?d.cycles.call(e,a,e.getTargetCycles(n)):u.isDefined(d.cycles)?d.cycles:0,Array.isArray(s)?f(s):[s,l,c,h]):"function"==typeof d?f(d.call(e,a,o)):[d,l,c,h]}(r)}},{key:"getIntervalValue",value:function(t,e,n){var r="function"==typeof n?n.call(t,e):n;return u.isNumber(r)?r:0}},{key:"scheduleExecution",value:function(t,e){var n=t.getTargetInterval(e);if(n<=0)return 0;var r=u.now(),i=t.getScheduleTimeStamp(e);if(u.isDefined(i)){var a=r-i;return Math.max(n-a,0)}return t.setScheduleTimeStamp(e,r),n}},{key:"getTargetSchedulePeriod",value:function(t,e,n){var r,i=u.now(),a=0;return n>0?u.isDefined(t.getTargetTimeStamp(e))?a=(r=i-t.getTargetTimeStamp(e))<n?n-r:0:(t.setTargetTimeStamp(e,i),a=n):u.isDefined(t.getTargetTimeStamp(e))&&(a=(r=i-t.getTargetTimeStamp(e))<0?-r:0),a}},{key:"handleValueChange",value:function(t,e,n,r,i,a){"object"===S(t.targets[e])&&"function"==typeof t.targets[e].onValueChange&&!u.areEqual(n,r,t.targets[e].deepEquality)&&(t.targets[e].onValueChange.call(t,n,r,a),t.setTargetMethodName(e,"onValueChange"))}},{key:"morph",value:function(e,n,r,i,a){var o=e.getTargetEasing(n),s=o?o(e.getTargetStepPercent(n,a)):e.getTargetStepPercent(n,a);if(t.colorMap[n]){var u=T.color2Integers(i),l=r?T.color2Integers(r):T.color2Integers("#fff");if(u&&l){var c=Math.floor(u[0]*s+l[0]*(1-s)),h=Math.floor(u[1]*s+l[1]*(1-s)),f=Math.floor(u[2]*s+l[2]*(1-s));return"rgb(".concat(c,",").concat(h,",").concat(f,")")}return i}return"number"==typeof i?i*s+r*(1-s):i}},{key:"setWidthFromDom",value:function(t,e){var n,r,i=null===(n=t.domWidth)||void 0===n?void 0:n.height,a=null===(r=t.domWidth)||void 0===r?void 0:r.width,o=t.getDomParent(),s=!1;return Ue().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),s=!0),(!u.isDefined(t.domWidth)||s||i!==t.getHeight()||e||o&&t.getActualValueLastUpdate("width")<=o.getActualValueLastUpdate("width"))&&(t.$dom.width("auto"),a=t.$dom.width(),i=t.$dom.height()),t.domWidth={width:a,height:i},t.val("width",a),a}},{key:"setHeightFromDom",value:function(t,e){var n,r,i=null===(n=t.domHeight)||void 0===n?void 0:n.height,a=null===(r=t.domHeight)||void 0===r?void 0:r.width,o=t.getDomParent(),s=!1;return Ue().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),s=!0),(!u.isDefined(t.domHeight)||s||a!==t.getWidth()||e||o&&t.getActualValueLastUpdate("height")<=o.getActualValueLastUpdate("height"))&&(t.$dom.height("auto"),a=t.$dom.width(),i=t.$dom.height()),t.domHeight={height:i,width:a},t.val("height",i),i}}])}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P(r.key),r)}}function P(t){var e=function(t){if("object"!=D(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(e)?e:e+""}b=x,C(x,"transformMap",{x:!0,y:!0,z:!0,translateX:!0,translateY:!0,translateZ:!0,perspective:!0,rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0,rotate3DAngle:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0,skew:!0,skewX:!0,skewY:!0}),C(x,"dimMap",{width:!0,height:!0}),C(x,"styleWithUnitMap",{fontSize:!0,lineHeight:!0,borderRadius:!0,padding:!0,left:!0,top:!0,letterSpacing:!0}),C(x,"colorMap",{color:!0,background:!0,backgroundColor:!0}),C(x,"styleTargetMap",k(k(k(k(k({},b.transformMap),b.dimMap),b.styleWithUnitMap),b.colorMap),{},{opacity:!0,zIndex:!0,border:!0,borderTop:!0,borderLeft:!0,borderRight:!0,borderBottom:!0})),C(x,"asyncStyleTargetMap",{position:!0,css:!0,style:!0,textAlign:!0,boxSizing:!0,transformStyle:!0,transformOrigin:!0,attributes:!0,justifyContent:!0,alignItems:!0,display:!0,cursor:!0,fontFamily:!0,overflow:!0,textDecoration:!0,boxShadow:!0,fontWeight:!0}),C(x,"scaleMap",{scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0}),C(x,"rotate3D",{rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0}),C(x,"attributeTargetMap",{lang:!0,autofocus:!0,placeholder:!0,autocomplete:!0,name:!0,type:!0,src:!0,href:!0,method:!0,size:!0,value:!0,maxlength:!0,minlength:!0,max:!0,min:!0,readonly:!0,required:!0,alt:!0,disabled:!0,action:!0,accept:!0,selected:!0,rows:!0,cols:!0,tabindex:!0}),C(x,"mustExecuteTargets",{width:!0,height:!0,canHandleEvents:!0,heightFromDom:!0,widthFromDom:!0}),C(x,"coreTargetMap",{x:!0,y:!0}),C(x,"cssFunctionMap",{skew:{x:0,y:0},translate3d:{x:0,y:0,z:0},rotate3d:{x:0,y:0,z:0,a:0},scale3d:{x:0,y:0,z:0}}),C(x,"otherTargetEventsMap",{onChildrenChange:!0,onVisibleChildrenChange:!0,onPageClose:!0,isVisible:!0}),C(x,"targetToEventsMapping",{onClickEvent:["startEvents","endEvents","cancelEvents"],onTouchStart:["startEvents"],onTouchEnd:["endEvents"],onSwipeEvent:["startEvents","endEvents","cancelEvents","moveEvents"],onAnySwipeEvent:["startEvents","endEvents","cancelEvents","moveEvents"],onTouchEvent:["startEvents","endEvents","cancelEvents"],onEnterEvent:["moveEvents","leaveEvents"],onLeaveEvent:["moveEvents","leaveEvents"],onScrollEvent:["startEvents","endEvents","cancelEvents","moveEvents","wheelEvents"],onWindowScrollEvent:["windowScrollEvents"]}),C(x,"touchEventMap",{onClickEvent:function(t){return"click"===Be().getEventType()&&Be().isClickHandler(t)},onTouchStart:function(t){return Be().isStartEvent()&&Be().containsTouchHandler(t)},onTouchEnd:function(t){return Be().isEndEvent()&&Be().containsTouchHandler(t)},onSwipeEvent:function(t){return Be().containsTouchHandler(t)&&Be().isSwipeEvent()},onAnySwipeEvent:function(){return Be().isSwipeEvent()},onTouchEvent:function(t){return Be().isTouchHandler(t)},onEnterEvent:function(t){return Be().isEnterEventHandler(t)},onLeaveEvent:function(t){return Be().isLeaveEventHandler(t)}}),C(x,"internalEventMap",{onVisibleEvent:function(t){return t.isNowVisible},onDomEvent:function(t){return t.hasDomNow},onResize:function(t){var e=t.getActualValueLastUpdate("width"),n=t.getActualValueLastUpdate("height"),r=_e().resizeLastUpdate;return e&&n?r>Math.max(e,n):e?r>e:n?r>n:_e().resizeFlag},onParentResize:function(t){return t.getParent().getActualValueLastUpdate("width")>t.getActualValueLastUpdate("width")||t.getParent().getActualValueLastUpdate("height")>t.getActualValueLastUpdate("height")}}),C(x,"allEventMap",k(k({},b.touchEventMap),{},{onFocusEvent:function(t){return Be().onFocus(t)},onBlurEvent:function(t){return Be().onBlur(t)},onKeyEvent:function(){return"key"===Be().getEventType()&&Be().currentKey},onScrollEvent:function(t){return Be().isScrollLeftHandler(t)&&Be().deltaX()||Be().isScrollTopHandler(t)&&Be().deltaY()},onWindowScrollEvent:function(){return"windowScroll"===Be().getEventType()}}));var O=function(){return function(t,e,n){return n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),0,[{key:"linear",value:function(t){return t}},{key:"inQuad",value:function(t){return t*t}},{key:"outQuad",value:function(t){return t*(2-t)}},{key:"outExpo",value:function(t){return 1-(1-t)*(1-t)}},{key:"circular",value:function(t){return Math.sqrt(1- --t*t)}},{key:"inOutQuad",value:function(t){return t<.5?2*t*t:(4-2*t)*t-1}},{key:"inOut",value:function(t){return t<.5?2*t*t:(4-2*t)*t-1}},{key:"outElastic",value:function(t){var e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}}])}();function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F(r.key),r)}}function I(t,e,n){return(e=F(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F(t){var e=function(t){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}var N=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&H(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"executeDeclarativeTarget",value:function(e,n){t.resolveTargetValue(e,n),t.updateTarget(e,e.targetValues[n],n)}},{key:"executeImperativeTarget",value:function(e,n,r,i,a,o,s){e.targetValues[n]=e.targetValues[n]||x.emptyValue();var u=e.targetValues[n];if(u.isImperative=!0,u.originalTargetName=s,x.isListTarget(r))t.assignListTarget(u,r.list,r.list[0],i,a,o);else if(x.isObjectTarget(n,r)){var l=x.cssFunctionMap[n]?A(A({},x.cssFunctionMap[n]),r):r;Object.keys(l).forEach((function(n){t.executeImperativeTarget(e,n,l[n],i,a,o,s)}))}else t.assignSingleTarget(u,r,void 0,i,0,a,o),u.step=0;t.updateTarget(e,u,n)}},{key:"updateTarget",value:function(e,n,r){n.executionCount++,n.executionFlag=!0,0===e.getTargetSteps(r)&&t.snapActualToTarget(e,r),e.addToStyleTargetList(r),e.setTargetMethodName(r,"value"),e.updateTargetStatus(r),(e.isTargetUpdating(r)||e.isTargetActive(r))&&(t.needsRerun=!0)}},{key:"assignListTarget",value:function(t,e,n,r,i,a){t.valueList=e,t.stepList=Array.isArray(r)?r:u.isDefined(r)?[r]:[1],t.intervalList=Array.isArray(i)?i:u.isDefined(i)?[i]:[0],t.easingList=Array.isArray(a)?a:u.isDefined(a)?[a]:[O.linear],t.cycle=1,t.value=e[1],t.initialValue=n,t.steps=t.stepList[0],t.interval=t.intervalList[0],t.easing=t.easingList[0],t.step=0,t.cycles=0}},{key:"executeEventHandlerTarget",value:function(t){"string"==typeof t?Be().attachGroupEvent(t):Array.isArray(t)&&t.forEach((function(t){return Be().attachGroupEvent(t)}))}},{key:"assignSingleTarget",value:function(t,e,n,r,i,a,o){delete t.valueList,delete t.stepList,delete t.intervalList,delete t.easingList,t.initialValue=n,t.value=e,t.steps=r||0,t.cycles=i||0,t.interval=a||0,t.easing=o}},{key:"snapActualToTarget",value:function(t,e){var n=t.val(e),r=t.targetValues[e].value;t.val(e,"function"==typeof r?r.call(t):r),t.setActualValueLastUpdate(e),x.handleValueChange(t,e,t.val(e),n,0,0)}},{key:"resolveTargetValue",value:function(e,n){var r=!e.targetValues[n]&&u.isDefined(e.targets[n].initialValue)?e.targets[n].initialValue:void 0,i=x.getValueStepsCycles(e,n),a=i[0],o=i[1]||0,s=i[2]||0,l=i[3]||0,c=e.targetValues[n]||x.emptyValue(),h=c.value;e.targetValues[n]=c;var f=u.isDefined(e.targets[n].easing)?e.targets[n].easing:void 0;if(x.isChildrenTarget(n,a))Array.isArray(a)?a.forEach((function(t){return e.addChild(t)})):e.addChild(a),t.assignSingleTarget(c,a,void 0,0,l,s);else if(x.isListTarget(a))t.assignListTarget(c,a.list,a.list[0],o,s,f);else{var d,v;t.assignSingleTarget(c,a,r,o,l,s,f),o>0&&u.areEqual(h,a,null!==(d=null===(v=e.targets[n])||void 0===v?void 0:v.deepEquality)&&void 0!==d&&d)&&a!==e.val(n)&&e.resetTargetStep(n)}}}])}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function B(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}I(N,"needsRerun",!1);var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&Y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"addItem",value:function(t,e,n){for(var r=!1,i=0;i<t.length;i++){var a=t[i],o=a.index,s=a.index+a.segment.length-1;if(n===s+1?(a.segment.push(e),r=!0):n>=o&&n<=s?(a.segment.splice(n-o,0,e),r=!0):n===o-1&&(a.segment.unshift(e),a.index=n,r=!0),r){var u=a.index+a.segment.length-1;if(i+1<t.length&&u===t[i+1].index){var l=t[i+1];a.segment=a.segment.concat(l.segment),t.splice(i+1,1)}break}}r||(t.push({index:n,segment:[e]}),t.sort((function(t,e){return t.index-e.index})))}},{key:"defaultActualValues",value:function(){return{x:0,y:0,width:0,height:0,leftMargin:0,rightMargin:0,topMargin:0,bottomMargin:0,opacity:1,scale:1,scrollLeft:0,scrollTop:0,textOnly:!0,borderRadius:0,children:[],isInFlow:!0,baseElement:"div",canHaveDom:!0,widthFromDom:!1,heightFromDom:!1,isIncluded:!0,bracketThreshold:5,keepEventDefault:void 0,canDeleteDom:void 0}}},{key:"defaultTargets",value:function(){return{position:"absolute",left:0,top:0,zIndex:1}}},{key:"shouldMeasureHeightFromDom",value:function(t){return!t.excludeDefaultStyling()&&!u.isDefined(t.targetValues.height)&&!u.isDefined(t.targets.height)&&!t.hasChildren()||!!t.getTargetValue("heightFromDom")}},{key:"shouldMeasureWidthFromDom",value:function(t){return!((t.excludeDefaultStyling()||t.reuseDomDefinition()||u.isDefined(t.targetValues.width)||u.isDefined(t.targets.width)||t.hasChildren())&&!t.getTargetValue("widthFromDom"))}},{key:"createDom",value:function(e){e.$dom=new f,e.$dom.create(e.getBaseElement()),e.$dom.setSelector("#".concat(e.oid)),e.$dom.setId(e.oid),e.$dom.stamp(),e.isTextOnly()?e.$dom.text(e.getHtml()):e.$dom.html(e.getHtml()),e.setActualValueLastUpdate("html"),e.domHeight=void 0,e.domWidth=void 0,e.transformMap={},e.styleMap={},e.allStyleTargetList.forEach((function(t){u.isDefined(e.val(t))&&e.addToStyleTargetList(t)})),t.fixStyle(e),t.fixAsyncStyle(e)}},{key:"getTransformValue",value:function(t,e){var n;return"x"===e?n=t.getTransformX():"y"===e?n=t.getTransformY():x.transformMap[e]&&(n=x.rotate3D[e]?t.val(e):x.scaleMap[e]?u.formatNum(t.val(e),2):t.floorVal(e)),n}},{key:"fixStyle",value:function(e){var n=!1;e.styleTargetList.forEach((function(r){if(x.transformMap[r]){var i=t.getTransformValue(e,r);e.transformMap[r]!==i&&(e.transformMap[r]=i,n=!0)}else if("width"===r){var a=Math.floor(e.getWidth());e.$dom.getStyleValue("width")!==a&&(e.styleMap.width=a,e.$dom.width(a))}else if("height"===r){var o=Math.floor(e.getHeight());e.$dom.getStyleValue("height")!==o&&(e.styleMap.height=o,e.$dom.height(o))}else x.styleWithUnitMap[r]?u.isDefined(e.val(r))&&e.styleMap[r]!==e.val(r)&&(e.$dom.style(r,u.isNumber(e.val(r))?"".concat(e.val(r),"px"):e.val(r)),e.styleMap[r]=e.val(r)):u.isDefined(e.val(r))&&e.styleMap[r]!==e.val(r)&&(e.$dom.style(r,"".concat(e.val(r))),e.styleMap[r]=e.val(r))})),n&&e.$dom.transform(t.getTransformString(e)),e.styleTargetMap={},e.styleTargetList.length=0}},{key:"fixAsyncStyle",value:function(t){t.asyncStyleTargetList.forEach((function(e){if("style"===e){var n=t.getStyle();u.isDefined(n)&&t.styleMap.style!==n&&(t.$dom.setStyleByMap(t.getStyle()),t.styleMap.style=n)}else if("attributes"===e){var r=t.getAttributes();u.isDefined(r)&&t.styleMap.attributes!==r&&(Object.keys(r).forEach((function(e){t.$dom.attr(e,r[e])})),t.styleMap.attributes=r)}else if("css"===e){var i=t.getCss();t.$dom.css()!==i&&t.$dom.css(i)}else x.attributeTargetMap[e]?t.$dom.attr(e,t.val(e)):u.isDefined(t.val(e))&&t.styleMap[e]!==t.val(e)&&(t.$dom.style(e,"".concat(t.val(e))),t.styleMap[e]=t.val(e))})),t.asyncStyleTargetMap={},t.asyncStyleTargetList.length=0}},{key:"getTransformString",value:function(e){var n={},r={};(e.transformMap.translateX||e.transformMap.translateY||e.transformMap.translateZ)&&(delete e.transformMap.x,delete e.transformMap.y);for(var i=0,a=Object.keys(e.transformMap);i<a.length;i++){var o=a[i];if(!n[o])switch(o){case"translateX":case"translateY":case"translateZ":r[o]="".concat(o,"(").concat(e.transformMap[o],"px)"),n[o]=!0;break;case"x":case"y":case"z":u.isDefined(e.getZ())?r.translate3d="translate3d(".concat(e.transformMap.x,"px, ").concat(e.transformMap.y,"px, ").concat(e.transformMap.z,"px)"):(u.isDefined(e.getX())||u.isDefined(e.getY()))&&(r.translate="translate(".concat(e.transformMap.x,"px, ").concat(e.transformMap.y,"px)")),n.x=!0,n.y=!0,n.z=!0;break;case"rotate":case"rotateX":case"rotateY":case"rotateZ":case"rotate3DX":case"rotate3DY":case"rotate3DZ":case"rotate3DAngle":u.isDefined(e.val("rotate3DX"))&&u.isDefined(e.val("rotate3DY"))&&u.isDefined(e.val("rotate3DZ"))&&u.isDefined(e.val("rotate3DAngle"))?(r.rotate3d="rotate3d(".concat(e.transformMap.rotate3DX,", ").concat(e.transformMap.rotate3DY,", ").concat(e.transformMap.rotate3DZ,", ").concat(e.transformMap.rotate3DAngle,"deg)"),n.rotate3DX=!0,n.rotate3DY=!0,n.rotate3DZ=!0,n.rotate3DAngle=!0):u.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],"deg)"),n[o]=!0);break;case"scale":case"scaleX":case"scaleY":case"scaleZ":case"scale3DX":case"scale3DY":case"scale3DZ":u.isDefined(e.val("scale3DX"))&&u.isDefined(e.val("scale3DY"))&&u.isDefined(e.val("scale3DZ"))?(r.scale3d="scale3d(".concat(e.transformMap.scale3DX,", ").concat(e.transformMap.scale3DY,", ").concat(e.transformMap.scale3DZ,")"),n.scale3DX=!0,n.scale3DY=!0,n.scale3DZ=!0):u.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],")"),n[o]=!0);break;case"skewX":case"skewY":u.isDefined(e.val("skewX"))&&u.isDefined(e.val("skewY"))?(r[o]="skew(".concat(e.transformMap.skewX,"deg, ").concat(e.transformMap.skewY,"deg)"),n.skewX=!0,n.skewY=!0):u.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],"deg)"),n[o]=!0);break;case"perspective":u.isDefined(e.val("perspective"))&&(r[o]="perspective(".concat(e.transformMap.perspective,"px)"),n.perspective=!0)}}var s={};e.val("transformOrder")?e.val("transformOrder").forEach((function(t,e){s[t]=e})):s=t.transformOrder;var l=Object.keys(r).sort((function(t,e){return s[t]-s[e]})).map((function(t){return r[t]}));return l.join(" ")}}])}();function X(t,e){if(t){if("string"==typeof t)return U(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){var e=function(t){if("object"!=$(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}!function(t,e,n){(e=B(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(W,"transformOrder",{perspective:0,translateX:1,translateY:1,translateZ:1,translate:1,translate3d:1,rotate:2,rotateX:2,rotateY:2,rotateZ:2,rotate3d:2,skew:3,skewX:3,skewY:3,scale:4,scaleX:4,scaleY:4,scaleZ:4,scale3DX:4,scale3DY:4,scale3DZ:4});var z=function(){return function(t,e){return e&&_(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"object"===$(e)&&void 0===n&&(n=e,e=""),this.type=e||"blank",this.targets=Object.assign({},n);var r=Ne.getOid(this.type);this.oid=r.oid,this.oidNum=r.num,this.targetValues={},this.actualValues={},this.activeTargetList=[],this.activeTargetMap={},this.updatingTargetList=[],this.updatingTargetMap={},this.updatingChildrenList=[],this.updatingChildrenMap={},this.activeChildrenList=[],this.activeChildrenMap={},this.eventTargetList=[],this.eventTargetMap={},this.coreTargets=[],this.allStyleTargetList=[],this.allStyleTargetMap={},this.styleTargetList=[],this.styleTargetMap={},this.asyncStyleTargetList=[],this.asyncStyleTargetMap={},this.activatedTargets=[],this.targetExecutionCount=0,this.parent=null,this.targetMethodMap={}}),[{key:"getParent",value:function(){return this.parent}},{key:"initTargets",value:function(){var t=this;this.actualValues=W.defaultActualValues(),this.targetValues={},this.activeTargetMap={},this.activeTargetList=[];var e=f.query("#".concat(this.oid));e||this.excludeDefaultStyling()?e&&!u.isDefined(this.targets.reuseDomDefinition)&&(this.targets.reuseDomDefinition=!0):Object.entries(W.defaultTargets()).forEach((function(e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(t,e)||X(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],i=n[1];r in t.targets||(t.targets[r]=i)})),Object.keys(this.targets).forEach((function(e){t.processNewTarget(e)}))}},{key:"processNewTarget",value:function(t){var e=t.startsWith("_");if(e){var n=t.slice(1);this.targets[n]="object"===$(this.targets[t])&&this.targets[t].value?this.targets[t]:{value:this.targets[t]},this.targets[n].active=!1,delete this.targets[t],t=n}var r=this.targets[t];u.isDefined(r)?(x.bindTargetName(this.targets,t),x.allEventMap[t]||x.internalEventMap[t]?this.eventTargetMap[t]||(this.eventTargetList.push(t),this.eventTargetMap[t]=!0):x.otherTargetEventsMap[t]||(u.isDefined(r.initialValue)&&this.val(t,r.initialValue),e||this.addToStyleTargetList(t),x.coreTargetMap[t]&&!this.coreTargets.includes(t)&&this.coreTargets.push(t),x.mustExecuteTargets[t]||!u.isStringBooleanOrNumber(r)?!1!==r.active&&this.canTargetBeActivated(t)&&this.addToActiveTargets(t):this.val(t,r))):this.delVal("key")}},{key:"activate",value:function(t){_e().addToActivatedList(this),this.currentStatus="active",t&&this.isTargetEnabled(t)&&-1===this.activatedTargets.indexOf(t)&&(this.activatedTargets.push(t),this.removeFromActiveTargets(t))}},{key:"isActivated",value:function(){return"active"===this.currentStatus}},{key:"deactivate",value:function(){this.currentStatus=void 0,this.activatedTargets.length=0}},{key:"shouldExecuteCyclesInParallel",value:function(t){var e;return!0===(null===(e=this.targets[t])||void 0===e?void 0:e.parallel)}},{key:"canTargetBeActivated",value:function(t){return!(Array.isArray(this.targets.onDomEvent)&&this.targets.onDomEvent.includes(t)&&!this.hasDom())}},{key:"addToStyleTargetList",value:function(t){if(!this.excludeStyling()&&!this.targets["exclude".concat(u.capitalizeFirstLetter(t))]){var e=x.asyncStyleTargetMap[t],n=x.attributeTargetMap[t];if(e||n)this.asyncStyleTargetMap[t]||(this.asyncStyleTargetList.push(t),this.asyncStyleTargetMap[t]=!0);else if(this.isStyleTarget(t)){if(x.transformMap[t]){if(this.getParent()&&this.calcAbsolutePosition(this.getX(),this.getY()),W.getTransformValue(this,t)===this.transformMap[t])return}else if("width"===t||"height"===t){var r=Math.floor("width"===t?this.getWidth():this.getHeight());if(this.styleMap[t]===r)return}else if(u.isDefined(this.val(t))&&this.styleMap[t]===this.val(t))return;this.styleTargetList.push(t),this.styleTargetMap[t]=!0}else{if(!this.useWindowFrame(t))return;this.styleTargetList.push(t),this.styleTargetMap[t]=!0}this.allStyleTargetMap[t]||(this.allStyleTargetList.push(t),this.allStyleTargetMap[t]=!0)}}},{key:"isStyleTarget",value:function(t){return x.styleTargetMap[t]}},{key:"useWindowFrame",value:function(t){return Array.isArray(this.targets.useWindowFrame)&&this.targets.useWindowFrame.includes(t)}},{key:"removeTarget",value:function(t){delete this.targets[t],this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),delete this.targetValues[t]}},{key:"addTarget",value:function(t,e){this.addTargets(function(t,e,n){return(e=q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,e))}},{key:"addTargets",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.targets[n]=t[n],e.removeFromUpdatingTargets(n),e.processNewTarget(n)})),$e().schedule(10,"addTargets-"+this.oid)}},{key:"getTargetStepPercent",value:function(t,e){var n=this.getTargetSteps(t);return e=u.isDefined(e)?e:this.getTargetStep(t),n?e/n:1}},{key:"resetTargetStep",value:function(t){return this.targetValues[t]&&(this.targetValues[t].step=0),this}},{key:"resetTargetExecutionFlag",value:function(t){return this.targetValues[t]&&(this.targetValues[t].executionFlag=!1),this}},{key:"resetTargetCycle",value:function(t){return this.targetValues[t]&&(this.targetValues[t].cycle=0),this}},{key:"resetScheduleTimeStamp",value:function(t){return this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=void 0),this}},{key:"resetTargetInitialValue",value:function(t){return this.targetValues[t]&&(this.targetValues[t].initialValue=void 0),this}},{key:"updateTargetStatus",value:function(t){var e=this.targetValues[t];if(e){var n=this.getTargetCycle(t),r=this.getTargetCycles(t),i=this.getTargetStep(t),a=this.getTargetSteps(t);return this.isExecuted(t)&&i<a||Array.isArray(e.valueList)&&n<e.valueList.length-1?this.targetValues[t].status="updating":!this.isExecuted(t)||this.isTargetInLoop(t)||n<r?this.targetValues[t].status="active":this.targetValues[t].status="done",this.isTargetUpdating(t)?(this.addToUpdatingTargets(t),this.removeFromActiveTargets(t)):this.isTargetActive(t)?(this.addToActiveTargets(t),this.removeFromUpdatingTargets(t)):(this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),je.manager.doneTargets.push({tmodel:this,key:t})),this.targetValues[t].status}}},{key:"getTargetStatus",value:function(t){return this.targetValues[t]?this.targetValues[t].status:""}},{key:"isTargetActive",value:function(t){return this.targetValues[t]&&"active"===this.targetValues[t].status}},{key:"isTargetUpdating",value:function(t){return this.targetValues[t]&&"updating"===this.targetValues[t].status}},{key:"isTargetDone",value:function(t){return this.targetValues[t]&&"done"===this.targetValues[t].status}},{key:"isTargetComplete",value:function(t){return this.targetValues[t]&&"complete"===this.targetValues[t].status}},{key:"isExecuted",value:function(t){return this.targetValues[t]&&this.targetValues[t].executionFlag}},{key:"neverExecuted",value:function(t){return!this.targetValues[t]}},{key:"isTargetImperative",value:function(t){return!!this.targetValues[t]&&this.targetValues[t].isImperative}},{key:"getTargetExecutionCount",value:function(t){return this.targetValues[t]?this.targetValues[t].executionCount:0}},{key:"setTargetComplete",value:function(t){this.targetValues[t]&&(this.targetValues[t].status="complete")}},{key:"isTargetEnabled",value:function(t){var e=this.targets[t];return!!u.isDefined(e)&&("function"!=typeof e.enabledOn||e.enabledOn.call(this))}},{key:"isTargetInLoop",value:function(t){return!!this.targets[t]&&("function"==typeof this.targets[t].loop?this.targets[t].loop.call(this,t):this.targets[t].loop)}},{key:"doesTargetEqualActual",value:function(t){if(this.targetValues[t]){var e=!!this.targets[t]&&this.targets[t].deepEquality;return e?u.areEqual(this.getTargetValue(t),this.val(t),e):this.getTargetValue(t)===this.val(t)}return!1}},{key:"getTargetValue",value:function(t){return this.targetValues[t]?"function"==typeof this.targetValues[t].value?this.targetValues[t].value.call(this):this.targetValues[t].value:void 0}},{key:"getTargetSteps",value:function(t){return this.targetValues[t]&&this.targetValues[t].steps||0}},{key:"getTargetStep",value:function(t){return this.targetValues[t]?this.targetValues[t].step:0}},{key:"getScheduleTimeStamp",value:function(t){return this.targetValues[t]?this.targetValues[t].scheduleTimeStamp:void 0}},{key:"isScheduledPending",value:function(t){var e=this.getScheduleTimeStamp(t),n=this.getTargetInterval(t);return e&&e+n>u.now()}},{key:"shouldScheduleRun",value:function(t){var e,n;return null===(e=null===(n=this.targets[t])||void 0===n?void 0:n.triggerRerun)||void 0===e||e}},{key:"getTargetInitialValue",value:function(t){return this.targetValues[t]?this.targetValues[t].initialValue:void 0}},{key:"getActualValueLastUpdate",value:function(t){return this.targetValues[t]?this.targetValues[t].actualValueLastUpdate:void 0}},{key:"getTargetCreationTime",value:function(t){return this.targetValues[t]?this.targetValues[t].creationTime:void 0}},{key:"incrementTargetStep",value:function(t){return this.targetValues[t]&&this.targetValues[t].step++,this.targetValues[t].step}},{key:"getTargetCycles",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycles||0}},{key:"getTargetCycle",value:function(t){return this.targetValues[t]?this.targetValues[t].cycle:0}},{key:"incrementTargetCycle",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycle++,this.targetValues[t].cycle}},{key:"setTargetInterval",value:function(t,e){return this.targetValues[t]&&(this.targetValues[t].interval=e),this.targetValues[t].interval}},{key:"setScheduleTimeStamp",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=e)}},{key:"setTargetInitialValue",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].initialValue=e)}},{key:"setActualValueLastUpdate",value:function(t){this.targetValues[t]&&(this.targetValues[t].actualValueLastUpdate=u.now())}},{key:"getTargetEasing",value:function(t){return"function"==typeof this.targetValues[t].easing?this.targetValues[t].easing:void 0}},{key:"getTargetInterval",value:function(t){var e=this.targetValues[t];return this.isStyleTarget(t)||this.useWindowFrame(t)?e?e.interval:0:u.isDefined(this.targets.interval)?this.targets.interval:(null==e?void 0:e.interval)||0}},{key:"getTargetEventFunctions",value:function(t){return this.targetValues[t]?this.targetValues[t].events:void 0}},{key:"setTarget",value:function(t,e,n,r,i,a){if("object"===$(t)&&null!==t){var o=[t,e,n,r,i];e=o[0],n=o[1],r=o[2],i=o[3],a=o[4],t=""}return a=a||this.key,N.executeImperativeTarget(this,t,e,n,r,i,a),this}},{key:"hasTargetUpdates",value:function(t){return t?!0===this.updatingTargetMap[t]:this.updatingTargetList.length>0}},{key:"addToActiveTargets",value:function(t){var e=this;if(!this.activeTargetMap[t]&&this.canTargetBeActivated(t)){var n;this.activeTargetMap[t]=!0;var r=["y","x","height","width","start"];-1!==r.indexOf(t)?(this.activeTargetList=this.activeTargetList.filter((function(t){return!r.includes(t)})),r.forEach((function(t){e.activeTargetMap[t]&&e.activeTargetList.unshift(t)}))):this.activeTargetList.push(t),null===(n=this.getParent())||void 0===n||n.addToActiveChildren(this)}}},{key:"removeFromActiveTargets",value:function(t){if(this.activeTargetMap[t]){delete this.activeTargetMap[t];var e,n=this.activeTargetList.indexOf(t);n>=0&&this.activeTargetList.splice(n,1),0===this.activeTargetList.length&&(null===(e=this.getParent())||void 0===e||e.removeFromActiveChildren(this))}}},{key:"addToUpdatingTargets",value:function(t){var e;this.updatingTargetMap[t]||(this.updatingTargetMap[t]=!0,this.updatingTargetList.push(t),null===(e=this.getParent())||void 0===e||e.addToUpdatingChildren(this))}},{key:"removeFromUpdatingTargets",value:function(t){if(this.updatingTargetMap[t]){delete this.updatingTargetMap[t];var e,n=this.updatingTargetList.indexOf(t);n>=0&&this.updatingTargetList.splice(n,1),0===this.updatingTargetList.length&&(null===(e=this.getParent())||void 0===e||e.removeFromUpdatingChildren(this))}}},{key:"hasUpdatingTargets",value:function(t){var e,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=X(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw i}}}}(this.updatingTargetList);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this.isTargetImperative(r)&&this.targetValues[r].originalTargetName===t)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"addToUpdatingChildren",value:function(t){this.updatingChildrenMap[t.oid]||(this.updatingChildrenMap[t.oid]=!0,this.updatingChildrenList.push(t.oid))}},{key:"removeFromUpdatingChildren",value:function(t){if(this.updatingChildrenMap[t.oid]){delete this.updatingChildrenMap[t.oid];var e=this.updatingChildrenList.indexOf(t.oid);e>=0&&this.updatingChildrenList.splice(e,1)}}},{key:"hasUpdatingChildren",value:function(){return this.updatingChildrenList.length>0}},{key:"addToActiveChildren",value:function(t){this.activeChildrenMap[t.oid]||(this.activeChildrenMap[t.oid]=!0,this.activeChildrenList.push(t.oid))}},{key:"removeFromActiveChildren",value:function(t){if(this.activeChildrenMap[t.oid]){delete this.activeChildrenMap[t.oid];var e=this.activeChildrenList.indexOf(t.oid);e>=0&&this.activeChildrenList.splice(e,1)}}},{key:"hasActiveChildren",value:function(){return this.activeChildrenList.length>0}},{key:"deleteTargetValue",value:function(t){delete this.targetValues[t],this.addToActiveTargets(t),this.removeFromUpdatingTargets(t),$e().schedule(10,"deleteTargetValue-"+this.oid+"-"+t)}},{key:"resetImperative",value:function(t){var e=this.targetValues[t];return e&&(e.isImperative=!1,e.executionFlag=!1,e.scheduleTimeStamp=void 0,e.step=0,e.cycle=0,e.steps=0,e.cycles=0,e.interval=0),this}},{key:"activateTarget",value:function(t,e){if(this.canTargetBeActivated(t)){u.isDefined("value")&&this.val("__".concat(t),e);var n=this.targetValues[t];n?(n.executionFlag=!1,n.scheduleTimeStamp=void 0,n.step=0,n.cycle=Array.isArray(n.valueList)?1:0,this.updateTargetStatus(t)):this.addToActiveTargets(t),this.activate(t)}return this}},{key:"manageChildTargetExecution",value:function(t,e){return e||this.shouldCalculateChildTargets()||t.hasChildren()||t.addedChildren.count>0||0===t.targetExecutionCount}},{key:"shouldCalculateChildTargets",value:function(){return this.val("shouldCalculateChildTargets")}},{key:"getCoreTargets",value:function(){return u.isDefined(this.val("coreTargets"))?this.val("coreTargets"):this.coreTargets}},{key:"setTargetMethodName",value:function(t,e){this.targetMethodMap[t]||(this.targetMethodMap[t]=[]),this.targetMethodMap[t].includes(e)||this.targetMethodMap[t].push(e)}}])}();function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q(r.key),r)}}function Q(t){var e=function(t){if("object"!=Z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Z(e)?e:e+""}var J=function(){return function(t,e){return e&&G(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xNext=0,this.xNorth=0,this.xWest=0,this.xEast=0,this.xSouth=0,this.scrollLeft=0,this.scrollTop=0,this.absX=0,this.xOverflowReset=0,this.xOverflowLimit=0,this.yNext=0,this.yNorth=0,this.yWest=0,this.yEast=0,this.ySouth=0}),[{key:"setCurrentChild",value:function(t){this.currentChild=t}},{key:"setLocation",value:function(){this.currentChild.x=this.xNext+this.currentChild.getLeftMargin(),this.currentChild.y=this.yNext+this.currentChild.getTopMargin()}},{key:"isOverflow",value:function(){var t=this.currentChild.getMinWidth();return this.absX+this.currentChild.x+t+this.currentChild.getLeftMargin()>this.xOverflowLimit}},{key:"overflow",value:function(){this.xNext=this.scrollLeft-this.absX+this.xOverflowReset,this.yNext=this.ySouth}},{key:"appendNewLine",value:function(){var t=this.currentChild.getHeight()*this.currentChild.getMeasuringScale();this.xNext=this.scrollLeft-this.absX+this.xOverflowReset,this.yNext=this.ySouth>this.yNext?this.ySouth+this.currentChild.val("appendNewLine"):this.ySouth+t+this.currentChild.val("appendNewLine"),this.yEast=this.yNext,this.xSouth=this.xNext,this.ySouth=Math.max(this.yNext,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}},{key:"nextLocation",value:function(){var t=this.currentChild.getHeight()*this.currentChild.getMeasuringScale(),e=this.currentChild.getBaseWidth()*this.currentChild.getMeasuringScale(),n=this.currentChild.getTopBaseHeight()*this.currentChild.getMeasuringScale(),r=this.yNext+t+this.currentChild.getTopMargin()+this.currentChild.getBottomMargin();this.xNext+=e+this.currentChild.getLeftMargin()+this.currentChild.getRightMargin(),this.yNext+=n,this.xSouth=this.xNext,this.yEast=this.yNext,this.xEast=Math.max(this.xNext,this.xEast),this.ySouth=Math.max(r,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}}])}();function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function tt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return et(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,it(r.key),r)}}function rt(t,e,n){return(e=it(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t){var e=function(t){if("object"!=K(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==K(e)?e:e+""}var at=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&nt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"clear",value:function(){t.foundParentWithType={},t.foundParentWithTarget={},t.foundTypeMap={},t.foundTargetMap={},t.foundOids={},t.foundHandler={}}},{key:"findFirstHandler",value:function(e,n){var r=n.eventName,i=n.eventType,a="".concat(e.oid," ").concat(r," ").concat(i);if(t.foundHandler[a])return t.foundHandler[a];var o="scrollTop"===r||"scrollLeft"===r?this.findScrollHandler(e,i,r):this.findEventHandler(e,r);return o&&(t.foundHandler[a]=o),o}},{key:"findFirstPinchHandler",value:function(t){return this.findFirstHandler(t,{eventName:"pinch"})}},{key:"findFirstScrollTopHandler",value:function(t,e){return this.findFirstHandler(t,{eventType:e,eventName:"scrollTop"})}},{key:"findFirstScrollLeftHandler",value:function(t,e){return this.findFirstHandler(t,{eventType:e,eventName:"scrollLeft"})}},{key:"findFirstTouchHandler",value:function(t){return this.findFirstHandler(t,{eventName:"touch"})}},{key:"findScrollHandler",value:function(t,e,n){for(;t&&(!t.canHandleEvents("swipe")||"wheel"===e);){if(t.canHandleEvents(n))return t;t=t.getParent()}}},{key:"findEventHandler",value:function(t,e){for(;t;){if(t.canHandleEvents(e))return t;t=t.getParent()}}},{key:"findParentByType",value:function(e,n){var r="".concat(e.oid,"__").concat(n);if(!u.isDefined(t.foundParentWithType[r]))for(var i=e.getParent();i;){if(i.type===n){t.foundParentWithType[r]=i;break}i=i.getParent()}return t.foundParentWithType[r]}},{key:"findParentByTarget",value:function(e,n){var r="".concat(e.oid,"__").concat(n);if(!u.isDefined(t.foundParentWithTarget[r]))for(var i=e.getParent();i;){if(u.isDefined(i.targets[n])||u.isDefined(i.targetValues[n])){t.foundParentWithTarget[r]=i;break}i=i.getParent()}return t.foundParentWithTarget[r]}},{key:"findByType",value:function(e){if(!u.isDefined(t.foundTypeMap[e])){var n=function(t){if(t.type===e)return t;var r,i=tt(t.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.type===e)return a}}catch(t){i.e(t)}finally{i.f()}},r=n(je.tRoot);r&&(t.foundTypeMap[e]=r)}return t.foundTypeMap[e]}},{key:"findByTarget",value:function(e){if(!u.isDefined(t.foundTargetMap[e])){var n=function(t){if(t.targets[e])return t;var r,i=tt(t.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.targets[e])return a}}catch(t){i.e(t)}finally{i.f()}},r=n(je.tRoot);r&&(t.foundTargetMap[e]=r)}return t.foundTargetMap[e]}},{key:"find",value:function(e){if(!u.isDefined(t.foundOids[e])){var n=function(t){if(t.oid===e)return t;var r,i=tt(t.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.oid===e)return a}}catch(t){i.e(t)}finally{i.f()}},r=n(je.tRoot);r&&(t.foundOids[e]=r)}return t.foundOids[e]}}])}();function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function st(t){return function(t){if(Array.isArray(t))return ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ut(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ct(r.key),r)}}function ct(t){var e=function(t){if("object"!=ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:e+""}function ht(t,e,n){return e=dt(e),function(t,e){if(e&&("object"==ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ft()?Reflect.construct(e,n||[],dt(t).constructor):e.apply(t,n))}function ft(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ft=function(){return!!t})()}function dt(t){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dt(t)}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vt(t,e)}rt(at,"foundParentWithType",{}),rt(at,"foundParentWithTarget",{}),rt(at,"foundTypeMap",{}),rt(at,"foundTargetMap",{}),rt(at,"foundOids",{}),rt(at,"foundHandler",{});var yt=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ht(this,e,[t,n])).addedChildren={count:0,list:[]},r.deletedChildren=[],r.lastChildrenUpdate={additions:[],deletions:[]},r.allChildren=[],r.$dom=null,r.x=0,r.y=0,r.absX=0,r.absY=0,r.domHeight=void 0,r.domWidth=void 0,r.contentWidth=0,r.contentHeight=0,r.bottomBaseWidth=0,r.topBaseHeight=0,r.styleMap={},r.transformMap={},r.visibilityStatus={top:!1,right:!1,bottom:!1,left:!1},r.isNowInvisible=!1,r.visibleChildren=[],r.hasDomNow=!1,r.isNowVisible=!1,r.currentStatus="new",r.initTargets(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vt(t,e)}(e,t),function(t,e){return e&&lt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"createViewport",value:function(){this.viewport=this.viewport||new J;var t=-this.getScrollLeft(),e=-this.getScrollTop(),n=t,r=e;for(var i in this.viewport.xNext=n,this.viewport.xNorth=n,this.viewport.xEast=n,this.viewport.xSouth=n,this.viewport.xWest=n,this.viewport.scrollLeft=t,this.viewport.scrollTop=e,this.viewport.absX=this.absX,this.viewport.absY=this.absY,this.viewport.xOverflowReset=this.absX,this.viewport.xOverflowLimit=this.absX+this.getWidth(),this.viewport.yNext=r,this.viewport.yNorth=r,this.viewport.yWest=r,this.viewport.yEast=r,this.viewport.ySouth=r,Object.assign(this.viewport,this.val("viewport")||{}),this.viewport){var a="viewport_".concat(i);u.isDefined(this.val(a))&&(this.viewport[i]=this.val(a))}return this.viewport}},{key:"calcAbsolutePosition",value:function(t,e){this.absX=u.isDefined(this.val("absX"))?this.val("absX"):this.getParent().absX+t,this.absY=u.isDefined(this.val("absY"))?this.val("absY"):this.getParent().absY+e}},{key:"addChild",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.addedChildren.count+this.allChildren.length;return this.addedChildren.count++,W.addItem(this.addedChildren.list,t,e),$e().schedule(1,"addChild-"+this.oid+"-"+t.oid),this}},{key:"removeChild",value:function(t){return t.val("canDeleteDom",!0),this.deletedChildren.push(t),this.removeFromUpdatingChildren(t),$e().schedule(1,"removeChild-"+this.oid+"-"+t.oid),this}},{key:"moveChild",value:function(t,e){var n;if(this.allChildren.indexOf(t)===e)return this;this.deletedChildren.push(t),this.addedChildren.count++;var r=[{index:e,segment:[t]}];return(n=this.addedChildren.list).push.apply(n,r),this.addedChildren.list.sort((function(t,e){return t.index-e.index})),$e().schedule(1,"removeChild-"+this.oid+"-"+t.oid),this}},{key:"getChildren",value:function(){var t=this;return this.deletedChildren.length>0&&(this.deletedChildren.forEach((function(e){var n=t.allChildren.indexOf(e);t.lastChildrenUpdate.deletions.push(e),n>=0&&t.allChildren.splice(n,1)})),this.deletedChildren.length=0),this.addedChildren.count>0&&(this.addedChildren.list.forEach((function(e){var n,r,i=e.index,a=e.segment;a.forEach((function(e){e.parent=t,u.isDefined(e.val("canDeleteDom"))||!1!==t.val("canDeleteDom")||e.val("canDeleteDom",!1)})),i>=t.allChildren.length?(n=t.allChildren).push.apply(n,st(a)):(r=t.allChildren).splice.apply(r,[i,0].concat(st(a)))})),this.lastChildrenUpdate.additions=this.lastChildrenUpdate.additions.concat(this.addedChildren.list),this.addedChildren.list.length=0,this.addedChildren.count=0),this.allChildren}},{key:"removeAll",value:function(){return this.allChildren=[],this.updatingChildrenList.length=0,this.updatingChildrenMap={},this.hasDom()&&this.$dom.deleteAllChildren(),this}},{key:"addToParentVisibleChildren",value:function(){this.isVisible()&&this.isInFlow()&&this.getParent()&&this.getParent().visibleChildren.push(this)}},{key:"shouldCalculateChildren",value:function(){if(u.isDefined(this.val("calculateChildren")))return this.val("calculateChildren");var t=this.isIncluded()&&(this.isVisible()||"new"===this.currentStatus)&&(this.hasChildren()||this.addedChildren.count>0||this.getContentHeight()>0);return this.currentStatus=void 0,t}},{key:"getFirstChild",value:function(){return this.hasChildren()?this.getChildren()[0]:void 0}},{key:"hasChildren",value:function(){return this.getChildren().length>0}},{key:"findChildren",value:function(t){return this.getChildren().filter((function(e){return e.type===t}))}},{key:"getLastChild",value:function(){return this.hasChildren()?this.getChildren()[this.getChildren().length-1]:void 0}},{key:"getChild",value:function(t){return this.hasChildren()?this.getChildren()[t]:void 0}},{key:"getChildIndex",value:function(t){return this.getChildren().indexOf(t)}},{key:"getChildrenOids",value:function(){return this.getChildren().map((function(t){return t.oid})).join(" ")}},{key:"findChild",value:function(t){return this.getChildren().find((function(e){return e.type===t}))}},{key:"findLastChild",value:function(t){return this.getChildren().findLast((function(e){return e.type===t}))}},{key:"getParentValue",value:function(t){var e=at.findParentByTarget(this,t);return e?e.val(t):void 0}},{key:"delVal",value:function(t){t.startsWith("_")?delete this[t.slice(1)]:delete this.actualValues[t]}},{key:"val",value:function(t,e){var n=this.actualValues;return t.startsWith("_")&&(n=this,t=t.slice(1)),void 0!==e?(e!==n[t]&&(n[t]=e),this):n[t]}},{key:"floorVal",value:function(t){return Math.floor(this.val(t))}},{key:"getDomParent",value:function(){return this.val("domParent")||at.findParentByTarget(this,"domHolder")}},{key:"getDomHolder",value:function(t){var e=this.val("domHolder"),n=this.getDomParent();return!0===e&&t!==this?this.$dom:e&&!0!==e&&t.$dom!==e?e:n?n.$dom:null}},{key:"bug",value:function(){return[{visible:this.isVisible()},{visibilityStatus:this.visibilityStatus},{hasDom:this.hasDom()},{x:this.getX()},{y:this.getY()},{width:this.getWidth()},{height:this.getHeight()},{activeTargetList:this.activeTargetList},{updatingTargetList:this.updatingTargetList},{updatingChildrenList:this.updatingChildrenList},{activeChildrenList:this.activeChildrenList},{children:this.getChildren()},{targetValues:this.targetValues},{actualValues:this.actualValues}]}},{key:"logTree",value:function(){u.logTree(this)}},{key:"isVisible",value:function(){return this.val("isVisible")}},{key:"calcVisibility",value:function(){return u.calcVisibility(this)}},{key:"validateVisibilityInParent",value:function(){return!!u.isDefined(this.val("validateVisibilityInParent"))&&this.val("validateVisibilityInParent")}},{key:"hasDomHolderChanged",value:function(){return!this.reuseDomDefinition()&&this.getDomHolder(this)&&this.getDomHolder(this).exists()&&this.$dom.parent()!==this.getDomHolder(this).element}},{key:"hasBaseElementChanged",value:function(){return this.getBaseElement()!==this.$dom.getTagName()}},{key:"hasDom",value:function(){return!!this.$dom&&this.$dom.exists()}},{key:"getRealParent",value:function(){return this.parent}},{key:"getContentHeight",value:function(){return this.contentHeight}},{key:"getContentWidth",value:function(){return this.contentWidth}},{key:"calcContentWidthHeight",value:function(){this.contentHeight=this.viewport.ySouth-this.viewport.yNorth,this.topBaseHeight=this.viewport.yEast-this.viewport.yNorth,this.bottomBaseWidth=this.viewport.xSouth-this.viewport.xWest,this.contentWidth=this.viewport.xEast-this.viewport.xWest}},{key:"getBaseWidth",value:function(){var t;return null!==(t=this.val("baseWidth"))&&void 0!==t?t:this.getWidth()}},{key:"getMinWidth",value:function(){var t;return null!==(t=this.val("minWidth"))&&void 0!==t?t:this.getWidth()}},{key:"getTopBaseHeight",value:function(){var t;return null!==(t=this.val("topBaseHeight"))&&void 0!==t?t:0}},{key:"getContainerOverflowMode",value:function(){var t;return null!==(t=this.val("containerOverflowMode"))&&void 0!==t?t:"auto"}},{key:"getItemOverflowMode",value:function(){var t;return null!==(t=this.val("itemOverflowMode"))&&void 0!==t?t:"auto"}},{key:"getUIDepth",value:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}},{key:"isTextOnly",value:function(){return this.val("textOnly")}},{key:"getHtml",value:function(){return this.val("html")}},{key:"isInFlow",value:function(){return this.isInFlow}},{key:"canHandleEvents",value:function(t){var e=this.val("canHandleEvents");return u.isDefined(e)?e===t||Array.isArray(e)&&e.includes(t):(u.isDefined(this.val("autoHandleEvents"))||this.val("autoHandleEvents",x.getAutoHandleEvents(this)),this.val("autoHandleEvents").includes(t))}},{key:"keepEventDefault",value:function(){return u.isDefined(this.val("keepEventDefault"))?this.val("keepEventDefault"):!!this.reuseDomDefinition()||void 0}},{key:"canDeleteDom",value:function(){return u.isDefined(this.val("canDeleteDom"))?this.val("canDeleteDom"):!this.reuseDomDefinition()}},{key:"excludeDefaultStyling",value:function(){return!1===this.targets.defaultStyling||this.excludeStyling()||this.reuseDomDefinition()&&0===this.allStyleTargetList.length}},{key:"excludeStyling",value:function(){return!1===this.targets.styling}},{key:"getBracketThreshold",value:function(){return this.val("bracketThreshold")}},{key:"shouldBeBracketed",value:function(){return u.isDefined(this.val("shouldBeBracketed"))?this.val("shouldBeBracketed"):this.getChildren().length>this.getBracketThreshold()}},{key:"isIncluded",value:function(){return this.val("isIncluded")}},{key:"canHaveDom",value:function(){return this.val("canHaveDom")}},{key:"getBaseElement",value:function(){return this.val("baseElement")}},{key:"getOpacity",value:function(){return this.val("opacity")}},{key:"getCenterX",value:function(){return(this.getParentValue("width")-this.getWidth())/2}},{key:"getCenterY",value:function(){return(this.getParentValue("height")-this.getHeight())/2}},{key:"getX",value:function(){return this.val("x")}},{key:"getY",value:function(){return this.val("y")}},{key:"getTransformX",value:function(){var t;return this.absX-(null===(t=this.getDomParent())||void 0===t?void 0:t.absX)}},{key:"getTransformY",value:function(){var t;return this.absY-(null===(t=this.getDomParent())||void 0===t?void 0:t.absY)}},{key:"getZ",value:function(){return this.val("z")}},{key:"getPerspective",value:function(){return this.val("perspective")}},{key:"getRotate",value:function(){return this.val("rotate")}},{key:"getRotateX",value:function(){return this.val("rotateX")}},{key:"getRotateY",value:function(){return this.val("rotateY")}},{key:"getRotateZ",value:function(){return this.val("rotateZ")}},{key:"getScale",value:function(){return this.val("scale")}},{key:"getScaleX",value:function(){return this.val("scaleX")}},{key:"getScaleY",value:function(){return this.val("scaleY")}},{key:"getScaleZ",value:function(){return this.val("scaleZ")}},{key:"getSkewX",value:function(){return this.val("skewX")}},{key:"getSkewY",value:function(){return this.val("skewY")}},{key:"getSkewZ",value:function(){return this.val("skewZ")}},{key:"getMeasuringScale",value:function(){return this.val("scale")}},{key:"getZIndex",value:function(){return this.val("zIndex")}},{key:"getTopMargin",value:function(){return this.val("topMargin")}},{key:"getLeftMargin",value:function(){return this.val("leftMargin")}},{key:"getRightMargin",value:function(){return this.val("rightMargin")}},{key:"getBottomMargin",value:function(){return this.val("bottomMargin")}},{key:"getWidth",value:function(){return this.val("width")}},{key:"getHeight",value:function(){return this.val("height")}},{key:"getScrollTop",value:function(){return Math.floor(this.val("scrollTop"))}},{key:"getScrollLeft",value:function(){return Math.floor(this.val("scrollLeft"))}},{key:"getCss",value:function(){return this.val("css")}},{key:"getStyle",value:function(){return this.val("style")}},{key:"getBackground",value:function(){return this.val("background")}},{key:"getBackgroundColor",value:function(){return this.val("backgroundColor")}},{key:"getAttributes",value:function(){return this.val("attributes")}},{key:"getInputValue",value:function(){return this.hasDom()?this.$dom.value():void 0}},{key:"isOverflowHidden",value:function(){return"hidden"===this.val("overflow")}},{key:"reuseDomDefinition",value:function(){return this.val("reuseDomDefinition")}}])}(z);function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mt(r.key),r)}}function mt(t){var e=function(t){if("object"!=gt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gt(e)?e:e+""}var bt=function(){return function(t,e){return e&&pt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.style=void 0}),[{key:"setup",value:function(){if(!document.getElementsByClassName){var t=function(t,e){var n;if(document.querySelectorAll)n=e.querySelectorAll(".".concat(t));else{var r=e.getElementsByTagName("*");n=[];for(var i=0;i<r.length;i++)r[i].className&&" ".concat(r[i].className," ").indexOf(" ".concat(t," "))>-1&&-1===n.indexOf(r[i])&&n.push(r[i])}return n};document.getElementsByClassName=function(e){return t(e,document)},Element.prototype.getElementsByClassName=function(e){return t(e,this)}}this.style={transform:this.prefixStyle("transform"),transitionTimingFunction:this.prefixStyle("transitionTimingFunction"),transitionDuration:this.prefixStyle("transitionDuration")}}},{key:"prefixStyle",value:function(t){var e=new f;e.create("div");for(var n=e.style(),r="",i=["webkitT","MozT","msT","OT","t"],a=0;a<i.length;a++)i[a]+"ransform"in n&&(r=i[a].substr(0,i[a].length-1));return""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}}])}();function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){St(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function St(t,e,n){return(e=Ct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ct(r.key),r)}}function Ct(t){var e=function(t){if("object"!=Tt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tt(e)?e:e+""}var Mt=function(){return function(t,e){return e&&Et(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$document=new f(document),this.currentTouch={deltaY:0,deltaX:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""},this.lastEvent=void 0,this.touchTimeStamp=0,this.ignoreStartEvents=!0,this.cursor={x:0,y:0},this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0,this.touchCount=0,this.canFindHandlers=!0,this.swipeStartX=0,this.swipeStartY=0,this.currentEventName="",this.currentEventType="",this.currentEventTarget=void 0,this.currentHandlers={touch:null,scrollLeft:null,scrollTop:null,pinch:null,enterEvent:null,leaveEvent:null,focus:null,justFocused:null,blur:null},this.eventQueue=[],this.attachedEventMap={},this.eventTargetMap={},this.startEvents={touchstart:{eventName:"touchstart",inputType:"touch",eventType:"start",order:1,windowEvent:!1,queue:!0},pointerdown:{eventName:"mousedown",inputType:"pointer",eventType:"start",order:2,windowEvent:!1,queue:!0},mousedown:{eventName:"mousedown",inputType:"mouse",eventType:"start",order:3,windowEvent:!1,queue:!0}},this.endEvents={touchend:{eventName:"touchend",inputType:"touch",eventType:"end",order:1,windowEvent:!1,queue:!0},pointerup:{eventName:"mouseup",inputType:"pointer",eventType:"end",order:1,windowEvent:!1,queue:!0},mouseup:{eventName:"mouseup",inputType:"mouse",eventType:"end",order:3,windowEvent:!1,queue:!0}},this.cancelEvents={touchcancel:{eventName:"touchend",inputType:"touch",eventType:"cancel",order:1,windowEvent:!1,queue:!0},pointercancel:{eventName:"mousecancel",inputType:"pointer",eventType:"cancel",order:2,windowEvent:!1,queue:!0},mousecancel:{eventName:"mouseup",inputType:"mouse",eventType:"cancel",order:3,windowEvent:!1,queue:!0}},this.windowEvents={keyup:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0,queue:!0},keydown:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0,queue:!0},blur:{eventName:"blur",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!0,queue:!0},resize:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0,queue:!1},orientationchange:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0,queue:!1}},this.windowScrollEvents={scroll:{eventName:"scroll",inputType:"",eventType:"windowScroll",order:1,windowEvent:!0,queue:!0}},this.leaveEvents={mouseleave:{eventName:"mouseleave",inputType:"mouse",eventType:"cancel",order:3,windowEvent:!1,queue:!0}},this.moveEvents={touchmove:{eventName:"touchmove",inputType:"touch",eventType:"move",order:1,windowEvent:!1,queue:!0},pointermove:{eventName:"mousemove",inputType:"pointer",eventType:"move",order:2,windowEvent:!1,queue:!0},mousemove:{eventName:"mousemove",inputType:"mouse",eventType:"move",order:3,windowEvent:!1,queue:!0}},this.wheelEvents={wheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1,queue:!0},mousewheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1,queue:!0}},this.allEvents=kt(kt(kt(kt(kt(kt(kt(kt({},this.startEvents),this.endEvents),this.cancelEvents),this.leaveEvents),this.moveEvents),this.wheelEvents),this.windowEvents),this.windowScrollEvents),this.bindedHandleEvent=this.bindedHandleEvent||this.handleEvent.bind(this)}),[{key:"attachEvents",value:function(t,e){var n=this;Object.keys(e).forEach((function(e){t.addEvent(e,n.bindedHandleEvent)}))}},{key:"detachWindowEvents",value:function(){var t=this;Object.keys(this.windowEvents).forEach((function(e){je.$window.detachEvent(e,t.bindedHandleEvent)}))}},{key:"attachWindowEvents",value:function(){this.attachEvents(je.$window,this.windowEvents)}},{key:"attachTargetEvents",value:function(t){var e=this;this.eventTargetMap[t]||(this.eventTargetMap[t]=!0,x.targetToEventsMapping[t].forEach((function(n){"onTouchStart"===t&&(e.ignoreStartEvents=!1),e.attachedEventMap[n]||(e.attachedEventMap[n]=e.$document,e.attachEvents(e.attachedEventMap[n],e[n]))})))}},{key:"detachAll",value:function(){var t=this;Object.keys(this.attachedEventMap).forEach((function(e){var n=t.attachedEventMap[e],r=t[e];Object.keys(r).forEach((function(e){n.detachEvent(e,t.bindedHandleEvent)}))}))}},{key:"resetEventsOnTimeout",value:function(){if(this.touchTimeStamp>0&&0===this.touchCount&&(this.currentTouch.deltaY||this.currentTouch.deltaX||this.currentTouch.pinchDelta)){var t=u.now()-this.touchTimeStamp;$e().schedule(10,"scroll decay "),t>100&&(this.currentTouch.deltaY*=.9,this.currentTouch.deltaX*=.9,this.currentTouch.pinchDelta*=.9,Math.abs(this.currentTouch.deltaY)<1&&(this.currentTouch.deltaY=0),Math.abs(this.currentTouch.deltaX)<1&&(this.currentTouch.deltaX=0),Math.abs(this.currentTouch.pinchDelta)<1&&(this.currentTouch.pinchDelta=0),0===this.currentTouch.deltaX&&0===this.currentTouch.deltaY&&0===this.currentTouch.pinchDelta&&(this.touchTimeStamp=0))}}},{key:"findEventHandlers",value:function(t){var e,n,r,i,a,o=t.tmodel,s=t.eventType;o&&(e=at.findFirstTouchHandler(o),n=at.findFirstScrollLeftHandler(o,s),r=at.findFirstScrollTopHandler(o,s),i=at.findFirstPinchHandler(o),a=f.hasFocus(o)?o:this.currentHandlers.focus),this.currentHandlers.scrollLeft===n&&this.currentHandlers.scrollTop===r||this.clearTouch(),this.currentHandlers.touch!==e&&(this.currentHandlers.enterEvent=e,this.currentHandlers.leaveEvent=this.currentHandlers.touch),this.currentHandlers.focus!==a&&(this.currentHandlers.justFocused=a,this.currentHandlers.blur=this.currentHandlers.focus),this.currentHandlers.touch=e,this.currentHandlers.scrollLeft=n,this.currentHandlers.scrollTop=r,this.currentHandlers.pinch=i,this.currentHandlers.focus=a}},{key:"captureEvents",value:function(){if(this.currentHandlers.enterEvent=void 0,this.currentHandlers.leaveEvent=void 0,this.currentHandlers.justFocused=void 0,this.currentHandlers.blur=void 0,0===this.eventQueue.length)return this.currentEventName="",this.currentEventType="",this.currentEventTarget=void 0,void(this.currentKey="");var t=this.eventQueue.shift();this.canFindHandlers&&this.findEventHandlers(t),"end"!==t.eventType&&"click"!==t.eventType||(this.canFindHandlers=!0),this.currentEventName=t.eventName,this.currentEventType=t.eventType,this.currentEventTarget=t.eventTarget,this.currentKey=this.currentTouch.key,this.currentTouch.key=""}},{key:"handleEvent",value:function(t){var e,n,r;if(t){var i=t.type,a=t.target,o=this.allEvents[i];if(o){var s=o.eventName,l=o.inputType,c=o.eventType,h=o.order,f=o.queue,d=u.now(),v=this.getTModelFromEvent(t),y={eventName:s,eventItem:o,eventType:c,originalName:i,tmodel:v,eventTarget:a,timeStamp:d};if(null!==(e=this.lastEvent)&&void 0!==e&&e.eventItem){var g=this.lastEvent,p=g.eventItem,m=d-g.timeStamp;if(l&&p.inputType&&p.inputType!==l&&h>p.order)return;if(this.eventQueue.length>10&&m<50)for(var b=0,T=this.eventQueue.length-1;T>=0&&(null===(w=this.eventQueue[T].eventItem)||void 0===w?void 0:w.eventType)===c;T--){var w;if(++b>2)return}}switch(this.lastEvent=y,f&&this.eventQueue.push(this.lastEvent),s){case"mousedown":case"touchstart":if(this.clearStart(),this.clearTouch(),this.touchCount=this.countTouches(t),this.canFindHandlers=!1,this.preventDefault(v,s)&&t.preventDefault(),this.start0=this.getTouch(t),this.start1=this.getTouch(t,1),this.cursor.x=this.start0.x,this.cursor.y=this.start0.y,this.findEventHandlers(this.lastEvent),this.swipeStartX=this.start0.x-(null===(n=this.currentHandlers.touch)||void 0===n?void 0:n.getX()),this.swipeStartY=this.start0.y-(null===(r=this.currentHandlers.touch)||void 0===r?void 0:r.getY()),t.stopPropagation(),this.ignoreStartEvents)return;break;case"mousemove":case"touchmove":var k=this.getTouch(t);this.cursor.x=k.x,this.cursor.y=k.y,this.preventDefault(v,s)&&t.preventDefault(),this.touchCount>0?(this.touchTimeStamp=Math.max(d,this.touchTimeStamp),this.move(t),t.stopPropagation()):this.isCurrentSource("wheel")&&this.clearTouch();break;case"mouseup":case"touchend":if(this.preventDefault(v,s)&&t.preventDefault(),this.end(t),this.start0){var S=this.end0?Math.abs(this.end0.originalX-this.start0.originalX):0,E=this.end0?Math.abs(this.end0.originalY-this.start0.originalY):0,C=this.end0?Math.abs(this.end0.timeStamp-this.start0.timeStamp):300;S<=1&&E<=1&&C<=300&&(this.eventQueue.length=0,s="click",c="click",this.eventQueue.push({eventName:s,eventItem:o,eventType:c,originalName:i,tmodel:v,eventTarget:a,timeStamp:d}))}this.clearStart(),this.touchCount=0,t.stopPropagation();break;case"wheel":this.preventDefault(v,s)&&t.preventDefault(),this.touchTimeStamp=Math.max(d,this.touchTimeStamp),this.wheel(t);break;case"key":this.currentTouch.key=t.which||t.keyCode;break;case"resize":Ye().val("width",Ye().targets.width()),Ye().val("height",Ye().targets.height())}$e().schedule(0,"".concat(i,"-").concat(s,"-").concat((t.target.tagName||"").toUpperCase()))}}}},{key:"preventDefault",value:function(t,e){return!t||!(!0===t.keepEventDefault()||Array.isArray(t.keepEventDefault())&&t.keepEventDefault().includes(e))}},{key:"getTModelFromEvent",value:function(t){var e,n=null===(e=t.target)||void 0===e?void 0:e.id;return n&&je.manager.visibleOidMap[n]||(n=f.findNearestParentWithId(t.target)),je.manager.visibleOidMap[n]}},{key:"clearStart",value:function(){this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0}},{key:"clearTouch",value:function(){this.currentTouch={deltaY:0,deltaX:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""}}},{key:"clearAll",value:function(){this.clearStart(),this.clearTouch(),this.eventQueue.length=0,this.touchTimeStamp=0,this.touchCount=0,this.canFindHandlers=!0,this.lastEvent=void 0,this.attachedEventMap={},this.eventTargetMap={},this.ignoreStartEvents=!0,this.swipeStartX=0,this.swipeStartY=0}},{key:"deltaX",value:function(){return this.currentTouch.deltaX}},{key:"deltaY",value:function(){return this.currentTouch.deltaY}},{key:"cursorX",value:function(){return this.cursor.x}},{key:"cursorY",value:function(){return this.cursor.y}},{key:"swipeX",value:function(){return this.cursor.x-this.swipeStartX}},{key:"swipeY",value:function(){return this.cursor.y-this.swipeStartY}},{key:"pinchDelta",value:function(){return this.currentTouch.pinchDelta}},{key:"dir",value:function(){return this.currentTouch.dir}},{key:"getScrollLeftHandler",value:function(){return this.currentHandlers.scrollLeft}},{key:"getScrollTopHandler",value:function(){return this.currentHandlers.scrollTop}},{key:"getPinchHandler",value:function(){return this.currentHandlers.pinch}},{key:"getTouchHandler",value:function(){return this.currentHandlers.touch}},{key:"getTouchHandlerType",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.type:null}},{key:"getTouchHandlerOid",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.oid:null}},{key:"getTouchCount",value:function(){return this.touchCount}},{key:"isClickEvent",value:function(){return"click"===this.getEventType()}},{key:"isResizeEvent",value:function(){return"resize"===this.getEventType()}},{key:"isSwipeEvent",value:function(){return this.hasDelta()&&1===this.touchCount}},{key:"isScrollEvent",value:function(){return this.hasDelta()&&this.isCurrentSource("wheel")}},{key:"hasDelta",value:function(){return Math.abs(this.deltaX())>=1||Math.abs(this.deltaY())>=1}},{key:"isEndEvent",value:function(){return"end"===this.getEventType()||"click"===this.getEventType()}},{key:"isStartEvent",value:function(){return"start"===this.getEventType()}},{key:"getEventName",value:function(){return this.currentEventName}},{key:"getEventTarget",value:function(){return this.currentEventTarget}},{key:"getEventType",value:function(){return this.currentEventType}},{key:"isClickHandler",value:function(t){return this.getTouchHandler()===t&&this.isClickEvent()}},{key:"isClickHandlerType",value:function(t){return this.getTouchHandlerType()===t&&this.isClickEvent()}},{key:"isTouchHandler",value:function(t){return this.getTouchHandler()===t&&t.canHandleEvents("touch")}},{key:"isEnterEventHandler",value:function(t){return u.contains(t,this.currentHandlers.enterEvent)&&!u.contains(t,this.currentHandlers.leaveEvent)}},{key:"isLeaveEventHandler",value:function(t){return u.contains(t,this.currentHandlers.leaveEvent)&&!u.contains(t,this.currentHandlers.enterEvent)}},{key:"onFocus",value:function(t){return this.currentHandlers.justFocused===t}},{key:"onBlur",value:function(t){return this.currentHandlers.blur===t}},{key:"hasFocus",value:function(t){return this.currentHandlers.focus===t}},{key:"isTouchHandlerType",value:function(t){return this.getTouchHandlerType()===t}},{key:"isScrollLeftHandler",value:function(t){return this.currentHandlers.scrollLeft===t}},{key:"isScrollTopHandler",value:function(t){return this.currentHandlers.scrollTop===t}},{key:"isPinchHandler",value:function(t){return this.currentHandlers.pinch===t}},{key:"isCurrentSource",value:function(t){return this.currentTouch.source===t}},{key:"isTouchHandlerOrAncestor",value:function(t){for(var e=this.getTouchHandler();t;){if(t===e)return!0;t=t.getParent()}return!1}},{key:"isTouchHandlerOrParent",value:function(t){var e=this.getTouchHandler();return t===e||t.getParent()===e}},{key:"containsTouchHandler",value:function(t){return u.contains(t,this.getTouchHandler())}},{key:"countTouches",value:function(t){var e,n;return(null===(e=t.touches)||void 0===e?void 0:e.length)||(null===(n=t.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n.length)||1}},{key:"getTouch",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(null===(e=t.touches)||void 0===e?void 0:e[r])||(null===(n=t.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n[r])||t,a=u.isDefined(i.clientX)?i.clientX:i.pageX||0,o=u.isDefined(i.clientY)?i.clientY:i.pageY||0;return{x:a,y:o,originalX:a,originalY:o,target:i.target,timeStamp:u.now()}}},{key:"move",value:function(t){if(1===this.touchCount){if(this.start0.y=this.end0?this.end0.y:this.start0.y,this.start0.x=this.end0?this.end0.x:this.start0.x,this.end0=this.getTouch(t),u.isDefined(this.end0)){var e=this.start0.x-this.end0.x,n=this.start0.y-this.end0.y;this.setDeltaXDeltaY(e,n,"touch")}}else if(this.touchCount>=2){this.end0=this.getTouch(t),this.end1=this.getTouch(t,1);var r=u.distance(this.start0.x,this.start0.y,this.start1.x,this.start1.y),i=u.distance(this.end0.x,this.end0.y,this.end1.x,this.end1.y)-r;this.currentTouch.pinchDelta=i>0?.3:i<0?-.3:0}}},{key:"end",value:function(){if(this.touchCount<=1&&this.start0){var t,e=0,n=0,r=1;u.isDefined(this.end0)&&(e=this.start0.originalX-this.end0.x,n=this.start0.originalY-this.end0.y,r=this.end0.timeStamp-this.start0.timeStamp),"horizontal"===this.currentTouch.orientation&&Math.abs(e)>0?(t=u.momentum(0,e,r),this.currentTouch.deltaX=t.distance,this.currentTouch.manualMomentumFlag=!0,this.touchTimeStamp=u.now()+t.duration):"vertical"===this.currentTouch.orientation&&Math.abs(n)>0&&(t=u.momentum(0,n,r),this.currentTouch.deltaY=t.distance,this.currentTouch.manualMomentumFlag=!0,this.touchTimeStamp=u.now()+t.duration)}}},{key:"setDeltaXDeltaY",value:function(t,e,n){var r=Math.abs(t)-Math.abs(e);r>=1?("none"===this.currentTouch.orientation||"vertical"===this.currentTouch.orientation&&r>3||"horizontal"===this.currentTouch.orientation)&&(this.currentTouch.orientation="horizontal",this.currentTouch.dir=t<=-1?"left":t>=1?"right":this.currentTouch.dir,this.currentTouch.source=n):("none"===this.currentTouch.orientation||"horizontal"===this.currentTouch.orientation&&r<-3||"vertical"===this.currentTouch.orientation)&&(this.currentTouch.orientation="vertical",this.currentTouch.dir=e<=-1?"up":e>=1?"down":this.currentTouch.dir,this.currentTouch.source=n),this.currentTouch.deltaY=e,this.currentTouch.deltaX=t}},{key:"wheel",value:function(t){var e=0,n=0;this.currentTouch.pinchDelta=0,this.start0=this.getTouch(t),t.ctrlKey&&"deltaY"in t?this.currentTouch.pinchDelta=-t.deltaY/10:"deltaX"in t?(e=t.deltaX,n=t.deltaY):"wheelDeltaX"in t?(e=-t.wheelDeltaX/120,n=-t.wheelDeltaY/120):"wheelDelta"in t?e=-t.wheelDelta/120:"detail"in t&&(e=t.detail/3),this.setDeltaXDeltaY(e,n,"wheel")}}])}();function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){Pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pt(t,e,n){return(e=jt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jt(r.key),r)}}function jt(t){var e=function(t){if("object"!=xt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xt(e)?e:e+""}var Vt=function(){return function(t,e){return e&&Ot(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cacheMap={},this.fetchingAPIMap={},this.fetchingImageMap={}}),[{key:"fetchCommon",value:function(t,e,n,r,i){var a;return e&&this.isFetched(e)?"function"==typeof(null===(a=n.targets[n.key])||void 0===a?void 0:a.onSuccess)&&n.isTargetEnabled(n.key)&&n.targets[n.key].onSuccess.call(n,Lt(Lt({},this.cacheMap[e]),{},{fetchingPeriod:0})):r[t]?r[t].targets.push({tmodel:n,targetName:n.key}):(r[t]={fetchId:t,cacheId:e,fetchingFlag:!0,startTime:u.now(),targets:[{tmodel:n,targetName:n.key}],fetchMap:r},i()),t}},{key:"fetch",value:function(t,e,n,r){var i=this,a="".concat(t.oid,"_").concat(e,"_").concat(JSON.stringify(n));return this.fetchCommon(a,r,t,this.fetchingAPIMap,(function(){i.ajaxAPI(e,n,i.fetchingAPIMap[a])}))}},{key:"fetchImage",value:function(t,e,n){var r=this,i="".concat(t.oid,"_").concat(e);return this.fetchCommon(i,n,t,this.fetchingImageMap,(function(){r.loadImage(e,r.fetchingImageMap[i])}))}},{key:"isFetching",value:function(t){var e,n;return null!==(e=null===(n=this.fetchingAPIMap[t])||void 0===n?void 0:n.fetchingFlag)&&void 0!==e&&e}},{key:"isFetched",value:function(t){var e,n;return null!==(e=null===(n=this.cacheMap[t])||void 0===n?void 0:n.success)&&void 0!==e&&e}},{key:"getFetchingPeriod",value:function(t){return this.fetchingAPIMap[t]?u.now()-this.fetchingAPIMap[t].startTime:void 0}},{key:"fetchCache",value:function(t){return this.cacheMap[t]}},{key:"handleSuccess",value:function(t,e){var n=u.now(),r=t.fetchId,i=t.cacheId,a=t.startTime,o=t.targets,s=t.fetchMap,l={fetchingPeriod:n-a,success:!0,result:e};o.forEach((function(t){var e,n=t.tmodel,r=t.targetName;"function"==typeof(null===(e=n.targets[r])||void 0===e?void 0:e.onSuccess)&&n.isTargetEnabled(r)&&n.targets[r].onSuccess.call(n,l)})),delete s[r],i&&(this.cacheMap[i]=l),$e().schedule(0,"api_success_".concat(r))}},{key:"handleError",value:function(t,e){var n=u.now(),r=t.fetchId,i=t.cacheId,a=t.startTime,o=t.targets,s=t.fetchMap,l={fetchingPeriod:n-a,success:!1,error:e};o.forEach((function(t){var e,n=t.tmodel,r=t.targetName;"function"==typeof(null===(e=n.targets[r])||void 0===e?void 0:e.onError)&&n.targets[r].onError.call(n,l)})),delete s[r],i&&(this.cacheMap[i]=l),$e().schedule(0,"api_error_".concat(r))}},{key:"ajaxAPI",value:function(t,e,n){var r=this,i={dataType:"json",type:"GET",success:function(t){return r.handleSuccess(n,t)},error:function(t){return r.handleError(n,t)}};f.ajax(Lt(Lt({},i),{},{url:t},{data:e}))}},{key:"loadImage",value:function(t,e){var n=this,r=new Image;r.src=t,r.onload=function(){var t={width:r.width,height:r.height,src:r.src};n.handleSuccess(e,t)},r.onerror=r.onerror=function(){n.handleError(e,"not found")}}}])}();function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,It(r.key),r)}}function It(t){var e=function(t){if("object"!=At(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==At(e)?e:e+""}function Ft(t,e,n){return e=Rt(e),function(t,e){if(e&&("object"==At(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Nt()?Reflect.construct(e,n||[],Rt(t).constructor):e.apply(t,n))}function Nt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nt=function(){return!!t})()}function Rt(t){return Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rt(t)}function Yt(t,e){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yt(t,e)}var Bt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ft(this,e,["BI"])).parent=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(e,t),function(t,e){return e&&Ht(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"canHaveDom",value:function(){return!1}},{key:"getItemOverflowMode",value:function(){return"never"}},{key:"shouldBeBracketed",value:function(){return!1}},{key:"excludeDefaultStyling",value:function(){return!0}},{key:"isIncluded",value:function(){return!1}},{key:"getWidth",value:function(){return this.getContentWidth()}},{key:"getHeight",value:function(){return this.getContentHeight()}},{key:"getBaseWidth",value:function(){return this.bottomBaseWidth}},{key:"getContainerOverflowMode",value:function(){return this.getRealParent().getContainerOverflowMode()}},{key:"getTopBaseHeight",value:function(){return this.topBaseHeight}},{key:"isVisible",value:function(){return this.visibilityStatus.top&&this.visibilityStatus.bottom}},{key:"addToParentVisibleChildren",value:function(){}},{key:"createViewport",value:function(){return this.viewport=this.viewport||new J,this.viewport.xNext=this.x,this.viewport.xNorth=this.x,this.viewport.xEast=this.x,this.viewport.xSouth=this.x,this.viewport.xWest=this.x,this.viewport.absX=this.getRealParent().viewport.absX,this.viewport.absY=this.getRealParent().viewport.absY,this.viewport.scrollTop=this.getRealParent().viewport.scrollTop,this.viewport.scrollLeft=this.getRealParent().viewport.scrollLeft,this.viewport.xOverflowReset=this.getRealParent().viewport.xOverflowReset,this.viewport.xOverflowLimit=this.getRealParent().viewport.xOverflowLimit,this.viewport.yNext=this.y,this.viewport.yNorth=this.y,this.viewport.yWest=this.y,this.viewport.yEast=this.y,this.viewport.ySouth=this.getRealParent().viewport.ySouth,this.viewport}},{key:"getRealParent",value:function(){return this.realParent}},{key:"calcAbsolutePosition",value:function(t,e){this.absX=t+this.getRealParent().absX,this.absY=e+this.getRealParent().absY}},{key:"shouldCalculateChildren",value:function(){var t=this.isVisible()||"new"===this.currentStatus;return this.currentStatus=void 0,t}},{key:"validateVisibilityInParent",value:function(){return this.getRealParent().validateVisibilityInParent()}},{key:"getChildren",value:function(){return this.allChildren}}])}(yt);function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Xt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ut(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ut(t,e){if(t){if("string"==typeof t)return $t(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(t,e):void 0}}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zt(r.key),r)}}function qt(t,e,n){return(e=zt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zt(t){var e=function(t){if("object"!=Wt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wt(e)?e:e+""}var Zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&_t(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"generate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.bracketMap[e.oid];return!r||r.allChildren!==e.allChildren||n?t.bracketMap[e.oid]={brackets:t.buildTreeBottomUp(e,e.getChildren()),updateCount:0,allChildren:e.allChildren}:e.lastChildrenUpdate.deletions.length>0?t.updateTreeOnDeletions(e.lastChildrenUpdate.deletions):e.lastChildrenUpdate.additions.length>0&&t.updateTreeOnAdditions(e,e.lastChildrenUpdate.additions),e.lastChildrenUpdate.additions.length=0,e.lastChildrenUpdate.deletions.length=0,t.bracketMap[e.oid].brackets}},{key:"updateTreeOnDeletions",value:function(t){function e(t,n){if(t){var r=t.allChildren.indexOf(n);r>=0&&(t.allChildren.splice(r,1),0===t.allChildren.length&&e(t.parent,t))}}t.forEach((function(t){return e(t.bracket,t)}))}},{key:"updateTreeOnAdditions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.getChildren(),i=new Set,a=e.getBracketThreshold();n.forEach((function(t){var e=t.index;t.segment.forEach((function(t,n){return i.add(e+n)}))}));var o=Array.from(i).sort((function(t,e){return t-e})),s=null,u=null;o.forEach((function(n){var i=Math.floor(n/a)*a,o=Math.min(r.length,i+a);null===s?(s=i,u=o):i<=u+1?u=Math.max(u,o):(t.updateSegmentInTree(e,r,s,u),s=i,u=o)})),null!==s&&null!==u&&t.updateSegmentInTree(e,r,s,u)}},{key:"updateSegmentInTree",value:function(e,n,r,i){for(var a,o=t.bracketMap[e.oid].brackets,s=t.buildTreeBottomUp(e,n.slice(r,i)),u=e.getBracketThreshold(),l=o,c=void 0;;){var h,f=null,d=Xt(l);try{for(d.s();!(h=d.n()).done;){var v=h.value;if(!(v.getFirstChild()instanceof Bt))break;var y=v.startIndex,g=Math.ceil(v.endIndex/u)*u;if(y<=r&&g>=i){f=v.getChildren(),c=v;break}}}catch(t){d.e(t)}finally{d.f()}if(!f)break;l=f}for(var p=0;p<l.length&&l[p].endIndex<=r;)p++;for(var m=0;p+m<l.length&&l[p+m].startIndex<=i;)m++;var b=l.length>p?l[p].startIndex:l.length>0?l[l.length-1].endIndex:0;if((a=l).splice.apply(a,[p,m].concat(function(t){return function(t){if(Array.isArray(t))return $t(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ut(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(s))),c){var T,w=Xt(s);try{for(w.s();!(T=w.n()).done;)T.value.parent=c}catch(t){w.e(t)}finally{w.f()}}t.reindexSegment(s,b),t.bracketMap[e.oid].updateCount++,l.length>u&&(t.bracketMap[e.oid].brackets=t.buildTreeBottomUp(e,l))}},{key:"buildTreeBottomUp",value:function(e,n){for(var r=n.length,i=e.getBracketThreshold()-1,a=[],o=0,s=0;s<r;s++)s-o!==i&&s!==r-1||(a.push(t.createBracket(e,n,o,s+1)),o=s+1);return a.length>i?t.buildTreeBottomUp(e,a):a}},{key:"createBracket",value:function(e,n,r,i){var a=new Bt(e);return a.allChildren=n.slice(r,i),a.startIndex=a.allChildren[0]instanceof Bt?a.allChildren[0].startIndex:r,a.endIndex=a.allChildren[a.allChildren.length-1]instanceof Bt?a.allChildren[a.allChildren.length-1].endIndex:i,a.allChildren.forEach((function(t){t instanceof Bt?(t.realParent=e,t.parent=a):t.bracket=a})),a.realParent=e,t.all[a.oid]=a,a}},{key:"reindexSegment",value:function(t,e){for(var n=t.slice(0),r=n[n.length-1];n.length>0;){var i=n.shift();i.startIndex+=e,i.endIndex+=e,i instanceof Bt&&i.getChildren().forEach((function(t){u.isDefined(t.startIndex)&&u.isDefined(t.endIndex)&&n.push(t)}))}for(var a=r.getParent();a;)a.endIndex=Math.max(a.endIndex,r.endIndex),a=a.getParent()}}])}();function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Qt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Jt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,te(r.key),r)}}function te(t){var e=function(t){if("object"!=Gt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Gt(e)?e:e+""}qt(Zt,"bracketMap",{}),qt(Zt,"all",{});var ee=function(){return function(t,e){return e&&Kt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hasLocationList=[],this.hasLocationMap={},this.visibleChildrenLengthList=[],this.childrenLengthList=[],this.locationListStats=[],this.activatedList=[],this.activatedMap={},this.screenWidth=ze(),this.screenHeight=Ze(),this.resizeLastUpdate=0,this.resizeFlag=!1}),[{key:"calculateAll",value:function(){var t=this;this.hasLocationList.length=0,this.hasLocationMap={},this.locationListStats=[],this.visibleChildrenLengthList.length=0,this.childrenLengthList.length=0,this.startTime=u.now(),this.resizeFlag=!1,this.screenWidth===ze()&&this.screenHeight===Ze()||(this.resizeLastUpdate=this.startTime,this.resizeFlag=!1,this.screenWidth=ze(),this.screenHeight=Ze()),this.calculate(),this.visibleChildrenLengthList.forEach((function(e){var n=e.tmodel;e.length===n.visibleChildren.length&&0!==n.visibleChildren.length||t.runEventTargets(n,"onVisibleChildrenChange")})),this.childrenLengthList.forEach((function(e){var n=e.tmodel;e.length!==n.getChildren().length&&t.runEventTargets(n,"onChildrenChange")}))}},{key:"calculate",value:function(){this.addToLocationList(je.tRoot),this.calculateContainer(je.tRoot)}},{key:"calculateActivated",value:function(){for(var t=this,e=0,n=function(){var n=t.activatedList[e++];je.targetManager.applyTargetValues(n,n.activatedTargets),n.updatingTargetList.length>0&&je.targetManager.setActualValues(n,n.updatingTargetList.filter((function(t){return 0===n.getTargetStep(t)}))),t.hasLocationMap[n.oid]||t.addToLocationList(n)};e<this.activatedList.length;)n();this.activatedList.length=0,this.activatedMap={}}},{key:"getChildren",value:function(t){return t.shouldBeBracketed()?Zt.generate(t):(Zt.bracketMap[t.oid]&&delete Zt.bracketMap[t.oid],t.getChildren())}},{key:"calculateContainer",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getChildren(t),i=t.createViewport(),a=t.getContentWidth(),o=t.getContentHeight();t.visibleChildren.length=0;var s,l=Qt(r);try{var c=function(){var r=s.value;if(!r)return 1;e.locationListStats.push(r.oid),i.setCurrentChild(r),i.setLocation(),r.isIncluded()&&t.manageChildTargetExecution(r,n)&&e.calculateTargets(r),("always"===t.getContainerOverflowMode()||"always"===r.getItemOverflowMode()||"auto"===t.getContainerOverflowMode()&&"auto"===r.getItemOverflowMode()&&i.isOverflow())&&(i.overflow(),i.setLocation()),r.isIncluded()&&(r.targets.onVisibleChildrenChange&&e.visibleChildrenLengthList.push({tmodel:r,length:r.visibleChildren.length}),r.targets.onChildrenChange&&e.childrenLengthList.push({tmodel:r,length:r.getChildren().length}),e.addToLocationList(r)),r.getCoreTargets().forEach((function(t){!r.isTargetEnabled(t)||r.isTargetUpdating(t)||r.isTargetImperative(t)||N.executeDeclarativeTarget(r,t)})),u.isDefined(r.targetValues.x)||r.val("x",r.x),u.isDefined(r.targetValues.y)||r.val("y",r.y),r.calcAbsolutePosition(r.getX(),r.getY()),r.excludeDefaultStyling()||(r.addToStyleTargetList("x"),r.addToStyleTargetList("y"));var a=r.isVisible();u.isDefined(r.targets.isVisible)?N.executeDeclarativeTarget(r,"isVisible"):r.calcVisibility(),r.isNowVisible=!1===a&&r.isVisible(),r.addToParentVisibleChildren(),r.shouldCalculateChildren()&&e.calculateContainer(r,n&&!1!==t.shouldCalculateChildTargets()),r.isInFlow()&&(u.isNumber(r.val("appendNewLine"))?(i.appendNewLine(),t.calcContentWidthHeight()):(t.calcContentWidthHeight(),i.nextLocation())),!r.excludeDefaultStyling()&&!u.isDefined(r.targetValues.height)&&!u.isDefined(r.targets.heightFromDom)&&r.getContentHeight()>0&&(r.val("height",r.getContentHeight()),r.addToStyleTargetList("height")),!r.excludeDefaultStyling()&&!u.isDefined(r.targetValues.width)&&!u.isDefined(r.targets.widthFromDom)&&r.getContentWidth()>0&&(r.val("width",r.getContentWidth()),r.addToStyleTargetList("width")),t.calcContentWidthHeight()};for(l.s();!(s=l.n()).done;)c()}catch(t){l.e(t)}finally{l.f()}a===t.getContentWidth()&&o===t.getContentHeight()||this.runEventTargets(t,"onContentResize");var h,f=Qt(r);try{for(f.s();!(h=f.n()).done;){var d=h.value;this.checkEventTargets(d)}}catch(t){f.e(t)}finally{f.f()}}},{key:"calculateTargets",value:function(t){this.checkInternalEventTargets(t),je.targetManager.applyTargetValues(t),je.targetManager.setActualValues(t),t.hasDom()&&W.shouldMeasureWidthFromDom(t)&&(x.setWidthFromDom(t,this.resizeFlag),t.addToStyleTargetList("width")),t.hasDom()&&W.shouldMeasureHeightFromDom(t)&&(x.setHeightFromDom(t,this.resizeFlag),t.addToStyleTargetList("height")),t.isNowVisible=!1,t.hasDomNow=!1,t.targetExecutionCount++}},{key:"checkEventTargetsByType",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];t.eventTargetList.forEach((function(i){e[i]&&e[i](t)&&r.push(i),n&&x.targetToEventsMapping[i]&&Be().attachTargetEvents(i)})),this.runEventTargets(t,r)}},{key:"checkInternalEventTargets",value:function(t){this.checkEventTargetsByType(t,x.internalEventMap)}},{key:"checkEventTargets",value:function(t){this.checkEventTargetsByType(t,x.allEventMap,!0)}},{key:"runEventTargets",value:function(t,e){var n=this;Array.isArray(e)||(e=[e]);var r=Be().getEventTarget();e.forEach((function(e){var i=t.targets[e];"function"==typeof i?i.call(t,r):Array.isArray(i)?i.forEach((function(e){return n.activateSingleTarget(t,e)})):"object"===Gt(i)?t.isTargetEnabled(e)&&"function"==typeof i.value&&i.value.call(t,r):n.activateSingleTarget(t,i)}))}},{key:"activateSingleTarget",value:function(t,e){t.targets[e]&&t.canTargetBeActivated(e)&&(t.isTargetEnabled(e)?t.activateTarget(e):t.addToActiveTargets(e))}},{key:"addToLocationList",value:function(t){this.hasLocationMap[t.oid]||(this.hasLocationList.push(t),this.hasLocationMap[t.oid]=t)}},{key:"addToActivatedList",value:function(t){this.activatedMap[t.oid]||(this.activatedList.push(t),this.activatedMap[t.oid]=t)}},{key:"isActivated",value:function(t){return this.activatedMap[t.oid]}}])}();function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function re(){re=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),s=new P(r||[]);return i(o,"_invoke",{value:M(t,n,s)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",v="executing",y="completed",g={};function p(){}function m(){}function b(){}var T={};l(T,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(T=k);var S=b.prototype=p.prototype=Object.create(T);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(i,a,o,s){var u=h(t[i],t,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==ne(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(c).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function M(e,n,r){var i=f;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=x(s,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var l=h(e,n,r);if("normal"===l.type){if(i=r.done?y:d,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function x(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(ne(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new C(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),l(S,u,"Generator"),l(S,o,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function ie(t){return function(t){if(Array.isArray(t))return ae(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ae(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function oe(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ue(r.key),r)}}function ue(t){var e=function(t){if("object"!=ne(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ne(e)?e:e+""}var le=function(){return function(t,e){return e&&se(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastLink=document.URL,this.pageCache={}}),[{key:"openPage",value:(t=re().mark((function t(e){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je.stop();case 2:je.reset(),this.pageCache[e]?(je.tRoot=this.pageCache[e].tRoot,je.tRoot.$dom.innerHTML(this.pageCache[e].html),u.initDoms(this.pageCache[e].visibleList),this.onPageClose(this.pageCache[e].visibleList),je.manager.lists.visible=ie(this.pageCache[e].visibleList),this.lastLink=e,je.start()):(je.tRoot.hasDom()&&je.tRoot.$dom.innerHTML(""),je.tRoot=je.tRootFactory(),this.lastLink=e,je.start());case 4:case"end":return t.stop()}}),t,this)})),e=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){oe(a,r,i,o,s,"next",t)}function s(t){oe(a,r,i,o,s,"throw",t)}o(void 0)}))},function(t){return e.apply(this,arguments)})},{key:"openLinkFromHistory",value:function(t){t.link?this.openPage(t.link):t.browserUrl&&(history.replaceState({link:t.browserUrl},"",t.browserUrl),this.openPage(t.browserUrl)),$e().schedule(0,"pagemanager-openLinkFromHistory")}},{key:"onPageClose",value:function(t){t.forEach((function(t){_e().runEventTargets(t,["onPageClose","onResize"])}))}},{key:"openLink",value:function(t){t=u.getFullLink(t),this.lastLink&&(this.onPageClose(je.manager.lists.visible),this.pageCache[this.lastLink]={link:this.lastLink,html:je.tRoot.$dom.innerHTML(),visibleList:ie(je.manager.lists.visible),tRoot:je.tRoot}),history.pushState({link:t},"",t),this.openPage(t),$e().schedule(0,"pagemanager-processOpenLink")}},{key:"updateBrowserUrl",value:function(t){window.history.state.browserUrl?history.replaceState({browserUrl:t},"",t):(this.pageCache[document.URL]={link:document.URL,htms:je.tRoot.$dom.innerHTML(),visibleList:ie(je.manager.lists.visible),tRoot:je.tRoot},history.pushState({browserUrl:t},"",t)),$e().schedule(0,"pagemanager-processUpdateBrowserUrl")}},{key:"back",value:function(){return history.back()}}]);var t,e}();function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach((function(e){de(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function de(t,e,n){return(e=be(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ve(t){return function(t){if(Array.isArray(t))return pe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ge(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ge(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ge(t,e){if(t){if("string"==typeof t)return pe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(t,e):void 0}}function pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,be(r.key),r)}}function be(t){var e=function(t){if("object"!=ce(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ce(e)?e:e+""}var Te=function(){return function(t,e){return e&&me(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}),[{key:"init",value:function(){this.lists={visible:[],rerender:[],restyle:[],reasyncStyle:[],reattach:[],invisibleDom:[],noDom:[],updatingTModels:[],updatingTargets:[],activeTargets:[]},this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={},this.noDomMap={},this.doneTargets=[]}},{key:"clear",value:function(){this.lists.visible.length=0,this.lists.rerender.length=0,this.lists.restyle.length=0,this.lists.reasyncStyle.length=0,this.lists.reattach.length=0,this.lists.noDom.length=0,this.lists.updatingTModels.length=0,this.lists.updatingTargets.length=0,this.lists.activeTargets.length=0,this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={},this.noDomMap={}}},{key:"analyze",value:function(){var t,e=u.list2map(this.lists.visible);this.clear();var n,r=ye(_e().hasLocationList);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i.isVisible();if(a&&(e[i.oid]=null,!i.hasDom()||i.canHaveDom()||this.lists.invisibleDom.includes(i)||this.lists.invisibleDom.push(i),this.lists.visible.push(i),this.visibleOidMap[i.oid]=i,this.visibleTypeMap[i.type]||(this.visibleTypeMap[i.type]=[]),this.visibleTypeMap[i.type].push(i)),a||i.isActivated()){this.needsRerender(i),this.needsRestyle(i),this.needsReattach(i),i.updatingTargetList.length>0&&(this.lists.updatingTModels.push(i),this.lists.updatingTargets=[].concat(ve(this.lists.updatingTargets),ve(i.updatingTargetList)));var o=Object.keys(i.activeTargetMap);o.length>0&&(this.lists.activeTargets=[].concat(ve(this.lists.activeTargets),["'".concat(i.oid,"'")],o)),Object.keys(i.targetMethodMap).length>0&&(this.targetMethodMap[i.oid]=fe({},i.targetMethodMap)),i.deactivate()}!a&&i.canDeleteDom()||!i.canHaveDom()||i.hasDom()||this.noDomMap[i.oid]||(this.lists.noDom.push(i),this.noDomMap[i.oid]=!0)}}catch(t){r.e(t)}finally{r.f()}var s=Object.values(e).filter((function(t){return null!==t&&t.hasDom()&&t.canDeleteDom()}));return(t=this.lists.invisibleDom).push.apply(t,ve(s)),this.lists.noDom.length>0?0:this.lists.reattach.length>0?1:this.lists.rerender.length>0?2:this.lists.reasyncStyle.length>0?3:this.lists.invisibleDom.length>0?4:this.lists.restyle.length>0?5:-1}},{key:"needsRerender",value:function(t){return!(!t.hasDom()||!u.isDefined(t.getHtml())||t.$dom.html()===t.getHtml()&&t.$dom.textOnly===t.isTextOnly()||(this.lists.rerender.push(t),0))}},{key:"needsRestyle",value:function(t){t.hasDom()&&(t.styleTargetList.length>0&&(this.lists.restyle.push(t),t.domHeight=void 0,t.domWidth=void 0),t.asyncStyleTargetList.length>0&&this.lists.reasyncStyle.push(t))}},{key:"needsReattach",value:function(t){t.hasDom()&&!t.reuseDomDefinition()&&(t.hasDomHolderChanged()||t.hasBaseElementChanged())&&this.lists.reattach.push(t)}},{key:"renderTModels",value:function(){var t,e=ye(this.lists.rerender);try{for(e.s();!(t=e.n()).done;){var n,r,i=t.value;i.isTextOnly()?null===(n=i.$dom)||void 0===n||n.text(i.getHtml()):null===(r=i.$dom)||void 0===r||r.html(i.getHtml()),i.setActualValueLastUpdate("html"),i.domHeight=void 0,i.domWidth=void 0}}catch(t){e.e(t)}finally{e.f()}}},{key:"reattachTModels",value:function(){var t,e=ye(this.lists.reattach);try{for(e.s();!(t=e.n()).done;){var n,r=t.value;null===(n=r.$dom)||void 0===n||n.detach(),r.hasBaseElementChanged()&&W.createDom(r),r.getDomHolder(r)&&r.getDomHolder(r).appendTModel$Dom(r)}}catch(t){e.e(t)}finally{e.f()}}},{key:"deleteDoms",value:function(){var t,e=ye(this.lists.invisibleDom);try{for(e.s();!(t=e.n()).done;){var n,r=t.value;r.styleMap={},r.transformMap={},r.val("isVisible",!1),null===(n=r.$dom)||void 0===n||n.detach(),r.$dom=null}}catch(t){e.e(t)}finally{e.f()}this.lists.invisibleDom.length=0}},{key:"fixStyles",value:function(){var t,e=ye(this.lists.restyle);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hasDom()&&W.fixStyle(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"fixAsyncStyles",value:function(){var t,e=ye(this.lists.reasyncStyle);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hasDom()&&W.fixAsyncStyle(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"completeDoneTModels",value:function(){this.doneTargets.forEach((function(t){var e=t.tmodel,n=t.key;e.isTargetDone(n)&&(e.setTargetComplete(n),e.removeFromActiveTargets(e),e.removeFromUpdatingTargets(e))}))}},{key:"createDoms",value:function(){if(0!==this.lists.noDom.length){var t=[];this.lists.noDom.sort((function(t,e){return t.getUIDepth()<e.getUIDepth()?-1:1}));var e,n=ye(this.lists.noDom);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=void 0;f.query("#".concat(r.oid))?(i=new f("#".concat(r.oid)),r.$dom=i,r.hasDomNow=!0):t.push(r)}}catch(t){n.e(t)}finally{n.f()}for(var a=0,o=t;a<o.length;a++){var s,u=o[a];null!==(s=u.getDomHolder(u))&&void 0!==s&&s.exists()&&(u.$dom=new f,W.createDom(u),u.getDomHolder(u).appendTModel$Dom(u),u.hasDomNow=!0)}}}}])}();function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function ke(){ke=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),s=new P(r||[]);return i(o,"_invoke",{value:M(t,n,s)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",v="executing",y="completed",g={};function p(){}function m(){}function b(){}var T={};l(T,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(T=k);var S=b.prototype=p.prototype=Object.create(T);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(i,a,o,s){var u=h(t[i],t,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==we(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(c).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function M(e,n,r){var i=f;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=x(s,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var l=h(e,n,r);if("normal"===l.type){if(i=r.done?y:d,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function x(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(we(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new C(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),l(S,u,"Generator"),l(S,o,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Se(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ce(r.key),r)}}function Ce(t){var e=function(t){if("object"!=we(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==we(e)?e:e+""}var Me=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nextRuns=[],this.domProcessing=0,this.runningFlag=!1,this.runId="",this.runStartTime=void 0,this.rerunId="",this.delayProcess=void 0,this.resetting=!1,this.rerunQueue=[],this.isRunningRerun=!1}return function(t,e){return e&&Ee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"resetRuns",value:(e=ke().mark((function t(){var e;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.resetting=!0,t.next=3,new Promise((function(t){return requestAnimationFrame(t)}));case 3:null!==(e=this.delayProcess)&&void 0!==e&&e.timeoutId&&clearTimeout(this.delayProcess.timeoutId),this.nextRuns=[],this.domProcessing=0,this.runningFlag=!1,this.runId="",this.runStartTime=void 0,this.rerunId="",this.delayProcess=void 0,this.resetting=!1,this.rerunQueue=[],this.isRunningRerun=!1;case 14:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(t){Se(a,r,i,o,s,"next",t)}function s(t){Se(a,r,i,o,s,"throw",t)}o(void 0)}))},function(){return n.apply(this,arguments)})},{key:"schedule",value:function(t,e){!je.isRunning()||this.resetting||0===t&&this.rerunId||(0===t&&0===je.throttle?this.run(t,e):this.delayRun(0===je.throttle?t||0:je.throttle,e))}},{key:"run",value:function(t,e){if(je.isRunning()&&!this.resetting)if(this.runningFlag)this.rerunId||(this.rerunId="rerun ".concat(e));else{this.rerunId="",this.runId=e,this.runningFlag=!0,this.runStartTime=u.now(),N.needsRerun=!1,Be().captureEvents(),Ue().doneTargets.length>0&&(Ue().completeDoneTModels(),Ue().doneTargets.length=0),je.targetManager.applyTargetValues(je.tRoot),_e().calculateAll(),_e().calculateActivated(),je.events.resetEventsOnTimeout();var n=je.manager.analyze();n>=0&&(0===this.domProcessing?this.domOperations(n):this.rerunId||(this.rerunId="domrun ".concat(e))),1===je.debugLevel&&u.log(!0)("Request from: ".concat(e," delay: ").concat(t," ").concat(n," ").concat(this.domProcessing)),0===this.domProcessing&&this.needsRerun()}}},{key:"needsRerun",value:function(){this.runningFlag=!1,this.rerunQueue.length>0||(this.rerunId?this.rerunQueue.push(this.rerunId):(!this.delayProcess||this.delayProcess.delay>15)&&(Be().eventQueue.length>0?this.schedule(15,"events-".concat(Be().eventQueue.length)):N.needsRerun&&this.schedule(15,"targetExecutor-needsRerun")),this.rerunQueue.length>0&&!this.isRunningRerun&&this.processRerunQueue())}},{key:"processRerunQueue",value:function(){for(this.isRunningRerun=!0;this.rerunQueue.length>0;){var t=this.rerunQueue.shift();this.run(0,t)}this.isRunningRerun=!1}},{key:"domOperations",value:function(e){var n=this;this.domProcessing=1,5===e?this.domFixStyles():Promise.all(t.steps.filter((function(t,n){return n>=e})).map((function(t){return Promise.resolve().then(t)}))).then((function(){Ue().lists.restyle.length?n.domFixStyles():(n.domProcessing=0,n.needsRerun())}))}},{key:"domFixStyles",value:function(){var t=this;this.domProcessing=2,requestAnimationFrame((function(){Ue().fixStyles(),t.domProcessing=0,t.needsRerun()}))}},{key:"setDelayProcess",value:function(t,e,n,r){var i=this;this.delayProcess={runId:t,insertTime:e,runTime:n,delay:r,timeoutId:setTimeout((function(){i.run(r,t);var e=i.nextRuns.length>0?i.nextRuns.shift():void 0;if(e){var n=u.now(),a=Math.max(0,e.delay-(n-e.insertTime));i.setDelayProcess(e.runId,e.insertTime,n+a,a)}else i.delayProcess=void 0}),r)}}},{key:"delayRun",value:function(t,e){var n=u.now(),r=n+t;this.delayProcess?this.delayProcess.timeoutId&&r<this.delayProcess.runTime?(clearTimeout(this.delayProcess.timeoutId),this.insertRun(this.delayProcess.runId,this.delayProcess.insertTime,this.delayProcess.delay),this.setDelayProcess(e,n,r,t)):this.insertRun(e,n,t):this.setDelayProcess(e,n,r,t)}},{key:"insertRun",value:function(t,e,n){for(var r=0,i=this.nextRuns.length;r<i;){var a=Math.floor((r+i)/2),o=this.nextRuns[a].delay-n;if(o>0)i=a;else{if(!(o<0))return;r=a+1}}this.nextRuns.splice(r,0,{runId:t,insertTime:e,delay:n})}}]);var e,n}();function xe(t){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xe(t)}function De(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Le(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oe(r.key),r)}}function Oe(t){var e=function(t){if("object"!=xe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xe(e)?e:e+""}!function(t,e,n){(e=Ce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Me,"steps",[function(){return Ue().createDoms()},function(){return Ue().reattachTModels()},function(){return Ue().renderTModels()},function(){return Ue().fixAsyncStyles()},function(){Ue().lists.invisibleDom.length>0&&Ue().deleteDoms()}]);var je,Ve=function(){return function(t,e){return e&&Pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"applyTargetValues",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.activeTargetList.slice(0);t.targetMethodMap={};var n,r=De(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.isTargetImperative(i)||this.applyTargetValue(t,i)}}catch(t){r.e(t)}finally{r.f()}}},{key:"applyTargetValue",value:function(t,e){var n=t.targets[e];if(u.isDefined(n)){if("function"==typeof n.enabledOn&&t.setTargetMethodName(e,"enabledOn"),t.isTargetEnabled(e)&&(!t.isExecuted(e)||!t.hasUpdatingTargets(e))){if(t.isExecuted(e)&&t.getTargetStep(e)===t.getTargetSteps(e)){if(t.isScheduledPending(e))return;var r=x.scheduleExecution(t,e);if(r>0)return void $e().schedule(r,"targetSchedule__".concat(t.oid,"__").concat(e,"_").concat(r))}if(t.resetScheduleTimeStamp(e),t.shouldExecuteCyclesInParallel(e)){var i;i=t.isExecuted(e)?t.getTargetCycles(e):"function"==typeof n.cycles?n.cycles.call(t,0):n.cycles||0;for(var a=[],o=0;o<=i;o++)a.push(new Promise((function(n){N.executeDeclarativeTarget(t,e),n()})));Promise.all(a).then((function(){t.targetValues[e].cycle=i,t.updateTargetStatus(e),t.shouldScheduleRun(e)&&$e().schedule(t.getTargetInterval(e),"targetSchedule__".concat(t.oid,"__").concat(e,"_rerun"))}))}else t.isExecuted(e)&&t.getTargetCycles(e)>0&&(t.getTargetCycle(e)<t.getTargetCycles(e)?t.incrementTargetCycle(e,t.getTargetCycle(e)):t.resetTargetCycle(e),t.resetTargetStep(e),t.resetTargetInitialValue(e)),N.executeDeclarativeTarget(t,e)}}else t.removeFromActiveTargets(e)}},{key:"setActualValues",value:function(t){var e,n=0,r=De(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.updatingTargetList.slice(0));try{for(r.s();!(e=r.n()).done;){var i=e.value;t.isScheduledPending(i)||((n=x.scheduleExecution(t,i))>0?$e().schedule(n,"setActualValues-".concat(t.oid,"__").concat(i,"_").concat(n)):(t.resetScheduleTimeStamp(i),this.setActualValue(t,i)))}}catch(t){r.e(t)}finally{r.f()}}},{key:"findOriginalTModel",value:function(t,e){return at.findParentByTarget(t,e)||Ge().find((function(t){return t.targets[e]}))}},{key:"setActualValue",value:function(t,e){var n=t.targetValues[e];if(n)if(t.isTargetImperative(e)||t.isTargetEnabled(e)){var r,i,a,o=t.getTargetValue(e),s=t.getTargetStep(e),l=t.getTargetSteps(e),c=t.getTargetCycle(e),h=t.getTargetInterval(e),f=t.val(e),d=s,v=c,y=t.getTargetInitialValue(e),g=u.capitalizeFirstLetter(e);if(s<=l&&(u.isDefined(y)||(y=u.isDefined(t.val(e))?t.val(e):"number"==typeof o?0:void 0,t.setTargetInitialValue(e,y)),t.val(e,x.morph(t,e,y,o,s,l)),t.addToStyleTargetList(e),t.setActualValueLastUpdate(e),t.isTargetImperative(e)?(r=n.originalTargetName,a=t,(i=t.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(t,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i["on".concat(g,"Step")]?(i["on".concat(g,"Step")].call(a,a.val(e),o,s,l),a.setTargetMethodName(r,["on".concat(g,"Step")])):i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,e,a.val(e),o,s,l),a.setTargetMethodName(r,"onImperativeStep"))):x.handleValueChange(t,e,t.val(e),f,d,v),t.incrementTargetStep(e),t.updateTargetStatus(e),t.getTargetStep(e)<l))$e().schedule(h,"".concat(t.oid,"---").concat(e,"-").concat(s,"/").concat(l,"-").concat(c,"-").concat(h));else{t.val(e,o),t.addToStyleTargetList(e),t.setActualValueLastUpdate(e),s=t.getTargetStep(e);var p=0;n.valueList&&c<n.valueList.length-1?(t.incrementTargetCycle(e,t.getTargetCycle(e)),c=t.getTargetCycle(e),t.resetTargetStep(e),n.initialValue=n.value,n.value=n.valueList[c],n.steps=n.stepList[(c-1)%n.stepList.length],n.interval=n.intervalList[(c-1)%n.intervalList.length],n.easing=n.easingList[(c-1)%n.easingList.length],p=h):t.isTargetImperative(e)?(r=n.originalTargetName,a=t,(i=t.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(t,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i["on".concat(g,"Step")]?(i["on".concat(g,"Step")].call(a,a.val(e),o,s,l),a.setTargetMethodName(r,["on".concat(g,"Step")])):i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,e,a.val(e),o,s,l),a.setTargetMethodName(r,"onImperativeStep")),i&&"function"==typeof i["on".concat(g,"End")]?(i["on".concat(g,"End")].call(a,a.val(e),o,s,l),a.setTargetMethodName(r,["on".concat(g,"End")])):i&&"function"==typeof i.onImperativeEnd&&(i.onImperativeEnd.call(a,e,a.val(e)),a.setTargetMethodName(r,"onImperativeEnd"))):(!n.valueList&&t.getTargetCycle(e)<t.getTargetCycles(e)&&(t.incrementTargetCycle(e,t.getTargetCycle(e)),t.resetTargetStep(e).resetTargetInitialValue(e).resetTargetExecutionFlag(e),N.executeDeclarativeTarget(t,e)),"object"===xe(t.targets[e])&&"function"==typeof t.targets[e].onStepsEnd&&(t.targets[e].onStepsEnd.call(t,c),t.setTargetMethodName(e,"onStepsEnd"))),t.updateTargetStatus(e),$e().schedule(p,"".concat(t.oid,"---").concat(e,"-").concat(s,"/").concat(l,"-").concat(c,"-").concat(h))}}else $e().schedule(10,"setActualValue-disabled-".concat(t.oid,"__").concat(e))}}])}();function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function He(){He=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),s=new P(r||[]);return i(o,"_invoke",{value:M(t,n,s)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",v="executing",y="completed",g={};function p(){}function m(){}function b(){}var T={};l(T,o,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(O([])));k&&k!==n&&r.call(k,o)&&(T=k);var S=b.prototype=p.prototype=Object.create(T);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(i,a,o,s){var u=h(t[i],t,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Ae(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(c).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function M(e,n,r){var i=f;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=x(s,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var l=h(e,n,r);if("normal"===l.type){if(i=r.done?y:d,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function x(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(Ae(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},E(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new C(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),l(S,u,"Generator"),l(S,o,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Ie(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Fe(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Ie(a,r,i,o,s,"next",t)}function s(t){Ie(a,r,i,o,s,"throw",t)}o(void 0)}))}}var Ne=function(t){var e,n;e=t,n={throttle:0,debugLevel:0,runningFlag:!1,init:function(){return n.browser=new bt,n.browser.setup(),n.$window=new f(window),n.$window.addEvent("popstate",(function(t){t.state&&je.pager.openLinkFromHistory(t.state)})),n.loader=new Vt,n.pager=new le,n.events=new Mt,n.locationManager=new ee,n.targetManager=new Ve,n.manager=new Te,n.runScheduler=new Me,n.tRootFactory=function(){var t=new yt("tRoot",{start:function(){f.query("#tj-root")?this.$dom=new f("#tj-root"):(this.$dom=new f,this.$dom.create("div"),this.$dom.setSelector("#tj-root"),this.$dom.setId("#tj-root"),this.$dom.attr("tabindex","0"),new f("body").insertFirst$Dom(this.$dom))},styling:!1,domHolder:function(){return this.$dom},isVisible:!0,width:function(){return document.documentElement.clientWidth||document.body.clientWidth},height:function(){return document.documentElement.clientHeight||document.body.clientHeight},onResize:["width","height"]});return t.oids={},n.tRoot&&n.tRoot.getChildren().forEach((function(e){var n=new yt(e.type,e.targets);t.addChild(n)})),t},n.tRoot=n.tRootFactory(),e&&n.tRoot.addChild(e),window.history.pushState({link:document.URL},"",document.URL),n}},n.start=Fe(He().mark((function t(){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.runningFlag=!1,n.events.detachAll(),n.events.detachWindowEvents(),n.events.attachWindowEvents(),n.events.clearAll(),t.next=7,n.runScheduler.resetRuns();case 7:return n.runningFlag=!0,n.runScheduler.schedule(0,"appStart"),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)}))),n.stop=Fe(He().mark((function t(){return He().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.runningFlag=!1,n.events.detachAll(),n.events.detachWindowEvents(),n.events.clearAll(),t.next=6,n.runScheduler.resetRuns();case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)}))),n.reset=function(){n.manager.lists.visible.forEach((function(t){t.transformMap={},t.styleMap={},t.allStyleTargetList.forEach((function(e){u.isDefined(t.val(e))&&t.addToStyleTargetList(e)}))})),n.manager.clear(),n.locationManager.hasLocationList.length=0,n.locationManager.screenWidth=0,n.locationManager.screenHeight=0,at.clear()},n.isRunning=function(){return n.runningFlag},n.find=function(t){return at.find(t)},(je=n).init().start()};Ne.oids={},Ne.getOid=function(t){var e,n="Bracket"===t?Ne.oids:(null==Ne||null===(e=Ne.tRoot)||void 0===e?void 0:e.oids)||Ne.oids;u.isDefined(n[t])||(n[t]=0);var r=n[t]++;return{oid:r>0?"".concat(t).concat(r):t,num:r}};var Re=function(){return!!je&&je.runningFlag},Ye=function(){var t;return null===(t=je)||void 0===t?void 0:t.tRoot},Be=function(){var t;return null===(t=je)||void 0===t?void 0:t.events},We=function(){var t;return null===(t=je)||void 0===t?void 0:t.pager},Xe=function(){var t;return null===(t=je)||void 0===t?void 0:t.loader},Ue=function(){var t;return null===(t=je)||void 0===t?void 0:t.manager},$e=function(){var t;return null===(t=je)||void 0===t?void 0:t.runScheduler},_e=function(){var t;return null===(t=je)||void 0===t?void 0:t.locationManager},qe=function(){var t;return null===(t=je)||void 0===t?void 0:t.browser},ze=function(){var t,e;return null!==(t=null===(e=je)||void 0===e||null===(e=e.tRoot)||void 0===e?void 0:e.getWidth())&&void 0!==t?t:0},Ze=function(){var t,e;return null!==(t=null===(e=je)||void 0===e||null===(e=e.tRoot)||void 0===e?void 0:e.getHeight())&&void 0!==t?t:0},Ge=function(){var t;return null===(t=je)||void 0===t||null===(t=t.manager)||void 0===t?void 0:t.lists.visible};function Qe(t){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qe(t)}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ke(r.key),r)}}function Ke(t){var e=function(t){if("object"!=Qe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qe(e)?e:e+""}window.t=window.t||at.find;var tn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&Je(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"bounce",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.yStart,i=void 0===r?void 0:r,a=n.xStart,o=void 0===a?ze()/2:a,s=n.widthStart,l=void 0===s?50:s,c=n.heightStart,h=void 0===c?50:c,f=n.bFactor,d=void 0===f?.6:f,v=n.cFactor,y=void 0===v?.2:v,g=n.rotationStart,p=void 0===g?0:g,m=n.rIncrement,b=void 0===m?360:m,T=Math.max(10,(e-t)*d),w=u.isDefined(i)?[i,t]:[t],k=[o],S=[l],E=[h],C=[p];Math.abs(0|T)>1;){w.push(e),w.push(e-T);var M=l*(1+y),x=h*(1-y);S.push(M),S.push(l),E.push(x),E.push(h),k.push(o-(M-l)/2),k.push(o),C.push(C[C.length-1]+b),T*=d,b*=.8,y*=d}k.push(o),w.push(e),S.push(l),E.push(h);var D=C[C.length-1]%360;return D>0&&D<360&&C.push(360),{x:{list:k},y:{list:w},width:{list:S},height:{list:E},rotate:{list:C}}}},{key:"bounceSimple",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.from,i=void 0===r?void 0:r,a=n.to,o=void 0===a?void 0:a,s=n.widthStart,l=void 0===s?void 0:s,c=n.heightStart,h=void 0===c?void 0:c,f=n.xStart,d=void 0===f?void 0:f,v=n.yStart,y=void 0===v?void 0:v,g=n.bFactor,p=void 0===g?.7:g,m=n.cFactor,b=void 0===m?.2:m;return i=u.isDefined(i)?i:e.getY(),o=u.isDefined(o)?o:e.getY(),l=u.isDefined(l)?l:e.getWidth(),h=u.isDefined(h)?h:e.getHeight(),y=u.isDefined(y)?y:e.getY(),d=u.isDefined(d)?d:e.getX(),t.bounce(i,o,{yStart:y,xStart:d,widthStart:l,heightStart:h,bFactor:p,cFactor:b,rIncrement:0})}},{key:"shake",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bFactor,i=void 0===r?.6:r,a=n.cFactor,o=void 0===a?.3:a,s=n.strength,u=void 0===s?20:s;if(!t.shakeMap[e.oid]){var l=(e.getParentValue("width")-e.getWidth())/2,c=e.getY(),h=e.getWidth(),f=e.getHeight();t.shakeMap[e.oid]={xStart:l,yStart:c,widthStart:h,heightStart:f}}var d=t.shakeMap[e.oid],v=d.xStart,y=d.yStart,g=d.widthStart,p=d.heightStart,m=t.bounce(y-u,y,{xStart:v,widthStart:g,heightStart:p,bFactor:i,cFactor:o});return{y:{list:m.height.list.map((function(t){return y-(t-p)/2}))},x:m.x,width:m.width,height:m.height}}},{key:"spiral",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startAngle,n=void 0===e?0:e,r=t.endAngle,i=void 0===r?360:r,a=t.angleStep,o=void 0===a?18:a,s=t.x,u=void 0===s?0:s,l=t.y,c=void 0===l?0:l,h=t.width,f=void 0===h?100:h,d=t.height,v=void 0===d?100:d,y=[],g=[],p=[],m=n;m<=i;m+=o){var b=m*(Math.PI/180);y.push(Math.floor(u+f*Math.cos(b))),g.push(Math.floor(c+v*Math.sin(b))),p.push(90+m)}return{x:{list:y},y:{list:g},rotate:{list:p}}}}])}();!function(t,e,n){(e=Ke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(tn,"shakeMap",{}),window.TargetJ=e}();