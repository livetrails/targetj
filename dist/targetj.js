/*! For license information please see targetj.js.LICENSE.txt */
!function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){l=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}t.r(e),t.d(e,{$Dom:function(){return f},App:function(){return Ae},Bracket:function(){return Ft},BracketGenerator:function(){return _t},ColorUtil:function(){return w},Easing:function(){return L},Moves:function(){return Je},SearchUtil:function(){return at},TModel:function(){return yt},TModelUtil:function(){return W},TUtil:function(){return l},TargetUtil:function(){return M},getBrowser:function(){return $e},getEvents:function(){return Re},getLoader:function(){return Xe},getLocationManager:function(){return Ue},getManager:function(){return We},getPager:function(){return Be},getRunScheduler:function(){return Ye},getScreenHeight:function(){return qe},getScreenWidth:function(){return _e},getVisibles:function(){return ze},isRunning:function(){return Ne},tApp:function(){return Pe},tRoot:function(){return Fe}});var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"calcVisibility",value:function(e){var n=e.absX,r=e.absY,i=e.getDomParent(),a=(i.getMeasuringScale()||1)*e.getMeasuringScale(),o=t.isDefined(e.getWidth())?a*e.getWidth():0,u=t.isDefined(e.getHeight())?a*e.getHeight():0,l=e.visibilityStatus;return l.right=Math.floor(n)<=i.absX+i.getWidth(),l.left=Math.ceil(n+o)>=i.absX,l.bottom=Math.floor(r)<=i.absY+i.getHeight(),l.top=Math.ceil(r+u)>=i.absY,e.actualValues.isVisible=l.left&&l.right&&l.top&&l.bottom,e.actualValues.isVisible}},{key:"initDoms",value:function(e){var n=f.findByClass("tgt");e.forEach((function(t){t.$dom=null}));var i,a=t.list2map(e.filter((function(t){return"BI"!==t.type}))),o=r(n);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=u.getAttribute("id"),s=a[l];s?s.$dom=new f("#".concat(l)):f.detach(u)}}catch(t){o.e(t)}finally{o.f()}}},{key:"list2map",value:function(e,n){return e.reduce((function(e,r){return e[r.oid]=t.isDefined(n)?n:r,e}),{})}},{key:"getDeepList",value:function(t){var e=[];return function t(n){if(n&&n.hasChildren()){var r=n.getChildren();e.push.apply(e,function(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r)),r.forEach(t)}}(t),e}},{key:"areEqual",value:function(t,e,n){return n?JSON.stringify(t)===JSON.stringify(e):t===e}},{key:"momentum",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e-t,i=Math.abs(r)/n,a=Math.floor(5e3*i),o=5*a,u=r>0?r+o:r-o;return{distance:Math.round(u)/50,duration:a,momentumDistance:n,time:5*n}}},{key:"isDefined",value:function(t){return null!=t}},{key:"isNumber",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"limit",value:function(e,n,r){return(e=(e=t.isDefined(e)?e:n)>r?r:e)<n?n:e}},{key:"capitalizeFirstLetter",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"formatNum",value:function(t,e){return t?parseFloat(t.toString()).toFixed(e):0}},{key:"now",value:function(){return Date.now()}},{key:"log",value:function(t){return!0===t?console.log:function(){}}},{key:"distance",value:function(t,e,n,r){return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))}},{key:"getFullLink",value:function(e){if(t.isDefined(e)){if(e.startsWith("http"))return e;var n=window.location.protocol;n+=n.endsWith(":")?"//":"://";var r="".concat(n).concat(window.location.hostname);return e.startsWith("/")?r+e:"".concat(r,"/").concat(e)}}},{key:"logTree",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=r(Ue().getChildren(n));try{for(a.s();!(e=a.n()).done;){var o=e.value,u=o.isVisible()?i+"|  ":i+"x  ";"BI"===o.type?console.log("".concat(u).concat(o.oid," v:").concat(o.isVisible()," x:").concat(Math.floor(o.getX())," y:").concat(Math.floor(o.getY()),", y:").concat(Math.floor(o.absY)," w:").concat(Math.floor(o.getWidth())," h:").concat(Math.floor(o.getHeight())," hc:").concat(Math.floor(o.getContentHeight()))):console.log("".concat(u).concat(o.oid," v:").concat(o.isVisible()," x:").concat(Math.floor(o.getX())," y:").concat(Math.floor(o.getY())," w:").concat(Math.floor(o.getWidth())," h:").concat(Math.floor(o.getHeight())," hc:").concat(Math.floor(o.getContentHeight()))),o.hasChildren()&&t.logTree(o,u)}}catch(t){a.e(t)}finally{a.f()}}}],null&&o(e.prototype,null),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?(this.selector=e,this.element=t.query(e)):e&&(this.element=e),this.childrenCount=0,this.$domParent=void 0,this.originalContent=void 0,this.textOnly=!0}return e=t,n=[{key:"exists",value:function(){return this.selector&&(this.element=t.query(this.selector)),!!this.element}},{key:"create",value:function(t){this.element=document.createElement(t)}},{key:"getTagName",value:function(){return this.element.tagName.toLowerCase()}},{key:"setSelector",value:function(t){this.selector=t}},{key:"setId",value:function(t){this.attr("id","#"===t[0]?t.slice(1):t)}},{key:"focus",value:function(){this.element.focus()}},{key:"blur",value:function(){this.element.blur()}},{key:"attr",value:function(t,e){if(this.element)return l.isDefined(e)?void this.element.setAttribute(t,e):this.element.getAttribute(t)}},{key:"value",value:function(t){if(this.element){var e=this.element.value;return l.isDefined(t)&&(this.element.value=t),e}}},{key:"select",value:function(){this.element&&"function"==typeof this.element.select&&this.element.select()}},{key:"width",value:function(t){if(!l.isDefined(t))return this.element.offsetWidth;this.element.style.width=l.isNumber(t)?"".concat(t,"px"):t}},{key:"height",value:function(t){if(!l.isDefined(t))return this.element.offsetHeight;this.element.style.height=l.isNumber(t)?"".concat(t,"px"):t}},{key:"css",value:function(t){if(!l.isDefined(t))return this.attr("class");this.attr("class",t)}},{key:"setStyleByMap",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.style(n,t[n])}))}},{key:"style",value:function(t,e){if(2!==arguments.length)return 1===arguments.length?this.element.style[t]:this.element.style;this.element.style[t]=e}},{key:"getStyleValue",value:function(t){var e=this.style(t),n=l.isDefined(e)?e.replace(/[^-\d.]/g,""):0;return parseFloat(n)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"parent",value:function(){return this.element?this.element.parentElement:null}},{key:"detach",value:function(){t.detach(this.element),this.$domParent&&this.$domParent.childrenCount>0&&this.$domParent.childrenCount--}},{key:"append$Dom",value:function(t){this.element.appendChild(t.element)}},{key:"insertFirst$Dom",value:function(t){this.element.firstChild?this.element.insertBefore(t.element,this.element.firstChild):this.append$Dom(t)}},{key:"appendTModel$Dom",value:function(t){0===this.childrenCount&&this.element.children.length>1&&t.getDomParent()&&t.getDomParent().getHtml()&&t.getDomParent().getHtml()===this.originalContent&&(this.element.innerHTML="<div>".concat(this.html(),"</div>")),this.element.appendChild(t.$dom.element),t.$dom.$domParent=this,this.childrenCount++}},{key:"html",value:function(t){if(!l.isDefined(t))return this.originalContent;if(this.childrenCount>0){var e=document.createElement("div");e.innerHTML=t,l.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!1}else this.element.innerHTML=t,this.originalContent=t,this.textOnly=!1}},{key:"text",value:function(t){if(!l.isDefined(t))return this.originalContent;if(this.childrenCount>0){var e=document.createTextNode(t);l.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!0}else this.element.textContent=t,this.originalContent=t,this.textOnly=!0}},{key:"outerHTML",value:function(t){this.element.outerHTML=t}},{key:"innerHTML",value:function(t){if(!l.isDefined(t))return this.element.innerHTML;this.element.innerHTML=t}},{key:"addClass",value:function(t){var e=this.attr("class"),n=e?e.includes(t)?e:"".concat(e," ").concat(t):t;n!==e&&this.attr("class",n)}},{key:"addEvent",value:function(t,e){this.element.addEventListener?this.element.addEventListener(t,e,{capture:!1,passive:!1}):this.element.attachEvent("on".concat(t),e)}},{key:"detachEvent",value:function(t,e){this.element.removeEventListener?this.element.removeEventListener(t,e,!1):this.element.detachEvent?this.element.detachEvent("on".concat(t),e):this.element["on".concat(t)]=null}},{key:"transform",value:function(t){this.element.style[$e().style.transform]=t}},{key:"animate",value:function(t,e){return this.element.animate(t,e)}},{key:"getContext",value:function(e,n){var r=l.isDefined(n)?t.query(n):this.query("canvas");return r?r.getContext(e):void 0}},{key:"findFirstByClass",value:function(e){return t.findFirstByClass(e,this.element)}},{key:"findFirstByTag",value:function(e){return t.findFirstByTag(e,this.element)}},{key:"query",value:function(e){return"#"===e[0]?t.findById(e):"."===e[0]?this.findFirstByClass(e):this.findFirstByTag(e)}}],r=[{key:"query",value:function(e){return"#"===e[0]?t.findById(e):"."===e[0]?t.findFirstByClass(e):t.findFirstByTag(e)}},{key:"findById",value:function(t){return document.getElementById("#"===t[0]?t.slice(1):t)}},{key:"findFirstByClass",value:function(e,n){var r=t.findByClass(e,n);return r.length>0?r[0]:null}},{key:"findFirstByTag",value:function(e,n){var r=t.findByTag(e,n);return r.length>0?r[0]:null}},{key:"findByTag",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByTagName(t)}},{key:"findByClass",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByClassName("."===t[0]?t.slice(1):t)}},{key:"findNearestParentWithId",value:function(t){for(;t;){var e="function"==typeof t.getAttribute&&t.getAttribute("id")?t.getAttribute("id"):null;if(e&&We().visibleOidMap[e])return e;t=t.parentElement}}},{key:"detach",value:function(t){var e=l.isDefined(t)?t.parentElement:null;e&&e.removeChild(t)}},{key:"hasFocus",value:function(t){return t.hasDom()&&document.activeElement===t.$dom.element}},{key:"ready",value:function(e){new t(document).addEvent("DOMContentLoaded",e)}},{key:"ajax",value:function(t){var e=new XMLHttpRequest,n="";t.data&&(n=Object.keys(t.data).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t.data[e]))})).join("&")),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var n="json"===t.dataType?JSON.parse(this.responseText):this.responseText;t.success(n)}else t.error(e.status)},"POST"===t.type?(e.open(t.type,t.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(n)):(t.url+=n?t.url>""&&t.url.indexOf("?")>=0?"&".concat(n):"?".concat(n):"",e.open(t.type,t.url,!0),e.send())}}],n&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}var g,p,m,b,w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"color2Integers",value:function(e){if(e=e?String(e):"",e=t.colors[e.toLowerCase()]||e){if(e.startsWith("#")){e=3===(e=e.slice(1)).length?e.split("").map((function(t){return t+t})).join(""):e;var n=parseInt(e,16);return[n>>16&255,n>>8&255,255&n]}var r=e.match(/\d+/g);return r&&3===r.length?r.map(Number):void 0}}}],null&&v(e.prototype,null),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x(r.key),r)}}function E(t,e,n){return(e=x(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t){var e=function(t){if("object"!=S(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:e+""}g=w,m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},(p=y(p="colors"))in g?Object.defineProperty(g,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[p]=m;var M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"emptyValue",value:function(){return{value:void 0,step:0,steps:0,cycle:0,cycles:0,interval:0,initialValue:void 0,scheduleTimeStamp:void 0,actualValueLastUpdate:0,status:"",executionCount:0,executionFlag:!1,isImperative:!1,originalTargetName:void 0,easing:void 0,creationTime:l.now()}}},{key:"bindTargetName",value:function(t,e){var n=t[e];if("object"===S(n)){var r=/^on[A-Za-z]+Step$/,i=/^on[A-Za-z]+End$/,a=["value","enabledOn","onStepsEnd","onValueChange","loop","onImperativeEnd","onImperativeStep","onSuccess","onError"];Object.keys(n).forEach((function(t){if("function"==typeof n[t]&&(a.includes(t)||r.test(t)||i.test(t))){var o=n[t];n[t]=function(){return this.key=e,o.apply(this,arguments)}}}))}else if("function"==typeof n){var o=n;t[e]=function(){return this.key=e,o.apply(this,arguments)}}}},{key:"isValueStepsCycleArray",value:function(e){if(e.length>4||0===e.length)return!1;for(var n=e.length>=2,r=1;r<e.length;r++)if("number"!=typeof e[r])return!1;return n&&("number"==typeof e[0]||t.isListTarget(e[0])||"string"==typeof e[0])}},{key:"isListTarget",value:function(t){return"object"===S(t)&&null!==t&&Array.isArray(t.list)}},{key:"isObjectTarget",value:function(t,e){return!("style"===t||"object"!==S(e)||e instanceof yt||null===e||Array.isArray(e))}},{key:"isChildrenTarget",value:function(t,e){return"children"===t&&(Array.isArray(e)||e instanceof yt)}},{key:"getValueStepsCycles",value:function(e,n){var r=e.targets[n],i=r&&r.valueOnly,a=e.getTargetCycle(n),o=e.val(n),u=null,s=0,c=0,h=0;return function f(d){return Array.isArray(d)?i||!t.isValueStepsCycleArray(d)?[d,s,c,h]:Array.isArray(r)?r:(u=d[0],s=d.length>=2?d[1]:s,c=d.length>=3?d[2]:c,h=d.length>=4?d[3]:h,[u,s,c,h]):"object"===S(d)&&null!==d?(u="function"==typeof d.value?d.value.call(e,a,o):l.isDefined(d.value)?d.value:d,s="function"==typeof d.steps?d.steps.call(e,a):l.isDefined(d.steps)?d.steps:0,c="function"==typeof d.interval?d.interval.call(e,a):l.isDefined(d.interval)?d.interval:0,h="function"==typeof d.cycles?d.cycles.call(e,a,e.getTargetCycles(n)):l.isDefined(d.cycles)?d.cycles:0,Array.isArray(u)?f(u):[u,s,c,h]):"function"==typeof d?f(d.call(e,a,o)):[d,s,c,h]}(r)}},{key:"getIntervalValue",value:function(t,e,n){var r="function"==typeof n?n.call(t,e):n;return l.isNumber(r)?r:0}},{key:"scheduleExecution",value:function(t,e){var n=l.now(),r=t.getTargetInterval(e),i=t.getScheduleTimeStamp(e),a=0;if(r>0)if(l.isDefined(i)){var o=n-i;a=Math.max(r-o,0)}else a=r,t.setScheduleTimeStamp(e,n);return a}},{key:"getTargetSchedulePeriod",value:function(t,e,n){var r,i=l.now(),a=0;return n>0?l.isDefined(t.getTargetTimeStamp(e))?a=(r=i-t.getTargetTimeStamp(e))<n?n-r:0:(t.setTargetTimeStamp(e,i),a=n):l.isDefined(t.getTargetTimeStamp(e))&&(a=(r=i-t.getTargetTimeStamp(e))<0?-r:0),a}},{key:"handleValueChange",value:function(t,e,n,r,i,a){"object"===S(t.targets[e])&&"function"==typeof t.targets[e].onValueChange&&!l.areEqual(n,r,t.targets[e].deepEquality)&&(t.targets[e].onValueChange.call(t,n,r,a),t.setTargetMethodName(e,"onValueChange"))}},{key:"morph",value:function(e,n,r,i,a){var o=e.getTargetEasing(n),u=o?o(e.getTargetStepPercent(n,a)):e.getTargetStepPercent(n,a);if(t.colorMap[n]){var l=w.color2Integers(i),s=r?w.color2Integers(r):w.color2Integers("#fff");if(l&&s){var c=Math.floor(l[0]*u+s[0]*(1-u)),h=Math.floor(l[1]*u+s[1]*(1-u)),f=Math.floor(l[2]*u+s[2]*(1-u));return"rgb(".concat(c,",").concat(h,",").concat(f,")")}return i}return"number"==typeof i?i*u+r*(1-u):i}},{key:"setWidthFromDom",value:function(t){var e,n,r=null===(e=t.domWidth)||void 0===e?void 0:e.height,i=null===(n=t.domWidth)||void 0===n?void 0:n.width,a=t.getDomParent(),o=!1;return We().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),o=!0),(!l.isDefined(t.domWidth)||o||r!==t.getHeight()||a&&t.getActualValueLastUpdate("width")<=a.getActualValueLastUpdate("width"))&&(t.$dom.width("auto"),i=t.$dom.width(),r=t.$dom.height()),t.domWidth={width:i,height:r},t.val("width",i),i}},{key:"setHeightFromDom",value:function(t){var e,n,r=null===(e=t.domHeight)||void 0===e?void 0:e.height,i=null===(n=t.domHeight)||void 0===n?void 0:n.width,a=t.getDomParent(),o=!1;return We().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),o=!0),(!l.isDefined(t.domHeight)||o||i!==t.getWidth()||a&&t.getActualValueLastUpdate("height")<=a.getActualValueLastUpdate("height"))&&(t.$dom.height("auto"),i=t.$dom.width(),r=t.$dom.height()),t.domHeight={height:r,width:i},t.val("height",r),r}}])}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P(r.key),r)}}function P(t){var e=function(t){if("object"!=O(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}b=M,E(M,"transformMap",{x:!0,y:!0,z:!0,translateX:!0,translateY:!0,translateZ:!0,perspective:!0,rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0,rotate3DAngle:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0,skew:!0,skewX:!0,skewY:!0}),E(M,"dimMap",{width:!0,height:!0}),E(M,"styleWithUnitMap",{fontSize:!0,lineHeight:!0,borderRadius:!0,padding:!0,left:!0,top:!0,fontWeight:!0,letterSpacing:!0}),E(M,"colorMap",{color:!0,background:!0,backgroundColor:!0}),E(M,"styleTargetMap",k(k(k(k(k({},b.transformMap),b.dimMap),b.styleWithUnitMap),b.colorMap),{},{position:!0,opacity:!0,zIndex:!0,css:!0,style:!0,textAlign:!0,border:!0,borderTop:!0,borderLeft:!0,borderRight:!0,borderBottom:!0,boxSizing:!0,transformStyle:!0,transformOrigin:!0,attributes:!0,justifyContent:!0,alignItems:!0,display:!0,cursor:!0,fontFamily:!0,overflow:!0,textDecoration:!0,boxShadow:!0})),E(M,"scaleMap",{scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0}),E(M,"rotate3D",{rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0}),E(M,"attributeTargetMap",{lang:!0,autofocus:!0,placeholder:!0,autocomplete:!0,name:!0,type:!0,src:!0,href:!0,method:!0,size:!0,value:!0,maxlength:!0,minlength:!0,max:!0,min:!0,readonly:!0,required:!0,alt:!0,disabled:!0,action:!0,accept:!0,selected:!0,rows:!0,cols:!0,tabindex:!0}),E(M,"cssFunctionMap",{skew:{x:0,y:0},translate3d:{x:0,y:0,z:0},rotate3d:{x:0,y:0,z:0,a:0},scale3d:{x:0,y:0,z:0}}),E(M,"targetConditionMap",{onVisibleEvent:function(t){return t.isNowVisible},onResize:function(t){return Ue().resizeFlag||t.isNowVisible},onParentResize:function(t){return t.getParent().getActualValueLastUpdate("width")>t.getActualValueLastUpdate("width")||t.getParent().getActualValueLastUpdate("height")>t.getActualValueLastUpdate("height")},onFocusEvent:function(t){return Re().onFocus(t)},onBlurEvent:function(t){return Re().onBlur(t)},onClickEvent:function(t){return"click"===Re().getEventType()&&Re().isClickHandler(t)},onTouchStart:function(t){return Re().isStartEvent()&&Re().isTouchHandler(t)},onTouchEnd:function(){return Re().isEndEvent()},onKeyEvent:function(){return"key"===Re().getEventType()&&Re().currentKey},onSwipeEvent:function(t){return Re().isTouchHandler(t)&&Re().isSwipeEvent()},onAnySwipeEvent:function(){return Re().isSwipeEvent()},onTouchEvent:function(t){return Re().isTouchHandler(t)},onEnterEvent:function(t){return Re().isEnterEventHandler(t)},onLeaveEvent:function(t){return Re().isLeaveEventHandler(t)},onScrollEvent:function(t){return Re().isScrollLeftHandler(t)&&Re().deltaX()||Re().isScrollTopHandler(t)&&Re().deltaY()}}),E(M,"otherTargetEventsMap",{onVisibleEvent:!0,onChildrenChange:!0,onVisibleChildrenChange:!0,onPageClose:!0,isVisible:!0});var L=function(){return function(t,e,n){return n&&D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),0,[{key:"linear",value:function(t){return t}},{key:"inQuad",value:function(t){return t*t}},{key:"outQuad",value:function(t){return t*(2-t)}},{key:"outExpo",value:function(t){return 1-(1-t)*(1-t)}},{key:"circular",value:function(t){return Math.sqrt(1- --t*t)}},{key:"inOutQuad",value:function(t){return t<.5?2*t*t:(4-2*t)*t-1}},{key:"inOut",value:function(t){return t<.5?2*t*t:(4-2*t)*t-1}},{key:"outElastic",value:function(t){var e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}}])}();function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){I(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function I(t,e,n){return(e=N(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N(r.key),r)}}function N(t){var e=function(t){if("object"!=V(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(e)?e:e+""}var F=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&A(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"executeDeclarativeTarget",value:function(e,n){t.resolveTargetValue(e,n),t.updateTarget(e,e.targetValues[n],n)}},{key:"executeImperativeTarget",value:function(e,n,r,i,a,o,u){e.targetValues[n]=e.targetValues[n]||M.emptyValue();var l=e.targetValues[n];if(l.isImperative=!0,l.originalTargetName=u,M.isListTarget(r))t.assignListTarget(l,r.list,r.list[0],i,a,o);else if(M.isObjectTarget(n,r)){var s=M.cssFunctionMap[n]?H(H({},M.cssFunctionMap[n]),r):r;Object.keys(s).forEach((function(n){t.executeImperativeTarget(e,n,s[n],i,a,o,u)}))}else t.assignSingleTarget(l,r,void 0,i,0,a,o),l.step=0;t.updateTarget(e,l,n)}},{key:"updateTarget",value:function(e,n,r){n.executionCount++,n.executionFlag=!0,e.addToStyleTargetList(r),e.setTargetMethodName(r,"value"),0===e.getTargetSteps(r)&&t.snapActualToTarget(e,r),e.updateTargetStatus(r)}},{key:"assignListTarget",value:function(t,e,n,r,i,a){t.valueList=e,t.stepList=Array.isArray(r)?r:l.isDefined(r)?[r]:[1],t.intervalList=Array.isArray(i)?i:l.isDefined(i)?[i]:[0],t.easingList=Array.isArray(a)?a:l.isDefined(a)?[a]:[L.linear],t.cycle=1,t.value=e[1],t.initialValue=n,t.steps=t.stepList[0],t.interval=t.intervalList[0],t.easing=t.easingList[0],t.step=0,t.cycles=0}},{key:"assignSingleTarget",value:function(t,e,n,r,i,a,o){delete t.valueList,delete t.stepList,delete t.intervalList,delete t.easingList,t.initialValue=n,t.value=e,t.steps=r||0,t.cycles=i||0,t.interval=a||0,t.easing=o}},{key:"snapActualToTarget",value:function(t,e){var n=t.actualValues[e],r=t.targetValues[e].value;t.actualValues[e]="function"==typeof r?r.call(t):r,t.setActualValueLastUpdate(e),M.handleValueChange(t,e,t.actualValues[e],n,0,0)}},{key:"resolveTargetValue",value:function(e,n){var r=!e.targetValues[n]&&l.isDefined(e.targets[n].initialValue)?e.targets[n].initialValue:void 0,i=M.getValueStepsCycles(e,n),a=i[0],o=i[1]||0,u=i[2]||0,s=i[3]||0,c=e.targetValues[n]||M.emptyValue(),h=c.value;e.targetValues[n]=c;var f=l.isDefined(e.targets[n].easing)?e.targets[n].easing:void 0;M.isChildrenTarget(n,a)?(Array.isArray(a)?a.forEach((function(t){return e.addChild(t)})):e.addChild(a),t.assignSingleTarget(c,a,void 0,0,s,u)):M.isListTarget(a)?t.assignListTarget(c,a.list,a.list[0],o,u,f):(t.assignSingleTarget(c,a,r,o,s,u,f),o>0&&l.areEqual(h,a,!!e.targets[n]&&!!e.targets[n].deepEquality)&&e.resetTargetStep(n))}}])}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X(r.key),r)}}function X(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"addItem",value:function(t,e,n){for(var r=!1,i=0;i<t.length;i++){var a=t[i],o=a.index,u=a.index+a.segment.length-1;if(n===u+1?(a.segment.push(e),r=!0):n>=o&&n<=u?(a.segment.splice(n-o,0,e),r=!0):n===o-1&&(a.segment.unshift(e),a.index=n,r=!0),r){var l=a.index+a.segment.length-1;if(i+1<t.length&&l===t[i+1].index){var s=t[i+1];a.segment=a.segment.concat(s.segment),t.splice(i+1,1)}break}}r||(t.push({index:n,segment:[e]}),t.sort((function(t,e){return t.index-e.index})))}},{key:"defaultActualValues",value:function(){return{x:0,y:0,width:0,height:0,leftMargin:0,rightMargin:0,topMargin:0,bottomMargin:0,opacity:1,scale:1,scrollLeft:0,scrollTop:0,textOnly:!0,borderRadius:0,children:[],isInFlow:!0,baseElement:"div",canHaveDom:!0,canHandleEvents:!1,widthFromDom:!1,heightFromDom:!1,keepEventDefault:!1,isIncluded:!0,bracketThreshold:5,isDomDeletable:!0}}},{key:"defaultTargets",value:function(){return{position:"absolute",left:0,top:0,zIndex:1,css:""}}},{key:"createDom",value:function(t){t.$dom=new f,t.$dom.create(t.getBaseElement()),t.$dom.setSelector("#".concat(t.oid)),t.$dom.setId(t.oid),t.transformMap={},t.styleMap={},t.allStyleTargetList.forEach((function(e){l.isDefined(t.val(e))&&t.addToStyleTargetList(e)}))}},{key:"getTransformString",value:function(e){var n={},r={};(e.transformMap.translateX||e.transformMap.translateY||e.transformMap.translateZ)&&(delete e.transformMap.x,delete e.transformMap.y);for(var i=0,a=Object.keys(e.transformMap);i<a.length;i++){var o=a[i];if(!n[o])switch(o){case"translateX":case"translateY":case"translateZ":r[o]="".concat(o,"(").concat(e.transformMap[o],"px)"),n[o]=!0;break;case"x":case"y":case"z":l.isDefined(e.getZ())?r.translate3d="translate3d(".concat(e.transformMap.x,"px, ").concat(e.transformMap.y,"px, ").concat(e.transformMap.z,"px)"):(l.isDefined(e.getX())||l.isDefined(e.getY()))&&(r.translate="translate(".concat(e.transformMap.x,"px, ").concat(e.transformMap.y,"px)")),n.x=!0,n.y=!0,n.z=!0;break;case"rotate":case"rotateX":case"rotateY":case"rotateZ":case"rotate3DX":case"rotate3DY":case"rotate3DZ":case"rotate3DAngle":l.isDefined(e.val("rotate3DX"))&&l.isDefined(e.val("rotate3DY"))&&l.isDefined(e.val("rotate3DZ"))&&l.isDefined(e.val("rotate3DAngle"))?(r.rotate3d="rotate3d(".concat(e.transformMap.rotate3DX,", ").concat(e.transformMap.rotate3DY,", ").concat(e.transformMap.rotate3DZ,", ").concat(e.transformMap.rotate3DAngle,"deg)"),n.rotate3DX=!0,n.rotate3DY=!0,n.rotate3DZ=!0,n.rotate3DAngle=!0):l.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],"deg)"),n[o]=!0);break;case"scale":case"scaleX":case"scaleY":case"scaleZ":case"scale3DX":case"scale3DY":case"scale3DZ":l.isDefined(e.val("scale3DX"))&&l.isDefined(e.val("scale3DY"))&&l.isDefined(e.val("scale3DZ"))?(r.scale3d="scale3d(".concat(e.transformMap.scale3DX,", ").concat(e.transformMap.scale3DY,", ").concat(e.transformMap.scale3DZ,")"),n.scale3DX=!0,n.scale3DY=!0,n.scale3DZ=!0):l.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],")"),n[o]=!0);break;case"skewX":case"skewY":l.isDefined(e.val("skewX"))&&l.isDefined(e.val("skewY"))?(r[o]="skew(".concat(e.transformMap.skewX,"deg, ").concat(e.transformMap.skewY,"deg)"),n.skewX=!0,n.skewY=!0):l.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],"deg)"),n[o]=!0);break;case"perspective":l.isDefined(e.val("perspective"))&&(r[o]="perspective(".concat(e.transformMap.perspective,"px)"),n.perspective=!0)}}var u={};e.val("transformOrder")?e.val("transformOrder").forEach((function(t,e){u[t]=e})):u=t.transformOrder;var s=Object.keys(r).sort((function(t,e){return u[t]-u[e]})).map((function(t){return r[t]}));return s.join(" ")}}])}();function Y(t,e){if(t){if("string"==typeof t)return U(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){var e=function(t){if("object"!=$(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}!function(t,e,n){(e=X(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(W,"transformOrder",{perspective:0,translateX:1,translateY:1,translateZ:1,translate:1,translate3d:1,rotate:2,rotateX:2,rotateY:2,rotateZ:2,rotate3d:2,skew:3,skewX:3,skewY:3,scale:4,scaleX:4,scaleY:4,scaleZ:4,scale3DX:4,scale3DY:4,scale3DZ:4});var z=function(){return function(t,e){return e&&_(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"object"===$(e)&&void 0===n&&(n=e,e=""),this.type=e||"blank",this.targets=Object.assign({},n);var r=Ae.getOid(this.type);this.oid=r.oid,this.oidNum=r.num,this.targetValues=void 0,this.actualValues=void 0,this.activeTargetList=[],this.activeTargetMap={},this.updatingTargetList=[],this.updatingTargetMap={},this.updatingChildrenList=[],this.updatingChildrenMap={},this.eventTargets=[],this.allStyleTargetList=[],this.allStyleTargetMap={},this.styleTargetList=[],this.styleTargetMap={},this.targetExecutionCount=0,this.parent=null,this.targetMethodMap={}}),[{key:"getParent",value:function(){return this.parent}},{key:"initTargets",value:function(){var t=this;this.actualValues=W.defaultActualValues(),this.targetValues={},this.activeTargetMap={},this.activeTargetList=[],Object.entries(W.defaultTargets()).forEach((function(e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,u=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);l=!0);}catch(t){s=!0,i=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw i}}return u}}(t,e)||Y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],i=n[1];r in t.targets||(t.targets[r]=i)})),Object.keys(this.targets).forEach((function(e){t.processNewTarget(e)}))}},{key:"processNewTarget",value:function(t){l.isDefined(this.targets[t])?(M.bindTargetName(this.targets,t),M.targetConditionMap[t]?this.eventTargets.indexOf(-1===t)&&this.eventTargets.push(t):M.otherTargetEventsMap[t]||(l.isDefined(this.targets[t].initialValue)&&(this.actualValues[t]=this.targets[t].initialValue,this.addToStyleTargetList(t)),!1!==this.targets[t].active&&this.addToActiveTargets(t))):delete this.actualValues[t]}},{key:"addToStyleTargetList",value:function(t){(M.styleTargetMap[t]||M.attributeTargetMap[t])&&(this.styleTargetMap[t]||(this.styleTargetList.push(t),this.styleTargetMap[t]=!0),this.allStyleTargetMap[t]||(this.allStyleTargetList.push(t),this.allStyleTargetMap[t]=!0))}},{key:"removeTarget",value:function(t){delete this.targets[t],this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),delete this.targetValues[t]}},{key:"addTarget",value:function(t,e){this.addTargets(function(t,e,n){return(e=q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,e))}},{key:"addTargets",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.targets[n]=t[n],e.removeFromUpdatingTargets(n),e.processNewTarget(n)})),Ye().schedule(10,"addTargets-"+this.oid)}},{key:"getTargetStepPercent",value:function(t,e){var n=this.getTargetSteps(t);return e=l.isDefined(e)?e:this.getTargetStep(t),n?e/n:1}},{key:"resetTargetStep",value:function(t){return this.targetValues[t]&&(this.targetValues[t].step=0),this}},{key:"resetTargetExecutionFlag",value:function(t){return this.targetValues[t]&&(this.targetValues[t].executionFlag=!1),this}},{key:"resetTargetCycle",value:function(t){return this.targetValues[t]&&(this.targetValues[t].cycle=0),this}},{key:"resetScheduleTimeStamp",value:function(t){return this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=void 0),this}},{key:"resetTargetInitialValue",value:function(t){return this.targetValues[t]&&(this.targetValues[t].initialValue=void 0),this}},{key:"updateTargetStatus",value:function(t){var e=this.targetValues[t];if(e){var n=this.getTargetCycle(t),r=this.getTargetCycles(t),i=this.getTargetStep(t),a=this.getTargetSteps(t);return this.isExecuted(t)&&i<a||Array.isArray(e.valueList)&&n<e.valueList.length-1?this.targetValues[t].status="updating":!this.isExecuted(t)||this.isTargetInLoop(t)||n<r?this.targetValues[t].status="active":this.targetValues[t].status="done",this.isTargetUpdating(t)?(this.addToUpdatingTargets(t),this.removeFromActiveTargets(t)):this.isTargetActive(t)?(this.addToActiveTargets(t),this.removeFromUpdatingTargets(t)):(this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),Pe.manager.doneTargets.push({tmodel:this,key:t})),this.targetValues[t].status}}},{key:"getTargetStatus",value:function(t){return this.targetValues[t]?this.targetValues[t].status:""}},{key:"isTargetActive",value:function(t){return this.targetValues[t]&&"active"===this.targetValues[t].status}},{key:"isTargetUpdating",value:function(t){return this.targetValues[t]&&"updating"===this.targetValues[t].status}},{key:"isTargetDone",value:function(t){return this.targetValues[t]&&"done"===this.targetValues[t].status}},{key:"isTargetComplete",value:function(t){return this.targetValues[t]&&"complete"===this.targetValues[t].status}},{key:"isExecuted",value:function(t){return this.targetValues[t]&&this.targetValues[t].executionFlag}},{key:"neverExecuted",value:function(t){return!this.targetValues[t]}},{key:"isTargetImperative",value:function(t){return!!this.targetValues[t]&&this.targetValues[t].isImperative}},{key:"getTargetExecutionCount",value:function(t){return this.targetValues[t]?this.targetValues[t].executionCount:0}},{key:"setTargetComplete",value:function(t){this.targetValues[t]&&(this.targetValues[t].status="complete")}},{key:"isTargetEnabled",value:function(t){var e=this.targets[t];return!!l.isDefined(e)&&("function"!=typeof e.enabledOn||e.enabledOn.call(this))}},{key:"isTargetInLoop",value:function(t){return!!this.targets[t]&&("function"==typeof this.targets[t].loop?this.targets[t].loop.call(this,t):this.targets[t].loop)}},{key:"doesTargetEqualActual",value:function(t){if(this.targetValues[t]){var e=!!this.targets[t]&&this.targets[t].deepEquality;return e?l.areEqual(this.getTargetValue(t),this.val(t),e):this.getTargetValue(t)===this.val(t)}return!1}},{key:"getTargetValue",value:function(t){return this.targetValues[t]?"function"==typeof this.targetValues[t].value?this.targetValues[t].value.call(this):this.targetValues[t].value:void 0}},{key:"getTargetSteps",value:function(t){return this.targetValues[t]&&this.targetValues[t].steps||0}},{key:"getTargetStep",value:function(t){return this.targetValues[t]?this.targetValues[t].step:0}},{key:"getScheduleTimeStamp",value:function(t){return this.targetValues[t]?this.targetValues[t].scheduleTimeStamp:void 0}},{key:"shouldScheduleRun",value:function(t){var e,n;return null===(e=null===(n=this.targets[t])||void 0===n?void 0:n.triggerRerun)||void 0===e||e}},{key:"getTargetInitialValue",value:function(t){return this.targetValues[t]?this.targetValues[t].initialValue:void 0}},{key:"getActualValueLastUpdate",value:function(t){return this.targetValues[t]?this.targetValues[t].actualValueLastUpdate:void 0}},{key:"getTargetCreationTime",value:function(t){return this.targetValues[t]?this.targetValues[t].creationTime:void 0}},{key:"incrementTargetStep",value:function(t){return this.targetValues[t]&&this.targetValues[t].step++,this.targetValues[t].step}},{key:"getTargetCycles",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycles||0}},{key:"getTargetCycle",value:function(t){return this.targetValues[t]?this.targetValues[t].cycle:0}},{key:"incrementTargetCycle",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycle++,this.targetValues[t].cycle}},{key:"setTargetInterval",value:function(t,e){return this.targetValues[t]&&(this.targetValues[t].interval=e),this.targetValues[t].interval}},{key:"setScheduleTimeStamp",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=e)}},{key:"setTargetInitialValue",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].initialValue=e)}},{key:"setActualValueLastUpdate",value:function(t){this.targetValues[t]&&(this.targetValues[t].actualValueLastUpdate=l.now())}},{key:"getTargetEasing",value:function(t){return"function"==typeof this.targetValues[t].easing?this.targetValues[t].easing:void 0}},{key:"getTargetInterval",value:function(t){return this.targetValues[t]?this.targetValues[t].interval:void 0}},{key:"getTargetEventFunctions",value:function(t){return this.targetValues[t]?this.targetValues[t].events:void 0}},{key:"setTarget",value:function(t,e,n,r,i,a){if("object"===$(t)&&null!==t){var o=[t,e,n,r,i];e=o[0],n=o[1],r=o[2],i=o[3],a=o[4],t=""}return a=a||this.key,F.executeImperativeTarget(this,t,e,n,r,i,a),this}},{key:"hasTargetUpdates",value:function(t){return t?!0===this.updatingTargetMap[t]:this.updatingTargetList.length>0}},{key:"addToActiveTargets",value:function(t){var e=this;if(!this.activeTargetMap[t]){this.activeTargetMap[t]=!0;var n=["y","x","height","width","start"];-1!==n.indexOf(t)?(this.activeTargetList=this.activeTargetList.filter((function(t){return!n.includes(t)})),n.forEach((function(t){e.activeTargetMap[t]&&e.activeTargetList.unshift(t)}))):this.activeTargetList.push(t)}}},{key:"removeFromActiveTargets",value:function(t){if(this.activeTargetMap[t]){delete this.activeTargetMap[t];var e=this.activeTargetList.indexOf(t);e>=0&&this.activeTargetList.splice(e,1)}}},{key:"addToUpdatingTargets",value:function(t){this.updatingTargetMap[t]||(this.updatingTargetMap[t]=!0,this.updatingTargetList.push(t),this.getParent()&&this.getParent().addToUpdatingChildren(this))}},{key:"removeFromUpdatingTargets",value:function(t){if(this.updatingTargetMap[t]){delete this.updatingTargetMap[t];var e=this.updatingTargetList.indexOf(t);e>=0&&this.updatingTargetList.splice(e,1),0===this.updatingTargetList.length&&this.getParent()&&this.getParent().removeFromUpdatingChildren(this)}}},{key:"hasUpdatingTargets",value:function(t){var e,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Y(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(o)throw i}}}}(this.updatingTargetList);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this.isTargetImperative(r)&&this.targetValues[r].originalTargetName===t)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"addToUpdatingChildren",value:function(t){this.updatingChildrenMap[t.oid]||(this.updatingChildrenMap[t.oid]=!0,this.updatingChildrenList.push(t.oid))}},{key:"removeFromUpdatingChildren",value:function(t){if(this.updatingChildrenMap[t.oid]){delete this.updatingChildrenMap[t.oid];var e=this.updatingChildrenList.indexOf(t.oid);e>=0&&this.updatingChildrenList.splice(e,1)}}},{key:"hasUpdatingChildren",value:function(){return this.updatingChildrenList.length>0}},{key:"deleteTargetValue",value:function(t){delete this.targetValues[t],this.addToActiveTargets(t),this.removeFromUpdatingTargets(t),Ye().schedule(10,"deleteTargetValue-"+this.oid+"-"+t)}},{key:"resetImperative",value:function(t){var e=this.targetValues[t];return e&&(e.isImperative=!1,e.executionFlag=!1,e.scheduleTimeStamp=void 0,e.step=0,e.cycle=0,e.steps=0,e.cycles=0,e.interval=0),this}},{key:"activateTarget",value:function(t){return this.activateTargets([t])}},{key:"activateTargets",value:function(t){var e=this;return t.forEach((function(t){var n=e.targetValues[t];n?(n.executionFlag=!1,n.scheduleTimeStamp=void 0,n.step=0,n.cycle=Array.isArray(n.valueList)?1:0,e.updateTargetStatus(t)):e.addToActiveTargets(t)})),Ye().schedule(10,"activateTargets-"+this.oid),this}},{key:"manageChildTargetExecution",value:function(t,e){return e||this.shouldCalculateChildTargets()||!Re().isCurrentSource("touch")&&0===Re().deltaX()&&0===Re().deltaY()||Re().isCurrentSource("touch")&&0===Re().touchCount||t.hasChildren()||t.addedChildren.count>0||0===t.targetExecutionCount}},{key:"shouldCalculateChildTargets",value:function(){return this.actualValues.shouldCalculateChildTargets}},{key:"setTargetMethodName",value:function(t,e){this.targetMethodMap[t]||(this.targetMethodMap[t]=[]),this.targetMethodMap[t].includes(e)||this.targetMethodMap[t].push(e)}}])}();function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q(r.key),r)}}function Q(t){var e=function(t){if("object"!=Z(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Z(e)?e:e+""}var J=function(){return function(t,e){return e&&G(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xNext=0,this.xNorth=0,this.xWest=0,this.xEast=0,this.xSouth=0,this.absX=0,this.scrollLeft=0,this.xOverflowReset=0,this.xOverflowLimit=0,this.yNext=0,this.yNorth=0,this.yWest=0,this.yEast=0,this.ySouth=0}),[{key:"setCurrentChild",value:function(t){this.currentChild=t}},{key:"setLocation",value:function(){this.currentChild.x=this.xNext+this.currentChild.getLeftMargin(),this.currentChild.y=this.yNext+this.currentChild.getTopMargin()}},{key:"isOverflow",value:function(){var t=this.currentChild.getMinWidth();return this.absX+this.currentChild.x+t+this.currentChild.getLeftMargin()>this.xOverflowLimit}},{key:"overflow",value:function(){this.xNext=this.scrollLeft-this.absX+this.xOverflowReset,this.yNext=this.ySouth,this.currentChild.x=this.xNext+this.currentChild.getLeftMargin(),this.currentChild.y=this.yNext+this.currentChild.getTopMargin()}},{key:"appendNewLine",value:function(){var t=this.currentChild.getHeight()*this.currentChild.getMeasuringScale();this.xNext=this.scrollLeft-this.absX+this.xOverflowReset,this.yNext=this.ySouth>this.yNext?this.ySouth+this.currentChild.val("appendNewLine"):this.ySouth+t+this.currentChild.val("appendNewLine"),this.yEast=this.yNext,this.xSouth=this.xNext,this.ySouth=Math.max(this.yNext,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}},{key:"nextLocation",value:function(){var t=this.currentChild.getHeight()*this.currentChild.getMeasuringScale(),e=this.currentChild.getBaseWidth()*this.currentChild.getMeasuringScale(),n=this.currentChild.getTopBaseHeight()*this.currentChild.getMeasuringScale(),r=this.yNext+t+this.currentChild.getTopMargin()+this.currentChild.getBottomMargin();this.xNext+=e+this.currentChild.getLeftMargin()+this.currentChild.getRightMargin(),this.yNext+=n,this.xSouth=this.xNext,this.yEast=this.yNext,this.xEast=Math.max(this.xNext,this.xEast),this.ySouth=Math.max(r,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}}])}();function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function tt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return et(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,it(r.key),r)}}function rt(t,e,n){return(e=it(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t){var e=function(t){if("object"!=K(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==K(e)?e:e+""}var at=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&nt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"findFirstPinchHandler",value:function(e){return t.findEventHandler(e,"pinch")}},{key:"findFirstScrollTopHandler",value:function(e,n){return t.findScrollHandler(e,n,"scrollTop")}},{key:"findFirstScrollLeftHandler",value:function(e,n){return t.findScrollHandler(e,n,"scrollLeft")}},{key:"findFirstTouchHandler",value:function(e){return t.findEventHandler(e,"touch")}},{key:"findScrollHandler",value:function(t,e,n){for(;t&&(!t.canHandleEvents("swipe")||"wheel"===e);){if(t.canHandleEvents(n))return t;t=t.getParent()}}},{key:"findEventHandler",value:function(t,e){for(;t;){if(t.canHandleEvents(e))return t;t=t.getParent()}}},{key:"findParentByType",value:function(e,n){var r="".concat(e.oid,"__").concat(n);if(!l.isDefined(t.foundParentWithType[r]))for(var i=e.getParent();i;){if(i.type===n){t.foundParentWithType[r]=i;break}i=i.getParent()}return t.foundParentWithType[r]}},{key:"findParentByTarget",value:function(e,n){var r="".concat(e.oid,"__").concat(n);if(!l.isDefined(t.foundParentWithTarget[r]))for(var i=e.getParent();i;){if(l.isDefined(i.targets[n])||l.isDefined(i.targetValues[n])){t.foundParentWithTarget[r]=i;break}i=i.getParent()}return t.foundParentWithTarget[r]}},{key:"findByType",value:function(e){if(!l.isDefined(t.foundTypeMap[e])){var n=function(t){if(t.type===e)return t;var r,i=tt(t.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.type===e)return a}}catch(t){i.e(t)}finally{i.f()}},r=n(Pe.tRoot);r&&(t.foundTypeMap[e]=r)}return t.foundTypeMap[e]}},{key:"findByTarget",value:function(e){if(!l.isDefined(t.foundTargetMap[e])){var n=function(t){if(t.targets[e])return t;var r,i=tt(t.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.targets[e])return a}}catch(t){i.e(t)}finally{i.f()}},r=n(Pe.tRoot);r&&(t.foundTargetMap[e]=r)}return t.foundTargetMap[e]}},{key:"find",value:function(e){if(!l.isDefined(t.foundOids[e])){var n=function(t){if(t.oid===e)return t;var r,i=tt(t.getChildren());try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&a.hasChildren()){var o=n(a);if(o)return o}else if(a&&a.oid===e)return a}}catch(t){i.e(t)}finally{i.f()}},r=n(Pe.tRoot);r&&(t.foundOids[e]=r)}return t.foundOids[e]}}])}();function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function ut(t){return function(t){if(Array.isArray(t))return lt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return lt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ct(r.key),r)}}function ct(t){var e=function(t){if("object"!=ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:e+""}function ht(t,e,n){return e=dt(e),function(t,e){if(e&&("object"==ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ft()?Reflect.construct(e,n||[],dt(t).constructor):e.apply(t,n))}function ft(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ft=function(){return!!t})()}function dt(t){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dt(t)}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vt(t,e)}rt(at,"foundParentWithType",{}),rt(at,"foundParentWithTarget",{}),rt(at,"foundTypeMap",{}),rt(at,"foundTargetMap",{}),rt(at,"foundOids",{});var yt=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ht(this,e,[t,n])).addedChildren={count:0,list:[]},r.deletedChildren=[],r.lastChildrenUpdate={additions:[],deletions:[]},r.allChildren=[],r.$dom=null,r.x=0,r.y=0,r.absX=0,r.absY=0,r.domHeight=void 0,r.domWidth=void 0,r.contentWidth=0,r.contentHeight=0,r.bottomBaseWidth=0,r.topBaseHeight=0,r.styleMap={},r.transformMap={},r.visibilityStatus={top:!1,right:!1,bottom:!1,left:!1},r.isNowInvisible=!1,r.overflowingFlag=!1,r.visibleChildren=[],r.initTargets(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vt(t,e)}(e,t),function(t,e){return e&&st(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"createViewport",value:function(){this.viewport=this.viewport||new J;var t=-this.getScrollLeft(),e=-this.getScrollTop();for(var n in this.viewport.xNext=t,this.viewport.xNorth=t,this.viewport.xEast=t,this.viewport.xSouth=t,this.viewport.xWest=t,this.viewport.absX=this.absX,this.viewport.scrollLeft=t,this.viewport.xOverflowReset=this.absX,this.viewport.xOverflowLimit=this.absX+this.getWidth(),this.viewport.yNext=e,this.viewport.yNorth=e,this.viewport.yWest=e,this.viewport.yEast=e,this.viewport.ySouth=e,Object.assign(this.viewport,this.actualValues.viewport||{}),this.viewport){var r="viewport_".concat(n);Object.prototype.hasOwnProperty.call(this.actualValues,r)&&(this.viewport[n]=this.actualValues[r])}return this.viewport}},{key:"calcAbsolutePosition",value:function(t,e){this.absX=this.getParent().absX+t,this.absY=this.getParent().absY+e}},{key:"addChild",value:function(t){var e=this.addedChildren.count+this.allChildren.length;return this.addedChildren.count++,W.addItem(this.addedChildren.list,t,e),Ye().schedule(10,"addChild-"+this.oid+"-"+t.oid),this}},{key:"removeChild",value:function(t){return this.deletedChildren.push(t),this.removeFromUpdatingChildren(t),Ye().schedule(10,"removeChild-"+this.oid+"-"+t.oid),this}},{key:"moveChildTo",value:function(t,e){var n=this.allChildren.slice(0),r=this.allChildren.indexOf(t);-1===r||e<0||e>n.length||(n.splice(r,1),e===n.length?n.push(t):n.splice(e,0,t),this.allChildren=n,Ye().schedule(10,"addChild-".concat(this.oid,"-").concat(t.oid)))}},{key:"getChildren",value:function(){var t=this;return this.addedChildren.count>0&&(this.addedChildren.list.forEach((function(e){var n,r,i=e.index,a=e.segment;a.forEach((function(e){return e.parent=t})),i>=t.allChildren.length?(n=t.allChildren).push.apply(n,ut(a)):(r=t.allChildren).splice.apply(r,[i,0].concat(ut(a)))})),this.lastChildrenUpdate.additions=this.lastChildrenUpdate.additions.concat(this.addedChildren.list),this.addedChildren.list.length=0,this.addedChildren.count=0),this.deletedChildren.length>0&&(this.deletedChildren.forEach((function(e){var n=t.allChildren.indexOf(e);t.lastChildrenUpdate.deletions.push(n),n>=0&&t.allChildren.splice(n,1)})),this.deletedChildren.length=0),this.allChildren}},{key:"removeAllChildren",value:function(){return this.allChildren.length=0,this.updatingChildrenList.length=0,this.updatingChildrenMap={},Ye().schedule(10,"removeAllChildren-"+this.oid),this}},{key:"addToParentVisibleChildren",value:function(){this.isVisible()&&this.isInFlow()&&this.getParent()&&this.getParent().visibleChildren.push(this)}},{key:"shouldCalculateChildren",value:function(){return l.isDefined(this.actualValues.calculateChildren)?this.actualValues.calculateChildren:this.isVisible()&&this.isIncluded()&&(this.hasChildren()||this.addedChildren.count>0||this.getContentHeight()>0)}},{key:"getFirstChild",value:function(){return this.hasChildren()?this.getChildren()[0]:void 0}},{key:"hasChildren",value:function(){return this.getChildren().length>0}},{key:"findChildren",value:function(t){return this.getChildren().filter((function(e){return e.type===t}))}},{key:"getLastChild",value:function(){return this.hasChildren()?this.getChildren()[this.getChildren().length-1]:void 0}},{key:"getChild",value:function(t){return this.hasChildren()?this.getChildren()[t]:void 0}},{key:"getChildIndex",value:function(t){return this.getChildren().indexOf(t)}},{key:"getChildrenOids",value:function(){return this.getChildren().map((function(t){return t.oid})).join(" ")}},{key:"findChild",value:function(t){return this.getChildren().find((function(e){return e.type===t}))}},{key:"findLastChild",value:function(t){return this.getChildren().findLast((function(e){return e.type===t}))}},{key:"getParentValue",value:function(t){var e=at.findParentByTarget(this,t);return e?e.val(t):void 0}},{key:"val",value:function(t,e){return 2===arguments.length?(this.actualValues[t]=e,this):this.actualValues[t]}},{key:"floorVal",value:function(t){return Math.floor(this.val(t))}},{key:"addValue",value:function(t,e){return this.actualValues[t]+=e,this}},{key:"getDomParent",value:function(){return this.actualValues.domParent||at.findParentByTarget(this,"domHolder")}},{key:"getDomHolder",value:function(){return this.actualValues.domHolder?this.actualValues.domHolder:this.getDomParent()?this.getDomParent().$dom:null}},{key:"bug",value:function(){return[{visible:this.isVisible()},{visibilityStatus:this.visibilityStatus},{hasDom:this.hasDom()},{x:this.getX()},{y:this.getY()},{width:this.getWidth()},{height:this.getHeight()},{activeTargetList:this.activeTargetList},{updatingTargetList:this.updatingTargetList},{styleTargetList:this.styleTargetList},{children:this.getChildren()},{targetValues:this.targetValues},{actualValues:this.actualValues}]}},{key:"logTree",value:function(){l.logTree(this)}},{key:"isVisible",value:function(){return this.actualValues.isVisible}},{key:"calcVisibility",value:function(){return l.calcVisibility(this)}},{key:"hasDomHolderChanged",value:function(){return this.getDomHolder()&&this.getDomHolder().exists()&&this.$dom.parent().getAttribute("id")!==this.getDomHolder().attr("id")}},{key:"hasDomChanged",value:function(){return this.getBaseElement()!==this.$dom.getTagName()}},{key:"hasDom",value:function(){return!!this.$dom&&this.$dom.exists()}},{key:"getRealParent",value:function(){return this.parent}},{key:"getContentHeight",value:function(){return this.contentHeight}},{key:"getContentWidth",value:function(){return this.contentWidth}},{key:"calcContentWidthHeight",value:function(){this.contentHeight=this.viewport.ySouth-this.viewport.yNorth,this.topBaseHeight=this.viewport.yEast-this.viewport.yNorth,this.bottomBaseWidth=this.viewport.xSouth-this.viewport.xWest,this.contentWidth=this.viewport.xEast-this.viewport.xWest}},{key:"getBaseWidth",value:function(){var t;return null!==(t=this.actualValues.baseWidth)&&void 0!==t?t:this.getWidth()}},{key:"getMinWidth",value:function(){var t;return null!==(t=this.actualValues.minWidth)&&void 0!==t?t:this.getWidth()}},{key:"getTopBaseHeight",value:function(){var t;return null!==(t=this.actualValues.topBaseHeight)&&void 0!==t?t:0}},{key:"getContainerOverflowMode",value:function(){var t;return null!==(t=this.actualValues.containerOverflowMode)&&void 0!==t?t:"auto"}},{key:"getItemOverflowMode",value:function(){var t;return null!==(t=this.actualValues.itemOverflowMode)&&void 0!==t?t:"auto"}},{key:"getUIDepth",value:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}},{key:"isTextOnly",value:function(){return this.actualValues.textOnly}},{key:"getHtml",value:function(){return this.actualValues.html}},{key:"isInFlow",value:function(){return this.actualValues.isInFlow}},{key:"canHandleEvents",value:function(t){var e=this.actualValues.canHandleEvents;return e===t||Array.isArray(e)&&e.includes(t)}},{key:"keepEventDefault",value:function(){return this.actualValues.keepEventDefault}},{key:"getBracketThreshold",value:function(){return this.actualValues.bracketThreshold}},{key:"shouldBeBracketed",value:function(){return l.isDefined(this.actualValues.shouldBeBracketed)?this.actualValues.shouldBeBracketed:this.getChildren().length>this.getBracketThreshold()}},{key:"isIncluded",value:function(){return this.actualValues.isIncluded}},{key:"canHaveDom",value:function(){return this.actualValues.canHaveDom}},{key:"getBaseElement",value:function(){return this.actualValues.baseElement}},{key:"isDomDeletable",value:function(){return this.actualValues.isDomDeletable}},{key:"getOpacity",value:function(){return this.actualValues.opacity}},{key:"getCenterX",value:function(){return(this.getParentValue("width")-this.getWidth())/2}},{key:"getCenterY",value:function(){return(this.getParentValue("height")-this.getHeight())/2}},{key:"getX",value:function(){return this.actualValues.x}},{key:"getY",value:function(){return this.actualValues.y}},{key:"getZ",value:function(){return this.actualValues.z}},{key:"getPerspective",value:function(){return this.actualValues.perspective}},{key:"getRotate",value:function(){return this.actualValues.rotate}},{key:"getRotateX",value:function(){return this.actualValues.rotateX}},{key:"getRotateY",value:function(){return this.actualValues.rotateY}},{key:"getRotateZ",value:function(){return this.actualValues.rotateZ}},{key:"getScale",value:function(){return this.actualValues.scale}},{key:"getScaleX",value:function(){return this.actualValues.scaleX}},{key:"getScaleY",value:function(){return this.actualValues.scaleY}},{key:"getScaleZ",value:function(){return this.actualValues.scaleZ}},{key:"getSkewX",value:function(){return this.actualValues.skewX}},{key:"getSkewY",value:function(){return this.actualValues.skewY}},{key:"getSkewZ",value:function(){return this.actualValues.skewZ}},{key:"getMeasuringScale",value:function(){return this.actualValues.scale}},{key:"getZIndex",value:function(){return this.actualValues.zIndex}},{key:"getTopMargin",value:function(){return this.actualValues.topMargin}},{key:"getLeftMargin",value:function(){return this.actualValues.leftMargin}},{key:"getRightMargin",value:function(){return this.actualValues.rightMargin}},{key:"getBottomMargin",value:function(){return this.actualValues.bottomMargin}},{key:"getWidth",value:function(){return this.actualValues.width}},{key:"getHeight",value:function(){return this.actualValues.height}},{key:"getScrollTop",value:function(){return Math.floor(this.actualValues.scrollTop)}},{key:"getScrollLeft",value:function(){return Math.floor(this.actualValues.scrollLeft)}},{key:"getCss",value:function(){return this.actualValues.css.includes("tgt")?this.actualValues.css:this.actualValues.css?"tgt "+this.actualValues.css:"tgt"}},{key:"getStyle",value:function(){return this.actualValues.style}},{key:"getBackground",value:function(){return this.actualValues.background}},{key:"getBackgroundColor",value:function(){return this.actualValues.backgroundColor}},{key:"getAttributes",value:function(){return this.actualValues.attributes}},{key:"getInputValue",value:function(){return this.hasDom()?this.$dom.value():void 0}}])}(z);function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mt(r.key),r)}}function mt(t){var e=function(t){if("object"!=gt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gt(e)?e:e+""}var bt=function(){return function(t,e){return e&&pt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.style=void 0}),[{key:"setup",value:function(){if(!document.getElementsByClassName){var t=function(t,e){var n;if(document.querySelectorAll)n=e.querySelectorAll(".".concat(t));else{var r=e.getElementsByTagName("*");n=[];for(var i=0;i<r.length;i++)r[i].className&&" ".concat(r[i].className," ").indexOf(" ".concat(t," "))>-1&&-1===n.indexOf(r[i])&&n.push(r[i])}return n};document.getElementsByClassName=function(e){return t(e,document)},Element.prototype.getElementsByClassName=function(e){return t(e,this)}}this.style={transform:this.prefixStyle("transform"),transitionTimingFunction:this.prefixStyle("transitionTimingFunction"),transitionDuration:this.prefixStyle("transitionDuration")}}},{key:"prefixStyle",value:function(t){var e=new f;e.create("div");for(var n=e.style(),r="",i=["webkitT","MozT","msT","OT","t"],a=0;a<i.length;a++)i[a]+"ransform"in n&&(r=i[a].substr(0,i[a].length-1));return""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}}])}();function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kt(r.key),r)}}function kt(t){var e=function(t){if("object"!=wt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wt(e)?e:e+""}var St=function(){return function(t,e){return e&&Tt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentTouch={deltaY:0,deltaX:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""},this.touchTimeStamp=0,this.cursor={x:0,y:0,handlerX:0,handlerY:0},this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0,this.touchCount=0,this.currentEventName="",this.currentEventType="",this.currentHandlers={touch:null,scrollLeft:null,scrollTop:null,pinch:null,enterEvent:null,leaveEvent:null,focus:null,justFocused:null,blur:null},this.eventQueue=[],this.eventMap={touchstart:{eventName:"touchstart",inputType:"touch",eventType:"start",order:1,windowEvent:!1,queue:!0},touchmove:{eventName:"touchmove",inputType:"touch",eventType:"move",order:1,windowEvent:!1,queue:!0},touchend:{eventName:"touchend",inputType:"touch",eventType:"end",order:1,windowEvent:!1,queue:!0},touchcancel:{eventName:"touchend",inputType:"touch",eventType:"cancel",order:1,windowEvent:!1,queue:!0},mousedown:{eventName:"mousedown",inputType:"mouse",eventType:"start",order:2,windowEvent:!1,queue:!0},mousemove:{eventName:"mousemove",inputType:"mouse",eventType:"move",order:2,windowEvent:!1,queue:!0},mouseup:{eventName:"mouseup",inputType:"mouse",eventType:"end",order:2,windowEvent:!1,queue:!0},mousecancel:{eventName:"mouseup",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!1,queue:!0},mouseleave:{eventName:"mouseleave",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!1,queue:!0},pointerdown:{eventName:"mousedown",inputType:"pointer",eventType:"start",order:3,windowEvent:!1,queue:!0},pointermove:{eventName:"mousemove",inputType:"pointer",eventType:"move",order:3,windowEvent:!1,queue:!0},pointerup:{eventName:"mouseup",inputType:"pointer",eventType:"end",order:3,windowEvent:!1,queue:!0},pointercancel:{eventName:"mousecancel",inputType:"pointer",eventType:"cancel",order:3,windowEvent:!1,queue:!0},wheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1,queue:!0},DOMMouseScroll:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1,queue:!0},mousewheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1,queue:!0},blur:{eventName:"blur",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!0,queue:!0},keyup:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0,queue:!0},keydown:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0,queue:!0},resize:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0,queue:!1},orientationchange:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0,queue:!1}},this.domEvents=Object.keys(this.eventMap).filter((function(t){return!e.eventMap[t].windowEvent})),this.windowEvents=Object.keys(this.eventMap).filter((function(t){return e.eventMap[t].windowEvent})),this.bindedHandleEvent=this.bindedHandleEvent||this.handleEvent.bind(this)}),[{key:"removeHandlers",value:function(t){var e=this;this.domEvents.forEach((function(n){t.detachEvent(n,e.bindedHandleEvent)}))}},{key:"addHandlers",value:function(t){var e=this;this.domEvents.forEach((function(n){t.addEvent(n,e.bindedHandleEvent)}))}},{key:"removeWindowHandlers",value:function(){var t=this;this.windowEvents.forEach((function(e){Pe.$window.detachEvent(e,t.bindedHandleEvent)}))}},{key:"addWindowHandlers",value:function(){var t=this;this.windowEvents.forEach((function(e){Pe.$window.addEvent(e,t.bindedHandleEvent)}))}},{key:"resetEventsOnTimeout",value:function(){if(this.touchTimeStamp>0){var t=l.now()-this.touchTimeStamp,e=0;Math.abs(this.currentTouch.deltaY)>.001||Math.abs(this.currentTouch.deltaX)>.001||Math.abs(this.currentTouch.pinchDelta)>.001?t>70?this.clearTouch():this.currentTouch.manualMomentumFlag&&(this.currentTouch.deltaY*=.85,this.currentTouch.deltaX*=.85,e=10):t>600&&(this.clearTouch(),this.touchTimeStamp=0),Ye().schedule(e,"scroll decay")}}},{key:"findEventHandlers",value:function(t){var e,n,r,i,a,o=t.tmodel,u=t.eventType;o&&(e=at.findFirstTouchHandler(o),n=at.findFirstScrollLeftHandler(o,u),r=at.findFirstScrollTopHandler(o,u),i=at.findFirstPinchHandler(o),a=f.hasFocus(o)?o:this.currentHandlers.focus),this.currentHandlers.scrollLeft===n&&this.currentHandlers.scrollTop===r||this.clearTouch(),this.currentHandlers.touch!==e&&(this.currentHandlers.enterEvent=e,this.currentHandlers.leaveEvent=this.currentHandlers.touch),this.currentHandlers.focus!==a&&(this.currentHandlers.justFocused=a,this.currentHandlers.blur=this.currentHandlers.focus),this.currentHandlers.touch=e,this.currentHandlers.scrollLeft=n,this.currentHandlers.scrollTop=r,this.currentHandlers.pinch=i,this.currentHandlers.focus=a}},{key:"captureEvents",value:function(){if(this.currentHandlers.enterEvent=null,this.currentHandlers.leaveEvent=null,this.currentHandlers.justFocused=null,this.currentHandlers.blur=null,0===this.eventQueue.length)return this.currentEventName="",this.currentEventType="",void(this.currentKey="");var t=this.eventQueue.shift();0===this.touchCount&&this.findEventHandlers(t),this.currentEventName=t.eventName,this.currentEventType=t.eventType,this.currentKey=this.currentTouch.key,this.currentTouch.key="",Ye().schedule(10,"captureEvents-".concat(t))}},{key:"handleEvent",value:function(t){if(t){var e=t.type,n=this.eventMap[e];if(n){var r=n.eventName,i=n.inputType,a=n.eventType,o=n.order,u=n.queue,s=l.now();this.touchTimeStamp=Math.max(s,this.touchTimeStamp);var c=this.getTModelFromEvent(t),h=this.eventQueue.length>0?this.eventQueue[this.eventQueue.length-1]:null;if(h&&h.eventItem){var f=h.eventItem,d=s-h.timeStamp;if(i&&f.inputType&&f.inputType!==i&&o>f.order)return;if(this.eventQueue.length>10&&d<50)for(var v=0,y=this.eventQueue.length-1;y>=0&&(null===(g=this.eventQueue[y].eventItem)||void 0===g?void 0:g.eventType)===a;y--){var g;if(++v>5)return}}var p={eventName:r,eventItem:n,eventType:a,originalName:e,tmodel:c,timeStamp:s};switch(u&&this.eventQueue.push(p),r){case"mousedown":case"touchstart":this.clearStart(),this.clearTouch(),this.touchCount=this.countTouches(t),this.preventDefault(c,r)&&t.preventDefault(),this.start0=this.getTouch(t),this.start1=this.getTouch(t,1),this.cursor.x=this.start0.x,this.cursor.y=this.start0.y,this.findEventHandlers(p),this.currentHandlers.touch&&(this.cursor.handlerX=this.start0.x-this.currentHandlers.touch.getX(),this.cursor.handlerY=this.start0.y-this.currentHandlers.touch.getY()),t.stopPropagation();break;case"mousemove":case"touchmove":var m=this.getTouch(t);this.cursor.x=m.x,this.cursor.y=m.y,this.preventDefault(c,r)&&t.preventDefault(),this.touchCount>0?(this.move(t),t.stopPropagation()):this.isCurrentSource("wheel")&&this.clearTouch();break;case"mouseup":case"touchend":if(this.preventDefault(c,r)&&t.preventDefault(),this.end(t),this.start0){var b=this.end0?Math.abs(this.end0.originalX-this.start0.originalX):0,w=this.end0?Math.abs(this.end0.originalY-this.start0.originalY):0,T=this.end0?Math.abs(this.end0.timeStamp-this.start0.timeStamp):300;b<=1&&w<=1&&T<=300&&(this.eventQueue.pop(),this.eventQueue.push({eventName:"click",eventItem:n,eventType:"click",originalName:e,tmodel:c,timeStamp:s}))}this.clearStart(),this.touchCount=0,t.stopPropagation();break;case"wheel":this.preventDefault(c,r)&&t.preventDefault(),this.wheel(t);break;case"key":this.currentTouch.key=t.which||t.keyCode;break;case"resize":Fe().val("width",Fe().targets.width()),Fe().val("height",Fe().targets.height())}Ye().schedule(0,"".concat(e,"-").concat(r,"-").concat((t.target.tagName||"").toUpperCase()))}}}},{key:"preventDefault",value:function(t,e){return!t||!(!0===t.keepEventDefault()||Array.isArray(t.keepEventDefault())&&t.keepEventDefault().includes(e))}},{key:"getTModelFromEvent",value:function(t){var e="function"==typeof t.target.getAttribute?t.target.getAttribute("id"):"";return e&&Pe.manager.visibleOidMap[e]||(e=f.findNearestParentWithId(t.target)),Pe.manager.visibleOidMap[e]}},{key:"clearStart",value:function(){this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0,this.touchCount=0}},{key:"clearTouch",value:function(){this.currentTouch={deltaY:0,deltaX:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""}}},{key:"clearAll",value:function(){this.clearStart(),this.clearTouch(),this.eventQueue.length=0,this.touchTimeStamp=0}},{key:"deltaX",value:function(){return this.currentTouch.deltaX}},{key:"deltaY",value:function(){return this.currentTouch.deltaY}},{key:"cursorX",value:function(){return this.cursor.x}},{key:"cursorY",value:function(){return this.cursor.y}},{key:"swipeX",value:function(){return this.cursor.x-this.cursor.handlerX}},{key:"swipeY",value:function(){return this.cursor.y-this.cursor.handlerY}},{key:"pinchDelta",value:function(){return this.currentTouch.pinchDelta}},{key:"dir",value:function(){return this.currentTouch.dir}},{key:"getScrollLeftHandler",value:function(){return this.currentHandlers.scrollLeft}},{key:"getScrollTopHandler",value:function(){return this.currentHandlers.scrollTop}},{key:"getPinchHandler",value:function(){return this.currentHandlers.pinch}},{key:"getTouchHandler",value:function(){return this.currentHandlers.touch}},{key:"getTouchHandlerType",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.type:null}},{key:"getTouchHandlerOid",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.oid:null}},{key:"isClickEvent",value:function(){return"click"===this.getEventType()}},{key:"isResizeEvent",value:function(){return"resize"===this.getEventType()}},{key:"isSwipeEvent",value:function(){return this.hasDelta()&&1===this.touchCount}},{key:"isScrollEvent",value:function(){return this.hasDelta()&&this.isCurrentSource("wheel")}},{key:"hasDelta",value:function(){return 0!==this.deltaX()||0!==this.deltaY()}},{key:"isEndEvent",value:function(){return"end"===this.getEventType()}},{key:"isStartEvent",value:function(){return"start"===this.getEventType()}},{key:"getEventName",value:function(){return this.currentEventName}},{key:"getEventType",value:function(){return this.currentEventType}},{key:"isClickHandler",value:function(t){return this.getTouchHandler()===t&&this.isClickEvent()}},{key:"isClickHandlerType",value:function(t){return this.getTouchHandlerType()===t&&this.isClickEvent()}},{key:"isTouchEndHandler",value:function(t){return this.getTouchHandler()===t&&"end"===this.getEventType()}},{key:"isTouchHandler",value:function(t){return this.getTouchHandler()===t&&t.canHandleEvents("touch")}},{key:"isEnterEventHandler",value:function(t){return this.currentHandlers.enterEvent===t}},{key:"isLeaveEventHandler",value:function(t){return this.currentHandlers.leaveEvent===t}},{key:"onFocus",value:function(t){return this.currentHandlers.justFocused===t}},{key:"onBlur",value:function(t){return this.currentHandlers.blur===t}},{key:"hasFocus",value:function(t){return this.currentHandlers.focus===t}},{key:"isTouchHandlerType",value:function(t){return this.getTouchHandlerType()===t}},{key:"isScrollLeftHandler",value:function(t){return this.currentHandlers.scrollLeft===t}},{key:"isScrollTopHandler",value:function(t){return this.currentHandlers.scrollTop===t}},{key:"isPinchHandler",value:function(t){return this.currentHandlers.pinch===t}},{key:"isCurrentSource",value:function(t){return this.currentTouch.source===t}},{key:"isTouchHandlerOrAncestor",value:function(t){for(var e=this.getTouchHandler();t;){if(t===e)return!0;t=t.getParent()}return!1}},{key:"isTouchHandlerOrParent",value:function(t){var e=this.getTouchHandler();return t===e||t.getParent()===e}},{key:"countTouches",value:function(t){var e,n;return(null===(e=t.touches)||void 0===e?void 0:e.length)||(null===(n=t.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n.length)||1}},{key:"getTouch",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(null===(e=t.touches)||void 0===e?void 0:e[r])||(null===(n=t.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n[r])||t,a=l.isDefined(i.clientX)?i.clientX:i.pageX||0,o=l.isDefined(i.clientY)?i.clientY:i.pageY||0;return{x:a,y:o,originalX:a,originalY:o,target:i.target,timeStamp:l.now()}}},{key:"move",value:function(t){if(1===this.touchCount){if(this.start0.y=this.end0?this.end0.y:this.start0.y,this.start0.x=this.end0?this.end0.x:this.start0.x,this.end0=this.getTouch(t),l.isDefined(this.end0)){var e=this.start0.x-this.end0.x,n=this.start0.y-this.end0.y;this.setDeltaXDeltaY(e,n,"touch")}}else if(this.touchCount>=2){this.end0=this.getTouch(t),this.end1=this.getTouch(t,1);var r=l.distance(this.start0.x,this.start0.y,this.start1.x,this.start1.y),i=l.distance(this.end0.x,this.end0.y,this.end1.x,this.end1.y)-r;this.currentTouch.pinchDelta=i>0?.3:i<0?-.3:0}}},{key:"end",value:function(){if(this.touchCount<=1&&this.start0){var t,e=this.end0?this.start0.x-this.end0.x:0,n=this.end0?this.start0.y-this.end0.y:0,r=this.end0?this.end0.timeStamp-this.start0.timeStamp:0;"horizontal"===this.currentTouch.orientation&&Math.abs(e)>1?(t=l.momentum(0,e,r),this.currentTouch.deltaX=t.distance,this.currentTouch.manualMomentumFlag=!0,this.touchTimeStamp=l.now()+t.duration):"vertical"===this.currentTouch.orientation&&Math.abs(n)>1&&(t=l.momentum(0,n,r),this.currentTouch.deltaY=t.distance,this.currentTouch.manualMomentumFlag=!0,this.touchTimeStamp=l.now()+t.duration)}}},{key:"setDeltaXDeltaY",value:function(t,e,n){var r=Math.abs(t)-Math.abs(e);r>=1?("none"===this.currentTouch.orientation||"vertical"===this.currentTouch.orientation&&r>3||"horizontal"===this.currentTouch.orientation)&&(this.currentTouch.orientation="horizontal",this.currentTouch.dir=t<=-1?"left":t>=1?"right":this.currentTouch.dir,this.currentTouch.source=n):("none"===this.currentTouch.orientation||"horizontal"===this.currentTouch.orientation&&r<-3||"vertical"===this.currentTouch.orientation)&&(this.currentTouch.orientation="vertical",this.currentTouch.dir=e<=-1?"up":e>=1?"down":this.currentTouch.dir,this.currentTouch.source=n),this.currentTouch.deltaY=e,this.currentTouch.deltaX=t}},{key:"wheel",value:function(t){var e=0,n=0;this.currentTouch.pinchDelta=0,this.start0=this.getTouch(t),t.ctrlKey&&"deltaY"in t?this.currentTouch.pinchDelta=-t.deltaY/10:"deltaX"in t?(e=t.deltaX,n=t.deltaY):"wheelDeltaX"in t?(e=-t.wheelDeltaX/120,n=-t.wheelDeltaY/120):"wheelDelta"in t?e=-t.wheelDelta/120:"detail"in t&&(e=t.detail/3),this.setDeltaXDeltaY(e,n,"wheel")}}])}();function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){Mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mt(t,e,n){return(e=Dt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dt(r.key),r)}}function Dt(t){var e=function(t){if("object"!=Ct(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ct(e)?e:e+""}var Pt=function(){return function(t,e){return e&&Ot(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cacheMap={},this.fetchingAPIMap={},this.fetchingImageMap={}}),[{key:"fetchCommon",value:function(t,e,n,r,i){var a;return e&&this.isFetched(e)?"function"==typeof(null===(a=n.targets[n.key])||void 0===a?void 0:a.onSuccess)&&n.isTargetEnabled(n.key)&&n.targets[n.key].onSuccess.call(n,xt(xt({},this.cacheMap[e]),{},{fetchingPeriod:0})):r[t]?r[t].targets.push({tmodel:n,targetName:n.key}):(r[t]={fetchId:t,cacheId:e,fetchingFlag:!0,startTime:l.now(),targets:[{tmodel:n,targetName:n.key}],fetchMap:r},i()),t}},{key:"fetch",value:function(t,e,n,r){var i=this,a="".concat(t.oid,"_").concat(e,"_").concat(JSON.stringify(n));return this.fetchCommon(a,r,t,this.fetchingAPIMap,(function(){i.ajaxAPI(e,n,i.fetchingAPIMap[a])}))}},{key:"fetchImage",value:function(t,e,n){var r=this,i="".concat(t.oid,"_").concat(e);return this.fetchCommon(i,n,t,this.fetchingImageMap,(function(){r.loadImage(e,r.fetchingImageMap[i])}))}},{key:"isFetching",value:function(t){var e,n;return null!==(e=null===(n=this.fetchingAPIMap[t])||void 0===n?void 0:n.fetchingFlag)&&void 0!==e&&e}},{key:"isFetched",value:function(t){var e,n;return null!==(e=null===(n=this.cacheMap[t])||void 0===n?void 0:n.success)&&void 0!==e&&e}},{key:"getFetchingPeriod",value:function(t){return this.fetchingAPIMap[t]?l.now()-this.fetchingAPIMap[t].startTime:void 0}},{key:"fetchCache",value:function(t){return this.cacheMap[t]}},{key:"handleSuccess",value:function(t,e){var n=l.now(),r=t.fetchId,i=t.cacheId,a=t.startTime,o=t.targets,u=t.fetchMap,s={fetchingPeriod:n-a,success:!0,result:e};o.forEach((function(t){var e,n=t.tmodel,r=t.targetName;"function"==typeof(null===(e=n.targets[r])||void 0===e?void 0:e.onSuccess)&&n.isTargetEnabled(r)&&n.targets[r].onSuccess.call(n,s)})),delete u[r],i&&(this.cacheMap[i]=s),Ye().schedule(0,"api_success_".concat(r))}},{key:"handleError",value:function(t,e){var n=l.now(),r=t.fetchId,i=t.cacheId,a=t.startTime,o=t.targets,u=t.fetchMap,s={fetchingPeriod:n-a,success:!1,error:e};o.forEach((function(t){var e,n=t.tmodel,r=t.targetName;"function"==typeof(null===(e=n.targets[r])||void 0===e?void 0:e.onError)&&n.targets[r].onError.call(n,s)})),delete u[r],i&&(this.cacheMap[i]=s),Ye().schedule(0,"api_error_".concat(r))}},{key:"ajaxAPI",value:function(t,e,n){var r=this,i={dataType:"json",type:"GET",success:function(t){return r.handleSuccess(n,t)},error:function(t){return r.handleError(n,t)}};f.ajax(xt(xt({},i),{},{url:t},{data:e}))}},{key:"loadImage",value:function(t,e){var n=this,r=new Image;r.src=t,r.onload=function(){var t={width:r.width,height:r.height,src:r.src};n.handleSuccess(e,t)},r.onerror=r.onerror=function(){n.handleError(e,"not found")}}}])}();function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jt(r.key),r)}}function jt(t){var e=function(t){if("object"!=Lt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lt(e)?e:e+""}function Ht(t,e,n){return e=At(e),function(t,e){if(e&&("object"==Lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,It()?Reflect.construct(e,n||[],At(t).constructor):e.apply(t,n))}function It(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(It=function(){return!!t})()}function At(t){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},At(t)}function Nt(t,e){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nt(t,e)}var Ft=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ht(this,e,["BI",{canHaveDom:!1,itemOverflowMode:"never"}])).parent=t,n.newFlag=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nt(t,e)}(e,t),function(t,e){return e&&Vt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"shouldBeBracketed",value:function(){return!1}},{key:"getWidth",value:function(){return this.getContentWidth()}},{key:"getHeight",value:function(){return this.getContentHeight()}},{key:"getBaseWidth",value:function(){return this.bottomBaseWidth}},{key:"getContainerOverflowMode",value:function(){return this.getRealParent().getContainerOverflowMode()}},{key:"getTopBaseHeight",value:function(){return this.topBaseHeight}},{key:"isVisible",value:function(){return this.visibilityStatus.top&&this.visibilityStatus.bottom}},{key:"addToParentVisibleChildren",value:function(){}},{key:"createViewport",value:function(){return this.viewport=this.viewport||new J,this.viewport.xNext=this.x,this.viewport.xNorth=this.x,this.viewport.xEast=this.x,this.viewport.xSouth=this.x,this.viewport.xWest=this.x,this.viewport.absX=this.getRealParent().viewport.absX,this.viewport.scrollLeft=this.getRealParent().viewport.scrollLeft,this.viewport.xOverflowReset=this.getRealParent().viewport.xOverflowReset,this.viewport.xOverflowLimit=this.getRealParent().viewport.xOverflowLimit,this.viewport.yNext=this.y,this.viewport.yNorth=this.y,this.viewport.yWest=this.y,this.viewport.yEast=this.y,this.viewport.ySouth=this.getRealParent().viewport.ySouth,this.viewport}},{key:"getRealParent",value:function(){return this.realParent}},{key:"calcAbsolutePosition",value:function(t,e){this.absX=t+this.getRealParent().absX,this.absY=e+this.getRealParent().absY}},{key:"shouldCalculateChildren",value:function(){var t=this.isVisible()||this.newFlag;return this.newFlag=!1,t}},{key:"getChildren",value:function(){return this.allChildren}}])}(yt);function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Bt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Xt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Xt(t,e){if(t){if("string"==typeof t)return Wt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wt(t,e):void 0}}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$t(r.key),r)}}function Ut(t,e,n){return(e=$t(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $t(t){var e=function(t){if("object"!=Rt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rt(e)?e:e+""}var _t=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&Yt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"generate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!t.bracketMap[e.oid]||e.lastChildrenUpdate.deletions.length>0||n?t.bracketMap[e.oid]={brackets:t.buildTreeBottomUp(e,e.getChildren()),updateCount:0}:e.lastChildrenUpdate.additions.length>0&&t.updateTree(e,e.lastChildrenUpdate.additions),e.lastChildrenUpdate.additions.length=0,e.lastChildrenUpdate.deletions.length=0,t.bracketMap[e.oid].brackets}},{key:"updateTree",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.getChildren(),i=new Set,a=e.getBracketThreshold();n.forEach((function(t){var e=t.index;t.segment.forEach((function(t,n){return i.add(e+n)}))}));var o=Array.from(i).sort((function(t,e){return t-e})),u=null,l=null;o.forEach((function(n){var i=Math.floor(n/a)*a,o=Math.min(r.length,i+a);null===u?(u=i,l=o):i<=l+1?l=Math.max(l,o):(t.updateSegmentInTree(e,r,u,l),u=i,l=o)})),null!==u&&null!==l&&t.updateSegmentInTree(e,r,u,l)}},{key:"updateSegmentInTree",value:function(e,n,r,i){for(var a,o=t.bracketMap[e.oid].brackets,u=t.buildTreeBottomUp(e,n.slice(r,i)),l=e.getBracketThreshold(),s=o,c=void 0;;){var h,f=null,d=Bt(s);try{for(d.s();!(h=d.n()).done;){var v=h.value;if(!(v.getFirstChild()instanceof Ft))break;var y=v.startIndex,g=Math.ceil(v.endIndex/l)*l;if(y<=r&&g>=i){f=v.getChildren(),c=v;break}}}catch(t){d.e(t)}finally{d.f()}if(!f)break;s=f}for(var p=0;p<s.length&&s[p].endIndex<=r;)p++;for(var m=0;p+m<s.length&&s[p+m].startIndex<=i;)m++;var b=s.length>p?s[p].startIndex:s[s.length-1].endIndex;if((a=s).splice.apply(a,[p,m].concat(function(t){return function(t){if(Array.isArray(t))return Wt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(u))),c){var w,T=Bt(u);try{for(T.s();!(w=T.n()).done;)w.value.parent=c}catch(t){T.e(t)}finally{T.f()}}t.reindexSegment(u,b),t.bracketMap[e.oid].updateCount++,s.length>l&&(t.bracketMap[e.oid].brackets=t.buildTreeBottomUp(e,s))}},{key:"buildTreeBottomUp",value:function(e,n){for(var r=n.length,i=e.getBracketThreshold()-1,a=[],o=0,u=0;u<r;u++)u-o!==i&&u!==r-1||(a.push(t.createBracket(e,n,o,u+1)),o=u+1);return a.length>i?t.buildTreeBottomUp(e,a):a}},{key:"createBracket",value:function(e,n,r,i){var a=new Ft(e);return a.allChildren=n.slice(r,i),a.startIndex=a.allChildren[0]instanceof Ft?a.allChildren[0].startIndex:r,a.endIndex=a.allChildren[a.allChildren.length-1]instanceof Ft?a.allChildren[a.allChildren.length-1].endIndex:i,a.allChildren.forEach((function(t){t instanceof Ft&&(t.realParent=e,t.parent=a)})),a.realParent=e,t.all[a.oid]=a,a}},{key:"reindexSegment",value:function(t,e){for(var n=t.slice(0),r=n[n.length-1];n.length>0;){var i=n.shift();i.startIndex+=e,i.endIndex+=e,i instanceof Ft&&i.getChildren().forEach((function(t){l.isDefined(t.startIndex)&&l.isDefined(t.endIndex)&&n.push(t)}))}for(var a=r.getParent();a;)a.endIndex=Math.max(a.endIndex,r.endIndex),a=a.getParent()}}])}();function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zt(r.key),r)}}function Zt(t){var e=function(t){if("object"!=qt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qt(e)?e:e+""}Ut(_t,"bracketMap",{}),Ut(_t,"all",{});var Gt=function(){return function(t,e){return e&&zt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hasLocationList=[],this.hasLocationMap={},this.locationListStats=[],this.screenWidth=_e(),this.screenHeight=qe(),this.resizeFlag=!1}),[{key:"calculateAll",value:function(){this.hasLocationList.length=0,this.hasLocationMap={},this.locationListStats.length=0,this.startTime=l.now(),this.resizeFlag=!1,this.screenWidth===_e()&&this.screenHeight===qe()||(this.resizeFlag=!0,this.screenWidth=_e(),this.screenHeight=qe()),this.calculate()}},{key:"calculate",value:function(){this.addToLocationList(Pe.tRoot),this.calculateContainer(Pe.tRoot)}},{key:"getChildren",value:function(t){return t.shouldBeBracketed()?_t.generate(t):(_t.bracketMap[t.oid]&&delete _t.bracketMap[t.oid],t.getChildren())}},{key:"calculateContainer",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getChildren(t),r=t.createViewport();t.visibleChildren.length=0;for(var i=t.visibleChildren.length,a=t.getChildren().length,o=n.length,u=0;u<o;){var s=n[u++];if(s){r.setCurrentChild(s),r.setLocation(),t.manageChildTargetExecution(s,e)&&this.calculateTargets(s),r.setLocation(),s.overflowingFlag=!1,("always"===t.getContainerOverflowMode()||"always"===s.getItemOverflowMode()||"auto"===t.getContainerOverflowMode()&&"auto"===s.getItemOverflowMode()&&r.isOverflow())&&(s.overflowingFlag=!0,r.overflow()),s.isIncluded()&&!this.hasLocationMap[s.oid]&&this.addToLocationList(s),!s.isTargetEnabled("x")||s.isTargetUpdating("x")||s.isTargetImperative("x")?l.isDefined(s.targetValues.x)||s.val("x",s.x):F.executeDeclarativeTarget(s,"x"),!s.isTargetEnabled("y")||s.isTargetUpdating("y")||s.isTargetImperative("y")?l.isDefined(s.targetValues.y)||s.val("y",s.y):F.executeDeclarativeTarget(s,"y"),s.addToStyleTargetList("x"),s.addToStyleTargetList("y"),s.calcAbsolutePosition(s.getX(),s.getY());var c=s.isVisible();if(l.isDefined(s.targets.isVisible)?F.executeDeclarativeTarget(s,"isVisible"):s.calcVisibility(),s.isNowVisible=!1===c&&s.isVisible(),s.addToParentVisibleChildren(),s.shouldCalculateChildren()&&this.calculateContainer(s,e&&!1!==t.shouldCalculateChildTargets()),s.isInFlow()){var h=t.getContentWidth(),f=t.getContentHeight();l.isNumber(s.val("appendNewLine"))?(r.appendNewLine(),t.calcContentWidthHeight()):(t.calcContentWidthHeight(),r.nextLocation()),h===t.getContentWidth()&&f===t.getContentHeight()||this.activateTargets(t,t.targets.onContentResize)}if(!l.isDefined(s.targetValues.height)&&!l.isDefined(s.targets.heightFromDom)&&s.getContentHeight()>0){var d=s.getHeight();s.val("height",s.getContentHeight()),d!==s.getHeight()&&s.addToStyleTargetList("height")}if(!l.isDefined(s.targetValues.width)&&!l.isDefined(s.targets.widthFromDom)&&s.getContentWidth()>0){var v=s.getWidth();s.val("width",s.getContentWidth()),v!==s.getWidth()&&s.addToStyleTargetList("width")}t.calcContentWidthHeight(),this.locationListStats.push("".concat(s.oid,"-").concat(s.updatingTargetList.length,"-").concat(l.now()-this.startTime))}}i===t.visibleChildren.length&&0!==t.visibleChildren.length||!t.targets.onVisibleChildrenChange||this.activateTargets(t,t.targets.onVisibleChildrenChange),a!==t.getChildren().length&&t.targets.onChildrenChange&&this.activateTargets(t,t.targets.onChildrenChange)}},{key:"calculateTargets",value:function(t){var e=t.getChildren().length;if(this.activateTargetsOnEvents(t),Pe.targetManager.applyTargetValues(t),Pe.targetManager.setActualValues(t),0===t.getChildren().length&&e>0&&t.targets.onChildrenChange&&this.activateTargets(t,t.targets.onChildrenChange),t.hasDom()){var n=t.getWidth(),r=t.getHeight();(l.isDefined(t.targetValues.width)||l.isDefined(t.targets.width)||t.hasChildren())&&!t.getTargetValue("widthFromDom")||M.setWidthFromDom(t),(l.isDefined(t.targetValues.height)||l.isDefined(t.targets.height)||t.hasChildren())&&!t.getTargetValue("heightFromDom")||M.setHeightFromDom(t),n===t.getWidth()&&l.isDefined(t.styleMap.width)||t.addToStyleTargetList("width"),r===t.getHeight()&&l.isDefined(t.styleMap.height)||t.addToStyleTargetList("height")}t.isNowVisible=!1,t.targetExecutionCount++}},{key:"activateTargetsOnEvents",value:function(t){var e=[];t.eventTargets.forEach((function(n){M.targetConditionMap[n](t)&&(e=e.concat(t.targets[n]))})),this.activateTargets(t,e)}},{key:"activateTargets",value:function(t,e){var n=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){if("function"==typeof e){var r=e.call(t);r&&(r=Array.isArray(r)?r:[r]).forEach((function(e){n.activateSingleTarget(t,e)}))}else n.activateSingleTarget(t,e)}))}},{key:"activateSingleTarget",value:function(t,e){t.targets[e]&&(t.isTargetEnabled(e)?t.activateTarget(e):t.addToActiveTargets(e))}},{key:"addToLocationList",value:function(t){this.hasLocationList.push(t),this.hasLocationMap[t.oid]=t}}])}();function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function Jt(){Jt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),u=new P(r||[]);return i(o,"_invoke",{value:x(t,n,u)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",v="executing",y="completed",g={};function p(){}function m(){}function b(){}var w={};s(w,o,(function(){return this}));var T=Object.getPrototypeOf,k=T&&T(T(L([])));k&&k!==n&&r.call(k,o)&&(w=k);var S=b.prototype=p.prototype=Object.create(w);function C(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,a,o,u){var l=h(t[i],t,a);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==Qt(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,u)}),(function(t){n("throw",t,o,u)})):e.resolve(c).then((function(t){s.value=t,o(s)}),(function(t){return n("throw",t,o,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function x(e,n,r){var i=f;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var l=M(u,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var s=h(e,n,r);if("normal"===s.type){if(i=r.done?y:d,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=y,r.method="throw",r.arg=s.arg)}}}function M(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(Qt(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},C(E.prototype),s(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(S),s(S,l,"Generator"),s(S,o,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Kt(t){return function(t){if(Array.isArray(t))return te(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return te(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ee(t,e,n,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,i)}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,re(r.key),r)}}function re(t){var e=function(t){if("object"!=Qt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qt(e)?e:e+""}var ie=function(){return function(t,e){return e&&ne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastLink=document.URL,this.pageCache={}}),[{key:"openPage",value:(t=Jt().mark((function t(e){return Jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pe.stop();case 2:Pe.reset(),this.pageCache[e]?(Pe.tRoot=this.pageCache[e].tRoot,Pe.tRoot.$dom.innerHTML(this.pageCache[e].html),l.initDoms(this.pageCache[e].visibleList),this.onPageClose(this.pageCache[e].visibleList),Pe.manager.lists.visible=Kt(this.pageCache[e].visibleList),this.lastLink=e,Pe.start()):(Pe.tRoot.$dom.innerHTML(""),Pe.tRoot=Pe.tRootFactory(),this.lastLink=e,Pe.start());case 4:case"end":return t.stop()}}),t,this)})),e=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){ee(a,r,i,o,u,"next",t)}function u(t){ee(a,r,i,o,u,"throw",t)}o(void 0)}))},function(t){return e.apply(this,arguments)})},{key:"openLinkFromHistory",value:function(t){t.link?this.openPage(t.link):t.browserUrl&&(history.replaceState({link:t.browserUrl},"",t.browserUrl),this.openPage(t.browserUrl)),Ye().schedule(0,"pagemanager-openLinkFromHistory")}},{key:"onPageClose",value:function(t){t.forEach((function(t){var e=[].concat(t.targets.onPageClose,t.targets.onResize);Ue().activateTargets(t,e)}))}},{key:"openLink",value:function(t){t=l.getFullLink(t),this.lastLink&&(this.onPageClose(Pe.manager.lists.visible),this.pageCache[this.lastLink]={link:this.lastLink,html:Pe.tRoot.$dom.innerHTML(),visibleList:Kt(Pe.manager.lists.visible),tRoot:Pe.tRoot}),history.pushState({link:t},"",t),this.openPage(t),Ye().schedule(0,"pagemanager-processOpenLink")}},{key:"updateBrowserUrl",value:function(t){window.history.state.browserUrl?history.replaceState({browserUrl:t},"",t):(this.pageCache[document.URL]={link:document.URL,htms:Pe.tRoot.$dom.innerHTML(),visibleList:Kt(Pe.manager.lists.visible),tRoot:Pe.tRoot},history.pushState({browserUrl:t},"",t)),Ye().schedule(0,"pagemanager-processUpdateBrowserUrl")}},{key:"back",value:function(){return history.back()}}]);var t,e}();function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(n),!0).forEach((function(e){le(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function le(t,e,n){return(e=ve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function se(t){return function(t){if(Array.isArray(t))return fe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||he(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=he(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function he(t,e){if(t){if("string"==typeof t)return fe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(t,e):void 0}}function fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ve(r.key),r)}}function ve(t){var e=function(t){if("object"!=ae(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ae(e)?e:e+""}var ye=function(){return function(t,e){return e&&de(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}),[{key:"init",value:function(){this.lists={visible:[],rerender:[],restyle:[],reattach:[],invisibleDom:[],visibleNoDom:[],updatingTModels:[],updatingTargets:[],activeTargets:[]},this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={},this.doneTargets=[]}},{key:"clear",value:function(){this.lists.visible.length=0,this.lists.rerender.length=0,this.lists.restyle.length=0,this.lists.reattach.length=0,this.lists.visibleNoDom.length=0,this.lists.updatingTModels.length=0,this.lists.updatingTargets.length=0,this.lists.activeTargets.length=0,this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={}}},{key:"analyze",value:function(){var t,e=l.list2map(this.lists.visible);this.clear();var n,r=ce(Ue().hasLocationList);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.isVisible()){e[i.oid]=null,!i.hasDom()||i.canHaveDom()||this.lists.invisibleDom.includes(i)||this.lists.invisibleDom.push(i),this.lists.visible.push(i),this.needsRerender(i),this.needsRestyle(i),this.needsReattach(i),i.updatingTargetList.length>0&&(this.lists.updatingTModels.push(i),this.lists.updatingTargets=[].concat(se(this.lists.updatingTargets),se(i.updatingTargetList)));var a=Object.keys(i.activeTargetMap);a.length>0&&(this.lists.activeTargets=[].concat(se(this.lists.activeTargets),["'".concat(i.oid,"'")],a)),Object.keys(i.targetMethodMap).length>0&&(this.targetMethodMap[i.oid]=ue({},i.targetMethodMap)),this.visibleOidMap[i.oid]=i,this.visibleTypeMap[i.type]||(this.visibleTypeMap[i.type]=[]),this.visibleTypeMap[i.type].push(i),i.canHaveDom()&&!i.hasDom()&&i.getDomHolder()&&i.getDomHolder().exists()&&!this.lists.visibleNoDom.includes(i)&&this.lists.visibleNoDom.push(i)}}}catch(t){r.e(t)}finally{r.f()}var o=Object.values(e).filter((function(t){return null!==t&&t.hasDom()&&t.isDomDeletable()}));(t=this.lists.invisibleDom).push.apply(t,se(o))}},{key:"needsRerender",value:function(t){return!(!t.hasDom()||!l.isDefined(t.getHtml())||t.$dom.html()===t.getHtml()&&t.$dom.textOnly===t.isTextOnly()||(this.lists.rerender.push(t),0))}},{key:"needsRestyle",value:function(t){return!!(t.hasDom()&&t.styleTargetList.length>0)&&(this.lists.restyle.push(t),t.domHeight=void 0,t.domWidth=void 0,!0)}},{key:"needsReattach",value:function(t){return!(!t.hasDom()||!t.hasDomHolderChanged()&&!t.hasDomChanged()||(this.lists.reattach.push(t),0))}},{key:"renderTModels",value:function(){var t,e=ce(this.lists.rerender);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isTextOnly()?n.$dom.text(n.getHtml()):n.$dom.html(n.getHtml()),n.setActualValueLastUpdate("html"),n.domHeight=void 0,n.domWidth=void 0}}catch(t){e.e(t)}finally{e.f()}}},{key:"reattachTModels",value:function(){var t,e=ce(this.lists.reattach);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.$dom.detach(),n.hasDomChanged()&&(W.createDom(n),this.fixStyle(n)),n.getDomHolder().appendTModel$Dom(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"deleteDoms",value:function(){var t,e=ce(this.lists.invisibleDom);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.styleMap={},n.transformMap={},n.$dom.detach(),n.$dom=null}}catch(t){e.e(t)}finally{e.f()}this.lists.invisibleDom.length=0,Ye().schedule(0,"deleteDoms")}},{key:"fixStyles",value:function(){var t,e=ce(this.lists.restyle);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.fixStyle(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"fixStyle",value:function(t){var e=!1;t.styleTargetList.forEach((function(n){if("x"===n){var r=t.absX-t.getDomParent().absX;t.transformMap.x!==r&&(t.transformMap[n]=r,e=!0)}else if("y"===n){var i=t.absY-t.getDomParent().absY;t.transformMap.y!==i&&(t.transformMap[n]=i,e=!0)}else if(M.transformMap[n]){var a=M.rotate3D[n]?t.val(n):M.scaleMap[n]?l.formatNum(t.val(n),2):t.floorVal(n);t.transformMap[n]!==a&&(t.transformMap[n]=a,e=!0)}else if("width"===n){var o=Math.floor(t.getWidth());t.$dom.width()!==o&&(t.styleMap.width=o,t.$dom.width(o))}else if("height"===n){var u=Math.floor(t.getHeight());t.$dom.height()!==u&&(t.styleMap.height=u,t.$dom.height(u))}else if("style"===n){var s=t.getStyle();l.isDefined(s)&&t.styleMap.style!==s&&(t.$dom.setStyleByMap(t.getStyle()),t.styleMap.style=s)}else if("attributes"===n){var c=t.getAttributes();l.isDefined(c)&&t.styleMap.attributes!==c&&(Object.keys(c).forEach((function(e){t.$dom.attr(e,c[e])})),t.styleMap.attributes=c)}else if("css"===n){var h=t.getCss();t.$dom.css()!==h&&t.$dom.css(h)}else M.styleWithUnitMap[n]?l.isDefined(t.val(n))&&t.styleMap[n]!==t.val(n)&&(t.$dom.style(n,l.isNumber(t.val(n))?"".concat(t.val(n),"px"):t.val(n)),t.styleMap[n]=t.val(n)):M.attributeTargetMap[n]?t.$dom.attr(n,t.val(n)):l.isDefined(t.val(n))&&t.styleMap[n]!==t.val(n)&&(t.$dom.style(n,t.val(n)),t.styleMap[n]=t.val(n))})),e&&t.$dom.transform(W.getTransformString(t)),t.styleTargetMap={},t.styleTargetList.length=0}},{key:"completeDoneTModels",value:function(){this.doneTargets.forEach((function(t){var e=t.tmodel,n=t.key;e.isTargetDone(n)&&(e.setTargetComplete(n),e.removeFromActiveTargets(e),e.removeFromUpdatingTargets(e))}))}},{key:"createDoms",value:function(){var t=this,e=[],n=[];this.lists.visibleNoDom.sort((function(t,e){return t.hasChildren()&&e.hasChildren()?t.getUIDepth()<e.getUIDepth()?-1:1:t.hasChildren()?-1:1}));var r,i=ce(this.lists.visibleNoDom);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=void 0;f.query("#".concat(a.oid))?(o=new f("#".concat(a.oid)),a.$dom=o):n.push(a)}}catch(t){i.e(t)}finally{i.f()}for(var u=function(){var n=s[l];n.$dom=new f,W.createDom(n),t.fixStyle(n);var r=e.find((function(t){return t.domHolder===n.getDomHolder()}));r?r.tmodels.push(n):e.push({domHolder:n.getDomHolder(),tmodels:[n]})},l=0,s=n;l<s.length;l++)u();e.map((function(t){t.tmodels.map((function(e){t.domHolder.appendTModel$Dom(e)}))})),e.length&&Ye().schedule(1,"createDom")}}])}(),ge=["timeoutId"];function pe(t){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pe(t)}function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function be(t,e,n){return(e=Se(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function we(){we=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),u=new P(r||[]);return i(o,"_invoke",{value:x(t,n,u)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",v="executing",y="completed",g={};function p(){}function m(){}function b(){}var w={};s(w,o,(function(){return this}));var T=Object.getPrototypeOf,k=T&&T(T(L([])));k&&k!==n&&r.call(k,o)&&(w=k);var S=b.prototype=p.prototype=Object.create(w);function C(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,a,o,u){var l=h(t[i],t,a);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==pe(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,u)}),(function(t){n("throw",t,o,u)})):e.resolve(c).then((function(t){s.value=t,o(s)}),(function(t){return n("throw",t,o,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function x(e,n,r){var i=f;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var l=M(u,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var s=h(e,n,r);if("normal"===s.type){if(i=r.done?y:d,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=y,r.method="throw",r.arg=s.arg)}}}function M(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(pe(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},C(E.prototype),s(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(S),s(S,l,"Generator"),s(S,o,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Te(t,e,n,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,i)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Se(r.key),r)}}function Se(t){var e=function(t){if("object"!=pe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pe(e)?e:e+""}var Ce=function(){return function(t,e){return e&&ke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nextRuns=[],this.runningStep=0,this.runningFlag=!1,this.runId="",this.rerunId="",this.delayProcess={},this.resetting=!1,this.cycleStats={duration:0,count:0,totalDuration:0,average:0}}),[{key:"waitForFrame",value:function(){return new Promise((function(t){return requestAnimationFrame(t)}))}},{key:"resetRuns",value:(t=we().mark((function t(){return we().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.resetting=!0,t.next=3,this.waitForFrame();case 3:this.delayProcess.timeoutId&&clearTimeout(this.delayProcess.timeoutId),this.nextRuns=[],this.runningStep=0,this.runningFlag=!1,this.runId="",this.rerunId="",this.delayProcess={},this.resetting=!1;case 11:case"end":return t.stop()}}),t,this)})),e=function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Te(a,r,i,o,u,"next",t)}function u(t){Te(a,r,i,o,u,"throw",t)}o(void 0)}))},function(){return e.apply(this,arguments)})},{key:"resetCycleStats",value:function(){this.cycleStats.duration=0,this.cycleStats.count=0,this.cycleStats.totalDuration=0,this.cycleStats.average=0}},{key:"schedule",value:function(t,e){var n=this;if(Pe.isRunning()&&!this.resetting)if(0===t&&0===Pe.throttle)this.run(t,e);else{var r=this.delayRun((function(){n.run(t,e)}),0===Pe.throttle?t||0:Pe.throttle,e),i=this.nextRuns.length>0?this.nextRuns[this.nextRuns.length-1]:null,a=this.nextRuns.length>0?this.nextRuns[0]:null;r&&(!i||r.delay>i.delay)?this.nextRuns.push(r):r&&a&&r.delay<a.delay&&this.nextRuns.unshift(r)}}},{key:"run",value:function(t,e){var n=this;Pe.isRunning()&&!this.resetting&&(this.runningFlag?this.rerunId=e:(this.runId=e,this.runningFlag=!0,window.requestAnimationFrame((function(){for(var r=l.now();n.runningStep<7&&Pe.isRunning()&&!(l.now()-r>=25);){switch(n.runningStep){case 0:Re().captureEvents(),Pe.manager.doneTargets.length>0&&(Pe.manager.completeDoneTModels(),Pe.manager.doneTargets.length=0),Pe.locationManager.calculateTargets(Pe.tRoot),Pe.locationManager.calculateAll(),Pe.events.resetEventsOnTimeout();break;case 1:Pe.manager.analyze();break;case 2:Pe.manager.createDoms();break;case 3:Pe.manager.reattachTModels();break;case 4:Pe.manager.renderTModels();break;case 5:Pe.manager.fixStyles();break;case 6:Pe.manager.lists.invisibleDom.length>0&&Pe.manager.deleteDoms()}n.runningStep++}var i=l.now()-r;if(0===n.runningStep?n.cycleStats.duration=i:n.cycleStats.duration+=i,1===Pe.debugLevel&&(l.log(n.cycleStats.duration>10)("it took: ".concat(n.cycleStats.duration,", RunId: ").concat(e)),l.log(n.cycleStats.duration>10)("locations: ".concat(Pe.locationManager.locationListStats))),2===Pe.debugLevel&&l.log(!0)("request from: ".concat(e," delay:  ").concat(t)),n.runningFlag=!1,n.runId="",!n.resetting)if(n.runningStep<7)n.run(0,"rendering: ".concat(e," ").concat(n.runningStep));else if(n.cycleStats.count++,n.cycleStats.totalDuration+=n.cycleStats.duration,n.cycleStats.average=n.cycleStats.totalDuration/n.cycleStats.count,n.rerunId){n.runningStep=0;var a=n.rerunId;n.rerunId="",n.run(0,a)}else n.runningStep=0,n.getNextRun()}))))}},{key:"setDelayProcess",value:function(t,e,n,r){var i=this;this.delayProcess={runId:e,timeStamp:n,delay:r,timeoutId:setTimeout((function(){t(),i.delayProcess={}}),r)}}},{key:"delayRun",value:function(t,e,n){var r,i=l.now()+e;if(this.delayProcess.timeoutId)if(i>=this.delayProcess.timeStamp)r={timeStamp:i,runId:n,delay:e};else{var a=this.delayProcess,o=(a.timeoutId,function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(a,ge));r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(Object(n),!0).forEach((function(e){be(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},o),clearTimeout(this.delayProcess.timeoutId),this.setDelayProcess(t,n,i,e)}else this.setDelayProcess(t,n,i,e);return r}},{key:"getNextRun",value:function(){if(this.nextRuns.length>0){var t=this.nextRuns.pop();t&&(t.timeStamp>=l.now()?this.schedule(t.timeStamp-l.now(),t.runId):this.getNextRun())}}}]);var t,e}();function Ee(t){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ee(t)}function xe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Me(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,De(r.key),r)}}function De(t){var e=function(t){if("object"!=Ee(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ee(e)?e:e+""}var Pe,Le=function(){return function(t,e){return e&&Oe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"applyTargetValues",value:function(t){t.targetMethodMap={};var e,n=xe(t.activeTargetList.slice(0));try{for(n.s();!(e=n.n()).done;){var r=e.value;t.isTargetImperative(r)||this.applyTargetValue(t,r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"applyTargetValue",value:function(t,e){var n=t.targets[e];if(l.isDefined(n)){if("function"==typeof n.enabledOn&&t.setTargetMethodName(e,"enabledOn"),t.isTargetEnabled(e)&&(!t.isExecuted(e)||!t.hasUpdatingTargets(e))){if(t.isExecuted(e)&&t.getTargetStep(e)===t.getTargetSteps(e)){var r=M.scheduleExecution(t,e);if(r>0)return void Ye().schedule(r,"actualInterval__".concat(t.oid,"__").concat(e))}t.resetScheduleTimeStamp(e),t.isExecuted(e)&&t.getTargetCycles(e)>0&&(t.getTargetCycle(e)<t.getTargetCycles(e)?t.incrementTargetCycle(e,t.getTargetCycle(e)):t.resetTargetCycle(e),t.resetTargetStep(e),t.resetTargetInitialValue(e)),F.executeDeclarativeTarget(t,e),t.setScheduleTimeStamp(e,l.now()),t.shouldScheduleRun(e)&&Ye().schedule(t.getTargetInterval(e),"actualInterval__".concat(t.oid,"__").concat(e))}}else t.removeFromActiveTargets(e)}},{key:"setActualValues",value:function(t){var e,n=0,r=xe(t.updatingTargetList.slice(0));try{for(r.s();!(e=r.n()).done;){var i=e.value;0===(n=M.scheduleExecution(t,i))?(t.addToStyleTargetList(i),this.setActualValue(t,i)):Ye().schedule(n,"setActualValues-".concat(t.oid,"__").concat(i))}}catch(t){r.e(t)}finally{r.f()}}},{key:"findOriginalTModel",value:function(t,e){return at.findParentByTarget(t,e)||ze().find((function(t){return t.targets[e]}))}},{key:"setActualValue",value:function(t,e){var n=t.targetValues[e];if(n)if(t.isTargetImperative(e)||t.isTargetEnabled(e)){var r,i,a,o=t.getTargetValue(e),u=t.getTargetStep(e),s=t.getTargetSteps(e),c=t.getTargetCycle(e),h=t.getTargetInterval(e)||0,f=t.actualValues[e],d=u,v=c,y=t.getTargetInitialValue(e),g=l.capitalizeFirstLetter(e);if(u<=s&&(l.isDefined(y)||(y=l.isDefined(t.actualValues[e])?t.actualValues[e]:"number"==typeof o?0:void 0,t.setTargetInitialValue(e,y)),t.actualValues[e]=M.morph(t,e,y,o,u,s),t.setActualValueLastUpdate(e),t.isTargetImperative(e)?(r=n.originalTargetName,a=t,(i=t.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(t,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i["on".concat(g,"Step")]?(i["on".concat(g,"Step")].call(a,a.actualValues[e],o,u,s),a.setTargetMethodName(r,["on".concat(g,"Step")])):i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,e,a.actualValues[e],o,u,s),a.setTargetMethodName(r,"onImperativeStep"))):M.handleValueChange(t,e,t.actualValues[e],f,d,v),t.incrementTargetStep(e),t.resetScheduleTimeStamp(e),t.updateTargetStatus(e),t.getTargetStep(e)<s))Ye().schedule(h,"".concat(t.oid,"---").concat(e,"-").concat(u,"/").concat(s,"-").concat(c,"-").concat(h));else{t.actualValues[e]=o,t.setActualValueLastUpdate(e),u=t.getTargetStep(e);var p=0;n.valueList&&c<n.valueList.length-1?(t.incrementTargetCycle(e,t.getTargetCycle(e)),c=t.getTargetCycle(e),t.resetTargetStep(e),n.initialValue=n.value,n.value=n.valueList[c],n.steps=n.stepList[(c-1)%n.stepList.length],n.interval=n.intervalList[(c-1)%n.intervalList.length],n.easing=n.easingList[(c-1)%n.easingList.length],p=h):t.isTargetImperative(e)?(r=n.originalTargetName,a=t,(i=t.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(t,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i["on".concat(g,"Step")]?(i["on".concat(g,"Step")].call(a,a.actualValues[e],o,u,s),a.setTargetMethodName(r,["on".concat(g,"Step")])):i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,e,a.actualValues[e],o,u,s),a.setTargetMethodName(r,"onImperativeStep")),i&&"function"==typeof i["on".concat(g,"End")]?(i["on".concat(g,"End")].call(a,a.actualValues[e],o,u,s),a.setTargetMethodName(r,["on".concat(g,"End")])):i&&"function"==typeof i.onImperativeEnd&&(i.onImperativeEnd.call(a,e,a.actualValues[e]),a.setTargetMethodName(r,"onImperativeEnd"))):(!n.valueList&&t.getTargetCycle(e)<t.getTargetCycles(e)&&(t.incrementTargetCycle(e,t.getTargetCycle(e)),t.resetTargetStep(e).resetTargetInitialValue(e).resetTargetExecutionFlag(e),F.executeDeclarativeTarget(t,e)),"object"===Ee(t.targets[e])&&"function"==typeof t.targets[e].onStepsEnd&&(t.targets[e].onStepsEnd.call(t,c),t.setTargetMethodName(e,"onStepsEnd"))),t.updateTargetStatus(e),Ye().schedule(p,"".concat(t.oid,"---").concat(e,"-").concat(u,"/").concat(s,"-").concat(c,"-").concat(h))}}else Ye().schedule(10,"setActualValue-disabled-".concat(t.oid,"__").concat(e))}}])}();function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function je(){je=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),u=new P(r||[]);return i(o,"_invoke",{value:x(t,n,u)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",v="executing",y="completed",g={};function p(){}function m(){}function b(){}var w={};s(w,o,(function(){return this}));var T=Object.getPrototypeOf,k=T&&T(T(L([])));k&&k!==n&&r.call(k,o)&&(w=k);var S=b.prototype=p.prototype=Object.create(w);function C(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,a,o,u){var l=h(t[i],t,a);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==Ve(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,u)}),(function(t){n("throw",t,o,u)})):e.resolve(c).then((function(t){s.value=t,o(s)}),(function(t){return n("throw",t,o,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return a=a?a.then(i,i):i()}})}function x(e,n,r){var i=f;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var l=M(u,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var s=h(e,n,r);if("normal"===s.type){if(i=r.done?y:d,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=y,r.method="throw",r.arg=s.arg)}}}function M(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(Ve(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},C(E.prototype),s(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(S),s(S,l,"Generator"),s(S,o,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function He(t,e,n,r,i,a,o){try{var u=t[a](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,i)}function Ie(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){He(a,r,i,o,u,"next",t)}function u(t){He(a,r,i,o,u,"throw",t)}o(void 0)}))}}var Ae=function(t){var e,n;e=t,n={throttle:0,debugLevel:0,runningFlag:!1,init:function(){return n.browser=new bt,n.browser.setup(),n.$document=new f(document),n.$window=new f(window),n.$window.addEvent("popstate",(function(t){t.state&&Pe.pager.openLinkFromHistory(t.state)})),n.loader=new Pt,n.pager=new ie,n.events=new St,n.locationManager=new Gt,n.targetManager=new Le,n.manager=new ye,n.runScheduler=new Ce,n.tRootFactory=function(){var t=new yt("tRoot",{start:function(){f.query("#tj-root")?this.$dom=new f("#tj-root"):(this.$dom=new f,this.$dom.create("div"),this.$dom.setSelector("#tj-root"),this.$dom.setId("#tj-root"),this.$dom.attr("tabindex","0"),new f("body").insertFirst$Dom(this.$dom))},domHolder:function(){return this.$dom},width:function(){return document.documentElement.clientWidth||document.body.clientWidth},height:function(){return document.documentElement.clientHeight||document.body.clientHeight},onResize:["width","height"]});return t.oids={},n.tRoot&&n.tRoot.getChildren().forEach((function(e){var n=new yt(e.type,e.targets);t.addChild(n)})),t},n.tRoot=n.tRootFactory(),e&&n.tRoot.addChild(e),window.history.pushState({link:document.URL},"",document.URL),n}},n.start=Ie(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.runningFlag=!1,n.events.clearAll(),n.events.removeHandlers(n.$document),n.events.addHandlers(n.$document),n.events.removeWindowHandlers(),n.events.addWindowHandlers(),t.next=8,n.runScheduler.resetRuns();case 8:return n.runningFlag=!0,n.runScheduler.schedule(0,"appStart"),t.abrupt("return",n);case 11:case"end":return t.stop()}}),t)}))),n.stop=Ie(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.runningFlag=!1,n.events.removeWindowHandlers(),n.events.removeHandlers(n.$document),n.events.clearAll(),t.next=6,n.runScheduler.resetRuns();case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)}))),n.reset=function(){n.manager.lists.visible.forEach((function(t){t.transformMap={},t.styleMap={},t.allStyleTargetList.forEach((function(e){l.isDefined(t.val(e))&&t.addToStyleTargetList(e)}))})),n.manager.clear(),n.locationManager.hasLocationList.length=0,n.locationManager.screenWidth=0,n.locationManager.screenHeight=0,at.foundParentWithTarget={},at.foundTypeMap={},at.foundTargetMap={}},n.isRunning=function(){return n.runningFlag},n.find=function(t){return at.find(t)},(Pe=n).init().start()};Ae.oids={},Ae.getOid=function(t){var e,n="Bracket"===t?Ae.oids:(null==Ae||null===(e=Ae.tRoot)||void 0===e?void 0:e.oids)||Ae.oids;l.isDefined(n[t])||(n[t]=0);var r=n[t]++;return{oid:r>0?"".concat(t).concat(r):t,num:r}};var Ne=function(){return!!Pe&&Pe.runningFlag},Fe=function(){var t;return null===(t=Pe)||void 0===t?void 0:t.tRoot},Re=function(){var t;return null===(t=Pe)||void 0===t?void 0:t.events},Be=function(){var t;return null===(t=Pe)||void 0===t?void 0:t.pager},Xe=function(){var t;return null===(t=Pe)||void 0===t?void 0:t.loader},We=function(){var t;return null===(t=Pe)||void 0===t?void 0:t.manager},Ye=function(){var t;return null===(t=Pe)||void 0===t?void 0:t.runScheduler},Ue=function(){var t;return null===(t=Pe)||void 0===t?void 0:t.locationManager},$e=function(){var t;return null===(t=Pe)||void 0===t?void 0:t.browser},_e=function(){var t,e;return null!==(t=null===(e=Pe)||void 0===e||null===(e=e.tRoot)||void 0===e?void 0:e.getWidth())&&void 0!==t?t:0},qe=function(){var t,e;return null!==(t=null===(e=Pe)||void 0===e||null===(e=e.tRoot)||void 0===e?void 0:e.getHeight())&&void 0!==t?t:0},ze=function(){var t;return null===(t=Pe)||void 0===t||null===(t=t.manager)||void 0===t?void 0:t.lists.visible};function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function Ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qe(r.key),r)}}function Qe(t){var e=function(t){if("object"!=Ze(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ze(e)?e:e+""}window.t=window.t||at.find;var Je=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&Ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"bounce",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.yStart,i=void 0===r?void 0:r,a=n.xStart,o=void 0===a?_e()/2:a,u=n.widthStart,s=void 0===u?50:u,c=n.heightStart,h=void 0===c?50:c,f=n.bFactor,d=void 0===f?.6:f,v=n.cFactor,y=void 0===v?.2:v,g=n.rotationStart,p=void 0===g?0:g,m=n.rIncrement,b=void 0===m?360:m,w=Math.max(10,(e-t)*d),T=l.isDefined(i)?[i,t]:[t],k=[o],S=[s],C=[h],E=[p];Math.abs(0|w)>1;){T.push(e),T.push(e-w);var x=s*(1+y),M=h*(1-y);S.push(x),S.push(s),C.push(M),C.push(h),k.push(o-(x-s)/2),k.push(o),E.push(E[E.length-1]+b),w*=d,b*=.8,y*=d}k.push(o),T.push(e),S.push(s),C.push(h);var O=E[E.length-1]%360;return O>0&&O<360&&E.push(360),{x:{list:k},y:{list:T},width:{list:S},height:{list:C},rotate:{list:E}}}},{key:"bounceSimple",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.from,i=void 0===r?void 0:r,a=n.to,o=void 0===a?void 0:a,u=n.widthStart,s=void 0===u?void 0:u,c=n.heightStart,h=void 0===c?void 0:c,f=n.xStart,d=void 0===f?void 0:f,v=n.yStart,y=void 0===v?void 0:v,g=n.bFactor,p=void 0===g?.7:g,m=n.cFactor,b=void 0===m?.2:m;return i=l.isDefined(i)?i:e.getY(),o=l.isDefined(o)?o:e.getY(),s=l.isDefined(s)?s:e.getWidth(),h=l.isDefined(h)?h:e.getHeight(),y=l.isDefined(y)?y:e.getY(),d=l.isDefined(d)?d:e.getX(),t.bounce(i,o,{yStart:y,xStart:d,widthStart:s,heightStart:h,bFactor:p,cFactor:b,rIncrement:0})}},{key:"shake",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bFactor,i=void 0===r?.6:r,a=n.cFactor,o=void 0===a?.3:a,u=n.strength,l=void 0===u?20:u;if(!t.shakeMap[e.oid]){var s=(e.getParentValue("width")-e.getWidth())/2,c=e.getY(),h=e.getWidth(),f=e.getHeight();t.shakeMap[e.oid]={xStart:s,yStart:c,widthStart:h,heightStart:f}}var d=t.shakeMap[e.oid],v=d.xStart,y=d.yStart,g=d.widthStart,p=d.heightStart,m=t.bounce(y-l,y,{xStart:v,widthStart:g,heightStart:p,bFactor:i,cFactor:o});return{y:{list:m.height.list.map((function(t){return y-(t-p)/2}))},x:m.x,width:m.width,height:m.height}}},{key:"spiral",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startAngle,n=void 0===e?0:e,r=t.endAngle,i=void 0===r?360:r,a=t.angleStep,o=void 0===a?18:a,u=t.x,l=void 0===u?0:u,s=t.y,c=void 0===s?0:s,h=t.width,f=void 0===h?100:h,d=t.height,v=void 0===d?100:d,y=[],g=[],p=[],m=n;m<=i;m+=o){var b=m*(Math.PI/180);y.push(Math.floor(l+f*Math.cos(b))),g.push(Math.floor(c+v*Math.sin(b))),p.push(90+m)}return{x:{list:y},y:{list:g},rotate:{list:p}}}}])}();!function(t,e,n){(e=Qe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Je,"shakeMap",{}),window.TargetJ=e}();