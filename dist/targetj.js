!function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function o(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}t.r(e),t.d(e,{$Dom:function(){return b},App:function(){return Ee},Bracket:function(){return Ft},BracketGenerator:function(){return Yt},ColorUtil:function(){return D},Easing:function(){return N},Moves:function(){return Be},SearchUtil:function(){return u},TModel:function(){return gt},TModelUtil:function(){return Z},TUtil:function(){return v},TargetUtil:function(){return H},getBrowser:function(){return Ae},getEvents:function(){return Le},getLoader:function(){return Ve},getLocationManager:function(){return He},getManager:function(){return Pe},getPager:function(){return Oe},getRunScheduler:function(){return je},getScreenHeight:function(){return Fe},getScreenWidth:function(){return Ie},getVisibles:function(){return Ne},isRunning:function(){return De},tApp:function(){return Ce},tRoot:function(){return xe}});var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"findFirstPinchHandler",value:function(e){return t.findEventHandler(e,"pinch")}},{key:"findFirstScrollTopHandler",value:function(e){return t.findEventHandler(e,"scrollTop")}},{key:"findFirstScrollLeftHandler",value:function(e){return t.findEventHandler(e,"scrollLeft")}},{key:"findFirstTouchHandler",value:function(e){return t.findEventHandler(e,"touch")}},{key:"findEventHandler",value:function(t,e){for(;t;){if(t.canHandleEvents(e))return t;t=t.getParent()}}},{key:"findParentByType",value:function(e,n){var r="".concat(e.oid,"__").concat(n);if(!v.isDefined(t.foundParentWithType[r]))for(var i=e.getParent();i;){if(i.type===n){t.foundParentWithType[r]=i;break}i=i.getParent()}return t.foundParentWithType[r]}},{key:"findParentByTarget",value:function(e,n){var r="".concat(e.oid,"__").concat(n);if(!v.isDefined(t.foundParentWithTarget[r]))for(var i=e.getParent();i;){if(v.isDefined(i.targets[n])||v.isDefined(i.targetValues[n])){t.foundParentWithTarget[r]=i;break}i=i.getParent()}return t.foundParentWithTarget[r]}},{key:"findByType",value:function(e){if(!v.isDefined(t.foundTypeMap[e])){var n=function(t){if(t.type===e)return t;var i,a=r(t.getChildren());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o&&o.hasChildren()){var s=n(o);if(s)return s}else if(o&&o.type===e)return o}}catch(t){a.e(t)}finally{a.f()}},i=n(Ce.tRoot);i&&(t.foundTypeMap[e]=i)}return t.foundTypeMap[e]}},{key:"findByTarget",value:function(e){if(!v.isDefined(t.foundTargetMap[e])){var n=function(t){if(t.targets[e])return t;var i,a=r(t.getChildren());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o&&o.hasChildren()){var s=n(o);if(s)return s}else if(o&&o.targets[e])return o}}catch(t){a.e(t)}finally{a.f()}},i=n(Ce.tRoot);i&&(t.foundTargetMap[e]=i)}return t.foundTargetMap[e]}},{key:"find",value:function(e){if(!v.isDefined(t.foundOids[e])){var n=function(t){if(t.oid===e)return t;var i,a=r(t.getChildren());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o&&o.hasChildren()){var s=n(o);if(s)return s}else if(o&&o.oid===e)return o}}catch(t){a.e(t)}finally{a.f()}},i=n(Ce.tRoot);i&&(t.foundOids[e]=i)}return t.foundOids[e]}}],null&&a(e.prototype,null),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=h(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function g(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}o(u,"foundParentWithType",{}),o(u,"foundParentWithTarget",{}),o(u,"foundTypeMap",{}),o(u,"foundTargetMap",{}),o(u,"foundOids",{});var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"getBoundingRect",value:function(t){var e,n,r,i,a;if(t.actualValues.domHolder&&t.actualValues.domHolder.exists())if(t.getParent()===xe())e=t.getX(),n=t.getY(),r=e+t.getWidth(),i=n+t.getHeight(),a=t.oid;else{var o=t.actualValues.domHolder.getBoundingClientRect();e=o.left,n=o.top,r=o.right,i=o.bottom,a=t.actualValues.domHolder.attr("id")}else{var s=t.getDomParent()?t.getDomParent():u.findParentByTarget(t,"domHolder");s?(e=s.absX,n=s.absY,r=e+s.getWidth(),i=n+s.getHeight(),a=s.oid):(e=0,n=0,r=Ie(),i=Fe(),a="screen")}return{left:e,top:n,right:r,bottom:i,oid:a}}},{key:"initDoms",value:function(e){var n=b.findByClass("tgt");e.forEach((function(t){t.$dom=null}));var r,i=t.list2map(e.filter((function(t){return"BI"!==t.type}))),a=c(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.getAttribute("id"),u=i[s];u&&!u.hasDom()?u.$dom=new b("#".concat(s)):b.detach(o)}}catch(t){a.e(t)}finally{a.f()}}},{key:"list2map",value:function(e,n){return e.reduce((function(e,r){return e[r.oid]=t.isDefined(n)?n:r,e}),{})}},{key:"getDeepList",value:function(t){var e=[];return function t(n){if(n&&n.hasChildren()){var r=n.getChildren();e.push.apply(e,function(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r)),r.forEach(t)}}(t),e}},{key:"areEqual",value:function(t,e,n){return n?JSON.stringify(t)===JSON.stringify(e):t===e}},{key:"momentum",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e-t,i=Math.abs(r)/n,a=Math.floor(5e3*i),o=5*a,s=r>0?r+o:r-o;return{distance:Math.round(s)/50,duration:a,momentumDistance:n,time:5*n}}},{key:"isDefined",value:function(t){return null!=t}},{key:"isNumber",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"limit",value:function(e,n,r){return(e=(e=t.isDefined(e)?e:n)>r?r:e)<n?n:e}},{key:"formatNum",value:function(t,e){return t?parseFloat(t.toString()).toFixed(e):0}},{key:"now",value:function(){return Date.now()}},{key:"log",value:function(t){return!0===t?console.log:function(){}}},{key:"distance",value:function(t,e,n,r){return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2))}},{key:"getFullLink",value:function(e){if(t.isDefined(e)){if(e.startsWith("http"))return e;var n=window.location.protocol;n+=n.endsWith(":")?"//":"://";var r="".concat(n).concat(window.location.hostname);return e.startsWith("/")?r+e:"".concat(r,"/").concat(e)}}},{key:"logTree",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=c(He().getChildren(n));try{for(i.s();!(e=i.n()).done;){var a=e.value,o=a.isVisible()?r+"|  ":r+"x  ";"BI"===a.type?console.log("".concat(o).concat(a.oid," v:").concat(a.isVisible()," x:").concat(Math.floor(a.getX())," y:").concat(Math.floor(a.getY())," w:").concat(Math.floor(a.getWidth())," h:").concat(Math.floor(a.getHeight())," ind:").concat(a.startIndex,"-").concat(a.endIndex)):console.log("".concat(o).concat(a.oid," v:").concat(a.isVisible()," x:").concat(Math.floor(a.getX())," y:").concat(Math.floor(a.getY())," w:").concat(Math.floor(a.getWidth())," h:").concat(Math.floor(a.getHeight())," hc:").concat(Math.floor(a.getContentHeight()))),a.hasChildren()&&t.logTree(a,o)}}catch(t){i.e(t)}finally{i.f()}}}],null&&d(e.prototype,null),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t){if("object"!=y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e?(this.selector=e,this.element=t.query(e)):e&&(this.element=e),this.childrenCount=0,this.$domParent=void 0,this.originalContent=void 0,this.textOnly=!0}return e=t,n=[{key:"exists",value:function(){return this.selector&&(this.element=t.query(this.selector)),!!this.element}},{key:"create",value:function(t){this.element=document.createElement(t)}},{key:"setSelector",value:function(t){this.selector=t}},{key:"setId",value:function(t){this.attr("id","#"===t[0]?t.slice(1):t)}},{key:"focus",value:function(){this.element.focus()}},{key:"blur",value:function(){this.element.blur()}},{key:"attr",value:function(t,e){if(this.element)return v.isDefined(e)?void this.element.setAttribute(t,e):this.element.getAttribute(t)}},{key:"value",value:function(t){if(this.element)return v.isDefined(t)?void(this.element.value=t):this.element.value}},{key:"select",value:function(){this.element&&"function"==typeof this.element.select&&this.element.select()}},{key:"width",value:function(t){if(!v.isDefined(t))return this.element.offsetWidth;this.element.style.width=v.isNumber(t)?"".concat(t,"px"):t}},{key:"height",value:function(t){if(!v.isDefined(t))return this.element.offsetHeight;this.element.style.height=v.isNumber(t)?"".concat(t,"px"):t}},{key:"css",value:function(t){if(!v.isDefined(t))return this.attr("class");this.attr("class",t)}},{key:"setStyleByMap",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.style(n,t[n])}))}},{key:"style",value:function(t,e){if(2!==arguments.length)return 1===arguments.length?this.element.style[t]:this.element.style;this.element.style[t]=e}},{key:"getStyleValue",value:function(t){var e=this.style(t),n=v.isDefined(e)?e.replace(/[^-\d.]/g,""):0;return parseFloat(n)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"parent",value:function(){return this.element?this.element.parentElement:null}},{key:"detach",value:function(){t.detach(this.element),this.$domParent&&this.$domParent.childrenCount>0&&this.$domParent.childrenCount--}},{key:"append$Dom",value:function(t){this.element.appendChild(t.element)}},{key:"insertFirst$Dom",value:function(t){this.element.firstChild?this.element.insertBefore(t.element,this.element.firstChild):this.append$Dom(t)}},{key:"appendTModel$Dom",value:function(t){0===this.childrenCount&&this.element.children.length>1&&t.getDomParent()&&t.getDomParent().getHtml()&&t.getDomParent().getHtml()===this.originalContent&&(this.element.innerHTML="<div>".concat(this.html(),"</div>")),this.element.appendChild(t.$dom.element),t.$dom.$domParent=this,this.childrenCount++}},{key:"html",value:function(t){if(!v.isDefined(t))return this.originalContent;if(this.childrenCount>0){var e=document.createElement("div");e.innerHTML=t,v.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!1}else this.element.innerHTML=t,this.originalContent=t,this.textOnly=!1}},{key:"text",value:function(t){if(!v.isDefined(t))return this.originalContent;if(this.childrenCount>0){var e=document.createTextNode(t);v.isDefined(this.originalContent)?this.element.replaceChild(e,this.element.firstChild):this.element.insertBefore(e,this.element.firstChild),this.originalContent=t,this.textOnly=!0}else this.element.textContent=t,this.originalContent=t,this.textOnly=!0}},{key:"outerHTML",value:function(t){this.element.outerHTML=t}},{key:"innerHTML",value:function(t){if(!v.isDefined(t))return this.element.innerHTML;this.element.innerHTML=t}},{key:"addClass",value:function(t){var e=this.attr("class"),n=e?e.includes(t)?e:"".concat(e," ").concat(t):t;n!==e&&this.attr("class",n)}},{key:"addEvent",value:function(t,e){this.element.addEventListener?this.element.addEventListener(t,e,{capture:!1,passive:!1}):this.element.attachEvent("on".concat(t),e)}},{key:"detachEvent",value:function(t,e){this.element.removeEventListener?this.element.removeEventListener(t,e,!1):this.element.detachEvent?this.element.detachEvent("on".concat(t),e):this.element["on".concat(t)]=null}},{key:"transform",value:function(t){this.element.style[Ae().style.transform]=t}},{key:"animate",value:function(t,e){return this.element.animate(t,e)}},{key:"getContext",value:function(e,n){var r=v.isDefined(n)?t.query(n):this.query("canvas");return r?r.getContext(e):void 0}},{key:"findFirstByClass",value:function(e){return t.findFirstByClass(e,this.element)}},{key:"findFirstByTag",value:function(e){return t.findFirstByTag(e,this.element)}},{key:"query",value:function(e){return"#"===e[0]?t.findById(e):"."===e[0]?this.findFirstByClass(e):this.findFirstByTag(e)}}],r=[{key:"query",value:function(e){return"#"===e[0]?t.findById(e):"."===e[0]?t.findFirstByClass(e):t.findFirstByTag(e)}},{key:"findById",value:function(t){return document.getElementById("#"===t[0]?t.slice(1):t)}},{key:"findFirstByClass",value:function(e,n){var r=t.findByClass(e,n);return r.length>0?r[0]:null}},{key:"findFirstByTag",value:function(e,n){var r=t.findByTag(e,n);return r.length>0?r[0]:null}},{key:"findByTag",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByTagName(t)}},{key:"findByClass",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementsByClassName("."===t[0]?t.slice(1):t)}},{key:"findNearestParentWithId",value:function(t){for(;t;){var e="function"==typeof t.getAttribute&&t.getAttribute("id")?t.getAttribute("id"):null;if(e&&Pe().visibleOidMap[e])return e;t=t.parentElement}}},{key:"detach",value:function(t){var e=v.isDefined(t)?t.parentElement:null;e&&e.removeChild(t)}},{key:"hasFocus",value:function(t){return t.hasDom()&&document.activeElement===t.$dom.element}},{key:"ready",value:function(e){new t(document).addEvent("DOMContentLoaded",e)}},{key:"ajax",value:function(t){var e=new XMLHttpRequest,n="";t.data&&(n=Object.keys(t.data).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t.data[e]))})).join("&")),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var n="json"===t.dataType?JSON.parse(this.responseText):this.responseText;t.success(n)}else t.error(e.status)},"POST"===t.type?(e.open(t.type,t.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(n)):(t.url+=n?t.url>""&&t.url.indexOf("?")>=0?"&".concat(n):"?".concat(n):"",e.open(t.type,t.url,!0),e.send())}}],n&&p(e.prototype,n),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function w(t){var e=function(t){if("object"!=T(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T(e)?e:e+""}var S,C,M,E,D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"color2Integers",value:function(e){if(e=e?String(e):"",e=t.colors[e.toLowerCase()]||e){if(e.startsWith("#")){e=3===(e=e.slice(1)).length?e.split("").map((function(t){return t+t})).join(""):e;var n=parseInt(e,16);return[n>>16&255,n>>8&255,255&n]}var r=e.match(/\d+/g);return r&&3===r.length?r.map(Number):void 0}}}],null&&k(e.prototype,null),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){P(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function P(t,e,n){return(e=j(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t){var e=function(t){if("object"!=O(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}S=D,M={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},(C=w(C="colors"))in S?Object.defineProperty(S,C,{value:M,enumerable:!0,configurable:!0,writable:!0}):S[C]=M;var H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&V(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"emptyValue",value:function(){return{value:void 0,step:0,steps:0,cycle:0,cycles:0,interval:0,initialValue:void 0,scheduleTimeStamp:void 0,actualValueLastUpdate:0,status:"",executionCount:0,executionFlag:!1,isImperative:!1,originalTargetName:void 0,easing:void 0,creationTime:v.now()}}},{key:"bindTargetName",value:function(t,e){var n=t[e];if("object"===O(n))["value","enabledOn","onStepsEnd","onValueChange","loop","onImperativeEnd","onImperativeStep"].forEach((function(t){if("function"==typeof n[t]){var r=n[t];n[t]=function(){return this.key=e,r.apply(this,arguments)}}}));else if("function"==typeof n){var r=n;t[e]=function(){return this.key=e,r.apply(this,arguments)}}}},{key:"isValueStepsCycleArray",value:function(e){if(e.length>4||0===e.length)return!1;for(var n=e.length>=2,r=1;r<e.length;r++)if("number"!=typeof e[r])return!1;return n&&("number"==typeof e[0]||t.isListTarget(e[0])||"string"==typeof e[0])}},{key:"isListTarget",value:function(t){return"object"===O(t)&&Array.isArray(t.list)}},{key:"isObjectTarget",value:function(t,e){return!("style"===t||"object"!==O(e)||e instanceof gt||null===e||Array.isArray(e))}},{key:"isChildrenTarget",value:function(t,e){return"children"===t&&(Array.isArray(e)||e instanceof gt)}},{key:"getValueStepsCycles",value:function(e,n){var r=e.targets[n],i=r&&r.valueOnly,a=e.getTargetCycle(n),o=e.val(n),s=null,u=0,l=0,c=0;return function h(f){return Array.isArray(f)?i||!t.isValueStepsCycleArray(f)?[f,u,l,c]:Array.isArray(r)?r:(s=f[0],u=f.length>=2?f[1]:u,l=f.length>=3?f[2]:l,c=f.length>=4?f[3]:c,[s,u,l,c]):"object"===O(f)&&null!==f?(s="function"==typeof f.value?f.value.call(e,a,o):v.isDefined(f.value)?f.value:f,u="function"==typeof f.steps?f.steps.call(e,a):v.isDefined(f.steps)?f.steps:0,l="function"==typeof f.interval?f.interval.call(e,a):v.isDefined(f.interval)?f.interval:0,c="function"==typeof f.cycles?f.cycles.call(e,a,e.getTargetCycles(n)):v.isDefined(f.cycles)?f.cycles:0,Array.isArray(s)?h(s):[s,u,l,c]):"function"==typeof f?h(f.call(e,a,o)):[f,u,l,c]}(r)}},{key:"getIntervalValue",value:function(t,e,n){var r="function"==typeof n?n.call(t,e):n;return v.isNumber(r)?r:0}},{key:"scheduleExecution",value:function(t,e){var n=v.now(),r=t.getTargetInterval(e),i=t.getScheduleTimeStamp(e),a=0;if(r>0)if(v.isDefined(i)){var o=n-i;a=Math.max(r-o,0)}else a=r,t.setScheduleTimeStamp(e,n);return a}},{key:"getTargetSchedulePeriod",value:function(t,e,n){var r,i=v.now(),a=0;return n>0?v.isDefined(t.getTargetTimeStamp(e))?a=(r=i-t.getTargetTimeStamp(e))<n?n-r:0:(t.setTargetTimeStamp(e,i),a=n):v.isDefined(t.getTargetTimeStamp(e))&&(a=(r=i-t.getTargetTimeStamp(e))<0?-r:0),a}},{key:"handleValueChange",value:function(t,e,n,r,i,a){"object"===O(t.targets[e])&&"function"==typeof t.targets[e].onValueChange&&!v.areEqual(n,r,t.targets[e].deepEquality)&&(t.targets[e].onValueChange.call(t,n,r,a),t.setTargetMethodName(e,"onValueChange"))}},{key:"morph",value:function(e,n,r,i,a){var o=e.getTargetEasing(n),s=o?o(e.getTargetStepPercent(n,a)):e.getTargetStepPercent(n,a);if(t.colorMap[n]){var u=D.color2Integers(i),l=r?D.color2Integers(r):D.color2Integers("#fff");if(u&&l){var c=Math.floor(u[0]*s+l[0]*(1-s)),h=Math.floor(u[1]*s+l[1]*(1-s)),f=Math.floor(u[2]*s+l[2]*(1-s));return"rgb(".concat(c,",").concat(h,",").concat(f,")")}return i}return"number"==typeof i?i*s+r*(1-s):i}},{key:"setWidthFromDom",value:function(t){var e=v.isDefined(t.domWidth)?t.domWidth.height:void 0,n=v.isDefined(t.domWidth)?t.domWidth.width:void 0,r=t.getDomParent(),i=!1;return Pe().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),i=!0),(!v.isDefined(t.domWidth)||i||e!==t.getHeight()||r&&t.getActualValueLastUpdate("width")<=r.getActualValueLastUpdate("width"))&&(t.$dom.width("auto"),n=t.$dom.width(),e=t.$dom.height()),t.domWidth={width:n,height:e},t.val("width",n),n}},{key:"setHeightFromDom",value:function(t){var e=v.isDefined(t.domHeight)?t.domHeight.height:void 0,n=v.isDefined(t.domHeight)?t.domHeight.width:void 0,r=t.getDomParent(),i=!1;return Pe().needsRerender(t)&&(t.isTextOnly()?t.$dom.text(t.getHtml()):t.$dom.html(t.getHtml()),i=!0),(!v.isDefined(t.domHeight)||i||n!==t.getWidth()||r&&t.getActualValueLastUpdate("height")<=r.getActualValueLastUpdate("height"))&&(t.$dom.height("auto"),n=t.$dom.width(),e=t.$dom.height()),t.domHeight={height:e,width:n},t.val("height",e),e}}])}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F(r.key),r)}}function F(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}E=H,P(H,"transformMap",{x:!0,y:!0,z:!0,translateX:!0,translateY:!0,translateZ:!0,perspective:!0,rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0,rotate3DAngle:!0,scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0,skew:!0,skewX:!0,skewY:!0}),P(H,"dimMap",{width:!0,height:!0}),P(H,"styleWithUnitMap",{fontSize:!0,lineHeight:!0,borderRadius:!0,padding:!0,left:!0,top:!0,fontWeight:!0}),P(H,"colorMap",{color:!0,background:!0,backgroundColor:!0}),P(H,"styleTargetMap",L(L(L(L(L({},E.transformMap),E.dimMap),E.styleWithUnitMap),E.colorMap),{},{position:!0,opacity:!0,zIndex:!0,css:!0,style:!0,textAlign:!0,border:!0,borderTop:!0,borderLeft:!0,borderRight:!0,borderBottom:!0,boxSizing:!0,transformStyle:!0,transformOrigin:!0,attributes:!0,justifyContent:!0,alignItems:!0,display:!0,cursor:!0})),P(H,"scaleMap",{scale:!0,scaleX:!0,scaleY:!0,scaleZ:!0,scale3DX:!0,scale3DY:!0,scale3DZ:!0}),P(H,"rotate3D",{rotate3DX:!0,rotate3DY:!0,rotate3DZ:!0}),P(H,"cssFunctionMap",{skew:{x:0,y:0},translate3d:{x:0,y:0,z:0},rotate3d:{x:0,y:0,z:0,a:0},scale3d:{x:0,y:0,z:0}}),P(H,"targetConditionMap",{onResize:function(){return He().resizeFlag},onParentResize:function(t){return t.getParent().getActualValueLastUpdate("width")>t.getActualValueLastUpdate("width")||t.getParent().getActualValueLastUpdate("height")>t.getActualValueLastUpdate("height")},onFocusEvent:function(t){return Le().onFocus(t)},onBlurEvent:function(t){return Le().onBlur(t)},onClickEvent:function(t){return"click"===Le().getEventType()&&Le().isClickHandler(t)},onTouchEnd:function(){return"end"===Le().getEventType()},onKeyEvent:function(){return"key"===Le().getEventType()&&Le().currentKey},onSwipeEvent:function(){return Le().isSwipeEvent()},onTouchEvent:function(t){return Le().isTouchHandler(t)},onEnterEvent:function(t){return Le().isEnterEventHandler(t)},onLeaveEvent:function(t){return Le().isLeaveEventHandler(t)},onScrollEvent:function(t){return Le().isScrollLeftHandler(t)&&Le().deltaX()||Le().isScrollTopHandler(t)&&Le().deltaY()}});var N=function(){return function(t,e,n){return n&&I(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),0,[{key:"linear",value:function(t){return t}},{key:"inQuad",value:function(t){return t*t}},{key:"outQuad",value:function(t){return t*(2-t)}},{key:"outExpo",value:function(t){return 1-(1-t)*(1-t)}},{key:"circular",value:function(t){return Math.sqrt(1- --t*t)}},{key:"inOutQuad",value:function(t){return t<.5?2*t*t:(4-2*t)*t-1}},{key:"inOut",value:function(t){return t<.5?2*t*t:(4-2*t)*t-1}},{key:"outElastic",value:function(t){var e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}}])}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function B(t,e,n){return(e=Y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Y(r.key),r)}}function Y(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}var $=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"executeDeclarativeTarget",value:function(e,n){t.resolveTargetValue(e,n),t.updateTarget(e,e.targetValues[n],n)}},{key:"executeImperativeTarget",value:function(e,n,r,i,a,o,s){e.targetValues[n]=e.targetValues[n]||H.emptyValue();var u=e.targetValues[n];if(u.isImperative=!0,u.originalTargetName=s,H.isListTarget(r))t.assignListTarget(u,r.list,r.list[0],i,a,o);else if(H.isObjectTarget(n,r)){var l=H.cssFunctionMap[n]?U(U({},H.cssFunctionMap[n]),r):r;Object.keys(l).forEach((function(n){t.executeImperativeTarget(e,n,l[n],i,a,o,s)}))}else t.assignSingleTarget(u,r,void 0,i,0,a,o),u.step=0;t.updateTarget(e,u,n)}},{key:"updateTarget",value:function(e,n,r){n.executionCount++,n.executionFlag=!0,e.addToStyleTargetList(r),e.setTargetMethodName(r,"value"),0===e.getTargetSteps(r)&&t.snapActualToTarget(e,r),e.updateTargetStatus(r)}},{key:"assignListTarget",value:function(t,e,n,r,i,a){t.valueList=e,t.stepList=Array.isArray(r)?r:v.isDefined(r)?[r]:[1],t.intervalList=Array.isArray(i)?i:v.isDefined(i)?[i]:[0],t.easingList=Array.isArray(a)?a:v.isDefined(a)?[a]:[N.linear],t.cycle=1,t.value=e[1],t.initialValue=n,t.steps=t.stepList[0],t.interval=t.intervalList[0],t.easing=t.easingList[0],t.step=0,t.cycles=0}},{key:"assignSingleTarget",value:function(t,e,n,r,i,a,o){delete t.valueList,delete t.stepList,delete t.intervalList,delete t.easingList,t.initialValue=n,t.value=e,t.steps=r||0,t.cycles=i||0,t.interval=a||0,t.easing=o}},{key:"snapActualToTarget",value:function(t,e){var n=t.actualValues[e],r=t.targetValues[e].value;t.actualValues[e]="function"==typeof r?r.call(t):r,t.setActualValueLastUpdate(e),H.handleValueChange(t,e,t.actualValues[e],n,0,0)}},{key:"resolveTargetValue",value:function(e,n){var r=!e.targetValues[n]&&v.isDefined(e.targets[n].initialValue)?e.targets[n].initialValue:void 0,i=H.getValueStepsCycles(e,n),a=i[0],o=i[1]||0,s=i[2]||0,u=i[3]||0,l=e.targetValues[n]||H.emptyValue(),c=l.value;e.targetValues[n]=l;var h=v.isDefined(e.targets[n].easing)?e.targets[n].easing:void 0;H.isChildrenTarget(n,a)?(Array.isArray(a)?a.forEach((function(t){return e.addChild(t)})):e.addChild(a),t.assignSingleTarget(l,a,void 0,0,u,s)):H.isListTarget(a)?t.assignListTarget(l,a.list,a.list[0],o,s,h):(t.assignSingleTarget(l,a,r,o,u,s,h),o>0&&v.areEqual(c,a,!!e.targets[n]&&!!e.targets[n].deepEquality)&&e.resetTargetStep(n))}}])}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){var e=function(t){if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}var Z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"addItem",value:function(t,e,n){for(var r=!1,i=0;i<t.length;i++){var a=t[i],o=a.index,s=a.index+a.segment.length-1;if(n===s+1?(a.segment.push(e),r=!0):n>=o&&n<=s?(a.segment.splice(n-o,0,e),r=!0):n===o-1&&(a.segment.unshift(e),a.index=n,r=!0),r){var u=a.index+a.segment.length-1;if(i+1<t.length&&u===t[i+1].index){var l=t[i+1];a.segment=a.segment.concat(l.segment),t.splice(i+1,1)}break}}r||(t.push({index:n,segment:[e]}),t.sort((function(t,e){return t.index-e.index})))}},{key:"initializeActualValues",value:function(){return{position:"absolute",x:0,y:0,left:0,top:0,width:0,height:0,leftMargin:0,rightMargin:0,topMargin:0,bottomMargin:0,innerWidth:void 0,innerHeight:void 0,opacity:1,perspective:void 0,rotate:void 0,scale:1,zIndex:1,scrollLeft:0,scrollTop:0,textOnly:!0,html:void 0,css:"",style:null,attributes:null,borderRadius:0,children:[],isInFlow:!0,baseElement:"div",canHaveDom:!0,canHandleEvents:!1,widthFromDom:!1,heightFromDom:!1,keepEventDefault:!1,isIncluded:!0,bracketThreshold:5,isDomDeletable:!0,calculateChildren:void 0,isVisible:void 0}}},{key:"getTransformString",value:function(e){var n={},r={};(e.transformMap.translateX||e.transformMap.translateY||e.transformMap.translateZ)&&(delete e.transformMap.x,delete e.transformMap.y);for(var i=0,a=Object.keys(e.transformMap);i<a.length;i++){var o=a[i];if(!n[o])switch(o){case"translateX":case"translateY":case"translateZ":r[o]="".concat(o,"(").concat(e.transformMap[o],"px)"),n[o]=!0;break;case"x":case"y":case"z":v.isDefined(e.getZ())?r.translate3d="translate3d(".concat(e.transformMap.x,"px, ").concat(e.transformMap.y,"px, ").concat(e.transformMap.z,"px)"):(v.isDefined(e.getX())||v.isDefined(e.getY()))&&(r.translate="translate(".concat(e.transformMap.x,"px, ").concat(e.transformMap.y,"px)")),n.x=!0,n.y=!0,n.z=!0;break;case"rotate":case"rotateX":case"rotateY":case"rotateZ":case"rotate3DX":case"rotate3DY":case"rotate3DZ":case"rotate3DAngle":v.isDefined(e.val("rotate3DX"))&&v.isDefined(e.val("rotate3DY"))&&v.isDefined(e.val("rotate3DZ"))&&v.isDefined(e.val("rotate3DAngle"))?(r.rotate3d="rotate3d(".concat(e.transformMap.rotate3DX,", ").concat(e.transformMap.rotate3DY,", ").concat(e.transformMap.rotate3DZ,", ").concat(e.transformMap.rotate3DAngle,"deg)"),n.rotate3DX=!0,n.rotate3DY=!0,n.rotate3DZ=!0,n.rotate3DAngle=!0):v.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],"deg)"),n[o]=!0);break;case"scale":case"scaleX":case"scaleY":case"scaleZ":case"scale3DX":case"scale3DY":case"scale3DZ":v.isDefined(e.val("scale3DX"))&&v.isDefined(e.val("scale3DY"))&&v.isDefined(e.val("scale3DZ"))?(r.scale3d="scale3d(".concat(e.transformMap.scale3DX,", ").concat(e.transformMap.scale3DY,", ").concat(e.transformMap.scale3DZ,")"),n.scale3DX=!0,n.scale3DY=!0,n.scale3DZ=!0):v.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],")"),n[o]=!0);break;case"skewX":case"skewY":v.isDefined(e.val("skewX"))&&v.isDefined(e.val("skewY"))?(r[o]="skew(".concat(e.transformMap.skewX,"deg, ").concat(e.transformMap.skewY,"deg)"),n.skewX=!0,n.skewY=!0):v.isDefined(e.val(o))&&(r[o]="".concat(o,"(").concat(e.transformMap[o],"deg)"),n[o]=!0);break;case"perspective":v.isDefined(e.val("perspective"))&&(r[o]="perspective(".concat(e.transformMap.perspective,"px)"),n.perspective=!0)}}var s={};e.val("transformOrder")?e.val("transformOrder").forEach((function(t,e){s[t]=e})):s=t.transformOrder;var u=Object.keys(r).sort((function(t,e){return s[t]-s[e]})).map((function(t){return r[t]}));return u.join(" ")}}])}();function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}function G(t){var e=function(t){if("object"!=K(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==K(e)?e:e+""}!function(t,e,n){(e=q(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Z,"transformOrder",{perspective:0,translateX:1,translateY:1,translateZ:1,translate:1,translate3d:1,rotate:2,rotateX:2,rotateY:2,rotateZ:2,rotate3d:2,skew:3,skewX:3,skewY:3,scale:4,scaleX:4,scaleY:4,scaleZ:4,scale3DX:4,scale3DY:4,scale3DZ:4});var tt=function(){return function(t,e){return e&&J(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"object"===K(e)&&void 0===n&&(n=e,e=""),this.type=e||"blank",this.targets=Object.assign({},n);var r=Ee.getOid(this.type);this.oid=r.oid,this.oidNum=r.num,this.targetValues={},this.actualValues={},this.activeTargetList=[],this.activeTargetMap={},this.updatingTargetList=[],this.updatingTargetMap={},this.updatingChildrenList=[],this.updatingChildrenMap={},this.eventTargets=[],this.styleTargetList=[],this.styleTargetMap={},this.parent=null,this.targetMethodMap={}}),[{key:"getParent",value:function(){return this.parent}},{key:"getRealParent",value:function(){return this.parent}},{key:"initTargets",value:function(){var t=this;this.actualValues=Z.initializeActualValues(),this.targetValues={},this.activeTargetMap={},this.activeTargetList=[],Object.keys(this.targets).forEach((function(e){t.processNewTarget(e)}))}},{key:"processNewTarget",value:function(t){v.isDefined(this.targets[t])?(H.bindTargetName(this.targets,t),v.isDefined(this.targets[t].initialValue)&&(this.actualValues[t]=this.targets[t].initialValue,this.addToStyleTargetList(t)),H.targetConditionMap[t]&&this.eventTargets.indexOf(-1===t)&&this.eventTargets.push(t),!1!==this.targets[t].active&&this.addToActiveTargets(t)):delete this.actualValues[t]}},{key:"addToStyleTargetList",value:function(t){H.styleTargetMap[t]&&(this.styleTargetMap[t]||(this.styleTargetList.push(t),this.styleTargetMap[t]=!0))}},{key:"removeTarget",value:function(t){delete this.targets[t],this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),delete this.targetValues[t]}},{key:"addTarget",value:function(t,e){this.addTargets(function(t,e,n){return(e=G(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,e))}},{key:"addTargets",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.targets[n]=t[n],e.removeFromUpdatingTargets(n),e.processNewTarget(n)})),je().schedule(10,"addTargets-"+this.oid)}},{key:"getTargetStepPercent",value:function(t,e){var n=this.getTargetSteps(t);return e=v.isDefined(e)?e:this.getTargetStep(t),n?e/n:1}},{key:"resetTargetStep",value:function(t){return this.targetValues[t]&&(this.targetValues[t].step=0),this}},{key:"resetTargetExecutionFlag",value:function(t){return this.targetValues[t]&&(this.targetValues[t].executionFlag=!1),this}},{key:"resetTargetCycle",value:function(t){return this.targetValues[t]&&(this.targetValues[t].cycle=0),this}},{key:"resetScheduleTimeStamp",value:function(t){return this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=void 0),this}},{key:"resetTargetInitialValue",value:function(t){return this.targetValues[t]&&(this.targetValues[t].initialValue=void 0),this}},{key:"updateTargetStatus",value:function(t){var e=this.targetValues[t];if(e){var n=this.getTargetCycle(t),r=this.getTargetCycles(t),i=this.getTargetStep(t),a=this.getTargetSteps(t);return this.isExecuted(t)&&i<a||Array.isArray(e.valueList)&&n<e.valueList.length-1?this.targetValues[t].status="updating":!this.isExecuted(t)||this.isTargetInLoop(t)||n<r?this.targetValues[t].status="active":this.targetValues[t].status="done",this.isTargetUpdating(t)?(this.addToUpdatingTargets(t),this.removeFromActiveTargets(t)):this.isTargetActive(t)?(this.addToActiveTargets(t),this.removeFromUpdatingTargets(t)):(this.removeFromActiveTargets(t),this.removeFromUpdatingTargets(t),Ce.manager.doneTargets.push({tmodel:this,key:t})),this.targetValues[t].status}}},{key:"getTargetStatus",value:function(t){return this.targetValues[t]?this.targetValues[t].status:""}},{key:"isTargetActive",value:function(t){return this.targetValues[t]&&"active"===this.targetValues[t].status}},{key:"isTargetUpdating",value:function(t){return this.targetValues[t]&&"updating"===this.targetValues[t].status}},{key:"isTargetDone",value:function(t){return this.targetValues[t]&&"done"===this.targetValues[t].status}},{key:"isTargetComplete",value:function(t){return this.targetValues[t]&&"complete"===this.targetValues[t].status}},{key:"isExecuted",value:function(t){return this.targetValues[t]&&this.targetValues[t].executionFlag}},{key:"neverExecuted",value:function(t){return!this.targetValues[t]}},{key:"isTargetImperative",value:function(t){return!!this.targetValues[t]&&this.targetValues[t].isImperative}},{key:"getTargetExecutionCount",value:function(t){return this.targetValues[t]?this.targetValues[t].executionCount:0}},{key:"setTargetComplete",value:function(t){this.targetValues[t]&&(this.targetValues[t].status="complete")}},{key:"isTargetEnabled",value:function(t){var e=this.targets[t];return!!v.isDefined(e)&&("function"!=typeof e.enabledOn||e.enabledOn.call(this))}},{key:"isTargetInLoop",value:function(t){return!!this.targets[t]&&("function"==typeof this.targets[t].loop?this.targets[t].loop.call(this,t):this.targets[t].loop)}},{key:"doesTargetEqualActual",value:function(t){if(this.targetValues[t]){var e=!!this.targets[t]&&this.targets[t].deepEquality;return e?v.areEqual(this.getTargetValue(t),this.val(t),e):this.getTargetValue(t)===this.val(t)}return!1}},{key:"getTargetValue",value:function(t){return this.targetValues[t]?"function"==typeof this.targetValues[t].value?this.targetValues[t].value.call(this):this.targetValues[t].value:void 0}},{key:"getTargetSteps",value:function(t){return this.targetValues[t]&&this.targetValues[t].steps||0}},{key:"getTargetStep",value:function(t){return this.targetValues[t]?this.targetValues[t].step:0}},{key:"getScheduleTimeStamp",value:function(t){return this.targetValues[t]?this.targetValues[t].scheduleTimeStamp:void 0}},{key:"getTargetInitialValue",value:function(t){return this.targetValues[t]?this.targetValues[t].initialValue:void 0}},{key:"getActualValueLastUpdate",value:function(t){return this.targetValues[t]?this.targetValues[t].actualValueLastUpdate:void 0}},{key:"getTargetCreationTime",value:function(t){return this.targetValues[t]?this.targetValues[t].creationTime:void 0}},{key:"incrementTargetStep",value:function(t){return this.targetValues[t]&&this.targetValues[t].step++,this.targetValues[t].step}},{key:"getTargetCycles",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycles||0}},{key:"getTargetCycle",value:function(t){return this.targetValues[t]?this.targetValues[t].cycle:0}},{key:"incrementTargetCycle",value:function(t){return this.targetValues[t]&&this.targetValues[t].cycle++,this.targetValues[t].cycle}},{key:"setTargetInterval",value:function(t,e){return this.targetValues[t]&&(this.targetValues[t].interval=e),this.targetValues[t].interval}},{key:"setScheduleTimeStamp",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].scheduleTimeStamp=e)}},{key:"setTargetInitialValue",value:function(t,e){this.targetValues[t]&&(this.targetValues[t].initialValue=e)}},{key:"setActualValueLastUpdate",value:function(t){this.targetValues[t]&&(this.targetValues[t].actualValueLastUpdate=v.now())}},{key:"getTargetEasing",value:function(t){return"function"==typeof this.targetValues[t].easing?this.targetValues[t].easing:void 0}},{key:"getTargetInterval",value:function(t){return this.targetValues[t]?this.targetValues[t].interval:void 0}},{key:"getTargetEventFunctions",value:function(t){return this.targetValues[t]?this.targetValues[t].events:void 0}},{key:"setTarget",value:function(t,e,n,r,i,a){return a=a||this.key,$.executeImperativeTarget(this,t,e,n,r,i,a),this}},{key:"hasTargetUpdates",value:function(t){return t?!0===this.updatingTargetMap[t]:this.updatingTargetList.length>0}},{key:"addToActiveTargets",value:function(t){var e=this;if(!this.activeTargetMap[t]){this.activeTargetMap[t]=!0;var n=["y","x","height","width","start"];-1!==n.indexOf(t)?(this.activeTargetList=this.activeTargetList.filter((function(t){return!n.includes(t)})),n.forEach((function(t){e.activeTargetMap[t]&&e.activeTargetList.unshift(t)}))):this.activeTargetList.push(t)}}},{key:"removeFromActiveTargets",value:function(t){if(this.activeTargetMap[t]){delete this.activeTargetMap[t];var e=this.activeTargetList.indexOf(t);e>=0&&this.activeTargetList.splice(e,1)}}},{key:"addToUpdatingTargets",value:function(t){this.updatingTargetMap[t]||(this.updatingTargetMap[t]=!0,this.updatingTargetList.push(t),this.getParent()&&this.getParent().addToUpdatingChildren(this))}},{key:"removeFromUpdatingTargets",value:function(t){if(this.updatingTargetMap[t]){delete this.updatingTargetMap[t];var e=this.updatingTargetList.indexOf(t);e>=0&&this.updatingTargetList.splice(e,1),0===this.updatingTargetList.length&&this.getParent()&&this.getParent().removeFromUpdatingChildren(this)}}},{key:"hasUpdatingTargets",value:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Q(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this.updatingTargetList);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this.isTargetImperative(r)&&this.targetValues[r].originalTargetName===t)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"addToUpdatingChildren",value:function(t){this.updatingChildrenMap[t.oid]||(this.updatingChildrenMap[t.oid]=!0,this.updatingChildrenList.push(t.oid))}},{key:"removeFromUpdatingChildren",value:function(t){if(this.updatingChildrenMap[t.oid]){delete this.updatingChildrenMap[t.oid];var e=this.updatingChildrenList.indexOf(t.oid);e>=0&&this.updatingChildrenList.splice(e,1)}}},{key:"hasUpdatingChildren",value:function(){return this.updatingChildrenList.length>0}},{key:"deleteTargetValue",value:function(t){delete this.targetValues[t],this.addToActiveTargets(t),this.removeFromUpdatingTargets(t),je().schedule(10,"deleteTargetValue-"+this.oid+"-"+t)}},{key:"resetImperative",value:function(t){var e=this.targetValues[t];return e&&(e.isImperative=!1,e.executionFlag=!1,e.scheduleTimeStamp=void 0,e.step=0,e.cycle=0,e.steps=0,e.cycles=0,e.interval=0),this}},{key:"activateTarget",value:function(t){return this.activateTargets([t])}},{key:"activateTargets",value:function(t){var e=this;return t.forEach((function(t){var n=e.targetValues[t];n?(n.executionFlag=!1,n.scheduleTimeStamp=void 0,n.step=0,n.cycle=0,e.updateTargetStatus(t)):e.addToActiveTargets(t)})),je().schedule(10,"activateTargets-"+this.oid),this}},{key:"setTargetMethodName",value:function(t,e){this.targetMethodMap[t]||(this.targetMethodMap[t]=[]),this.targetMethodMap[t].includes(e)||this.targetMethodMap[t].push(e)}}])}();function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rt(r.key),r)}}function rt(t){var e=function(t){if("object"!=et(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:e+""}var it=function(){return function(t,e){return e&&nt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tmodel=e,this.xNext=0,this.xNorth=0,this.xWest=0,this.xEast=0,this.xSouth=0,this.xOverflow=0,this.xOffset=0,this.yNext=0,this.yNorth=0,this.yWest=0,this.yEast=0,this.ySouth=0,this.yOffset=0,this.reset()}),[{key:"reset",value:function(){var t,e;return"BI"===this.tmodel.type?(t=this.tmodel.getX()+this.tmodel.getScrollLeft(),e=this.tmodel.getY()+this.tmodel.getScrollTop(),this.xOffset=0,this.yOffset=0,this.xNext=t,this.xNorth=t,this.xEast=t,this.xSouth=t,this.xWest=t,this.xOverflow=this.tmodel.getRealParent().getX(),this.yNext=e,this.yNorth=e,this.yWest=e,this.yEast=e,this.ySouth=this.tmodel.getRealParent().viewport?this.tmodel.getRealParent().viewport.ySouth:e):(this.xOffset=0,this.yOffset=0,t=this.tmodel.getX(),e=this.tmodel.getY(),this.xNext=t,this.xNorth=t,this.xEast=t,this.xSouth=t,this.xWest=t,this.xOverflow=v.isDefined(this.tmodel.val("xOverflow"))?this.tmodel.val("xOverflow"):t,this.yNext=e,this.yNorth=e,this.yWest=e,this.yEast=e,this.ySouth=e),this}},{key:"setCurrentChild",value:function(t){this.currentChild=t,this.xOffset=t.getDomParent()?-t.getDomParent().getX():0,this.yOffset=t.getDomParent()?-t.getDomParent().getY():0}},{key:"getXNext",value:function(){return this.xNext+this.currentChild.getLeftMargin()+this.xOffset-this.tmodel.getScrollLeft()}},{key:"getYNext",value:function(){return this.yNext+this.currentChild.getTopMargin()+this.yOffset-this.tmodel.getScrollTop()}},{key:"isVisible",value:function(t){var e=t.absX,n=t.absY,r=(t.getDomParent()?t.getDomParent().getMeasuringScale():1)*t.getMeasuringScale(),i=v.isDefined(t.getWidth())?r*t.getWidth():0,a=v.isDefined(t.getHeight())?r*t.getHeight():0,o=t.visibilityStatus,s=t.getBoundingRect();return t.hasChildren()?(o.right=e<=s.right,o.left=e+i>=s.left,o.bottom=n<=s.bottom,o.top=n+a>=s.top):(o.right=e<=Ie()&&e<=s.right,o.left=e+i>=0&&e+i>=s.left,o.bottom=n<=Fe()&&n<=s.bottom,o.top=n+a>=0&&n+a>=s.top),t.visible=o.left&&o.right&&o.top&&o.bottom,t.isVisible()}},{key:"isOverflow",value:function(t,e){return v.isNumber(t)&&v.isNumber(e)&&t>e}},{key:"overflow",value:function(){this.xNext=this.xOverflow,this.yNext=this.ySouth}},{key:"appendNewLine",value:function(){var t=this.currentChild.getInnerHeight()*this.currentChild.getMeasuringScale();this.xNext=this.xOverflow,this.yNext=this.ySouth>this.yNext?this.ySouth+this.currentChild.val("appendNewLine"):this.ySouth+t+this.currentChild.val("appendNewLine"),this.yEast=this.yNext,this.xSouth=this.xNext,this.ySouth=Math.max(this.yNext,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}},{key:"nextLocation",value:function(){var t=this.currentChild.getInnerWidth()*this.currentChild.getMeasuringScale(),e=this.currentChild.getInnerHeight()*this.currentChild.getMeasuringScale(),n=this.currentChild.getInnerContentHeight()*this.currentChild.getMeasuringScale(),r=this.yNext+e+this.currentChild.getTopMargin()+this.currentChild.getBottomMargin();this.xNext+=t+this.currentChild.getLeftMargin()+this.currentChild.getRightMargin(),this.yNext+=n,this.xSouth=this.xNext,this.yEast=this.yNext,this.xEast=Math.max(this.xNext,this.xEast),this.ySouth=Math.max(r,this.ySouth),this.currentChild.getRealParent().viewport.xEast=Math.max(this.currentChild.getRealParent().viewport.xEast,this.xEast),this.currentChild.getRealParent().viewport.ySouth=Math.max(this.currentChild.getRealParent().viewport.ySouth,this.ySouth)}},{key:"calcContentWidthHeight",value:function(){this.tmodel.contentHeight=this.ySouth-this.yNorth,this.tmodel.innerContentHeight=this.yEast-this.yNorth,this.tmodel.innerContentWidth=this.xSouth-this.xWest,this.tmodel.contentWidth=this.xEast-this.xWest}}])}();function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ot(t){return function(t){if(Array.isArray(t))return st(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return st(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lt(r.key),r)}}function lt(t){var e=function(t){if("object"!=at(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==at(e)?e:e+""}function ct(t,e,n){return e=ft(e),function(t,e){if(e&&("object"==at(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ht()?Reflect.construct(e,n||[],ft(t).constructor):e.apply(t,n))}function ht(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ht=function(){return!!t})()}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ft(t)}function dt(t,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dt(t,e)}var gt=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ct(this,e,[t,n])).addedChildren={count:0,list:[]},r.deletedChildren=[],r.lastChildrenUpdate={additions:[],deletions:[]},r.allChildren=[],r.$dom=null,r.x=0,r.y=0,r.absX=0,r.absY=0,r.domHeight=void 0,r.domWidth=void 0,r.innerContentWidth=0,r.innerContentHeight=0,r.contentWidth=0,r.contentHeight=0,r.styleMap={},r.transformMap={},r.visibilityStatus={top:!1,right:!1,bottom:!1,left:!1},r.visible=!1,r.visibleChildren=[],r.initTargets(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}(e,t),function(t,e){return e&&ut(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"createViewport",value:function(){return this.viewport=this.viewport?this.viewport.reset():new it(this),this.viewport}},{key:"setLocation",value:function(t){this.x=t.getXNext(),this.y=t.getYNext()}},{key:"calculateAbsolutePosition",value:function(t,e){var n=this.getBoundingRect();this.absX=n.left+t,this.absY=n.top+e}},{key:"getBoundingRect",value:function(){return v.getBoundingRect(this)}},{key:"addChild",value:function(t){var e=this.addedChildren.count+this.allChildren.length;return this.addedChildren.count++,Z.addItem(this.addedChildren.list,t,e),je().schedule(10,"addChild-"+this.oid+"-"+t.oid),this}},{key:"removeChild",value:function(t){return this.deletedChildren.push(t),this.removeFromUpdatingChildren(t),je().schedule(10,"removeChild-"+this.oid+"-"+t.oid),this}},{key:"removeAllChildren",value:function(){return this.allChildren.length=0,this.updatingChildrenList.length=0,this.updatingChildrenMap={},je().schedule(10,"removeAllChildren-"+this.oid),this}},{key:"addToParentVisibleChildren",value:function(){this.isVisible()&&this.isInFlow()&&this.getParent()&&this.getParent().visibleChildren.push(this)}},{key:"shouldCalculateChildren",value:function(){return v.isDefined(this.actualValues.calculateChildren)?this.actualValues.calculateChildren:this.isVisible()&&this.isIncluded()&&(this.hasChildren()||this.addedChildren.count>0||this.getContentHeight()>0)}},{key:"getFirstChild",value:function(){return this.hasChildren()?this.getChildren()[0]:void 0}},{key:"hasChildren",value:function(){return this.getChildren().length>0}},{key:"getChildren",value:function(){var t=this;return this.addedChildren.count>0&&(this.addedChildren.list.forEach((function(e){var n,r,i=e.index,a=e.segment;a.forEach((function(e){return e.parent=t})),i>=t.allChildren.length?(n=t.allChildren).push.apply(n,ot(a)):(r=t.allChildren).splice.apply(r,[i,0].concat(ot(a)))})),this.lastChildrenUpdate.additions=this.lastChildrenUpdate.additions.concat(this.addedChildren.list),this.addedChildren.list.length=0,this.addedChildren.count=0),this.deletedChildren.length>0&&(this.deletedChildren.forEach((function(e){var n=t.allChildren.indexOf(e);t.lastChildrenUpdate.deletions.push(n),n>=0&&t.allChildren.splice(n,1)})),this.deletedChildren.length=0),this.allChildren}},{key:"getLastChild",value:function(){return this.hasChildren()?this.getChildren()[this.getChildren().length-1]:void 0}},{key:"getChild",value:function(t){return this.hasChildren()?this.getChildren()[t]:void 0}},{key:"getChildIndex",value:function(t){return this.getChildren().indexOf(t)}},{key:"getChildrenOids",value:function(){return this.getChildren().map((function(t){return t.oid})).join(" ")}},{key:"findChild",value:function(t){return this.getChildren().find((function(e){return"function"==typeof t?t.call(e):e.type===t}))}},{key:"findLastChild",value:function(t){return this.getChildren().findLast((function(e){return"function"==typeof t?t.call(e):e.type===t}))}},{key:"getParentValue",value:function(t){var e=u.findParentByTarget(this,t);return e?e.val(t):void 0}},{key:"val",value:function(t,e){return 2===arguments.length?(this.actualValues[t]=e,this):this.actualValues[t]}},{key:"floorVal",value:function(t){return Math.floor(this.val(t))}},{key:"addValue",value:function(t,e){return this.actualValues[t]+=e,this}},{key:"getDomParent",value:function(){return this.actualValues.domParent?this.actualValues.domParent:null}},{key:"getDomHolder",value:function(){return this.actualValues.domHolder?this.actualValues.domHolder:this.getDomParent()?this.getDomParent().$dom:u.findParentByTarget(this,"domHolder")?u.findParentByTarget(this,"domHolder").$dom:null}},{key:"bug",value:function(){return[{visible:this.isVisible()},{visibilityStatus:this.visibilityStatus},{hasDom:this.hasDom()},{x:this.getX()},{y:this.getY()},{width:this.getWidth()},{height:this.getHeight()},{activeTargetList:this.activeTargetList},{updatingTargetList:this.updatingTargetList},{styleTargetList:this.styleTargetList},{children:this.getChildren()},{targetValues:this.targetValues},{actualValues:this.actualValues}]}},{key:"logTree",value:function(){v.logTree(this)}},{key:"isVisible",value:function(){return v.isDefined(this.actualValues.isVisible)?this.actualValues.isVisible:this.visible}},{key:"hasDomHolderChanged",value:function(){return this.getDomHolder()&&this.getDomHolder().exists()&&this.$dom.parent().getAttribute("id")!==this.getDomHolder().attr("id")}},{key:"hasDom",value:function(){return!!this.$dom&&this.$dom.exists()}},{key:"getContentHeight",value:function(){return this.contentHeight}},{key:"getInnerContentHeight",value:function(){return 0}},{key:"getInnerHeight",value:function(){return v.isDefined(this.actualValues.innerHeight)?this.actualValues.innerHeight:this.getHeight()}},{key:"getInnerWidth",value:function(){return v.isDefined(this.actualValues.innerWidth)?this.actualValues.innerWidth:this.getWidth()}},{key:"getInnerXEast",value:function(){return this.absX+this.getInnerWidth()}},{key:"getOuterXEast",value:function(){return this.absX+this.getInnerWidth()}},{key:"getContentWidth",value:function(){return this.contentWidth}},{key:"getUIDepth",value:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}},{key:"isTextOnly",value:function(){return this.actualValues.textOnly}},{key:"getHtml",value:function(){return this.actualValues.html}},{key:"isInFlow",value:function(){return this.actualValues.isInFlow}},{key:"canHandleEvents",value:function(t){var e=this.actualValues.canHandleEvents;return e===t||Array.isArray(e)&&e.includes(t)}},{key:"keepEventDefault",value:function(){return this.actualValues.keepEventDefault}},{key:"getBracketThreshold",value:function(){return this.actualValues.bracketThreshold}},{key:"shouldBeBracketed",value:function(){return v.isDefined(this.actualValues.shouldBeBracketed)?this.actualValues.shouldBeBracketed:this.getChildren().length>this.getBracketThreshold()}},{key:"isIncluded",value:function(){return this.actualValues.isIncluded}},{key:"canHaveDom",value:function(){return this.actualValues.canHaveDom}},{key:"getBaseElement",value:function(){return this.actualValues.baseElement}},{key:"isDomDeletable",value:function(){return this.actualValues.isDomDeletable}},{key:"getOpacity",value:function(){return this.actualValues.opacity}},{key:"getCenterX",value:function(){return(this.getParentValue("width")-this.getWidth())/2}},{key:"getCenterY",value:function(){return(this.getParentValue("height")-this.getHeight())/2}},{key:"getX",value:function(){return this.actualValues.x}},{key:"getY",value:function(){return this.actualValues.y}},{key:"getZ",value:function(){return this.actualValues.z}},{key:"getPerspective",value:function(){return this.actualValues.perspective}},{key:"getRotate",value:function(){return this.actualValues.rotate}},{key:"getRotateX",value:function(){return this.actualValues.rotateX}},{key:"getRotateY",value:function(){return this.actualValues.rotateY}},{key:"getRotateZ",value:function(){return this.actualValues.rotateZ}},{key:"getScale",value:function(){return this.actualValues.scale}},{key:"getScaleX",value:function(){return this.actualValues.scaleX}},{key:"getScaleY",value:function(){return this.actualValues.scaleY}},{key:"getScaleZ",value:function(){return this.actualValues.scaleZ}},{key:"getSkewX",value:function(){return this.actualValues.skewX}},{key:"getSkewY",value:function(){return this.actualValues.skewY}},{key:"getSkewZ",value:function(){return this.actualValues.skewZ}},{key:"getMeasuringScale",value:function(){return this.actualValues.scale}},{key:"getZIndex",value:function(){return this.actualValues.zIndex}},{key:"getTopMargin",value:function(){return this.actualValues.topMargin}},{key:"getLeftMargin",value:function(){return this.actualValues.leftMargin}},{key:"getRightMargin",value:function(){return this.actualValues.rightMargin}},{key:"getBottomMargin",value:function(){return this.actualValues.bottomMargin}},{key:"getWidth",value:function(){return this.actualValues.width}},{key:"getHeight",value:function(){return this.actualValues.height}},{key:"getScrollTop",value:function(){return Math.floor(this.actualValues.scrollTop)}},{key:"getScrollLeft",value:function(){return Math.floor(this.actualValues.scrollLeft)}},{key:"getCss",value:function(){return this.actualValues.css.includes("tgt")?this.actualValues.css:this.actualValues.css?"tgt "+this.actualValues.css:"tgt"}},{key:"getStyle",value:function(){return this.actualValues.style}},{key:"getAttributes",value:function(){return this.actualValues.attributes}},{key:"getInputValue",value:function(){return this.hasDom()?this.$dom.value():void 0}}])}(tt);function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pt(r.key),r)}}function pt(t){var e=function(t){if("object"!=vt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vt(e)?e:e+""}var mt=function(){return function(t,e){return e&&yt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.style=void 0,this.screen={x:0,y:0,width:0,height:0}}),[{key:"setup",value:function(){if(!document.getElementsByClassName){var t=function(t,e){var n;if(document.querySelectorAll)n=e.querySelectorAll(".".concat(t));else{var r=e.getElementsByTagName("*");n=[];for(var i=0;i<r.length;i++)r[i].className&&" ".concat(r[i].className," ").indexOf(" ".concat(t," "))>-1&&-1===n.indexOf(r[i])&&n.push(r[i])}return n};document.getElementsByClassName=function(e){return t(e,document)},Element.prototype.getElementsByClassName=function(e){return t(e,this)}}this.style={transform:this.prefixStyle("transform"),transitionTimingFunction:this.prefixStyle("transitionTimingFunction"),transitionDuration:this.prefixStyle("transitionDuration")}}},{key:"prefixStyle",value:function(t){var e=new b;e.create("div");for(var n=e.style(),r="",i=["webkitT","MozT","msT","OT","t"],a=0;a<i.length;a++)i[a]+"ransform"in n&&(r=i[a].substr(0,i[a].length-1));return""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}},{key:"measureScreen",value:function(){return this.screen.width=document.documentElement.clientWidth||document.body.clientWidth,this.screen.height=document.documentElement.clientHeight||document.body.clientHeight,this.screen}}])}();function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kt(r.key),r)}}function kt(t){var e=function(t){if("object"!=bt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bt(e)?e:e+""}var wt=function(){return function(t,e){return e&&Tt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentTouch={deltaY:0,deltaX:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""},this.touchTimeStamp=0,this.cursor={x:0,y:0},this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0,this.touchCount=0,this.currentEventName="",this.currentEventType="",this.currentHandlers={touch:null,scrollLeft:null,scrollTop:null,pinch:null,enterEvent:null,leaveEvent:null,focus:null,justFocused:null,blur:null},this.eventQueue=[],this.eventMap={touchstart:{eventName:"touchstart",inputType:"touch",eventType:"start",order:1,windowEvent:!1},touchmove:{eventName:"touchmove",inputType:"touch",eventType:"move",order:1,windowEvent:!1},touchend:{eventName:"touchend",inputType:"touch",eventType:"end",order:1,windowEvent:!1},touchcancel:{eventName:"touchend",inputType:"touch",eventType:"cancel",order:1,windowEvent:!1},mousedown:{eventName:"mousedown",inputType:"mouse",eventType:"start",order:2,windowEvent:!1},mousemove:{eventName:"mousemove",inputType:"mouse",eventType:"move",order:2,windowEvent:!1},mouseup:{eventName:"mouseup",inputType:"mouse",eventType:"end",order:2,windowEvent:!1},mousecancel:{eventName:"mouseup",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!1},mouseleave:{eventName:"mouseleave",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!1},pointerdown:{eventName:"mousedown",inputType:"pointer",eventType:"start",order:3,windowEvent:!1},pointermove:{eventName:"mousemove",inputType:"pointer",eventType:"move",order:3,windowEvent:!1},pointerup:{eventName:"mouseup",inputType:"pointer",eventType:"end",order:3,windowEvent:!1},pointercancel:{eventName:"mousecancel",inputType:"pointer",eventType:"cancel",order:3,windowEvent:!1},wheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1},DOMMouseScroll:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1},mousewheel:{eventName:"wheel",inputType:"",eventType:"wheel",order:1,windowEvent:!1},blur:{eventName:"blur",inputType:"mouse",eventType:"cancel",order:2,windowEvent:!0},keyup:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0},keydown:{eventName:"key",inputType:"",eventType:"key",order:1,windowEvent:!0},resize:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0},orientationchange:{eventName:"resize",inputType:"",eventType:"resize",order:1,windowEvent:!0}},this.domEvents=Object.keys(this.eventMap).filter((function(t){return!e.eventMap[t].windowEvent})),this.windowEvents=Object.keys(this.eventMap).filter((function(t){return e.eventMap[t].windowEvent})),this.bindedHandleEvent=this.bindedHandleEvent||this.handleEvent.bind(this)}),[{key:"removeHandlers",value:function(t){var e=this;this.domEvents.forEach((function(n){t.detachEvent(n,e.bindedHandleEvent)}))}},{key:"addHandlers",value:function(t){var e=this;this.domEvents.forEach((function(n){t.addEvent(n,e.bindedHandleEvent)}))}},{key:"removeWindowHandlers",value:function(){var t=this;this.windowEvents.forEach((function(e){Ce.$window.detachEvent(e,t.bindedHandleEvent)}))}},{key:"addWindowHandlers",value:function(){var t=this;this.windowEvents.forEach((function(e){Ce.$window.addEvent(e,t.bindedHandleEvent)}))}},{key:"resetEventsOnTimeout",value:function(){if(this.touchTimeStamp>0){var t=v.now()-this.touchTimeStamp,e=0;Math.abs(this.currentTouch.deltaY)>.001||Math.abs(this.currentTouch.deltaX)>.001||Math.abs(this.currentTouch.pinchDelta)>.001?t>70?this.clearTouch():this.currentTouch.manualMomentumFlag&&(this.currentTouch.deltaY*=.85,this.currentTouch.deltaX*=.85,e=10):t>600&&(this.clearTouch(),this.touchTimeStamp=0),je().schedule(e,"scroll decay")}}},{key:"findEventHandlers",value:function(t){var e,n,r,i,a,o=t.tmodel;o&&(e=u.findFirstTouchHandler(o),n=u.findFirstScrollLeftHandler(o),r=u.findFirstScrollTopHandler(o),i=u.findFirstPinchHandler(o),a=b.hasFocus(o)?o:this.currentHandlers.focus),this.currentHandlers.scrollLeft===n&&this.currentHandlers.scrollTop===r||this.clearTouch(),this.currentHandlers.touch!==e&&(this.currentHandlers.enterEvent=e,this.currentHandlers.leaveEvent=this.currentHandlers.touch),this.currentHandlers.focus!==a&&(this.currentHandlers.justFocused=a,this.currentHandlers.blur=this.currentHandlers.focus),this.currentHandlers.touch=e,this.currentHandlers.scrollLeft=n,this.currentHandlers.scrollTop=r,this.currentHandlers.pinch=i,this.currentHandlers.focus=a}},{key:"captureEvents",value:function(){if(this.currentHandlers.enterEvent=null,this.currentHandlers.leaveEvent=null,this.currentHandlers.justFocused=null,this.currentHandlers.blur=null,0===this.eventQueue.length)return this.currentEventName="",this.currentEventType="",void(this.currentKey="");var t=this.eventQueue.shift();"resize"===t.eventName?Ae().measureScreen():(this.findEventHandlers(t),this.currentEventName=t.eventName,this.currentEventType=t.eventType,this.currentKey=this.currentTouch.key,this.currentTouch.key=""),je().schedule(10,"captureEvents-".concat(t))}},{key:"handleEvent",value:function(t){if(t){var e=t.type,n=this.eventMap[e];if(n){var r=n.eventName,i=n.inputType,a=n.eventType,o=n.order,s=v.now();this.touchTimeStamp=Math.max(s,this.touchTimeStamp);var u=this.getTModelFromEvent(t),l=this.eventQueue.length>0?this.eventQueue[this.eventQueue.length-1]:null;if(l&&l.eventItem){var c=l.eventItem,h=s-l.timeStamp;if(i&&c.inputType&&c.inputType!==i&&o>c.order)return;if(this.eventQueue.length>10&&h<50)for(var f=0,d=this.eventQueue.length-1;d>=0&&(null===(g=this.eventQueue[d].eventItem)||void 0===g?void 0:g.eventType)===a;d--){var g;if(++f>5)return}}switch(this.eventQueue.push({eventName:r,eventItem:n,eventType:a,originalName:e,tmodel:u,timeStamp:s}),r){case"mousedown":case"touchstart":this.clearStart(),this.clearTouch(),this.touchCount=this.countTouches(t),this.preventDefault(u,r)&&t.preventDefault(),this.start0=this.getTouch(t),this.start1=this.getTouch(t,1),this.cursor.x=this.start0.x,this.cursor.y=this.start0.y,t.stopPropagation();break;case"mousemove":case"touchmove":var y=this.getTouch(t);this.cursor.x=y.x,this.cursor.y=y.y,this.preventDefault(u,r)&&t.preventDefault(),this.touchCount>0&&(this.move(t),t.stopPropagation());break;case"mouseup":case"touchend":if(this.preventDefault(u,r)&&t.preventDefault(),this.end(t),this.start0){var p=this.end0?Math.abs(this.end0.originalX-this.start0.originalX):0,m=this.end0?Math.abs(this.end0.originalY-this.start0.originalY):0,b=this.end0?Math.abs(this.end0.timeStamp-this.start0.timeStamp):300;p<=1&&m<=1&&b<=300&&(this.eventQueue.pop(),this.eventQueue.push({eventName:"click",eventItem:n,eventType:"click",originalName:e,tmodel:u,timeStamp:s}))}this.clearStart(),this.touchCount=0,this.currentHandlers.scrollTop||this.currentHandlers.scrollLeft||this.clearTouch(),t.stopPropagation();break;case"wheel":this.preventDefault(u,r)&&t.preventDefault(),this.wheel(t);break;case"key":this.currentTouch.key=t.which||t.keyCode}je().schedule(0,"".concat(e,"-").concat(r,"-").concat((t.target.tagName||"").toUpperCase()))}}}},{key:"preventDefault",value:function(t,e){return!t||!(!0===t.keepEventDefault()||Array.isArray(t.keepEventDefault())&&t.keepEventDefault().includes(e))}},{key:"getTModelFromEvent",value:function(t){var e="function"==typeof t.target.getAttribute?t.target.getAttribute("id"):"";return e&&Ce.manager.visibleOidMap[e]||(e=b.findNearestParentWithId(t.target)),Ce.manager.visibleOidMap[e]}},{key:"clearStart",value:function(){this.start0=void 0,this.start1=void 0,this.end0=void 0,this.end1=void 0,this.touchCount=0}},{key:"clearTouch",value:function(){this.currentTouch={deltaY:0,deltaX:0,pinchDelta:0,key:"",manualMomentumFlag:!1,orientation:"none",dir:"",source:""}}},{key:"clearAll",value:function(){this.clearStart(),this.clearTouch(),this.eventQueue.length=0,this.touchTimeStamp=0}},{key:"deltaX",value:function(){return this.currentTouch.deltaX}},{key:"deltaY",value:function(){return this.currentTouch.deltaY}},{key:"cursorX",value:function(){return this.cursor.x}},{key:"cursorY",value:function(){return this.cursor.y}},{key:"pinchDelta",value:function(){return this.currentTouch.pinchDelta}},{key:"dir",value:function(){return this.currentTouch.dir}},{key:"getScrollLeftHandler",value:function(){return this.currentHandlers.scrollLeft}},{key:"getScrollTopHandler",value:function(){return this.currentHandlers.scrollTop}},{key:"getPinchHandler",value:function(){return this.currentHandlers.pinch}},{key:"getTouchHandler",value:function(){return this.currentHandlers.touch}},{key:"getTouchHandlerType",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.type:null}},{key:"getTouchHandlerOid",value:function(){return this.currentHandlers.touch?this.currentHandlers.touch.oid:null}},{key:"isClickEvent",value:function(){return"click"===this.getEventType()}},{key:"isResizeEvent",value:function(){return"resize"===this.getEventType()}},{key:"isSwipeEvent",value:function(){return(0!==this.deltaX()||0!==this.deltaY())&&this.isCurrentSource("touch")}},{key:"isEndEvent",value:function(){return"end"===this.getEventType()}},{key:"getEventName",value:function(){return this.currentEventName}},{key:"getEventType",value:function(){return this.currentEventType}},{key:"isClickHandler",value:function(t){return this.getTouchHandler()===t&&this.isClickEvent()}},{key:"isClickHandlerType",value:function(t){return this.getTouchHandlerType()===t&&this.isClickEvent()}},{key:"isTouchEndHandler",value:function(t){return this.getTouchHandler()===t&&"end"===this.getEventType()}},{key:"isTouchHandler",value:function(t){return this.getTouchHandler()===t&&t.canHandleEvents("touch")}},{key:"isEnterEventHandler",value:function(t){return this.currentHandlers.enterEvent===t}},{key:"isLeaveEventHandler",value:function(t){return this.currentHandlers.leaveEvent===t}},{key:"onFocus",value:function(t){return this.currentHandlers.justFocused===t}},{key:"onBlur",value:function(t){return this.currentHandlers.blur===t}},{key:"hasFocus",value:function(t){return this.currentHandlers.focus===t}},{key:"isTouchHandlerType",value:function(t){return this.getTouchHandlerType()===t}},{key:"isScrollLeftHandler",value:function(t){return this.currentHandlers.scrollLeft===t}},{key:"isScrollTopHandler",value:function(t){return this.currentHandlers.scrollTop===t}},{key:"isPinchHandler",value:function(t){return this.currentHandlers.pinch===t}},{key:"isCurrentSource",value:function(t){return this.currentTouch.source===t}},{key:"isTouchHandlerOrAncestor",value:function(t){for(var e=this.getTouchHandler();t;){if(t===e)return!0;t=t.getParent()}return!1}},{key:"isTouchHandlerOrParent",value:function(t){var e=this.getTouchHandler();return t===e||t.getParent()===e}},{key:"countTouches",value:function(t){var e,n;return(null===(e=t.touches)||void 0===e?void 0:e.length)||(null===(n=t.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n.length)||1}},{key:"getTouch",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(null===(e=t.touches)||void 0===e?void 0:e[r])||(null===(n=t.originalEvent)||void 0===n||null===(n=n.touches)||void 0===n?void 0:n[r])||t,a=v.isDefined(i.clientX)?i.clientX:i.pageX||0,o=v.isDefined(i.clientY)?i.clientY:i.pageY||0;return{x:a,y:o,originalX:a,originalY:o,target:i.target,timeStamp:v.now()}}},{key:"move",value:function(t){if(1===this.touchCount){if(this.start0.y=this.end0?this.end0.y:this.start0.y,this.start0.x=this.end0?this.end0.x:this.start0.x,this.end0=this.getTouch(t),v.isDefined(this.end0)){var e=this.start0.x-this.end0.x,n=this.start0.y-this.end0.y;this.setDeltaXDeltaY(e,n,"touch")}}else if(this.touchCount>=2){this.end0=this.getTouch(t),this.end1=this.getTouch(t,1);var r=v.distance(this.start0.x,this.start0.y,this.start1.x,this.start1.y),i=v.distance(this.end0.x,this.end0.y,this.end1.x,this.end1.y)-r;this.currentTouch.pinchDelta=i>0?.3:i<0?-.3:0}}},{key:"end",value:function(){if(this.touchCount<=1&&this.start0){var t,e=this.end0?this.start0.x-this.end0.x:0,n=this.end0?this.start0.y-this.end0.y:0,r=this.end0?this.end0.timeStamp-this.start0.timeStamp:0;"horizontal"===this.currentTouch.orientation&&Math.abs(e)>1?(t=v.momentum(0,e,r),this.currentTouch.deltaX=t.distance,this.currentTouch.manualMomentumFlag=!0,this.touchTimeStamp=v.now()+t.duration):"vertical"===this.currentTouch.orientation&&Math.abs(n)>1&&(t=v.momentum(0,n,r),this.currentTouch.deltaY=t.distance,this.currentTouch.manualMomentumFlag=!0,this.touchTimeStamp=v.now()+t.duration)}}},{key:"setDeltaXDeltaY",value:function(t,e,n){var r=Math.abs(t)-Math.abs(e);r>=1?("none"===this.currentTouch.orientation||"vertical"===this.currentTouch.orientation&&r>3||"horizontal"===this.currentTouch.orientation)&&(this.currentTouch.orientation="horizontal",this.currentTouch.dir=t<=-1?"left":t>=1?"right":this.currentTouch.dir,this.currentTouch.source=n,this.currentTouch.deltaX=t,this.currentTouch.deltaY=0):"none"===this.currentTouch.orientation||"horizontal"===this.currentTouch.orientation&&r<-3||"vertical"===this.currentTouch.orientation?(this.currentTouch.orientation="vertical",this.currentTouch.dir=e<=-1?"up":e>=1?"down":this.currentTouch.dir,this.currentTouch.source=n,this.currentTouch.deltaY=e,this.currentTouch.deltaX=0):(this.currentTouch.deltaY=0,this.currentTouch.deltaX=0)}},{key:"wheel",value:function(t){var e=0,n=0;this.currentTouch.pinchDelta=0,this.start0=this.getTouch(t),t.ctrlKey&&"deltaY"in t?this.currentTouch.pinchDelta=-t.deltaY/10:"deltaX"in t?(e=t.deltaX,n=t.deltaY):"wheelDeltaX"in t?(e=-t.wheelDeltaX/120,n=-t.wheelDeltaY/120):"wheelDelta"in t?e=-t.wheelDelta/120:"detail"in t&&(e=t.detail/3),this.setDeltaXDeltaY(e,n,"wheel")}}])}();function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(Object(n),!0).forEach((function(e){Mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mt(t,e,n){return(e=xt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xt(r.key),r)}}function xt(t){var e=function(t){if("object"!=Et(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Et(e)?e:e+""}var Lt=function(){return function(t,e){return e&&Dt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resultMap={},this.loadingMap={},this.singleLoadList=void 0,this.groupLoadList=void 0,this.imgLoadList=void 0,this.stopLoadingAfterAttempts=v.isDefined(Ce.stopLoadingAfterAttempts)?Ce.stopLoadingAfterAttempts:10,this.attemptFailedInterval=v.isDefined(Ce.attemptFailedInterval)?Ce.attemptFailedInterval:2e3,this.statistics={}}),[{key:"initSingleLoad",value:function(t,e,n){this.isLoading(t)||this.isLoaded(t)&&!n||this.getLoadingAttempts(t)>this.stopLoadingAfterAttempts||(this.initLoadingMap(t),this.singleLoadList=this.singleLoadList||{},this.singleLoadList[t]={fetchId:t,query:e})}},{key:"initGroupLoad",value:function(t,e,n,r,i){var a=JSON.stringify({query:n,idKey:r,separator:i});this.isLoading(t)||this.isLoaded(t)||this.getLoadingAttempts(t)>this.stopLoadingAfterAttempts||(this.initLoadingMap(t),this.groupLoadList=this.groupLoadList||{},this.groupLoadList[a]||(this.groupLoadList[a]=[]),this.groupLoadList[a].push({fetchId:t,dataId:e}))}},{key:"initImgLoad",value:function(t,e){this.isLoading(t)||this.isLoaded(t)||this.getLoadingAttempts(t)>this.stopLoadingAfterAttempts||(this.initLoadingMap(t,"image"),this.imgLoadList=this.imgLoadList||{},this.imgLoadList[t]={fetchId:t,src:e})}},{key:"isLoading",value:function(t){return!!v.isDefined(this.loadingMap[t])&&this.loadingMap[t].loadingFlag}},{key:"isLoaded",value:function(t){return v.isDefined(this.resultMap[t])&&!0===this.resultMap[t].success}},{key:"getLoadingAttempts",value:function(t){return v.isDefined(this.loadingMap[t])?this.loadingMap[t].attempts:0}},{key:"getSuccessLoadingTime",value:function(t){return v.isDefined(this.loadingMap[t])&&!0===this.loadingMap[t].success?this.loadingMap[t].loadingTime:void 0}},{key:"getFailedInterval",value:function(t){return v.isDefined(this.loadingMap[t])?this.loadingMap[t].attempts*this.attemptFailedInterval:0}},{key:"fetchResult",value:function(t){return this.resultMap[t]}},{key:"hasLoadedSuccessfully",value:function(t){return this.resultMap[t]&&!0===this.resultMap[t].success}},{key:"hasLoadedUnsuccessfully",value:function(t){return this.resultMap[t]&&!1===this.resultMap[t].success}},{key:"fetchErrors",value:function(t){var e;return null===(e=this.resultMap[t])||void 0===e||null===(e=e.result)||void 0===e?void 0:e.errors}},{key:"initLoadingMap",value:function(t,e){e=e||this.getCategoryFromFetchId(t),v.isDefined(this.loadingMap[t])?Object.assign(this.loadingMap[t],{loadingFlag:!0,startTime:v.now(),loadingTime:void 0}):this.loadingMap[t]={fetchId:t,category:e,loadingFlag:!0,attempts:0,startTime:v.now(),loadingTime:void 0,success:!1}}},{key:"groupLoad",value:function(){var t=this;this.groupLoadList&&(Object.keys(this.groupLoadList).forEach((function(e){var n=t.groupLoadList[e],r=[],i={};if(n.forEach((function(t){var e=t.dataId,n=t.fetchId;r.push(e),i[e]=n})),r.length>0){var a=JSON.parse(e),o=t.updateQueryValue(a.query,r.join(a.separator));t.groupAjax(o,i,a.idKey)}delete t.groupLoadList[e]})),this.groupLoadList=void 0)}},{key:"singleLoad",value:function(){var t=this;this.singleLoadList&&(Object.values(this.singleLoadList).forEach((function(e){var n=e.query,r=e.fetchId;t.singleAjax(n,r)})),this.singleLoadList=void 0)}},{key:"imgLoad",value:function(){var t=this;this.imgLoadList&&(Object.values(this.imgLoadList).forEach((function(e){var n=e.src,r=e.fetchId;t.imgAjax(n,r)})),this.imgLoadList=void 0)}},{key:"updateQueryValue",value:function(t,e){var n=this;return Object.keys(t).forEach((function(r){"%s"===t[r]?t[r]=e:"%d"===t[r]?t[r]="number"==typeof e?e:parseFloat(e):"object"===Et(t[r])&&n.updateQueryValue(t[r],e)})),t}},{key:"singleAjax",value:function(t,e){var n=this,r={dataType:"json",type:"GET",success:function(t){n.updateLoadStatus(e,!0),n.resultMap[e]=Ct(Ct({},n.loadingMap[e]),{},{result:t}),n.updateStatistics(e),je().schedule(0,"singleAjax_success_".concat(e))},error:function(t){n.resultMap[e]={error:t,success:!1},n.updateLoadStatus(e,!1),je().schedule(0,"singleAjax_error_".concat(e))}};b.ajax(Ct(Ct({},r),t))}},{key:"groupAjax",value:function(t,e,n){var r=this,i={dataType:"json",type:"GET",success:function(i){i.forEach((function(t){var i=t[n];if(e[i]){var a=e[i];r.updateLoadStatus(a,!0),r.resultMap[a]=Ct(Ct({},r.loadingMap[a]),{},{result:t}),r.updateStatistics(a),delete e[i]}})),Object.keys(e).forEach((function(t){var n=e[t];r.loadingMap[n].success||r.updateLoadStatus(n,!1)})),je().schedule(0,"groupAjax_success_".concat(t))},error:function(n){Object.keys(e).forEach((function(t){var i=e[t];r.resultMap[i]={error:n,success:!1},r.updateLoadStatus(i,!1)})),je().schedule(0,"groupAjax_error_".concat(t))}};b.ajax(Ct(Ct({},i),t))}},{key:"imgAjax",value:function(t,e){var n=this,r=new Image;r.src=t,r.onload=function(){n.updateLoadStatus(e,!0),n.resultMap[e]=Ct(Ct({},n.loadingMap[e]),{},{width:r.width,height:r.height,$image:new b(r)}),n.updateStatistics(e,"image"),je().schedule(0,"imgAjax_success_".concat(e))},r.onerror=r.onabort=function(){n.resultMap[e]={result:"no image",success:!1},n.updateLoadStatus(e,!1),je().schedule(0,"imgAjax_error_".concat(e))}}},{key:"getCategoryFromFetchId",value:function(t){return t.replace(/[^a-zA-Z]/g,"")}},{key:"updateStatistics",value:function(t,e){e=e||this.getCategoryFromFetchId(t),this.statistics[e]?(this.statistics[e].count++,this.statistics[e].totalTime+=this.resultMap[t].loadingTime,this.statistics[e].lastUpdate=v.now(),delete this.statistics[e].averageTime):this.statistics[e]={count:1,totalTime:this.resultMap[t].loadingTime,lastUpdate:v.now()}}},{key:"getAverageLoadingTime",value:function(t){var e,n,r,i=v.now();if(null!==(e=this.statistics[t])&&void 0!==e&&e.averageTime&&i-this.statistics[t].lastUpdate<500)return this.statistics[t].averageTime;var a=(null===(n=this.statistics[t])||void 0===n?void 0:n.totalTime)||0,o=(null===(r=this.statistics[t])||void 0===r?void 0:r.count)||0;return Object.values(this.loadingMap).filter((function(e){return e.category===t})).forEach((function(t){a+=i-t.startTime,o++})),this.statistics[t]?(this.statistics[t].averageTime=o>0?a/o:0,this.statistics[t].lastUpdate=v.now(),this.statistics[t].averageTime):0}},{key:"updateLoadStatus",value:function(t,e){Object.assign(this.loadingMap[t],{loadingFlag:!1,loadingTime:v.now()-this.loadingMap[t].startTime,success:e,attempts:this.loadingMap[t].attempts+1})}}])}();function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Pt(t){var e=function(t){if("object"!=Ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ot(e)?e:e+""}function jt(t,e,n){return e=At(e),function(t,e){if(e&&("object"==Ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ht()?Reflect.construct(e,n||[],At(t).constructor):e.apply(t,n))}function Ht(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ht=function(){return!!t})()}function At(t){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},At(t)}function It(t,e){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},It(t,e)}var Ft=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jt(this,e,["BI",{canHaveDom:!1,outerXEast:0}])).parent=t,n.newFlag=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(e,t),function(t,e){return e&&Vt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"shouldBeBracketed",value:function(){return!1}},{key:"getWidth",value:function(){return this.getContentWidth()}},{key:"getHeight",value:function(){return this.getContentHeight()}},{key:"getInnerWidth",value:function(){return this.innerContentWidth}},{key:"getInnerXEast",value:function(){return v.isDefined(this.getRealParent().val("innerXEast"))?this.getRealParent().val("innerXEast"):this.getRealParent().absX+this.getRealParent().getWidth()}},{key:"getInnerContentHeight",value:function(){return this.innerContentHeight}},{key:"getScrollTop",value:function(){return this.getRealParent().getScrollTop()}},{key:"getScrollLeft",value:function(){return this.getRealParent().getScrollLeft()}},{key:"getBoundingRect",value:function(){return v.getBoundingRect(this.getRealParent())}},{key:"calculateAbsolutePosition",value:function(t,e){var n=this.getBoundingRect();this.absX=n.left+t,this.absY=n.top+e}},{key:"isVisible",value:function(){return this.visibilityStatus.top&&this.visibilityStatus.bottom}},{key:"addToUpdatingChildren",value:function(t){this.getRealParent().addToUpdatingChildren(t)}},{key:"addToParentVisibleChildren",value:function(){}},{key:"createViewport",value:function(){return this.getRealParent().createViewport.call(this)}},{key:"getRealParent",value:function(){return this.realParent}},{key:"shouldCalculateChildren",value:function(){var t=this.isVisible()||this.newFlag;return this.newFlag=!1,t}},{key:"indexRange",value:function(){return[this.startIndex,this.endIndex]}},{key:"getChildren",value:function(){return this.allChildren}},{key:"addToParentVisibleList",value:function(){}}])}(gt);function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}function Rt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Xt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Xt(t,e){if(t){if("string"==typeof t)return Ut(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(t,e):void 0}}function Ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wt(r.key),r)}}function Wt(t){var e=function(t){if("object"!=Nt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nt(e)?e:e+""}var Yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&Bt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"generate",value:function(e){return!t.bracketMap[e.oid]||e.lastChildrenUpdate.deletions.length>0?t.bracketMap[e.oid]={brackets:t.buildTreeBottomUp(e,e.getChildren()),updateCount:0}:e.lastChildrenUpdate.additions.length>0&&t.updateTree(e,e.lastChildrenUpdate.additions),e.lastChildrenUpdate.additions.length=0,e.lastChildrenUpdate.deletions.length=0,t.bracketMap[e.oid].brackets}},{key:"updateTree",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.getChildren(),i=new Set,a=e.getBracketThreshold();n.forEach((function(t){var e=t.index;t.segment.forEach((function(t,n){return i.add(e+n)}))}));var o=Array.from(i).sort((function(t,e){return t-e})),s=null,u=null;o.forEach((function(n){var i=Math.floor(n/a)*a,o=Math.min(r.length,i+a);null===s?(s=i,u=o):i<=u+1?u=Math.max(u,o):(t.updateSegmentInTree(e,r,s,u),s=i,u=o)})),null!==s&&null!==u&&t.updateSegmentInTree(e,r,s,u)}},{key:"updateSegmentInTree",value:function(e,n,r,i){for(var a,o=t.bracketMap[e.oid].brackets,s=t.buildTreeBottomUp(e,n.slice(r,i)),u=e.getBracketThreshold(),l=o,c=void 0;;){var h,f=null,d=Rt(l);try{for(d.s();!(h=d.n()).done;){var g=h.value;if(!(g.getFirstChild()instanceof Ft))break;var v=g.startIndex,y=Math.ceil(g.endIndex/u)*u;if(v<=r&&y>=i){f=g.getChildren(),c=g;break}}}catch(t){d.e(t)}finally{d.f()}if(!f)break;l=f}for(var p=0;p<l.length&&l[p].endIndex<=r;)p++;for(var m=0;p+m<l.length&&l[p+m].startIndex<=i;)m++;var b=l.length>p?l[p].startIndex:l[l.length-1].endIndex;if((a=l).splice.apply(a,[p,m].concat(function(t){return function(t){if(Array.isArray(t))return Ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(s))),c){var T,k=Rt(s);try{for(k.s();!(T=k.n()).done;)T.value.parent=c}catch(t){k.e(t)}finally{k.f()}}t.reindexSegment(s,b),t.bracketMap[e.oid].updateCount++,l.length>u&&(t.bracketMap[e.oid].brackets=t.buildTreeBottomUp(e,l))}},{key:"buildTreeBottomUp",value:function(e,n){for(var r=n.length,i=e.getBracketThreshold()-1,a=[],o=0,s=0;s<r;s++)s-o!==i&&s!==r-1||(a.push(t.createBracket(e,n,o,s+1)),o=s+1);return a>i?t.buildTreeBottomUp(e,a):a}},{key:"createBracket",value:function(t,e,n,r){var i=new Ft(t);return i.allChildren=e.slice(n,r),i.startIndex=i.allChildren[0]instanceof Ft?i.allChildren[0].startIndex:n,i.endIndex=i.allChildren[i.allChildren.length-1]instanceof Ft?i.allChildren[i.allChildren.length-1].endIndex:r,i.allChildren.forEach((function(e){e instanceof Ft&&(e.realParent=t,e.parent=i)})),i.realParent=t,i}},{key:"reindexSegment",value:function(t,e){for(var n=t.slice(0),r=n[n.length-1];n.length>0;){var i=n.shift();i.startIndex+=e,i.endIndex+=e,i instanceof Ft&&i.getChildren().forEach((function(t){v.isDefined(t.startIndex)&&v.isDefined(t.endIndex)&&n.push(t)}))}for(var a=r.getParent();a;)a.endIndex=Math.max(a.endIndex,r.endIndex),a=a.getParent()}}])}();function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zt(r.key),r)}}function zt(t){var e=function(t){if("object"!=$t(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$t(e)?e:e+""}!function(t,e,n){(e=Wt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Yt,"bracketMap",{});var qt=function(){return function(t,e){return e&&_t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hasLocationList=[],this.hasLocationMap={},this.locationListStats=[],this.screenWidth=Ie(),this.screenHeight=Fe(),this.resizeFlag=!1}),[{key:"calculateAll",value:function(){this.hasLocationList.length=0,this.hasLocationMap={},this.locationListStats.length=0,this.startTime=v.now(),this.resizeFlag=!1,this.screenWidth===Ie()&&this.screenHeight===Fe()||(this.resizeFlag=!0,this.screenWidth=Ie(),this.screenHeight=Fe()),this.calculate()}},{key:"calculate",value:function(){this.addToLocationList(Ce.tRoot),this.calculateContainer(Ce.tRoot)}},{key:"getChildren",value:function(t){return t.shouldBeBracketed()?Yt.generate(t):(Yt.bracketMap[t.oid]&&delete Yt.bracketMap[t.oid],t.getChildren())}},{key:"calculateContainer",value:function(t){var e=this,n=this.getChildren(t),r=t.createViewport(),i=t.visibleChildren.length;t.visibleChildren.length=0;for(var a=0,o=n.length,s=function(){var i,o,s=n[a++];if(!s)return 1;var u=s.getX(),l=s.getY();e.calculateTargets(s),r.setCurrentChild(s),s.setLocation(r),s.calculateAbsolutePosition(s.x,s.y),o=v.isDefined(t.val("innerXEast"))?t.val("innerXEast"):t.getInnerXEast(),i=v.isDefined(s.val("outerXEast"))?s.val("outerXEast"):s.getOuterXEast(),r.isOverflow(i,o)?(r.overflow(),s.setLocation(r)):s.setLocation(r),s.isIncluded()&&!e.hasLocationMap[s.oid]&&e.addToLocationList(s),!s.isTargetEnabled("x")||s.isTargetUpdating("x")||s.isTargetImperative("x")||0!==s.getTargetSteps("x")?v.isDefined(s.targetValues.x)||s.val("x",s.x):($.resolveTargetValue(s,"x"),$.snapActualToTarget(s,"x")),!s.isTargetEnabled("y")||s.isTargetUpdating("y")||s.isTargetImperative("y")||0!==s.getTargetSteps("y")?v.isDefined(s.targetValues.y)||s.val("y",s.y):($.resolveTargetValue(s,"y"),$.snapActualToTarget(s,"y")),u!==s.getX()&&s.addToStyleTargetList("x"),l!==s.getY()&&s.addToStyleTargetList("y"),s.calculateAbsolutePosition(s.getX(),s.getY()),r.isVisible(s),s.addToParentVisibleChildren(),s.shouldCalculateChildren()&&e.calculateContainer(s),s.isInFlow()&&(v.isNumber(s.val("appendNewLine"))?(r.appendNewLine(),r.calcContentWidthHeight()):(r.calcContentWidthHeight(),r.nextLocation())),Array.isArray(s.val("contentHeight"))&&s.val("contentHeight").forEach((function(t){var e=s.val(t);s.val(t,s.getContentHeight()),e!==s.val(t)&&s.addToStyleTargetList(t)})),Array.isArray(s.val("contentWidth"))&&s.val("contentWidth").forEach((function(t){var e=s.val(t);s.val(t,s.getContentWidth()),e!==s.val(t)&&s.addToStyleTargetList(t)})),r.calcContentWidthHeight(),e.locationListStats.push("".concat(s.oid,"-").concat(s.updatingTargetList.length,"-").concat(v.now()-e.startTime))};a<o&&Ce.isRunning();)s();i!==t.visibleChildren.length&&t.targets.onVisibleChildrenChange&&this.activateTargets(t,t.targets.onVisibleChildrenChange)}},{key:"calculateTargets",value:function(t){var e=t.getChildren().length;if(this.activateTargetsOnEvents(t),Ce.targetManager.applyTargetValues(t),Ce.targetManager.setActualValues(t),e!==t.getChildren().length&&t.targets.onChildrenChange&&this.activateTargets(t,t.targets.onChildrenChange),t.hasDom()){var n=t.getWidth(),r=t.getHeight();(v.isDefined(t.targetValues.width)||v.isDefined(t.targets.width)||v.isDefined(t.targetValues.contentWidth))&&!t.getTargetValue("widthFromDom")||H.setWidthFromDom(t),(v.isDefined(t.targetValues.height)||v.isDefined(t.targets.height)||v.isDefined(t.targetValues.contentHeight))&&!t.getTargetValue("heightFromDom")||H.setHeightFromDom(t),n!==t.getWidth()&&t.addToStyleTargetList("width"),r!==t.getHeight()&&t.addToStyleTargetList("height")}}},{key:"activateTargetsOnEvents",value:function(t){var e=[];t.eventTargets.forEach((function(n){H.targetConditionMap[n](t)&&(e=e.concat(t.targets[n]))})),this.activateTargets(t,e)}},{key:"activateTargets",value:function(t,e){var n=this;Array.isArray(e)?e.forEach((function(e){if("function"==typeof e){var r=e.call(t);r&&(r=Array.isArray(r)?r:[r]).forEach((function(e){if("object"===$t(e)){var r=e.key,i=e.handler;n.activateSingleTarget(i,r)}else n.activateSingleTarget(t,e)}))}else if("object"===$t(e)){var i=e.key,a=e.handler;n.activateSingleTarget(a,i)}else n.activateSingleTarget(t,e)})):this.activateSingleTarget(t,e)}},{key:"activateSingleTarget",value:function(t,e){t.targets[e]&&(t.isTargetEnabled(e)?t.activateTarget(e):t.addToActiveTargets(e))}},{key:"addToLocationList",value:function(t){this.hasLocationList.push(t),this.hasLocationMap[t.oid]=t}}])}();function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function Qt(t){return function(t){if(Array.isArray(t))return Kt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Kt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gt(r.key),r)}}function Gt(t){var e=function(t){if("object"!=Zt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zt(e)?e:e+""}var te=function(){return function(t,e){return e&&Jt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastLink=document.URL,this.pageCache={}}),[{key:"openPage",value:function(t){var e=this;Ce.stop(),Ce.reset(),this.pageCache[t]?(Ce.tRoot=this.pageCache[t].tRoot,Ce.tRoot.getChildren().forEach((function(n,r){n.$dom.innerHTML(e.pageCache[t].htmls[r])})),v.initDoms(this.pageCache[t].visibleList),Ce.manager.lists.visible=Qt(this.pageCache[t].visibleList),this.lastLink=t,setTimeout(Ce.start)):(Ce.tRoot.getChildren().forEach((function(t){return t.$dom.innerHTML("")})),Ce.tRoot=Ce.tRootFactory(),this.lastLink=t,setTimeout(Ce.start))}},{key:"openLinkFromHistory",value:function(t){t.link?this.openPage(t.link):t.browserUrl&&(history.replaceState({link:t.browserUrl},"",t.browserUrl),this.openPage(t.browserUrl)),je().schedule(0,"pagemanager-openLinkFromHistory")}},{key:"openLink",value:function(t){t=v.getFullLink(t),this.lastLink&&(this.pageCache[this.lastLink]={link:this.lastLink,htmls:Ce.tRoot.getChildren().map((function(t){return t.$dom.innerHTML()})),visibleList:Qt(Ce.manager.lists.visible),tRoot:Ce.tRoot}),history.pushState({link:t},"",t),this.openPage(t),je().schedule(0,"pagemanager-processOpenLink")}},{key:"updateBrowserUrl",value:function(t){window.history.state.browserUrl?history.replaceState({browserUrl:t},"",t):(this.pageCache[document.URL]={link:document.URL,htmls:Ce.tRoot.getChildren().map((function(t){return t.$dom.innerHTML()})),visibleList:Qt(Ce.manager.lists.visible),tRoot:Ce.tRoot},history.pushState({browserUrl:t},"",t)),je().schedule(0,"pagemanager-processUpdateBrowserUrl")}},{key:"back",value:function(){return history.back()}}])}();function ee(t){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(t)}function ne(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(n),!0).forEach((function(e){ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(t,e,n){return(e=ce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ae(t){return function(t){if(Array.isArray(t))return ue(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||se(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=se(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function se(t,e){if(t){if("string"==typeof t)return ue(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(t,e):void 0}}function ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ce(r.key),r)}}function ce(t){var e=function(t){if("object"!=ee(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ee(e)?e:e+""}var he=function(){return function(t,e){return e&&le(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}),[{key:"init",value:function(){this.lists={visible:[],rerender:[],restyle:[],reattach:[],invisibleDom:[],visibleNoDom:[],updatingTModels:[],updatingTargets:[],activeTargets:[]},this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={},this.doneTargets=[]}},{key:"clear",value:function(){this.lists.visible.length=0,this.lists.rerender.length=0,this.lists.restyle.length=0,this.lists.reattach.length=0,this.lists.visibleNoDom.length=0,this.lists.updatingTModels.length=0,this.lists.updatingTargets.length=0,this.lists.activeTargets.length=0,this.visibleTypeMap={},this.visibleOidMap={},this.targetMethodMap={}}},{key:"analyze",value:function(){var t=this,e=v.list2map(this.lists.visible);this.clear();var n,r=oe(He().hasLocationList);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.isVisible()){e[i.oid]=null,!i.hasDom()||i.canHaveDom()||this.lists.invisibleDom.includes(i)||this.lists.invisibleDom.push(i),this.lists.visible.push(i),this.needsRerender(i),this.needsRestyle(i),this.needsReattach(i),i.updatingTargetList.length>0&&(this.lists.updatingTModels.push(i),this.lists.updatingTargets=[].concat(ae(this.lists.updatingTargets),ae(i.updatingTargetList)));var a=Object.keys(i.activeTargetMap);a.length>0&&(this.lists.activeTargets=[].concat(ae(this.lists.activeTargets),["'".concat(i.oid,"'")],a)),Object.keys(i.targetMethodMap).length>0&&(this.targetMethodMap[i.oid]=re({},i.targetMethodMap)),this.visibleOidMap[i.oid]=i,this.visibleTypeMap[i.type]||(this.visibleTypeMap[i.type]=[]),this.visibleTypeMap[i.type].push(i),i.canHaveDom()&&!i.hasDom()&&i.getDomHolder()&&i.getDomHolder().exists()&&!this.lists.visibleNoDom.includes(i)&&this.lists.visibleNoDom.push(i)}}}catch(t){r.e(t)}finally{r.f()}var o=Object.values(e).filter((function(t){return null!==t&&t.hasDom()&&t.isDomDeletable()}));o.forEach((function(e){t.lists.invisibleDom.push(e)}))}},{key:"needsRerender",value:function(t){return!(!t.hasDom()||!v.isDefined(t.getHtml())||t.$dom.html()===t.getHtml()&&t.$dom.textOnly===t.isTextOnly()||(this.lists.rerender.push(t),0))}},{key:"needsRestyle",value:function(t){return!!(t.hasDom()&&t.styleTargetList.length>0)&&(this.lists.restyle.push(t),!0)}},{key:"needsReattach",value:function(t){return!(!t.hasDom()||!t.hasDomHolderChanged()||(this.lists.reattach.push(t),0))}},{key:"renderTModels",value:function(){var t,e=oe(this.lists.rerender);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isTextOnly()?n.$dom.text(n.getHtml()):n.$dom.html(n.getHtml()),n.setActualValueLastUpdate("html"),n.domHeight=void 0,n.domWidth=void 0}}catch(t){e.e(t)}finally{e.f()}}},{key:"reattachTModels",value:function(){var t,e=oe(this.lists.reattach);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.$dom.detach(),n.getDomHolder().appendTModel$Dom(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"deleteDoms",value:function(){var t,e=oe(this.lists.invisibleDom);try{var n=function(){var e=t.value;e.styleMap={},e.transformMap={},[].concat(e.targets.onInvisibleEvent,e.targets.onResize).forEach((function(t){e.targets[t]&&e.isTargetComplete(t)&&e.activateTarget(t)})),e.$dom.detach(),e.$dom=null};for(e.s();!(t=e.n()).done;)n()}catch(t){e.e(t)}finally{e.f()}this.lists.invisibleDom.length=0,je().schedule(0,"deleteDoms")}},{key:"fixStyles",value:function(){var t,e=oe(this.lists.restyle);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.fixStyle(n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"fixStyle",value:function(t){var e=!1;t.styleTargetList.forEach((function(n){if(H.transformMap[n]){var r=H.rotate3D[n]?t.val(n):H.scaleMap[n]?v.formatNum(t.val(n),2):t.floorVal(n);t.transformMap[n]!==r&&(t.transformMap[n]=r,e=!0)}else if("width"===n){var i=Math.floor(t.getWidth());t.$dom.width()!==i&&t.$dom.width(i)}else if("height"===n){var a=Math.floor(t.getHeight());t.$dom.height()!==a&&t.$dom.height(a)}else if("style"===n){var o=t.getStyle();v.isDefined(o)&&t.styleMap.style!==o&&(t.$dom.setStyleByMap(t.getStyle()),t.styleMap.style=o)}else if("attributes"===n){var s=t.getAttributes();v.isDefined(s)&&t.styleMap.attributes!==s&&(Object.keys(s).forEach((function(e){t.$dom.attr(e,s[e])})),t.styleMap.attributes=s)}else if("css"===n){var u=t.getCss();t.$dom.css()!==u&&t.$dom.css(u)}else H.styleWithUnitMap[n]?v.isDefined(t.val(n))&&t.styleMap[n]!==t.val(n)&&(t.$dom.style(n,v.isNumber(t.val(n))?"".concat(t.val(n),"px"):t.val(n)),t.styleMap[n]=t.val(n)):v.isDefined(t.val(n))&&t.styleMap[n]!==t.val(n)&&(t.$dom.style(n,t.val(n)),t.styleMap[n]=t.val(n))})),e&&t.$dom.transform(Z.getTransformString(t)),t.styleTargetMap={},t.styleTargetList.length=0}},{key:"completeDoneTModels",value:function(){this.doneTargets.forEach((function(t){var e=t.tmodel,n=t.key;e.isTargetDone(n)&&(e.setTargetComplete(n),e.removeFromActiveTargets(e),e.removeFromUpdatingTargets(e))}))}},{key:"createDoms",value:function(){var t=this,e=[],n=[];this.lists.visibleNoDom.sort((function(t,e){return t.hasChildren()&&e.hasChildren()?t.getUIDepth()<e.getUIDepth()?-1:1:t.hasChildren()?-1:1}));var r,i=oe(this.lists.visibleNoDom);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=void 0;b.query("#".concat(a.oid))?(o=new b("#".concat(a.oid)),a.$dom=o):n.push(a)}}catch(t){i.e(t)}finally{i.f()}for(var s=function(){var n=l[u];n.$dom=new b,n.$dom.create(n.getBaseElement()),n.$dom.setSelector("#".concat(n.oid)),n.$dom.setId(n.oid),n.transformMap={},n.styleMap={},Object.keys(H.styleTargetMap).forEach((function(t){v.isDefined(n.val(t))&&n.addToStyleTargetList(t)})),t.fixStyle(n);var r=e.find((function(t){return t.domHolder===n.getDomHolder()}));r?r.tmodels.push(n):e.push({domHolder:n.getDomHolder(),tmodels:[n]})},u=0,l=n;u<l.length;u++)s();e.map((function(t){t.tmodels.map((function(e){t.domHolder.appendTModel$Dom(e)}))})),e.length&&je().schedule(1,"createDom")}}])}(),fe=["timeoutId"];function de(t){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function ge(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ve(t,e,n){return(e=pe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pe(r.key),r)}}function pe(t){var e=function(t){if("object"!=de(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==de(e)?e:e+""}var me=function(){return function(t,e){return e&&ye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nextRuns=[],this.runningStep=0,this.runningFlag=!1,this.runId="",this.rerunId="",this.delayProcess={},this.cycleStats={duration:0,count:0,totalDuration:0,average:0}}),[{key:"resetRuns",value:function(){this.delayProcess.timeoutId&&clearTimeout(this.delayProcess.timeoutId),this.nextRuns=[],this.runningStep=0,this.runningFlag=!1,this.runId="",this.rerunId="",this.delayProcess={}}},{key:"resetCycleStats",value:function(){this.cycleStats.duration=0,this.cycleStats.count=0,this.cycleStats.totalDuration=0,this.cycleStats.average=0}},{key:"schedule",value:function(t,e){var n=this;if(0===t&&0===Ce.throttle)this.run(t,e);else{var r=this.delay((function(){n.run(t,e)}),0===Ce.throttle?t||0:Ce.throttle,e),i=this.nextRuns.length>0?this.nextRuns[this.nextRuns.length-1]:null,a=this.nextRuns.length>0?this.nextRuns[0]:null;r&&(!i||r.delay>i.delay)?this.nextRuns.push(r):r&&a&&r.delay<a.delay&&this.nextRuns.unshift(r)}}},{key:"run",value:function(t,e){var n=this;Ce.isRunning()&&(this.runningFlag?this.rerunId=e:(this.runId=e,this.runningFlag=!0,window.requestAnimationFrame((function(){for(var r=n.runningStep,i=v.now();v.now()-i<25&&n.runningStep<7&&Ce.isRunning();){switch(n.runningStep){case 0:Le().captureEvents(),Ce.manager.doneTargets.length>0&&(Ce.manager.completeDoneTModels(),Ce.manager.doneTargets.length=0),Ce.locationManager.calculateTargets(Ce.tRoot),Ce.locationManager.calculateAll(),Ce.events.resetEventsOnTimeout();break;case 1:Ce.manager.analyze();break;case 2:Ce.manager.createDoms();break;case 3:Ce.manager.renderTModels(),Ce.manager.reattachTModels();break;case 4:Ce.manager.fixStyles();break;case 5:Ce.manager.lists.invisibleDom.length>0&&Ce.manager.deleteDoms();break;case 6:Ce.loader.singleLoad(),Ce.loader.groupLoad(),Ce.loader.imgLoad()}n.runningStep++}var a=v.now()-i;if(0===r?n.cycleStats.duration=a:n.cycleStats.duration+=a,Ce.debugLevel>0&&(v.log(n.cycleStats.duration>10)("it took: ".concat(n.cycleStats.duration,", RunId: ").concat(e)),v.log(n.cycleStats.duration>10)("locations: ".concat(Ce.locationManager.locationListStats)),v.log(Ce.debugLevel>1)("request from: ".concat(e," delay:  ").concat(t))),n.runningFlag=!1,n.runId="",7!==n.runningStep)n.run(0,"rendering: ".concat(e," ").concat(n.runningStep));else if(n.cycleStats.count++,n.cycleStats.totalDuration+=n.cycleStats.duration,n.cycleStats.average=n.cycleStats.totalDuration/n.cycleStats.count,n.rerunId){n.runningStep=0;var o=n.rerunId;n.rerunId="",n.run(0,o)}else n.runningStep=0,n.getNextRun()}))))}},{key:"setDelayProcess",value:function(t,e,n,r){var i=this;this.delayProcess={runId:e,timeStamp:n,delay:r,timeoutId:setTimeout((function(){t(),i.delayProcess={}}),r)}}},{key:"delay",value:function(t,e,n){var r,i=v.now()+e;if(this.delayProcess.timeoutId)if(i>=this.delayProcess.timeStamp)r={timeStamp:i,runId:n,delay:e};else{var a=this.delayProcess,o=(a.timeoutId,function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(a,fe));r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ge(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},o),clearTimeout(this.delayProcess.timeoutId),this.setDelayProcess(t,n,i,e)}else this.setDelayProcess(t,n,i,e);return r}},{key:"getNextRun",value:function(){if(this.nextRuns.length>0){var t=this.nextRuns.pop();t&&(t.timeStamp>=v.now()?this.schedule(t.timeStamp-v.now(),t.runId):this.getNextRun())}}}])}();function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function Te(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ke(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Se(r.key),r)}}function Se(t){var e=function(t){if("object"!=be(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==be(e)?e:e+""}var Ce,Me=function(){return function(t,e){return e&&we(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"applyTargetValues",value:function(t){t.targetMethodMap={};var e,n=Te(t.activeTargetList.slice(0));try{for(n.s();!(e=n.n()).done;){var r=e.value;t.isTargetImperative(r)||this.applyTargetValue(t,r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"applyTargetValue",value:function(t,e){var n=t.targets[e];if(v.isDefined(n)){if("function"==typeof n.enabledOn&&t.setTargetMethodName(e,"enabledOn"),t.isTargetEnabled(e)){if(t.isExecuted(e)&&t.getTargetStep(e)===t.getTargetSteps(e)){var r=H.scheduleExecution(t,e);if(r>0)return void je().schedule(r,"actualInterval__".concat(t.oid,"__").concat(e))}t.resetScheduleTimeStamp(e),t.isExecuted(e)&&t.getTargetCycle(e)<t.getTargetCycles(e)&&(t.incrementTargetCycle(e,t.getTargetCycle(e)),t.resetTargetStep(e),t.resetTargetInitialValue(e)),$.executeDeclarativeTarget(t,e),t.setScheduleTimeStamp(e,v.now()),je().schedule(t.getTargetInterval(e),"actualInterval__".concat(t.oid,"__").concat(e))}}else t.removeFromActiveTargets(e)}},{key:"setActualValues",value:function(t){var e,n=0,r=Te(t.updatingTargetList.slice(0));try{for(r.s();!(e=r.n()).done;){var i=e.value;0===(n=H.scheduleExecution(t,i))?(t.addToStyleTargetList(i),this.setActualValue(t,i)):je().schedule(n,"setActualValues-".concat(t.oid,"__").concat(i))}}catch(t){r.e(t)}finally{r.f()}}},{key:"findOriginalTModel",value:function(t,e){return u.findParentByTarget(t,e)||Ne().find((function(t){return t.targets[e]}))}},{key:"setActualValue",value:function(t,e){var n=t.targetValues[e];if(n)if(t.isTargetImperative(e)||t.isTargetEnabled(e)){var r,i,a,o=t.getTargetValue(e),s=t.getTargetStep(e),u=t.getTargetSteps(e),l=t.getTargetCycle(e),c=t.getTargetInterval(e)||0,h=t.actualValues[e],f=s,d=l,g=t.getTargetInitialValue(e);if(s<=u&&(v.isDefined(g)||(g=t.actualValues[e],t.setTargetInitialValue(e,g)),t.actualValues[e]=H.morph(t,e,g,o,s,u),t.setActualValueLastUpdate(e),t.isTargetImperative(e)?(r=n.originalTargetName,a=t,(i=t.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(t,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,e,a.actualValues[e],o,s,u),a.setTargetMethodName(r,"onImperativeStep"))):H.handleValueChange(t,e,t.actualValues[e],h,f,d),t.incrementTargetStep(e),t.resetScheduleTimeStamp(e),t.updateTargetStatus(e),t.isTargetUpdating(e)))je().schedule(c,"".concat(t.oid,"---").concat(e,"-").concat(s,"/").concat(u,"-").concat(l,"-").concat(c));else{t.actualValues[e]=o,t.setActualValueLastUpdate(e),s=t.getTargetStep(e);var y=0;n.valueList&&l<n.valueList.length-1?(t.incrementTargetCycle(e,t.getTargetCycle(e)),l=t.getTargetCycle(e),t.resetTargetStep(e),n.initialValue=n.value,n.value=n.valueList[l],n.steps=n.stepList[(l-1)%n.stepList.length],n.interval=n.intervalList[(l-1)%n.intervalList.length],n.easing=n.easingList[(l-1)%n.easingList.length],y=c):t.isTargetImperative(e)?(r=n.originalTargetName,a=t,(i=t.targets[n.originalTargetName])||(i=(a=this.findOriginalTModel(t,r))?a.targets[n.originalTargetName]:null),i&&"function"==typeof i.onImperativeStep&&(i.onImperativeStep.call(a,e,a.actualValues[e],o,s,u),a.setTargetMethodName(r,"onImperativeStep")),i&&"function"==typeof i.onImperativeEnd&&(i.onImperativeEnd.call(a,e,a.actualValues[e]),a.setTargetMethodName(r,"onImperativeEnd"))):(t.getTargetCycle(e)<t.getTargetCycles(e)&&(t.incrementTargetCycle(e,t.getTargetCycle(e)),t.resetTargetStep(e).resetTargetInitialValue(e).resetTargetExecutionFlag(e),$.executeDeclarativeTarget(t,e)),"object"===be(t.targets[e])&&"function"==typeof t.targets[e].onStepsEnd&&(t.targets[e].onStepsEnd.call(t,l),t.setTargetMethodName(e,"onStepsEnd"))),t.updateTargetStatus(e),je().schedule(y,"".concat(t.oid,"---").concat(e,"-").concat(s,"/").concat(u,"-").concat(l,"-").concat(c))}}else je().schedule(10,"setActualValue-disabled-".concat(t.oid,"__").concat(e))}}])}(),Ee=function(t){var e,n;e=t,n={throttle:0,debugLevel:0,runningFlag:!1,init:function(){return n.browser=new mt,n.browser.setup(),n.browser.measureScreen(),n.$document=new b(document),n.$window=new b(window),n.$window.addEvent("popstate",(function(t){t.state&&Ce.pager.openLinkFromHistory(t.state)})),n.loader=new Lt,n.pager=new te,n.events=new wt,n.locationManager=new qt,n.targetManager=new Me,n.manager=new he,n.runScheduler=new me,n.tRootFactory=function(){var t=new gt("tRoot");return t.addChild=function(e){v.isDefined(e.targets.domHolder)||e.addTarget("domHolder",{value:function(){var t;return b.query("#tj-root")?t=new b("#tj-root"):((t=new b).create("div"),t.setSelector("#tj-root"),t.setId("#tj-root"),t.attr("tabindex","0"),new b("body").insertFirst$Dom(t)),t}}),gt.prototype.addChild.call(t,e)},n.tRoot&&n.tRoot.getChildren().forEach((function(e,n){var r=new gt(e.type,e.targets);r.oidNum=n,r.oid=n>0?"".concat(e.type).concat(n):e.type,t.addChild(r)})),t},n.tRoot=n.tRootFactory(),e&&n.tRoot.addChild(e),window.history.pushState({link:document.URL},"",document.URL),n},start:function(){return n.runningFlag=!1,n.events.clearAll(),n.events.removeHandlers(n.$document),n.events.addHandlers(n.$document),n.events.removeWindowHandlers(),n.events.addWindowHandlers(),n.browser.measureScreen(),n.runScheduler.resetRuns(),n.runningFlag=!0,n.runScheduler.schedule(0,"appStart"),n},stop:function(){return n.runningFlag=!1,n.events.removeWindowHandlers(),n.events.removeHandlers(n.$document),n.events.clearAll(),n.runScheduler.resetRuns(),n},reset:function(){n.manager.lists.visible.forEach((function(t){t.transformMap={},t.styleMap={},Object.keys(H.styleTargetMap).forEach((function(e){v.isDefined(t.val(e))&&t.addToStyleTargetList(e)}))})),n.manager.clear(),n.locationManager.hasLocationList.length=0,n.locationManager.screenWidth=0,n.locationManager.screenHeight=0,u.foundParentWithTarget={},u.foundTypeMap={},u.foundTargetMap={}},isRunning:function(){return n.runningFlag},find:function(t){return u.find(t)}},(Ce=n).init().start()};Ee.oids={},Ee.getOid=function(t){v.isDefined(Ee.oids[t])||(Ee.oids[t]=0);var e=Ee.oids[t]++;return{oid:e>0?"".concat(t).concat(e):t,num:e}};var De=function(){return!!Ce&&Ce.runningFlag},xe=function(){return Ce?Ce.tRoot:void 0},Le=function(){return Ce?Ce.events:void 0},Oe=function(){return Ce?Ce.pager:void 0},Ve=function(){return Ce?Ce.loader:void 0},Pe=function(){return Ce?Ce.manager:void 0},je=function(){return Ce?Ce.runScheduler:void 0},He=function(){return Ce?Ce.locationManager:void 0},Ae=function(){return Ce?Ce.browser:void 0},Ie=function(){return Ce?Ce.browser.screen.width:0},Fe=function(){return Ce?Ce.browser.screen.height:0},Ne=function(){return Ce?Ce.manager.lists.visible:void 0};function Re(t){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(t)}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ue(r.key),r)}}function Ue(t){var e=function(t){if("object"!=Re(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Re(e)?e:e+""}window.t=window.t||u.find;var Be=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return n&&Xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,0,[{key:"bounce",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.yStart,i=void 0===r?void 0:r,a=n.xStart,o=void 0===a?Ie()/2:a,s=n.widthStart,u=void 0===s?50:s,l=n.heightStart,c=void 0===l?50:l,h=n.bFactor,f=void 0===h?.6:h,d=n.cFactor,g=void 0===d?.2:d,y=n.rotationStart,p=void 0===y?0:y,m=n.rIncrement,b=void 0===m?360:m,T=Math.max(10,(e-t)*f),k=v.isDefined(i)?[i,t]:[t],w=[o],S=[u],C=[c],M=[p];Math.abs(0|T)>1;){k.push(e),k.push(e-T);var E=u*(1+g),D=c*(1-g);S.push(E),S.push(u),C.push(D),C.push(c),w.push(o-(E-u)/2),w.push(o),M.push(M[M.length-1]+b),T*=f,b*=.8,g*=f}w.push(o),k.push(e),S.push(u),C.push(c);var x=M[M.length-1]%360;return x>0&&x<360&&M.push(360),{x:{list:w},y:{list:k},width:{list:S},height:{list:C},rotate:{list:M}}}},{key:"bounceSimple",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.from,i=void 0===r?void 0:r,a=n.to,o=void 0===a?void 0:a,s=n.widthStart,u=void 0===s?void 0:s,l=n.heightStart,c=void 0===l?void 0:l,h=n.xStart,f=void 0===h?void 0:h,d=n.yStart,g=void 0===d?void 0:d,y=n.bFactor,p=void 0===y?.7:y,m=n.cFactor,b=void 0===m?.2:m;return i=v.isDefined(i)?i:e.getY(),o=v.isDefined(o)?o:e.getY(),u=v.isDefined(u)?u:e.getWidth(),c=v.isDefined(c)?c:e.getHeight(),g=v.isDefined(g)?g:e.getY(),f=v.isDefined(f)?f:e.getX(),t.bounce(i,o,{yStart:g,xStart:f,widthStart:u,heightStart:c,bFactor:p,cFactor:b,rIncrement:0})}},{key:"shake",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bFactor,i=void 0===r?.6:r,a=n.cFactor,o=void 0===a?.3:a,s=n.strength,u=void 0===s?20:s;if(!t.shakeMap[e.oid]){var l=(e.getParentValue("width")-e.getWidth())/2,c=e.getY(),h=e.getWidth(),f=e.getHeight();t.shakeMap[e.oid]={xStart:l,yStart:c,widthStart:h,heightStart:f}}var d=t.shakeMap[e.oid],g=d.xStart,v=d.yStart,y=d.widthStart,p=d.heightStart,m=t.bounce(v-u,v,{xStart:g,widthStart:y,heightStart:p,bFactor:i,cFactor:o});return{y:{list:m.height.list.map((function(t){return v-(t-p)/2}))},x:m.x,width:m.width,height:m.height}}},{key:"spiral",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startAngle,n=void 0===e?0:e,r=t.endAngle,i=void 0===r?360:r,a=t.angleStep,o=void 0===a?18:a,s=t.x,u=void 0===s?0:s,l=t.y,c=void 0===l?0:l,h=t.width,f=void 0===h?100:h,d=t.height,g=void 0===d?100:d,v=[],y=[],p=[],m=n;m<=i;m+=o){var b=m*(Math.PI/180);v.push(Math.floor(u+f*Math.cos(b))),y.push(Math.floor(c+g*Math.sin(b))),p.push(90+m)}return{x:{list:v},y:{list:y},rotate:{list:p}}}}])}();!function(t,e,n){(e=Ue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Be,"shakeMap",{}),window.TargetJ=e}();